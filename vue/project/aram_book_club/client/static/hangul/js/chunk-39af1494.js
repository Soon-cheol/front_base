(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39af1494"],{"0480":function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},"04d1":function(t,e,n){(function(t,i){i(e,n("48da"),n("0480"),n("34dd"))})(0,(function(t,e,n,i){"use strict";function r(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var o=r(e),a=r(n),s=r(i),u=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},c=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},l=function(t,e){return{startTime:e,type:"setValue",value:t}},h=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},d=function(t,e,n){var i=n.startTime,r=n.target,o=n.timeConstant;return r+(e-r)*Math.exp((i-t)/o)},p=function(t){return"exponentialRampToValue"===t.type},f=function(t){return"linearRampToValue"===t.type},m=function(t){return p(t)||f(t)},g=function(t){return"setValue"===t.type},v=function(t){return"setValueCurve"===t.type},y=function t(e,n,i,r){var o=e[n];return void 0===o?r:m(o)||g(o)?o.value:v(o)?o.values[o.values.length-1]:d(i,t(e,n-1,o.startTime,r),o)},_=function(t,e,n,i,r){return void 0===n?[i.insertTime,r]:m(n)?[n.endTime,n.value]:g(n)?[n.startTime,n.value]:v(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,y(t,e-1,n.startTime,r)]},w=function(t){return"cancelAndHold"===t.type},b=function(t){return"cancelScheduledValues"===t.type},x=function(t){return w(t)||b(t)?t.cancelTime:p(t)||f(t)?t.endTime:t.startTime},C=function(t,e,n,i){var r=i.endTime,o=i.value;return n===o?o:0<n&&0<o||n<0&&o<0?n*Math.pow(o/n,(t-e)/(r-e)):0},S=function(t,e,n,i){var r=i.endTime,o=i.value;return n+(t-e)/(r-e)*(o-n)},k=function(t,e){var n=Math.floor(e),i=Math.ceil(e);return n===i?t[n]:(1-(e-n))*t[n]+(1-(i-e))*t[i]},T=function(t,e){var n=e.duration,i=e.startTime,r=e.values,o=(t-i)/n*(r.length-1);return k(r,o)},R=function(t){return"setTarget"===t.type},M=function(){function t(e){a["default"](this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return s["default"](t,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=x(t);if(w(t)||b(t)){var n=this._automationEvents.findIndex((function(n){return b(t)&&v(n)?n.startTime+n.duration>=e:x(n)>=e})),i=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),w(t)){var r=this._automationEvents[this._automationEvents.length-1];if(void 0!==i&&m(i)){if(R(r))throw new Error("The internal list is malformed.");var o=v(r)?r.startTime+r.duration:x(r),a=v(r)?r.values[r.values.length-1]:r.value,s=p(i)?C(e,o,a,i):S(e,o,a,i),d=p(i)?u(s,e,this._currenTime):c(s,e,this._currenTime);this._automationEvents.push(d)}void 0!==r&&R(r)&&this._automationEvents.push(l(this.getValue(e),e)),void 0!==r&&v(r)&&r.startTime+r.duration>e&&(this._automationEvents[this._automationEvents.length-1]=h(new Float32Array([6,7]),r.startTime,e-r.startTime))}}else{var g=this._automationEvents.findIndex((function(t){return x(t)>e})),y=-1===g?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[g-1];if(void 0!==y&&v(y)&&x(y)+y.duration>e)return!1;var _=p(t)?u(t.value,t.endTime,this._currenTime):f(t)?c(t.value,e,this._currenTime):t;if(-1===g)this._automationEvents.push(_);else{if(v(t)&&e+t.duration>x(this._automationEvents[g]))return!1;this._automationEvents.splice(g,0,_)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return x(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),i=n[0];R(i)&&n.unshift(l(y(this._automationEvents,e-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents[this._automationEvents.length-1],n=this._automationEvents.findIndex((function(e){return x(e)>t})),i=this._automationEvents[n],r=x(e)<=t?e:this._automationEvents[n-1];if(void 0!==r&&R(r)&&(void 0===i||!m(i)||i.insertTime>t))return d(t,y(this._automationEvents,n-2,r.startTime,this._defaultValue),r);if(void 0!==r&&g(r)&&(void 0===i||!m(i)))return r.value;if(void 0!==r&&v(r)&&(void 0===i||!m(i)||r.startTime+r.duration>t))return t<r.startTime+r.duration?T(t,r):r.values[r.values.length-1];if(void 0!==r&&m(r)&&(void 0===i||!m(i)))return r.value;if(void 0!==i&&p(i)){var a=_(this._automationEvents,n-1,r,i,this._defaultValue),s=o["default"](a,2),u=s[0],c=s[1];return C(t,u,c,i)}if(void 0!==i&&f(i)){var l=_(this._automationEvents,n-1,r,i,this._defaultValue),h=o["default"](l,2),w=h[0],b=h[1];return S(t,w,b,i)}return this._defaultValue}}]),t}(),A=function(t){return{cancelTime:t,type:"cancelAndHold"}},I=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},P=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},E=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},O=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}};t.AutomationEventList=M,t.createCancelAndHoldAutomationEvent=A,t.createCancelScheduledValuesAutomationEvent=I,t.createExponentialRampToValueAutomationEvent=P,t.createLinearRampToValueAutomationEvent=E,t.createSetTargetAutomationEvent=O,t.createSetValueAutomationEvent=l,t.createSetValueCurveAutomationEvent=h,Object.defineProperty(t,"__esModule",{value:!0})}))},"04d3":function(t,e,n){"use strict";var i=n("23e7"),r=n("857a"),o=n("af03");i({target:"String",proto:!0,forced:o("blink")},{blink:function(){return r(this,"blink","","")}})},"0538":function(t,e,n){"use strict";var i=n("1c0b"),r=n("861d"),o=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";a[e]=Function("C,a","return new C("+i.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=o.call(arguments,1),a=function(){var i=n.concat(o.call(arguments));return this instanceof a?s(e,i.length,i):e.apply(t,i)};return r(e.prototype)&&(a.prototype=e.prototype),a}},"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("25f0"),n("3ca3");function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}},"0cb2":function(t,e,n){var i=n("7b0b"),r=Math.floor,o="".replace,a=/\$([$&'`]|\d\d?|<[^>]*>)/g,s=/\$([$&'`]|\d\d?)/g;t.exports=function(t,e,n,u,c,l){var h=n+t.length,d=u.length,p=s;return void 0!==c&&(c=i(c),p=a),o.call(l,p,(function(i,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(h);case"<":a=c[o.slice(1,-1)];break;default:var s=+o;if(0===s)return i;if(s>d){var l=r(s/10);return 0===l?i:l<=d?void 0===u[l-1]?o.charAt(1):u[l-1]+o.charAt(1):i}a=u[s-1]}return void 0===a?"":a}))}},"0d3b":function(t,e,n){var i=n("d039"),r=n("b622"),o=n("c430"),a=r("iterator");t.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,i){e["delete"]("b"),n+=i+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},1148:function(t,e,n){"use strict";var i=n("a691"),r=n("1d80");t.exports="".repeat||function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},"12ae":function(t,e,n){n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("25f0"),n("3ca3");var i=n("f2d0");function r(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}t.exports=r,t.exports["default"]=t.exports,t.exports.__esModule=!0},"14c3":function(t,e,n){var i=n("c6b6"),r=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"18a5":function(t,e,n){"use strict";var i=n("23e7"),r=n("857a"),o=n("af03");i({target:"String",proto:!0,forced:o("anchor")},{anchor:function(t){return r(this,"a","name",t)}})},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("d3b7");function i(t,e,n,i,r,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(i,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function s(t){i(a,r,o,s,u,"next",t)}function u(t){i(a,r,o,s,u,"throw",t)}s(void 0)}))}}},"1de3":function(t,e){function n(t){if(Array.isArray(t))return t}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},"25f0":function(t,e,n){"use strict";var i=n("6eeb"),r=n("825a"),o=n("d039"),a=n("ad6d"),s="toString",u=RegExp.prototype,c=u[s],l=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),h=c.name!=s;(l||h)&&i(RegExp.prototype,s,(function(){var t=r(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"27d6":function(t,e,n){var i;(function(){function r(t,e,n){return t.call.apply(t.bind,arguments)}function o(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function a(t,e,n){return a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r:o,a.apply(null,arguments)}var s=Date.now||function(){return+new Date};function u(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var c=!!window.FontFace;function l(t,e,n,i){if(e=t.c.createElement(e),n)for(var r in n)n.hasOwnProperty(r)&&("style"==r?e.style.cssText=n[r]:e.setAttribute(r,n[r]));return i&&e.appendChild(t.c.createTextNode(i)),e}function h(t,e,n){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),r=0;r<e.length;r+=1){for(var o=!1,a=0;a<i.length;a+=1)if(e[r]===i[a]){o=!0;break}o||i.push(e[r])}for(e=[],r=0;r<i.length;r+=1){for(o=!1,a=0;a<n.length;a+=1)if(i[r]===n[a]){o=!0;break}o||e.push(i[r])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(t,e){for(var n=t.className.split(/\s+/),i=0,r=n.length;i<r;i++)if(n[i]==e)return!0;return!1}function m(t){return t.o.location.hostname||t.a.location.hostname}function g(t,e,n){function i(){s&&r&&o&&(s(a),s=null)}e=l(t,"link",{rel:"stylesheet",href:e,media:"all"});var r=!1,o=!0,a=null,s=n||null;c?(e.onload=function(){r=!0,i()},e.onerror=function(){r=!0,a=Error("Stylesheet failed to load"),i()}):setTimeout((function(){r=!0,i()}),0),h(t,"head",e)}function v(t,e,n,i){var r=t.c.getElementsByTagName("head")[0];if(r){var o=l(t,"script",{src:e}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout((function(){a||(a=!0,n&&n(Error("Script load timeout")))}),i||5e3),o}return null}function y(){this.a=0,this.c=null}function _(t){return t.a++,function(){t.a--,b(t)}}function w(t,e){t.c=e,b(t)}function b(t){0==t.a&&t.c&&(t.c(),t.c=null)}function x(t){this.a=t||"-"}function C(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function S(t){return R(t)+" "+t.f+"00 300px "+k(t.c)}function k(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function T(t){return t.a+t.f}function R(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function M(t){var e=4,n="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),n+e}function A(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new x("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function I(t){t.g&&p(t.f,[t.a.c("wf","loading")]),E(t,"loading")}function P(t){if(t.g){var e=f(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),p(t.f,n,i)}E(t,"inactive")}function E(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,T(n)):t.h[e]())}function O(){this.c={}}function D(t,e,n){var i,r=[];for(i in e)if(e.hasOwnProperty(i)){var o=t.c[i];o&&r.push(o(e[i],n))}return r}function V(t,e){this.c=t,this.f=e,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function B(t){h(t.c,"body",t.a)}function F(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+k(t.c)+";font-style:"+R(t)+";font-weight:"+t.f+"00;"}function N(t,e,n,i,r,o){this.g=t,this.j=e,this.a=i,this.c=n,this.f=r||3e3,this.h=o||void 0}function L(t,e,n,i,r,o,a){this.v=t,this.B=e,this.c=n,this.a=i,this.s=a||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new V(this.c,this.s),this.h=new V(this.c,this.s),this.j=new V(this.c,this.s),this.m=new V(this.c,this.s),t=new C(this.a.c+",serif",T(this.a)),t=F(t),this.g.a.style.cssText=t,t=new C(this.a.c+",sans-serif",T(this.a)),t=F(t),this.h.a.style.cssText=t,t=new C("serif",T(this.a)),t=F(t),this.j.a.style.cssText=t,t=new C("sans-serif",T(this.a)),t=F(t),this.m.a.style.cssText=t,B(this.g),B(this.h),B(this.j),B(this.m)}x.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},N.prototype.start=function(){var t=this.c.o.document,e=this,n=s(),i=new Promise((function(i,r){function o(){s()-n>=e.f?r():t.fonts.load(S(e.a),e.h).then((function(t){1<=t.length?i():setTimeout(o,25)}),(function(){r()}))}o()})),r=null,o=new Promise((function(t,n){r=setTimeout(n,e.f)}));Promise.race([o,i]).then((function(){r&&(clearTimeout(r),r=null),e.g(e.a)}),(function(){e.j(e.a)}))};var j={D:"serif",C:"sans-serif"},U=null;function X(){if(null===U){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);U=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return U}function z(t,e,n){for(var i in j)if(j.hasOwnProperty(i)&&e===t.f[j[i]]&&n===t.f[j[i]])return!0;return!1}function G(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=n===t.f.serif&&i===t.f["sans-serif"])||(e=X()&&z(t,n,i)),e?s()-t.A>=t.w?X()&&z(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?q(t,t.v):q(t,t.B):W(t):q(t,t.v)}function W(t){setTimeout(a((function(){G(this)}),t),50)}function q(t,e){setTimeout(a((function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),e(this.a)}),t),0)}function H(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}L.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),G(this)};var Y=null;function Q(t){0==--t.f&&t.j&&(t.m?(t=t.a,t.g&&p(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),E(t,"active")):P(t.a))}function Z(t){this.j=t,this.a=new O,this.h=0,this.f=this.g=!0}function $(t,e,n,i,r){var o=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=r||null,s=i||{};if(0===n.length&&o)P(e.a);else{e.f+=n.length,o&&(e.j=o);var u,c=[];for(u=0;u<n.length;u++){var l=n[u],h=s[l.c],d=e.a,f=l;if(d.g&&p(d.f,[d.a.c("wf",f.c,T(f).toString(),"loading")]),E(d,"fontloading",f),d=null,null===Y)if(window.FontFace){f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var m=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);Y=f?42<parseInt(f[1],10):!m}else Y=!1;d=Y?new N(a(e.g,e),a(e.h,e),e.c,l,e.s,h):new L(a(e.g,e),a(e.h,e),e.c,l,e.s,t,h),c.push(d)}for(u=0;u<c.length;u++)c[u].start()}}),0)}function K(t,e,n){var i=[],r=n.timeout;I(e);i=D(t.a,n,t.c);var o=new H(t.c,e,r);for(t.h=i.length,e=0,n=i.length;e<n;e++)i[e].load((function(e,n,i){$(t,o,e,n,i)}))}function J(t,e){this.c=t,this.a=e}function tt(t,e){this.c=t,this.a=e}function et(t,e){this.c=t||nt,this.a=[],this.f=[],this.g=e||""}H.prototype.g=function(t){var e=this.a;e.g&&p(e.f,[e.a.c("wf",t.c,T(t).toString(),"active")],[e.a.c("wf",t.c,T(t).toString(),"loading"),e.a.c("wf",t.c,T(t).toString(),"inactive")]),E(e,"fontactive",t),this.m=!0,Q(this)},H.prototype.h=function(t){var e=this.a;if(e.g){var n=f(e.f,e.a.c("wf",t.c,T(t).toString(),"active")),i=[],r=[e.a.c("wf",t.c,T(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,T(t).toString(),"inactive")),p(e.f,i,r)}E(e,"fontinactive",t),Q(this)},Z.prototype.load=function(t){this.c=new u(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,K(this,new A(this.c,t),t)},J.prototype.load=function(t){function e(){if(o["__mti_fntLst"+i]){var n,r=o["__mti_fntLst"+i](),a=[];if(r)for(var s=0;s<r.length;s++){var u=r[s].fontfamily;void 0!=r[s].fontStyle&&void 0!=r[s].fontWeight?(n=r[s].fontStyle+r[s].fontWeight,a.push(new C(u,n))):a.push(new C(u))}t(a)}else setTimeout((function(){e()}),50)}var n=this,i=n.a.projectId,r=n.a.version;if(i){var o=n.c.o;v(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(r?"?v="+r:""),(function(r){r?t([]):(o["__MonotypeConfiguration__"+i]=function(){return n.a},e())})).id="__MonotypeAPIScript__"+i}else t([])},tt.prototype.load=function(t){var e,n,i=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},a=new y;for(e=0,n=i.length;e<n;e++)g(this.c,i[e],_(a));var s=[];for(e=0,n=r.length;e<n;e++)if(i=r[e].split(":"),i[1])for(var u=i[1].split(","),c=0;c<u.length;c+=1)s.push(new C(i[0],u[c]));else s.push(new C(i[0]));w(a,(function(){t(s,o)}))};var nt="https://fonts.googleapis.com/css";function it(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i].split(":");3==r.length&&t.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),t.a.push(r.join(o))}}function rt(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function ot(t){this.f=t,this.a=[],this.c={}}var at={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},st={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ut={i:"i",italic:"i",n:"n",normal:"n"},ct=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function lt(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),r=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var a,s=i[1];if(a=[],s){s=s.split(",");for(var u=s.length,c=0;c<u;c++){var l;if(l=s[c],l.match(/^[\w-]+$/)){var h=ct.exec(l.toLowerCase());if(null==h)l="";else{if(l=h[2],l=null==l||""==l?"n":ut[l],h=h[1],null==h||""==h)h="4";else{var d=st[h];h=d||(isNaN(h)?"4":h.substr(0,1))}l=[l,h].join("")}}else l="";l&&a.push(l)}}0<a.length&&(o=a),3==i.length&&(i=i[2],a=[],i=i?i.split(","):a,0<i.length&&(i=at[i[0]])&&(t.c[r]=i))}for(t.c[r]||(i=at[r])&&(t.c[r]=i),i=0;i<o.length;i+=1)t.a.push(new C(r,o[i]))}}function ht(t,e){this.c=t,this.a=e}var dt={Arimo:!0,Cousine:!0,Tinos:!0};function pt(t,e){this.c=t,this.a=e}function ft(t,e){this.c=t,this.f=e,this.a=[]}ht.prototype.load=function(t){var e=new y,n=this.c,i=new et(this.a.api,this.a.text),r=this.a.families;it(i,r);var o=new ot(r);lt(o),g(n,rt(i),_(e)),w(e,(function(){t(o.a,o.c,dt)}))},pt.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?v(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=[],r=0;r<e.length;r+=2)for(var o=e[r],a=e[r+1],s=0;s<a.length;s++)i.push(new C(o,a[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(u){}t(i)}}),2e3):t([])},ft.prototype.load=function(t){var e=this.f.id,n=this.c.o,i=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var r=0,o=n.fonts.length;r<o;++r){var a=n.fonts[r];i.a.push(new C(a.name,M("font-weight:"+a.weight+";font-style:"+a.style)))}t(i.a)},v(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+m(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var mt=new Z(window);mt.a.c.custom=function(t,e){return new tt(e,t)},mt.a.c.fontdeck=function(t,e){return new ft(e,t)},mt.a.c.monotype=function(t,e){return new J(e,t)},mt.a.c.typekit=function(t,e){return new pt(e,t)},mt.a.c.google=function(t,e){return new ht(e,t)};var gt={load:a(mt.load,mt)};i=function(){return gt}.call(e,n,e,t),void 0===i||(t.exports=i)})()},"2b3d":function(t,e,n){"use strict";n("3ca3");var i,r=n("23e7"),o=n("83ab"),a=n("0d3b"),s=n("da84"),u=n("37e8"),c=n("6eeb"),l=n("19aa"),h=n("5135"),d=n("60da"),p=n("4df4"),f=n("6547").codeAt,m=n("5fb2"),g=n("d44e"),v=n("9861"),y=n("69f3"),_=s.URL,w=v.URLSearchParams,b=v.getState,x=y.set,C=y.getterFor("URL"),S=Math.floor,k=Math.pow,T="Invalid authority",R="Invalid scheme",M="Invalid host",A="Invalid port",I=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,E=/\d/,O=/^(0x|0X)/,D=/^[0-7]+$/,V=/^\d+$/,B=/^[\dA-Fa-f]+$/,F=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,N=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,L=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,j=/[\u0009\u000A\u000D]/g,U=function(t,e){var n,i,r;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return M;if(n=z(e.slice(1,-1)),!n)return M;t.host=n}else if(K(t)){if(e=m(e),F.test(e))return M;if(n=X(e),null===n)return M;t.host=n}else{if(N.test(e))return M;for(n="",i=p(e),r=0;r<i.length;r++)n+=Z(i[r],q);t.host=n}},X=function(t){var e,n,i,r,o,a,s,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),e=u.length,e>4)return t;for(n=[],i=0;i<e;i++){if(r=u[i],""==r)return t;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=O.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)a=0;else{if(!(10==o?V:8==o?D:B).test(r))return t;a=parseInt(r,o)}n.push(a)}for(i=0;i<e;i++)if(a=n[i],i==e-1){if(a>=k(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),i=0;i<n.length;i++)s+=n[i]*k(256,3-i);return s},z=function(t){var e,n,i,r,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,d=function(){return t.charAt(h)};if(":"==d()){if(":"!=t.charAt(1))return;h+=2,c++,l=c}while(d()){if(8==c)return;if(":"!=d()){e=n=0;while(n<4&&B.test(d()))e=16*e+parseInt(d(),16),h++,n++;if("."==d()){if(0==n)return;if(h-=n,c>6)return;i=0;while(d()){if(r=null,i>0){if(!("."==d()&&i<4))return;h++}if(!E.test(d()))return;while(E.test(d())){if(o=parseInt(d(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;h++}u[c]=256*u[c]+r,i++,2!=i&&4!=i||c++}if(4!=i)return;break}if(":"==d()){if(h++,!d())return}else if(d())return;u[c++]=e}else{if(null!==l)return;h++,c++,l=c}}if(null!==l){a=c-l,c=7;while(0!=c&&a>0)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s}else if(8!=c)return;return u},G=function(t){for(var e=null,n=1,i=null,r=0,o=0;o<8;o++)0!==t[o]?(r>n&&(e=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(e=i,n=r),e},W=function(t){var e,n,i,r;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=S(t/256);return e.join(".")}if("object"==typeof t){for(e="",i=G(t),n=0;n<8;n++)r&&0===t[n]||(r&&(r=!1),i===n?(e+=n?":":"::",r=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},q={},H=d({},q,{" ":1,'"':1,"<":1,">":1,"`":1}),Y=d({},H,{"#":1,"?":1,"{":1,"}":1}),Q=d({},Y,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Z=function(t,e){var n=f(t,0);return n>32&&n<127&&!h(e,t)?t:encodeURIComponent(t)},$={ftp:21,file:null,http:80,https:443,ws:80,wss:443},K=function(t){return h($,t.scheme)},J=function(t){return""!=t.username||""!=t.password},tt=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},et=function(t,e){var n;return 2==t.length&&I.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},nt=function(t){var e;return t.length>1&&et(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},it=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&et(e[0],!0)||e.pop()},rt=function(t){return"."===t||"%2e"===t.toLowerCase()},ot=function(t){return t=t.toLowerCase(),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},at={},st={},ut={},ct={},lt={},ht={},dt={},pt={},ft={},mt={},gt={},vt={},yt={},_t={},wt={},bt={},xt={},Ct={},St={},kt={},Tt={},Rt=function(t,e,n,r){var o,a,s,u,c=n||at,l=0,d="",f=!1,m=!1,g=!1;n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(L,"")),e=e.replace(j,""),o=p(e);while(l<=o.length){switch(a=o[l],c){case at:if(!a||!I.test(a)){if(n)return R;c=ut;continue}d+=a.toLowerCase(),c=st;break;case st:if(a&&(P.test(a)||"+"==a||"-"==a||"."==a))d+=a.toLowerCase();else{if(":"!=a){if(n)return R;d="",c=ut,l=0;continue}if(n&&(K(t)!=h($,d)||"file"==d&&(J(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=d,n)return void(K(t)&&$[t.scheme]==t.port&&(t.port=null));d="","file"==t.scheme?c=_t:K(t)&&r&&r.scheme==t.scheme?c=ct:K(t)?c=pt:"/"==o[l+1]?(c=lt,l++):(t.cannotBeABaseURL=!0,t.path.push(""),c=St)}break;case ut:if(!r||r.cannotBeABaseURL&&"#"!=a)return R;if(r.cannotBeABaseURL&&"#"==a){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,c=Tt;break}c="file"==r.scheme?_t:ht;continue;case ct:if("/"!=a||"/"!=o[l+1]){c=ht;continue}c=ft,l++;break;case lt:if("/"==a){c=mt;break}c=Ct;continue;case ht:if(t.scheme=r.scheme,a==i)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==a||"\\"==a&&K(t))c=dt;else if("?"==a)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",c=kt;else{if("#"!=a){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),c=Ct;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",c=Tt}break;case dt:if(!K(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,c=Ct;continue}c=mt}else c=ft;break;case pt:if(c=ft,"/"!=a||"/"!=d.charAt(l+1))continue;l++;break;case ft:if("/"!=a&&"\\"!=a){c=mt;continue}break;case mt:if("@"==a){f&&(d="%40"+d),f=!0,s=p(d);for(var v=0;v<s.length;v++){var y=s[v];if(":"!=y||g){var _=Z(y,Q);g?t.password+=_:t.username+=_}else g=!0}d=""}else if(a==i||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)){if(f&&""==d)return T;l-=p(d).length+1,d="",c=gt}else d+=a;break;case gt:case vt:if(n&&"file"==t.scheme){c=bt;continue}if(":"!=a||m){if(a==i||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)){if(K(t)&&""==d)return M;if(n&&""==d&&(J(t)||null!==t.port))return;if(u=U(t,d),u)return u;if(d="",c=xt,n)return;continue}"["==a?m=!0:"]"==a&&(m=!1),d+=a}else{if(""==d)return M;if(u=U(t,d),u)return u;if(d="",c=yt,n==vt)return}break;case yt:if(!E.test(a)){if(a==i||"/"==a||"?"==a||"#"==a||"\\"==a&&K(t)||n){if(""!=d){var w=parseInt(d,10);if(w>65535)return A;t.port=K(t)&&w===$[t.scheme]?null:w,d=""}if(n)return;c=xt;continue}return A}d+=a;break;case _t:if(t.scheme="file","/"==a||"\\"==a)c=wt;else{if(!r||"file"!=r.scheme){c=Ct;continue}if(a==i)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==a)t.host=r.host,t.path=r.path.slice(),t.query="",c=kt;else{if("#"!=a){nt(o.slice(l).join(""))||(t.host=r.host,t.path=r.path.slice(),it(t)),c=Ct;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",c=Tt}}break;case wt:if("/"==a||"\\"==a){c=bt;break}r&&"file"==r.scheme&&!nt(o.slice(l).join(""))&&(et(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),c=Ct;continue;case bt:if(a==i||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&et(d))c=Ct;else if(""==d){if(t.host="",n)return;c=xt}else{if(u=U(t,d),u)return u;if("localhost"==t.host&&(t.host=""),n)return;d="",c=xt}continue}d+=a;break;case xt:if(K(t)){if(c=Ct,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=i&&(c=Ct,"/"!=a))continue}else t.fragment="",c=Tt;else t.query="",c=kt;break;case Ct:if(a==i||"/"==a||"\\"==a&&K(t)||!n&&("?"==a||"#"==a)){if(ot(d)?(it(t),"/"==a||"\\"==a&&K(t)||t.path.push("")):rt(d)?"/"==a||"\\"==a&&K(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&et(d)&&(t.host&&(t.host=""),d=d.charAt(0)+":"),t.path.push(d)),d="","file"==t.scheme&&(a==i||"?"==a||"#"==a))while(t.path.length>1&&""===t.path[0])t.path.shift();"?"==a?(t.query="",c=kt):"#"==a&&(t.fragment="",c=Tt)}else d+=Z(a,Y);break;case St:"?"==a?(t.query="",c=kt):"#"==a?(t.fragment="",c=Tt):a!=i&&(t.path[0]+=Z(a,q));break;case kt:n||"#"!=a?a!=i&&("'"==a&&K(t)?t.query+="%27":t.query+="#"==a?"%23":Z(a,q)):(t.fragment="",c=Tt);break;case Tt:a!=i&&(t.fragment+=Z(a,H));break}l++}},Mt=function(t){var e,n,i=l(this,Mt,"URL"),r=arguments.length>1?arguments[1]:void 0,a=String(t),s=x(i,{type:"URL"});if(void 0!==r)if(r instanceof Mt)e=C(r);else if(n=Rt(e={},String(r)),n)throw TypeError(n);if(n=Rt(s,a,null,e),n)throw TypeError(n);var u=s.searchParams=new w,c=b(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(i.href=It.call(i),i.origin=Pt.call(i),i.protocol=Et.call(i),i.username=Ot.call(i),i.password=Dt.call(i),i.host=Vt.call(i),i.hostname=Bt.call(i),i.port=Ft.call(i),i.pathname=Nt.call(i),i.search=Lt.call(i),i.searchParams=jt.call(i),i.hash=Ut.call(i))},At=Mt.prototype,It=function(){var t=C(this),e=t.scheme,n=t.username,i=t.password,r=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,c=e+":";return null!==r?(c+="//",J(t)&&(c+=n+(i?":"+i:"")+"@"),c+=W(r),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Pt=function(){var t=C(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(i){return"null"}return"file"!=e&&K(t)?e+"://"+W(t.host)+(null!==n?":"+n:""):"null"},Et=function(){return C(this).scheme+":"},Ot=function(){return C(this).username},Dt=function(){return C(this).password},Vt=function(){var t=C(this),e=t.host,n=t.port;return null===e?"":null===n?W(e):W(e)+":"+n},Bt=function(){var t=C(this).host;return null===t?"":W(t)},Ft=function(){var t=C(this).port;return null===t?"":String(t)},Nt=function(){var t=C(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Lt=function(){var t=C(this).query;return t?"?"+t:""},jt=function(){return C(this).searchParams},Ut=function(){var t=C(this).fragment;return t?"#"+t:""},Xt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&u(At,{href:Xt(It,(function(t){var e=C(this),n=String(t),i=Rt(e,n);if(i)throw TypeError(i);b(e.searchParams).updateSearchParams(e.query)})),origin:Xt(Pt),protocol:Xt(Et,(function(t){var e=C(this);Rt(e,String(t)+":",at)})),username:Xt(Ot,(function(t){var e=C(this),n=p(String(t));if(!tt(e)){e.username="";for(var i=0;i<n.length;i++)e.username+=Z(n[i],Q)}})),password:Xt(Dt,(function(t){var e=C(this),n=p(String(t));if(!tt(e)){e.password="";for(var i=0;i<n.length;i++)e.password+=Z(n[i],Q)}})),host:Xt(Vt,(function(t){var e=C(this);e.cannotBeABaseURL||Rt(e,String(t),gt)})),hostname:Xt(Bt,(function(t){var e=C(this);e.cannotBeABaseURL||Rt(e,String(t),vt)})),port:Xt(Ft,(function(t){var e=C(this);tt(e)||(t=String(t),""==t?e.port=null:Rt(e,t,yt))})),pathname:Xt(Nt,(function(t){var e=C(this);e.cannotBeABaseURL||(e.path=[],Rt(e,t+"",xt))})),search:Xt(Lt,(function(t){var e=C(this);t=String(t),""==t?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Rt(e,t,kt)),b(e.searchParams).updateSearchParams(e.query)})),searchParams:Xt(jt),hash:Xt(Ut,(function(t){var e=C(this);t=String(t),""!=t?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Rt(e,t,Tt)):e.fragment=null}))}),c(At,"toJSON",(function(){return It.call(this)}),{enumerable:!0}),c(At,"toString",(function(){return It.call(this)}),{enumerable:!0}),_){var zt=_.createObjectURL,Gt=_.revokeObjectURL;zt&&c(Mt,"createObjectURL",(function(t){return zt.apply(_,arguments)})),Gt&&c(Mt,"revokeObjectURL",(function(t){return Gt.apply(_,arguments)}))}g(Mt,"URL"),r({global:!0,forced:!a,sham:!o},{URL:Mt})},"32f9":function(t,e){var n,i=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();(function(t){(function(t){var e,n,r,o=function(){function t(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var i=0;i<e.length;i++)this.timelineIds[e[i].getPropertyId()]=!0;this.duration=n}return t.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},t.prototype.apply=function(t,e,n,i,r,o,a,s){if(null==t)throw new Error("skeleton cannot be null.");i&&0!=this.duration&&(n%=this.duration,e>0&&(e%=this.duration));for(var u=this.timelines,c=0,l=u.length;c<l;c++)u[c].apply(t,e,n,r,o,a,s)},t.binarySearch=function(t,e,n){void 0===n&&(n=1);var i=0,r=t.length/n-2;if(0==r)return n;var o=r>>>1;while(1){if(t[(o+1)*n]<=e?i=o+1:r=o,i==r)return(i+1)*n;o=i+r>>>1}},t.linearSearch=function(t,e,n){for(var i=0,r=t.length-n;i<=r;i+=n)if(t[i]>e)return i;return-1},t}();t.Animation=o,function(t){t[t["setup"]=0]="setup",t[t["first"]=1]="first",t[t["replace"]=2]="replace",t[t["add"]=3]="add"}(e=t.MixBlend||(t.MixBlend={})),function(t){t[t["mixIn"]=0]="mixIn",t[t["mixOut"]=1]="mixOut"}(n=t.MixDirection||(t.MixDirection={})),function(t){t[t["rotate"]=0]="rotate",t[t["translate"]=1]="translate",t[t["scale"]=2]="scale",t[t["shear"]=3]="shear",t[t["attachment"]=4]="attachment",t[t["color"]=5]="color",t[t["deform"]=6]="deform",t[t["event"]=7]="event",t[t["drawOrder"]=8]="drawOrder",t[t["ikConstraint"]=9]="ikConstraint",t[t["transformConstraint"]=10]="transformConstraint",t[t["pathConstraintPosition"]=11]="pathConstraintPosition",t[t["pathConstraintSpacing"]=12]="pathConstraintSpacing",t[t["pathConstraintMix"]=13]="pathConstraintMix",t[t["twoColor"]=14]="twoColor"}(r=t.TimelineType||(t.TimelineType={}));var a=function(){function e(n){if(n<=0)throw new Error("frameCount must be > 0: "+n);this.curves=t.Utils.newFloatArray((n-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var n=t*e.BEZIER_SIZE;if(n==this.curves.length)return e.LINEAR;var i=this.curves[n];return i==e.LINEAR?e.LINEAR:i==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,n,i,r,o){var a=.03*(2*-n+r),s=.03*(2*-i+o),u=.006*(3*(n-r)+1),c=.006*(3*(i-o)+1),l=2*a+u,h=2*s+c,d=.3*n+a+.16666667*u,p=.3*i+s+.16666667*c,f=t*e.BEZIER_SIZE,m=this.curves;m[f++]=e.BEZIER;for(var g=d,v=p,y=f+e.BEZIER_SIZE-1;f<y;f+=2)m[f]=g,m[f+1]=v,d+=l,p+=h,l+=u,h+=c,g+=d,v+=p},e.prototype.getCurvePercent=function(n,i){i=t.MathUtils.clamp(i,0,1);var r=this.curves,o=n*e.BEZIER_SIZE,a=r[o];if(a==e.LINEAR)return i;if(a==e.STEPPED)return 0;o++;for(var s=0,u=o,c=o+e.BEZIER_SIZE-1;o<c;o+=2)if(s=r[o],s>=i){var l=void 0,h=void 0;return o==u?(l=0,h=0):(l=r[o-2],h=r[o-1]),h+(r[o+1]-h)*(i-l)/(s-l)}var d=r[o-1];return d+(1-d)*(i-s)/(1-s)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=a;var s=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e<<1),i}return i(a,n),a.prototype.getPropertyId=function(){return(r.rotate<<24)+this.boneIndex},a.prototype.setFrame=function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+a.ROTATION]=n},a.prototype.apply=function(t,n,i,r,s,u,c){var l=this.frames,h=t.bones[this.boneIndex];if(h.active)if(i<l[0])switch(u){case e.setup:return void(h.rotation=h.data.rotation);case e.first:var d=h.data.rotation-h.rotation;h.rotation+=(d-360*(16384-(16384.499999999996-d/360|0)))*s}else if(i>=l[l.length-a.ENTRIES]){var p=l[l.length+a.PREV_ROTATION];switch(u){case e.setup:h.rotation=h.data.rotation+p*s;break;case e.first:case e.replace:p+=h.data.rotation-h.rotation,p-=360*(16384-(16384.499999999996-p/360|0));case e.add:h.rotation+=p*s}}else{var f=o.binarySearch(l,i,a.ENTRIES),m=l[f+a.PREV_ROTATION],g=l[f],v=this.getCurvePercent((f>>1)-1,1-(i-g)/(l[f+a.PREV_TIME]-g)),y=l[f+a.ROTATION]-m;switch(y=m+(y-360*(16384-(16384.499999999996-y/360|0)))*v,u){case e.setup:h.rotation=h.data.rotation+(y-360*(16384-(16384.499999999996-y/360|0)))*s;break;case e.first:case e.replace:y+=h.data.rotation-h.rotation;case e.add:h.rotation+=(y-360*(16384-(16384.499999999996-y/360|0)))*s}}},a.ENTRIES=2,a.PREV_TIME=-2,a.PREV_ROTATION=-1,a.ROTATION=1,a}(a);t.RotateTimeline=s;var u=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return i(a,n),a.prototype.getPropertyId=function(){return(r.translate<<24)+this.boneIndex},a.prototype.setFrame=function(t,e,n,i){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.X]=n,this.frames[t+a.Y]=i},a.prototype.apply=function(t,n,i,r,s,u,c){var l=this.frames,h=t.bones[this.boneIndex];if(h.active)if(i<l[0])switch(u){case e.setup:return h.x=h.data.x,void(h.y=h.data.y);case e.first:h.x+=(h.data.x-h.x)*s,h.y+=(h.data.y-h.y)*s}else{var d=0,p=0;if(i>=l[l.length-a.ENTRIES])d=l[l.length+a.PREV_X],p=l[l.length+a.PREV_Y];else{var f=o.binarySearch(l,i,a.ENTRIES);d=l[f+a.PREV_X],p=l[f+a.PREV_Y];var m=l[f],g=this.getCurvePercent(f/a.ENTRIES-1,1-(i-m)/(l[f+a.PREV_TIME]-m));d+=(l[f+a.X]-d)*g,p+=(l[f+a.Y]-p)*g}switch(u){case e.setup:h.x=h.data.x+d*s,h.y=h.data.y+p*s;break;case e.first:case e.replace:h.x+=(h.data.x+d-h.x)*s,h.y+=(h.data.y+p-h.y)*s;break;case e.add:h.x+=d*s,h.y+=p*s}}},a.ENTRIES=3,a.PREV_TIME=-3,a.PREV_X=-2,a.PREV_Y=-1,a.X=1,a.Y=2,a}(a);t.TranslateTimeline=u;var c=function(a){function s(t){return a.call(this,t)||this}return i(s,a),s.prototype.getPropertyId=function(){return(r.scale<<24)+this.boneIndex},s.prototype.apply=function(i,r,a,u,c,l,h){var d=this.frames,p=i.bones[this.boneIndex];if(p.active)if(a<d[0])switch(l){case e.setup:return p.scaleX=p.data.scaleX,void(p.scaleY=p.data.scaleY);case e.first:p.scaleX+=(p.data.scaleX-p.scaleX)*c,p.scaleY+=(p.data.scaleY-p.scaleY)*c}else{var f=0,m=0;if(a>=d[d.length-s.ENTRIES])f=d[d.length+s.PREV_X]*p.data.scaleX,m=d[d.length+s.PREV_Y]*p.data.scaleY;else{var g=o.binarySearch(d,a,s.ENTRIES);f=d[g+s.PREV_X],m=d[g+s.PREV_Y];var v=d[g],y=this.getCurvePercent(g/s.ENTRIES-1,1-(a-v)/(d[g+s.PREV_TIME]-v));f=(f+(d[g+s.X]-f)*y)*p.data.scaleX,m=(m+(d[g+s.Y]-m)*y)*p.data.scaleY}if(1==c)l==e.add?(p.scaleX+=f-p.data.scaleX,p.scaleY+=m-p.data.scaleY):(p.scaleX=f,p.scaleY=m);else{var _=0,w=0;if(h==n.mixOut)switch(l){case e.setup:_=p.data.scaleX,w=p.data.scaleY,p.scaleX=_+(Math.abs(f)*t.MathUtils.signum(_)-_)*c,p.scaleY=w+(Math.abs(m)*t.MathUtils.signum(w)-w)*c;break;case e.first:case e.replace:_=p.scaleX,w=p.scaleY,p.scaleX=_+(Math.abs(f)*t.MathUtils.signum(_)-_)*c,p.scaleY=w+(Math.abs(m)*t.MathUtils.signum(w)-w)*c;break;case e.add:_=p.scaleX,w=p.scaleY,p.scaleX=_+(Math.abs(f)*t.MathUtils.signum(_)-p.data.scaleX)*c,p.scaleY=w+(Math.abs(m)*t.MathUtils.signum(w)-p.data.scaleY)*c}else switch(l){case e.setup:_=Math.abs(p.data.scaleX)*t.MathUtils.signum(f),w=Math.abs(p.data.scaleY)*t.MathUtils.signum(m),p.scaleX=_+(f-_)*c,p.scaleY=w+(m-w)*c;break;case e.first:case e.replace:_=Math.abs(p.scaleX)*t.MathUtils.signum(f),w=Math.abs(p.scaleY)*t.MathUtils.signum(m),p.scaleX=_+(f-_)*c,p.scaleY=w+(m-w)*c;break;case e.add:_=t.MathUtils.signum(f),w=t.MathUtils.signum(m),p.scaleX=Math.abs(p.scaleX)*_+(f-Math.abs(p.data.scaleX)*_)*c,p.scaleY=Math.abs(p.scaleY)*w+(m-Math.abs(p.data.scaleY)*w)*c}}}},s}(u);t.ScaleTimeline=c;var l=function(t){function n(e){return t.call(this,e)||this}return i(n,t),n.prototype.getPropertyId=function(){return(r.shear<<24)+this.boneIndex},n.prototype.apply=function(t,i,r,a,s,u,c){var l=this.frames,h=t.bones[this.boneIndex];if(h.active)if(r<l[0])switch(u){case e.setup:return h.shearX=h.data.shearX,void(h.shearY=h.data.shearY);case e.first:h.shearX+=(h.data.shearX-h.shearX)*s,h.shearY+=(h.data.shearY-h.shearY)*s}else{var d=0,p=0;if(r>=l[l.length-n.ENTRIES])d=l[l.length+n.PREV_X],p=l[l.length+n.PREV_Y];else{var f=o.binarySearch(l,r,n.ENTRIES);d=l[f+n.PREV_X],p=l[f+n.PREV_Y];var m=l[f],g=this.getCurvePercent(f/n.ENTRIES-1,1-(r-m)/(l[f+n.PREV_TIME]-m));d+=(l[f+n.X]-d)*g,p+=(l[f+n.Y]-p)*g}switch(u){case e.setup:h.shearX=h.data.shearX+d*s,h.shearY=h.data.shearY+p*s;break;case e.first:case e.replace:h.shearX+=(h.data.shearX+d-h.shearX)*s,h.shearY+=(h.data.shearY+p-h.shearY)*s;break;case e.add:h.shearX+=d*s,h.shearY+=p*s}}},n}(u);t.ShearTimeline=l;var h=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return i(a,n),a.prototype.getPropertyId=function(){return(r.color<<24)+this.slotIndex},a.prototype.setFrame=function(t,e,n,i,r,o){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.R]=n,this.frames[t+a.G]=i,this.frames[t+a.B]=r,this.frames[t+a.A]=o},a.prototype.apply=function(t,n,i,r,s,u,c){var l=t.slots[this.slotIndex];if(l.bone.active){var h=this.frames;if(i<h[0])switch(u){case e.setup:return void l.color.setFromColor(l.data.color);case e.first:var d=l.color,p=l.data.color;d.add((p.r-d.r)*s,(p.g-d.g)*s,(p.b-d.b)*s,(p.a-d.a)*s)}else{var f=0,m=0,g=0,v=0;if(i>=h[h.length-a.ENTRIES]){var y=h.length;f=h[y+a.PREV_R],m=h[y+a.PREV_G],g=h[y+a.PREV_B],v=h[y+a.PREV_A]}else{var _=o.binarySearch(h,i,a.ENTRIES);f=h[_+a.PREV_R],m=h[_+a.PREV_G],g=h[_+a.PREV_B],v=h[_+a.PREV_A];var w=h[_],b=this.getCurvePercent(_/a.ENTRIES-1,1-(i-w)/(h[_+a.PREV_TIME]-w));f+=(h[_+a.R]-f)*b,m+=(h[_+a.G]-m)*b,g+=(h[_+a.B]-g)*b,v+=(h[_+a.A]-v)*b}if(1==s)l.color.set(f,m,g,v);else{d=l.color;u==e.setup&&d.setFromColor(l.data.color),d.add((f-d.r)*s,(m-d.g)*s,(g-d.b)*s,(v-d.a)*s)}}}},a.ENTRIES=5,a.PREV_TIME=-5,a.PREV_R=-4,a.PREV_G=-3,a.PREV_B=-2,a.PREV_A=-1,a.R=1,a.G=2,a.B=3,a.A=4,a}(a);t.ColorTimeline=h;var d=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return i(a,n),a.prototype.getPropertyId=function(){return(r.twoColor<<24)+this.slotIndex},a.prototype.setFrame=function(t,e,n,i,r,o,s,u,c){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.R]=n,this.frames[t+a.G]=i,this.frames[t+a.B]=r,this.frames[t+a.A]=o,this.frames[t+a.R2]=s,this.frames[t+a.G2]=u,this.frames[t+a.B2]=c},a.prototype.apply=function(t,n,i,r,s,u,c){var l=t.slots[this.slotIndex];if(l.bone.active){var h=this.frames;if(i<h[0])switch(u){case e.setup:return l.color.setFromColor(l.data.color),void l.darkColor.setFromColor(l.data.darkColor);case e.first:var d=l.color,p=l.darkColor,f=l.data.color,m=l.data.darkColor;d.add((f.r-d.r)*s,(f.g-d.g)*s,(f.b-d.b)*s,(f.a-d.a)*s),p.add((m.r-p.r)*s,(m.g-p.g)*s,(m.b-p.b)*s,0)}else{var g=0,v=0,y=0,_=0,w=0,b=0,x=0;if(i>=h[h.length-a.ENTRIES]){var C=h.length;g=h[C+a.PREV_R],v=h[C+a.PREV_G],y=h[C+a.PREV_B],_=h[C+a.PREV_A],w=h[C+a.PREV_R2],b=h[C+a.PREV_G2],x=h[C+a.PREV_B2]}else{var S=o.binarySearch(h,i,a.ENTRIES);g=h[S+a.PREV_R],v=h[S+a.PREV_G],y=h[S+a.PREV_B],_=h[S+a.PREV_A],w=h[S+a.PREV_R2],b=h[S+a.PREV_G2],x=h[S+a.PREV_B2];var k=h[S],T=this.getCurvePercent(S/a.ENTRIES-1,1-(i-k)/(h[S+a.PREV_TIME]-k));g+=(h[S+a.R]-g)*T,v+=(h[S+a.G]-v)*T,y+=(h[S+a.B]-y)*T,_+=(h[S+a.A]-_)*T,w+=(h[S+a.R2]-w)*T,b+=(h[S+a.G2]-b)*T,x+=(h[S+a.B2]-x)*T}if(1==s)l.color.set(g,v,y,_),l.darkColor.set(w,b,x,1);else{d=l.color,p=l.darkColor;u==e.setup&&(d.setFromColor(l.data.color),p.setFromColor(l.data.darkColor)),d.add((g-d.r)*s,(v-d.g)*s,(y-d.b)*s,(_-d.a)*s),p.add((w-p.r)*s,(b-p.g)*s,(x-p.b)*s,0)}}}},a.ENTRIES=8,a.PREV_TIME=-8,a.PREV_R=-7,a.PREV_G=-6,a.PREV_B=-5,a.PREV_A=-4,a.PREV_R2=-3,a.PREV_G2=-2,a.PREV_B2=-1,a.R=1,a.G=2,a.B=3,a.A=4,a.R2=5,a.G2=6,a.B2=7,a}(a);t.TwoColorTimeline=d;var p=function(){function i(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return i.prototype.getPropertyId=function(){return(r.attachment<<24)+this.slotIndex},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},i.prototype.apply=function(t,i,r,a,s,u,c){var l=t.slots[this.slotIndex];if(l.bone.active)if(c!=n.mixOut){var h=this.frames;if(r<h[0])u!=e.setup&&u!=e.first||this.setAttachment(t,l,l.data.attachmentName);else{var d=0;d=r>=h[h.length-1]?h.length-1:o.binarySearch(h,r,1)-1;var p=this.attachmentNames[d];t.slots[this.slotIndex].setAttachment(null==p?null:t.getAttachment(this.slotIndex,p))}}else u==e.setup&&this.setAttachment(t,l,l.data.attachmentName)},i.prototype.setAttachment=function(t,e,n){e.attachment=null==n?null:t.getAttachment(this.slotIndex,n)},i}();t.AttachmentTimeline=p;var f=null,m=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e),i.frameVertices=new Array(e),null==f&&(f=t.Utils.newFloatArray(64)),i}return i(a,n),a.prototype.getPropertyId=function(){return(r.deform<<27)+ +this.attachment.id+this.slotIndex},a.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},a.prototype.apply=function(n,i,r,a,s,u,c){var l=n.slots[this.slotIndex];if(l.bone.active){var h=l.getAttachment();if(h instanceof t.VertexAttachment&&h.deformAttachment==this.attachment){var d=l.deform;0==d.length&&(u=e.setup);var p=this.frameVertices,f=p[0].length,m=this.frames;if(r<m[0]){var g=h;switch(u){case e.setup:return void(d.length=0);case e.first:if(1==s){d.length=0;break}var v=t.Utils.setArraySize(d,f);if(null==g.bones)for(var y=g.vertices,_=0;_<f;_++)v[_]+=(y[_]-v[_])*s;else{s=1-s;for(_=0;_<f;_++)v[_]*=s}}}else{var w=t.Utils.setArraySize(d,f);if(r>=m[m.length-1]){var b=p[m.length-1];if(1==s)if(u==e.add){g=h;if(null==g.bones){y=g.vertices;for(var x=0;x<f;x++)w[x]+=b[x]-y[x]}else for(var C=0;C<f;C++)w[C]+=b[C]}else t.Utils.arrayCopy(b,0,w,0,f);else switch(u){case e.setup:var S=h;if(null==S.bones){y=S.vertices;for(var k=0;k<f;k++){var T=y[k];w[k]=T+(b[k]-T)*s}}else for(var R=0;R<f;R++)w[R]=b[R]*s;break;case e.first:case e.replace:for(var M=0;M<f;M++)w[M]+=(b[M]-w[M])*s;break;case e.add:g=h;if(null==g.bones){y=g.vertices;for(var A=0;A<f;A++)w[A]+=(b[A]-y[A])*s}else for(var I=0;I<f;I++)w[I]+=b[I]*s}}else{var P=o.binarySearch(m,r),E=p[P-1],O=p[P],D=m[P],V=this.getCurvePercent(P-1,1-(r-D)/(m[P-1]-D));if(1==s)if(u==e.add){g=h;if(null==g.bones){y=g.vertices;for(var B=0;B<f;B++){var F=E[B];w[B]+=F+(O[B]-F)*V-y[B]}}else for(var N=0;N<f;N++){F=E[N];w[N]+=F+(O[N]-F)*V}}else for(var L=0;L<f;L++){F=E[L];w[L]=F+(O[L]-F)*V}else switch(u){case e.setup:var j=h;if(null==j.bones){y=j.vertices;for(var U=0;U<f;U++){F=E[U],T=y[U];w[U]=T+(F+(O[U]-F)*V-T)*s}}else for(var X=0;X<f;X++){F=E[X];w[X]=(F+(O[X]-F)*V)*s}break;case e.first:case e.replace:for(var z=0;z<f;z++){F=E[z];w[z]+=(F+(O[z]-F)*V-w[z])*s}break;case e.add:g=h;if(null==g.bones){y=g.vertices;for(var G=0;G<f;G++){F=E[G];w[G]+=(F+(O[G]-F)*V-y[G])*s}}else for(var W=0;W<f;W++){F=E[W];w[W]+=(F+(O[W]-F)*V)*s}}}}}}},a}(a);t.DeformTimeline=m;var g=function(){function e(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return e.prototype.getPropertyId=function(){return r.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,n,i,r,a,s){if(null!=i){var u=this.frames,c=this.frames.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,i,r,a,s),e=-1;else if(e>=u[c-1])return;if(!(n<u[0])){var l=0;if(e<u[0])l=0;else{l=o.binarySearch(u,e);var h=u[l];while(l>0){if(u[l-1]!=h)break;l--}}for(;l<c&&n>=u[l];l++)i.push(this.events[l])}}},e}();t.EventTimeline=g;var v=function(){function i(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return i.prototype.getPropertyId=function(){return r.drawOrder<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},i.prototype.apply=function(i,r,a,s,u,c,l){var h=i.drawOrder,d=i.slots;if(l!=n.mixOut||c!=e.setup){var p=this.frames;if(a<p[0])c!=e.setup&&c!=e.first||t.Utils.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length);else{var f=0;f=a>=p[p.length-1]?p.length-1:o.binarySearch(p,a)-1;var m=this.drawOrders[f];if(null==m)t.Utils.arrayCopy(d,0,h,0,d.length);else for(var g=0,v=m.length;g<v;g++)h[g]=d[m[g]]}}else t.Utils.arrayCopy(i.slots,0,i.drawOrder,0,i.slots.length)},i}();t.DrawOrderTimeline=v;var y=function(a){function s(e){var n=a.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return i(s,a),s.prototype.getPropertyId=function(){return(r.ikConstraint<<24)+this.ikConstraintIndex},s.prototype.setFrame=function(t,e,n,i,r,o,a){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.MIX]=n,this.frames[t+s.SOFTNESS]=i,this.frames[t+s.BEND_DIRECTION]=r,this.frames[t+s.COMPRESS]=o?1:0,this.frames[t+s.STRETCH]=a?1:0},s.prototype.apply=function(t,i,r,a,u,c,l){var h=this.frames,d=t.ikConstraints[this.ikConstraintIndex];if(d.active)if(r<h[0])switch(c){case e.setup:return d.mix=d.data.mix,d.softness=d.data.softness,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,void(d.stretch=d.data.stretch);case e.first:d.mix+=(d.data.mix-d.mix)*u,d.softness+=(d.data.softness-d.softness)*u,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch}else if(r>=h[h.length-s.ENTRIES])c==e.setup?(d.mix=d.data.mix+(h[h.length+s.PREV_MIX]-d.data.mix)*u,d.softness=d.data.softness+(h[h.length+s.PREV_SOFTNESS]-d.data.softness)*u,l==n.mixOut?(d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch):(d.bendDirection=h[h.length+s.PREV_BEND_DIRECTION],d.compress=0!=h[h.length+s.PREV_COMPRESS],d.stretch=0!=h[h.length+s.PREV_STRETCH])):(d.mix+=(h[h.length+s.PREV_MIX]-d.mix)*u,d.softness+=(h[h.length+s.PREV_SOFTNESS]-d.softness)*u,l==n.mixIn&&(d.bendDirection=h[h.length+s.PREV_BEND_DIRECTION],d.compress=0!=h[h.length+s.PREV_COMPRESS],d.stretch=0!=h[h.length+s.PREV_STRETCH]));else{var p=o.binarySearch(h,r,s.ENTRIES),f=h[p+s.PREV_MIX],m=h[p+s.PREV_SOFTNESS],g=h[p],v=this.getCurvePercent(p/s.ENTRIES-1,1-(r-g)/(h[p+s.PREV_TIME]-g));c==e.setup?(d.mix=d.data.mix+(f+(h[p+s.MIX]-f)*v-d.data.mix)*u,d.softness=d.data.softness+(m+(h[p+s.SOFTNESS]-m)*v-d.data.softness)*u,l==n.mixOut?(d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch):(d.bendDirection=h[p+s.PREV_BEND_DIRECTION],d.compress=0!=h[p+s.PREV_COMPRESS],d.stretch=0!=h[p+s.PREV_STRETCH])):(d.mix+=(f+(h[p+s.MIX]-f)*v-d.mix)*u,d.softness+=(m+(h[p+s.SOFTNESS]-m)*v-d.softness)*u,l==n.mixIn&&(d.bendDirection=h[p+s.PREV_BEND_DIRECTION],d.compress=0!=h[p+s.PREV_COMPRESS],d.stretch=0!=h[p+s.PREV_STRETCH]))}},s.ENTRIES=6,s.PREV_TIME=-6,s.PREV_MIX=-5,s.PREV_SOFTNESS=-4,s.PREV_BEND_DIRECTION=-3,s.PREV_COMPRESS=-2,s.PREV_STRETCH=-1,s.MIX=1,s.SOFTNESS=2,s.BEND_DIRECTION=3,s.COMPRESS=4,s.STRETCH=5,s}(a);t.IkConstraintTimeline=y;var _=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return i(a,n),a.prototype.getPropertyId=function(){return(r.transformConstraint<<24)+this.transformConstraintIndex},a.prototype.setFrame=function(t,e,n,i,r,o){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.ROTATE]=n,this.frames[t+a.TRANSLATE]=i,this.frames[t+a.SCALE]=r,this.frames[t+a.SHEAR]=o},a.prototype.apply=function(t,n,i,r,s,u,c){var l=this.frames,h=t.transformConstraints[this.transformConstraintIndex];if(h.active)if(i<l[0]){var d=h.data;switch(u){case e.setup:return h.rotateMix=d.rotateMix,h.translateMix=d.translateMix,h.scaleMix=d.scaleMix,void(h.shearMix=d.shearMix);case e.first:h.rotateMix+=(d.rotateMix-h.rotateMix)*s,h.translateMix+=(d.translateMix-h.translateMix)*s,h.scaleMix+=(d.scaleMix-h.scaleMix)*s,h.shearMix+=(d.shearMix-h.shearMix)*s}}else{var p=0,f=0,m=0,g=0;if(i>=l[l.length-a.ENTRIES]){var v=l.length;p=l[v+a.PREV_ROTATE],f=l[v+a.PREV_TRANSLATE],m=l[v+a.PREV_SCALE],g=l[v+a.PREV_SHEAR]}else{var y=o.binarySearch(l,i,a.ENTRIES);p=l[y+a.PREV_ROTATE],f=l[y+a.PREV_TRANSLATE],m=l[y+a.PREV_SCALE],g=l[y+a.PREV_SHEAR];var _=l[y],w=this.getCurvePercent(y/a.ENTRIES-1,1-(i-_)/(l[y+a.PREV_TIME]-_));p+=(l[y+a.ROTATE]-p)*w,f+=(l[y+a.TRANSLATE]-f)*w,m+=(l[y+a.SCALE]-m)*w,g+=(l[y+a.SHEAR]-g)*w}if(u==e.setup){d=h.data;h.rotateMix=d.rotateMix+(p-d.rotateMix)*s,h.translateMix=d.translateMix+(f-d.translateMix)*s,h.scaleMix=d.scaleMix+(m-d.scaleMix)*s,h.shearMix=d.shearMix+(g-d.shearMix)*s}else h.rotateMix+=(p-h.rotateMix)*s,h.translateMix+=(f-h.translateMix)*s,h.scaleMix+=(m-h.scaleMix)*s,h.shearMix+=(g-h.shearMix)*s}},a.ENTRIES=5,a.PREV_TIME=-5,a.PREV_ROTATE=-4,a.PREV_TRANSLATE=-3,a.PREV_SCALE=-2,a.PREV_SHEAR=-1,a.ROTATE=1,a.TRANSLATE=2,a.SCALE=3,a.SHEAR=4,a}(a);t.TransformConstraintTimeline=_;var w=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return i(a,n),a.prototype.getPropertyId=function(){return(r.pathConstraintPosition<<24)+this.pathConstraintIndex},a.prototype.setFrame=function(t,e,n){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.VALUE]=n},a.prototype.apply=function(t,n,i,r,s,u,c){var l=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(i<l[0])switch(u){case e.setup:return void(h.position=h.data.position);case e.first:h.position+=(h.data.position-h.position)*s}else{var d=0;if(i>=l[l.length-a.ENTRIES])d=l[l.length+a.PREV_VALUE];else{var p=o.binarySearch(l,i,a.ENTRIES);d=l[p+a.PREV_VALUE];var f=l[p],m=this.getCurvePercent(p/a.ENTRIES-1,1-(i-f)/(l[p+a.PREV_TIME]-f));d+=(l[p+a.VALUE]-d)*m}u==e.setup?h.position=h.data.position+(d-h.data.position)*s:h.position+=(d-h.position)*s}},a.ENTRIES=2,a.PREV_TIME=-2,a.PREV_VALUE=-1,a.VALUE=1,a}(a);t.PathConstraintPositionTimeline=w;var b=function(t){function n(e){return t.call(this,e)||this}return i(n,t),n.prototype.getPropertyId=function(){return(r.pathConstraintSpacing<<24)+this.pathConstraintIndex},n.prototype.apply=function(t,i,r,a,s,u,c){var l=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(r<l[0])switch(u){case e.setup:return void(h.spacing=h.data.spacing);case e.first:h.spacing+=(h.data.spacing-h.spacing)*s}else{var d=0;if(r>=l[l.length-n.ENTRIES])d=l[l.length+n.PREV_VALUE];else{var p=o.binarySearch(l,r,n.ENTRIES);d=l[p+n.PREV_VALUE];var f=l[p],m=this.getCurvePercent(p/n.ENTRIES-1,1-(r-f)/(l[p+n.PREV_TIME]-f));d+=(l[p+n.VALUE]-d)*m}u==e.setup?h.spacing=h.data.spacing+(d-h.data.spacing)*s:h.spacing+=(d-h.spacing)*s}},n}(w);t.PathConstraintSpacingTimeline=b;var x=function(n){function a(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return i(a,n),a.prototype.getPropertyId=function(){return(r.pathConstraintMix<<24)+this.pathConstraintIndex},a.prototype.setFrame=function(t,e,n,i){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.ROTATE]=n,this.frames[t+a.TRANSLATE]=i},a.prototype.apply=function(t,n,i,r,s,u,c){var l=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(i<l[0])switch(u){case e.setup:return h.rotateMix=h.data.rotateMix,void(h.translateMix=h.data.translateMix);case e.first:h.rotateMix+=(h.data.rotateMix-h.rotateMix)*s,h.translateMix+=(h.data.translateMix-h.translateMix)*s}else{var d=0,p=0;if(i>=l[l.length-a.ENTRIES])d=l[l.length+a.PREV_ROTATE],p=l[l.length+a.PREV_TRANSLATE];else{var f=o.binarySearch(l,i,a.ENTRIES);d=l[f+a.PREV_ROTATE],p=l[f+a.PREV_TRANSLATE];var m=l[f],g=this.getCurvePercent(f/a.ENTRIES-1,1-(i-m)/(l[f+a.PREV_TIME]-m));d+=(l[f+a.ROTATE]-d)*g,p+=(l[f+a.TRANSLATE]-p)*g}u==e.setup?(h.rotateMix=h.data.rotateMix+(d-h.data.rotateMix)*s,h.translateMix=h.data.translateMix+(p-h.data.translateMix)*s):(h.rotateMix+=(d-h.rotateMix)*s,h.translateMix+=(p-h.translateMix)*s)}},a.ENTRIES=3,a.PREV_TIME=-3,a.PREV_ROTATE=-2,a.PREV_TRANSLATE=-1,a.ROTATE=1,a.TRANSLATE=2,a}(a);t.PathConstraintMixTimeline=x})(t.core||(t.core={}))})(n||(n={})),function(t){(function(t){var e=function(){function e(e){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new r(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new n})),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,i=e.length;n<i;n++){var r=e[n];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var o=t*r.timeScale;if(r.delay>0){if(r.delay-=o,r.delay>0)continue;o=-r.delay,r.delay=0}var a=r.next;if(null!=a){var s=r.trackLast-a.delay;if(s>=0){a.delay=0,a.trackTime+=0==r.timeScale?0:(s/r.timeScale+t)*a.timeScale,r.trackTime+=o,this.setCurrent(n,a,!0);while(null!=a.mixingFrom)a.mixTime+=t,a=a.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[n]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var u=r.mixingFrom;r.mixingFrom=null,null!=u&&(u.mixingTo=null);while(null!=u)this.queue.end(u),u=u.mixingFrom}r.trackTime+=o}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var i=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)},e.prototype.apply=function(n){if(null==n)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var i=this.events,r=this.tracks,o=!1,a=0,s=r.length;a<s;a++){var u=r[a];if(!(null==u||u.delay>0)){o=!0;var c=0==a?t.MixBlend.first:u.mixBlend,l=u.alpha;null!=u.mixingFrom?l*=this.applyMixingFrom(u,n,c):u.trackTime>=u.trackEnd&&null==u.next&&(l=0);var h=u.animationLast,d=u.getAnimationTime(),p=u.animation.timelines.length,f=u.animation.timelines;if(0==a&&1==l||c==t.MixBlend.add)for(var m=0;m<p;m++){t.Utils.webkit602BugfixHelper(l,c);var g=f[m];g instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(g,n,d,c,!0):g.apply(n,h,d,i,l,c,t.MixDirection.mixIn)}else{var v=u.timelineMode,y=0==u.timelinesRotation.length;y&&t.Utils.setArraySize(u.timelinesRotation,p<<1,null);var _=u.timelinesRotation;for(m=0;m<p;m++){var w=f[m],b=v[m]==e.SUBSEQUENT?c:t.MixBlend.setup;w instanceof t.RotateTimeline?this.applyRotateTimeline(w,n,d,l,b,_,m<<1,y):w instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(w,n,d,c,!0):(t.Utils.webkit602BugfixHelper(l,c),w.apply(n,h,d,i,l,b,t.MixDirection.mixIn))}}this.queueEvents(u,d),i.length=0,u.nextAnimationLast=d,u.nextTrackLast=u.trackTime}}for(var x=this.unkeyedState+e.SETUP,C=n.slots,S=0,k=n.slots.length;S<k;S++){var T=C[S];if(T.attachmentState==x){var R=T.data.attachmentName;T.attachment=null==R?null:n.getAttachment(T.data.index,R)}}return this.unkeyedState+=2,this.queue.drain(),o},e.prototype.applyMixingFrom=function(n,i,r){var o=n.mixingFrom;null!=o.mixingFrom&&this.applyMixingFrom(o,i,r);var a=0;0==n.mixDuration?(a=1,r==t.MixBlend.first&&(r=t.MixBlend.setup)):(a=n.mixTime/n.mixDuration,a>1&&(a=1),r!=t.MixBlend.first&&(r=o.mixBlend));var s=a<o.eventThreshold?this.events:null,u=a<o.attachmentThreshold,c=a<o.drawOrderThreshold,l=o.animationLast,h=o.getAnimationTime(),d=o.animation.timelines.length,p=o.animation.timelines,f=o.alpha*n.interruptAlpha,m=f*(1-a);if(r==t.MixBlend.add)for(var g=0;g<d;g++)p[g].apply(i,l,h,s,m,r,t.MixDirection.mixOut);else{var v=o.timelineMode,y=o.timelineHoldMix,_=0==o.timelinesRotation.length;_&&t.Utils.setArraySize(o.timelinesRotation,d<<1,null);var w=o.timelinesRotation;o.totalAlpha=0;for(g=0;g<d;g++){var b=p[g],x=t.MixDirection.mixOut,C=void 0,S=0;switch(v[g]){case e.SUBSEQUENT:if(!c&&b instanceof t.DrawOrderTimeline)continue;C=r,S=m;break;case e.FIRST:C=t.MixBlend.setup,S=m;break;case e.HOLD_SUBSEQUENT:C=r,S=f;break;case e.HOLD_FIRST:C=t.MixBlend.setup,S=f;break;default:C=t.MixBlend.setup;var k=y[g];S=f*Math.max(0,1-k.mixTime/k.mixDuration);break}o.totalAlpha+=S,b instanceof t.RotateTimeline?this.applyRotateTimeline(b,i,h,S,C,w,g<<1,_):b instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(b,i,h,C,u):(t.Utils.webkit602BugfixHelper(S,r),c&&b instanceof t.DrawOrderTimeline&&C==t.MixBlend.setup&&(x=t.MixDirection.mixIn),b.apply(i,l,h,s,S,C,x))}}return n.mixDuration>0&&this.queueEvents(o,h),this.events.length=0,o.nextAnimationLast=h,o.nextTrackLast=o.trackTime,a},e.prototype.applyAttachmentTimeline=function(n,i,r,o,a){var s=i.slots[n.slotIndex];if(s.bone.active){var u,c=n.frames;if(r<c[0])o!=t.MixBlend.setup&&o!=t.MixBlend.first||this.setAttachment(i,s,s.data.attachmentName,a);else u=r>=c[c.length-1]?c.length-1:t.Animation.binarySearch(c,r)-1,this.setAttachment(i,s,n.attachmentNames[u],a);s.attachmentState<=this.unkeyedState&&(s.attachmentState=this.unkeyedState+e.SETUP)}},e.prototype.setAttachment=function(t,n,i,r){n.attachment=null==i?null:t.getAttachment(n.data.index,i),r&&(n.attachmentState=this.unkeyedState+e.CURRENT)},e.prototype.applyRotateTimeline=function(e,n,i,r,o,a,s,u){if(u&&(a[s]=0),1!=r){var c=e,l=c.frames,h=n.bones[c.boneIndex];if(h.active){var d=0,p=0;if(i<l[0])switch(o){case t.MixBlend.setup:h.rotation=h.data.rotation;default:return;case t.MixBlend.first:d=h.rotation,p=h.data.rotation}else if(d=o==t.MixBlend.setup?h.data.rotation:h.rotation,i>=l[l.length-t.RotateTimeline.ENTRIES])p=h.data.rotation+l[l.length+t.RotateTimeline.PREV_ROTATION];else{var f=t.Animation.binarySearch(l,i,t.RotateTimeline.ENTRIES),m=l[f+t.RotateTimeline.PREV_ROTATION],g=l[f],v=c.getCurvePercent((f>>1)-1,1-(i-g)/(l[f+t.RotateTimeline.PREV_TIME]-g));p=l[f+t.RotateTimeline.ROTATION]-m,p-=360*(16384-(16384.499999999996-p/360|0)),p=m+p*v+h.data.rotation,p-=360*(16384-(16384.499999999996-p/360|0))}var y=0,_=p-d;if(_-=360*(16384-(16384.499999999996-_/360|0)),0==_)y=a[s];else{var w=0,b=0;u?(w=0,b=_):(w=a[s],b=a[s+1]);var x=_>0,C=w>=0;t.MathUtils.signum(b)!=t.MathUtils.signum(_)&&Math.abs(b)<=90&&(Math.abs(w)>180&&(w+=360*t.MathUtils.signum(w)),C=x),y=_+w-w%360,C!=x&&(y+=360*t.MathUtils.signum(w)),a[s]=y}a[s+1]=_,d+=y*r,h.rotation=d-360*(16384-(16384.499999999996-d/360|0))}}else e.apply(n,0,i,null,1,o,t.MixDirection.mixIn)},e.prototype.queueEvents=function(t,e){for(var n=t.animationStart,i=t.animationEnd,r=i-n,o=t.trackLast%r,a=this.events,s=0,u=a.length;s<u;s++){var c=a[s];if(c.time<o)break;c.time>i||this.queue.event(t,c)}var l=!1;for(l=t.loop?0==r||o>t.trackTime%r:e>=i&&t.animationLast<i,l&&this.queue.complete(t);s<u;s++){var h=a[s];h.time<n||this.queue.event(t,a[s])}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);var n=e;while(1){var i=n.mixingFrom;if(null==i)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,n){var i=this.expandToIndex(t);this.tracks[t]=e,null!=i&&(n&&this.queue.interrupt(i),e.mixingFrom=i,i.mixingTo=e,e.mixTime=0,null!=i.mixingFrom&&i.mixDuration>0&&(e.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,n){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,i,n)},e.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var i=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,i=!1):this.disposeNext(r));var o=this.trackEntry(t,e,n,r);return this.setCurrent(t,o,i),this.queue.drain(),o},e.prototype.addAnimation=function(t,e,n,i){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,n,i)},e.prototype.addAnimationWith=function(t,e,n,i){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)while(null!=r.next)r=r.next;var o=this.trackEntry(t,e,n,r);if(null==r)this.setCurrent(t,o,!0),this.queue.drain();else if(r.next=o,i<=0){var a=r.animationEnd-r.animationStart;0!=a?(r.loop?i+=a*(1+(r.trackTime/a|0)):i+=Math.max(a,r.trackTime),i-=this.data.getMix(r.animation,e)):i=r.trackTime}return o.delay=i,o},e.prototype.setEmptyAnimation=function(t,n){var i=this.setAnimationWith(t,e.emptyAnimation,!1);return i.mixDuration=n,i.trackEnd=n,i},e.prototype.addEmptyAnimation=function(t,n,i){i<=0&&(i-=n);var r=this.addAnimationWith(t,e.emptyAnimation,!1,i);return r.mixDuration=n,r.trackEnd=n,r},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,i=this.tracks.length;n<i;n++){var r=this.tracks[n];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(e,n,i,r){var o=this.trackEntryPool.obtain();return o.trackIndex=e,o.animation=n,o.loop=i,o.holdPrevious=!1,o.eventThreshold=0,o.attachmentThreshold=0,o.drawOrderThreshold=0,o.animationStart=0,o.animationEnd=n.duration,o.animationLast=-1,o.nextAnimationLast=-1,o.delay=0,o.trackTime=0,o.trackLast=-1,o.nextTrackLast=-1,o.trackEnd=Number.MAX_VALUE,o.timeScale=1,o.alpha=1,o.interruptAlpha=1,o.mixTime=0,o.mixDuration=null==r?0:this.data.getMix(r.animation,n),o.mixBlend=t.MixBlend.replace,o},e.prototype.disposeNext=function(t){var e=t.next;while(null!=e)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,n=this.tracks.length;e<n;e++){var i=this.tracks[e];if(null!=i){while(null!=i.mixingFrom)i=i.mixingFrom;do{null!=i.mixingFrom&&i.mixBlend==t.MixBlend.add||this.computeHold(i),i=i.mixingTo}while(null!=i)}}},e.prototype.computeHold=function(n){var i=n.mixingTo,r=n.animation.timelines,o=n.animation.timelines.length,a=t.Utils.setArraySize(n.timelineMode,o);n.timelineHoldMix.length=0;var s=t.Utils.setArraySize(n.timelineHoldMix,o),u=this.propertyIDs;if(null!=i&&i.holdPrevious)for(var c=0;c<o;c++)a[c]=u.add(r[c].getPropertyId())?e.HOLD_FIRST:e.HOLD_SUBSEQUENT;else t:for(c=0;c<o;c++){var l=r[c],h=l.getPropertyId();if(u.add(h))if(null==i||l instanceof t.AttachmentTimeline||l instanceof t.DrawOrderTimeline||l instanceof t.EventTimeline||!i.animation.hasTimeline(h))a[c]=e.FIRST;else{for(var d=i.mixingTo;null!=d;d=d.mixingTo)if(!d.animation.hasTimeline(h)){if(n.mixDuration>0){a[c]=e.HOLD_MIX,s[c]=d;continue t}break}a[c]=e.HOLD_FIRST}else a[c]=e.SUBSEQUENT}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,n,i){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,n,i)},e.prototype.addAnimationByName=function(t,n,i,r){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,n,i,r)},e.prototype.hasAnimation=function(t){var e=this.data.skeletonData.findAnimation(t);return null!==e},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD_SUBSEQUENT=2,e.HOLD_FIRST=3,e.HOLD_MIX=4,e.SETUP=1,e.CURRENT=2,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}();t.AnimationState=e;var n=function(){function e(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!1,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}();t.TrackEntry=n;var i,r=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(i.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(i.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(i.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(i.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(i.complete),this.objects.push(t)},e.prototype.event=function(t,e){this.objects.push(i.event),this.objects.push(t),this.objects.push(e)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,n=this.animState.listeners,r=0;r<e.length;r+=2){var o=e[r],a=e[r+1];switch(o){case i.start:null!=a.listener&&a.listener.start&&a.listener.start(a);for(var s=0;s<n.length;s++)n[s].start&&n[s].start(a);a.onStart&&this.deprecateStuff()&&a.onStart(a.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(a.trackIndex);break;case i.interrupt:null!=a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(s=0;s<n.length;s++)n[s].interrupt&&n[s].interrupt(a);break;case i.end:null!=a.listener&&a.listener.end&&a.listener.end(a);for(s=0;s<n.length;s++)n[s].end&&n[s].end(a);a.onEnd&&this.deprecateStuff()&&a.onEnd(a.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(a.trackIndex);case i.dispose:null!=a.listener&&a.listener.dispose&&a.listener.dispose(a);for(s=0;s<n.length;s++)n[s].dispose&&n[s].dispose(a);this.animState.trackEntryPool.free(a);break;case i.complete:null!=a.listener&&a.listener.complete&&a.listener.complete(a);for(s=0;s<n.length;s++)n[s].complete&&n[s].complete(a);var u=t.MathUtils.toInt(a.loopsCount());a.onComplete&&this.deprecateStuff()&&a.onComplete(a.trackIndex,u),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(a.trackIndex,u);break;case i.event:var c=e[2+r++];null!=a.listener&&a.listener.event&&a.listener.event(a,c);for(s=0;s<n.length;s++)n[s].event&&n[s].event(a,c);a.onEvent&&this.deprecateStuff()&&a.onEvent(a.trackIndex,c),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(a.trackIndex,c);break}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}();t.EventQueue=r,function(t){t[t["start"]=0]="start",t[t["interrupt"]=1]="interrupt",t[t["end"]=2]="end",t[t["dispose"]=3]="dispose",t[t["complete"]=4]="complete",t[t["event"]=5]="event"}(i=t.EventType||(t.EventType={}));var o=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter=o})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,n){var i=this.skeletonData.findAnimation(t);if(null==i)throw new Error("Animation not found: "+t);var r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(i,r,n)},t.prototype.setMixByName=function(e,n,i){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,n,i)},t.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var i=t.name+"."+e.name;this.animationToMixTime[i]=n},t.prototype.getMix=function(t,e){var n=t.name+"."+e.name,i=this.animationToMixTime[n];return void 0===i?this.defaultMix:i},t.deprecatedWarning1=!1,t}();t.AnimationStateData=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,n,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (region attachment: "+n+")");var o=new t.RegionAttachment(n);return o.region=r,o},e.prototype.newMeshAttachment=function(e,n,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+n+")");var o=new t.MeshAttachment(n);return o.region=r,o},e.prototype.newBoundingBoxAttachment=function(e,n){return new t.BoundingBoxAttachment(n)},e.prototype.newPathAttachment=function(e,n){return new t.PathAttachment(n)},e.prototype.newPointAttachment=function(e,n){return new t.PointAttachment(n)},e.prototype.newClippingAttachment=function(e,n){return new t.ClippingAttachment(n)},e}();t.AtlasAttachmentLoader=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){(function(t){t[t["Normal"]=0]="Normal",t[t["Additive"]=1]="Additive",t[t["Multiply"]=2]="Multiply",t[t["Screen"]=3]="Screen"})(t.BlendMode||(t.BlendMode={}))})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(t,e,n){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(n,i,r,o,a,s,u){this.ax=n,this.ay=i,this.arotation=r,this.ascaleX=o,this.ascaleY=a,this.ashearX=s,this.ashearY=u,this.appliedValid=!0;var c=this.parent,l=this.matrix,h=this.skeleton.scaleX,d=e.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==c){var p=this.skeleton,f=r+90+u;return l.a=t.MathUtils.cosDeg(r+s)*o*h,l.c=t.MathUtils.cosDeg(f)*a*h,l.b=t.MathUtils.sinDeg(r+s)*o*d,l.d=t.MathUtils.sinDeg(f)*a*d,l.tx=n*h+p.x,void(l.ty=i*d+p.y)}var m=c.matrix.a,g=c.matrix.c,v=c.matrix.b,y=c.matrix.d;switch(l.tx=m*n+g*i+c.matrix.tx,l.ty=v*n+y*i+c.matrix.ty,this.data.transformMode){case t.TransformMode.Normal:f=r+90+u;var _=t.MathUtils.cosDeg(r+s)*o,w=t.MathUtils.cosDeg(f)*a,b=t.MathUtils.sinDeg(r+s)*o,x=t.MathUtils.sinDeg(f)*a;return l.a=m*_+g*b,l.c=m*w+g*x,l.b=v*_+y*b,void(l.d=v*w+y*x);case t.TransformMode.OnlyTranslation:f=r+90+u;l.a=t.MathUtils.cosDeg(r+s)*o,l.c=t.MathUtils.cosDeg(f)*a,l.b=t.MathUtils.sinDeg(r+s)*o,l.d=t.MathUtils.sinDeg(f)*a;break;case t.TransformMode.NoRotationOrReflection:var C=m*m+v*v,S=0;C>1e-4?(m/=this.skeleton.scaleX,v/=this.skeleton.scaleY,C=Math.abs(m*y-g*v)/C,g=v*C,y=m*C,S=Math.atan2(v,m)*t.MathUtils.radDeg):(m=0,v=0,S=90-Math.atan2(y,g)*t.MathUtils.radDeg);var k=r+s-S,T=r+u-S+90;_=t.MathUtils.cosDeg(k)*o,w=t.MathUtils.cosDeg(T)*a,b=t.MathUtils.sinDeg(k)*o,x=t.MathUtils.sinDeg(T)*a;l.a=m*_-g*b,l.c=m*w-g*x,l.b=v*_+y*b,l.d=v*w+y*x;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var R=t.MathUtils.cosDeg(r),M=t.MathUtils.sinDeg(r),A=(m*R+g*M)/h,I=(v*R+y*M)/d;C=Math.sqrt(A*A+I*I);C>1e-5&&(C=1/C),A*=C,I*=C,C=Math.sqrt(A*A+I*I),this.data.transformMode==t.TransformMode.NoScale&&m*y-g*v<0!=(e.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(C=-C);var P=Math.PI/2+Math.atan2(I,A),E=Math.cos(P)*C,O=Math.sin(P)*C;_=t.MathUtils.cosDeg(s)*o,w=t.MathUtils.cosDeg(90+u)*a,b=t.MathUtils.sinDeg(s)*o,x=t.MathUtils.sinDeg(90+u)*a;l.a=A*_+E*b,l.c=A*w+E*x,l.b=I*_+O*b,l.d=I*w+O*x;break}l.a*=h,l.c*=h,l.b*=d,l.d*=d},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,n=this.matrix;if(null==e)return this.ax=n.tx,this.ay=n.ty,this.arotation=Math.atan2(n.b,n.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(n.a*n.a+n.b*n.b),this.ascaleY=Math.sqrt(n.c*n.c+n.d*n.d),this.ashearX=0,void(this.ashearY=Math.atan2(n.a*n.c+n.b*n.d,n.a*n.d-n.b*n.c)*t.MathUtils.radDeg);var i=e.matrix,r=1/(i.a*i.d-i.b*i.c),o=n.tx-i.tx,a=n.ty-i.ty;this.ax=o*i.d*r-a*i.c*r,this.ay=a*i.a*r-o*i.b*r;var s=r*i.d,u=r*i.a,c=r*i.c,l=r*i.b,h=s*n.a-c*n.b,d=s*n.c-c*n.d,p=u*n.b-l*n.a,f=u*n.d-l*n.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(h*h+p*p),this.ascaleX>1e-4){var m=h*f-d*p;this.ascaleY=m/this.ascaleX,this.ashearY=Math.atan2(h*d+p*f,m)*t.MathUtils.radDeg,this.arotation=Math.atan2(p,h)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+f*f),this.ashearY=0,this.arotation=90-Math.atan2(f,d)*t.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.matrix,n=e.a,i=e.c,r=e.b,o=e.d,a=1/(n*o-i*r),s=t.x-e.tx,u=t.y-e.ty;return t.x=s*o*a-u*i*a,t.y=u*n*a-s*r*a,t},e.prototype.localToWorld=function(t){var e=this.matrix,n=t.x,i=t.y;return t.x=n*e.a+i*e.c+e.tx,t.y=n*e.b+i*e.d+e.ty,t},e.prototype.worldToLocalRotation=function(e){var n=t.MathUtils.sinDeg(e),i=t.MathUtils.cosDeg(e),r=this.matrix;return Math.atan2(r.a*n-r.b*i,r.d*i-r.c*n)*t.MathUtils.radDeg},e.prototype.localToWorldRotation=function(e){var n=t.MathUtils.sinDeg(e),i=t.MathUtils.cosDeg(e),r=this.matrix;return Math.atan2(i*r.b+n*r.d,i*r.a+n*r.c)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var n=this.matrix,i=n.a,r=n.c,o=n.b,a=n.d,s=t.MathUtils.cosDeg(e),u=t.MathUtils.sinDeg(e);n.a=s*i-u*o,n.c=s*r-u*a,n.b=u*i+s*o,n.d=u*r+s*a,this.appliedValid=!1},e.yDown=!1,e}();t.Bone=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e,n=function(){function n(n,i,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=e.Normal,this.skinRequired=!1,this.color=new t.Color,n<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");this.index=n,this.name=i,this.parent=r}return n}();t.BoneData=n,function(t){t[t["Normal"]=0]="Normal",t[t["OnlyTranslation"]=1]="OnlyTranslation",t[t["NoRotationOrReflection"]=2]="NoRotationOrReflection",t[t["NoScale"]=3]="NoScale",t[t["NoScaleOrReflection"]=4]="NoScaleOrReflection"}(e=t.TransformMode||(t.TransformMode={}))})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function t(t,e,n){this.name=t,this.order=e,this.skinRequired=n}return t}();t.ConstraintData=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function t(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}return t}();t.Event=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function t(t){this.name=t}return t}();t.EventData=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}},e.prototype.apply1=function(e,n,i,r,o,a,s){e.appliedValid||e.updateAppliedTransform();var u=e.parent.matrix,c=u.a,l=u.c,h=u.b,d=u.d,p=-e.ashearX-e.arotation,f=0,m=0;switch(e.data.transformMode){case t.TransformMode.OnlyTranslation:f=n-e.worldX,m=i-e.worldY;break;case t.TransformMode.NoRotationOrReflection:var g=Math.abs(c*d-l*h)/(c*c+h*h),v=c/e.skeleton.scaleX,y=h/e.skeleton.scaleY;l=-y*g*e.skeleton.scaleX,d=v*g*e.skeleton.scaleY,p+=Math.atan2(y,v)*t.MathUtils.radDeg;default:var _=n-u.tx,w=i-u.ty,b=c*d-l*h;f=(_*d-w*l)/b-e.ax,m=(w*c-_*h)/b-e.ay}p+=Math.atan2(m,f)*t.MathUtils.radDeg,e.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var x=e.ascaleX,C=e.ascaleY;if(r||o){switch(e.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:f=n-e.worldX,m=i-e.worldY}var S=e.data.length*x,k=Math.sqrt(f*f+m*m);if(r&&k<S||o&&k>S&&S>1e-4){g=(k/S-1)*s+1;x*=g,a&&(C*=g)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+p*s,x,C,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,n,i,r,o,a,s,u){if(0!=u){e.appliedValid||e.updateAppliedTransform(),n.appliedValid||n.updateAppliedTransform();var c=e.ax,l=e.ay,h=e.ascaleX,d=h,p=e.ascaleY,f=n.ascaleX,m=e.matrix,g=0,v=0,y=0;h<0?(h=-h,g=180,y=-1):(g=0,y=1),p<0&&(p=-p,y=-y),f<0?(f=-f,v=180):v=0;var _=n.ax,w=0,b=0,x=0,C=m.a,S=m.c,k=m.b,T=m.d,R=Math.abs(h-p)<=1e-4;R?(w=n.ay,b=C*_+S*w+m.tx,x=k*_+T*w+m.ty):(w=0,b=C*_+m.tx,x=k*_+m.ty);var M=e.parent.matrix;C=M.a,S=M.c,k=M.b,T=M.d;var A,I,P=1/(C*T-S*k),E=b-M.tx,O=x-M.ty,D=(E*T-O*S)*P-c,V=(O*C-E*k)*P-l,B=Math.sqrt(D*D+V*V),F=n.data.length*f;if(B<1e-4)return this.apply1(e,i,r,!1,a,!1,u),void n.updateWorldTransformWith(_,w,0,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY);E=i-M.tx,O=r-M.ty;var N=(E*T-O*S)*P-c,L=(O*C-E*k)*P-l,j=N*N+L*L;if(0!=s){s*=h*(f+1)/2;var U=Math.sqrt(j),X=U-B-F*h+s;if(X>0){var z=Math.min(1,X/(2*s))-1;z=(X-s*(1-z*z))/U,N-=z*N,L-=z*L,j=N*N+L*L}}t:if(R){F*=h;var G=(j-B*B-F*F)/(2*B*F);G<-1?G=-1:G>1&&(G=1,a&&(d*=(Math.sqrt(j)/(B+F)-1)*u+1)),I=Math.acos(G)*o,C=B+F*G,S=F*Math.sin(I),A=Math.atan2(L*C-N*S,N*C+L*S)}else{C=h*F,S=p*F;var W=C*C,q=S*S,H=Math.atan2(L,N);k=q*B*B+W*j-W*q;var Y=-2*q*B,Q=q-W;if(T=Y*Y-4*Q*k,T>=0){var Z=Math.sqrt(T);Y<0&&(Z=-Z),Z=-(Y+Z)/2;var $=Z/Q,K=k/Z,J=Math.abs($)<Math.abs(K)?$:K;if(J*J<=j){O=Math.sqrt(j-J*J)*o,A=H-Math.atan2(O,J),I=Math.atan2(O/p,(J-B)/h);break t}}var tt=t.MathUtils.PI,et=B-C,nt=et*et,it=0,rt=0,ot=B+C,at=ot*ot,st=0;k=-C*B/(W-q),k>=-1&&k<=1&&(k=Math.acos(k),E=C*Math.cos(k)+B,O=S*Math.sin(k),T=E*E+O*O,T<nt&&(tt=k,nt=T,et=E,it=O),T>at&&(rt=k,at=T,ot=E,st=O)),j<=(nt+at)/2?(A=H-Math.atan2(it*o,et),I=tt*o):(A=H-Math.atan2(st*o,ot),I=rt*o)}var ut=Math.atan2(w,_)*y,ct=e.arotation;A=(A-ut)*t.MathUtils.radDeg+g-ct,A>180?A-=360:A<-180&&(A+=360),e.updateWorldTransformWith(c,l,ct+A*u,d,e.ascaleY,0,0),ct=n.arotation,I=((I+ut)*t.MathUtils.radDeg-n.ashearX)*y+v-ct,I>180?I-=360:I<-180&&(I+=360),n.updateWorldTransformWith(_,w,ct+I*u,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY)}else n.updateWorldTransform()},e}();t.IkConstraint=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return i(e,t),e}(t.ConstraintData);t.IkConstraintData=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,i=t.bones.length;n<i;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var n=this.target.getAttachment();if(n instanceof t.PathAttachment){var i=this.rotateMix,r=this.translateMix,o=r>0,a=i>0;if(o||a){var s=this.data,u=s.spacingMode,c=u==t.SpacingMode.Length,l=s.rotateMode,h=l==t.RotateMode.Tangent,d=l==t.RotateMode.ChainScale,p=this.bones.length,f=h?p:p+1,m=this.bones,g=t.Utils.setArraySize(this.spaces,f),v=null,y=this.spacing;if(d||c){d&&(v=t.Utils.setArraySize(this.lengths,p));for(var _=0,w=f-1;_<w;){var b=m[_],x=b.data.length;if(x<e.epsilon)d&&(v[_]=0),g[++_]=0;else{var C=x*b.matrix.a,S=x*b.matrix.b,k=Math.sqrt(C*C+S*S);d&&(v[_]=k),g[++_]=(c?x+y:y)*k/x}}}else for(_=1;_<f;_++)g[_]=y;var T=this.computeWorldPositions(n,f,h,s.positionMode==t.PositionMode.Percent,u==t.SpacingMode.Percent),R=T[0],M=T[1],A=s.offsetRotation,I=!1;if(0==A)I=l==t.RotateMode.Chain;else{I=!1;var P=this.target.bone.matrix;A*=P.a*P.d-P.b*P.c>0?t.MathUtils.degRad:-t.MathUtils.degRad}for(_=0,P=3;_<p;_++,P+=3){b=m[_];var E=b.matrix;E.tx+=(R-E.tx)*r,E.ty+=(M-E.ty)*r;C=T[P],S=T[P+1];var O=C-R,D=S-M;if(d){var V=v[_];if(0!=V){var B=(Math.sqrt(O*O+D*D)/V-1)*i+1;E.a*=B,E.b*=B}}if(R=C,M=S,a){var F=E.a,N=E.c,L=E.b,j=E.d,U=0,X=0,z=0;if(U=h?T[P-1]:0==g[_+1]?T[P+2]:Math.atan2(D,O),U-=Math.atan2(L,F),I){X=Math.cos(U),z=Math.sin(U);var G=b.data.length;R+=(G*(X*F-z*L)-O)*i,M+=(G*(z*F+X*L)-D)*i}else U+=A;U>t.MathUtils.PI?U-=t.MathUtils.PI2:U<-t.MathUtils.PI&&(U+=t.MathUtils.PI2),U*=i,X=Math.cos(U),z=Math.sin(U),E.a=X*F-z*L,E.c=X*N-z*j,E.b=z*F+X*L,E.d=z*N+X*j}b.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(n,i,r,o,a){var s=this.target,u=this.position,c=this.spaces,l=t.Utils.setArraySize(this.positions,3*i+2),h=null,d=n.closed,p=n.worldVerticesLength,f=p/6,m=e.NONE;if(!n.constantSpeed){var g=n.lengths;f-=d?1:2;var v=g[f];if(o&&(u*=v),a)for(var y=0;y<i;y++)c[y]*=v;h=t.Utils.setArraySize(this.world,8);y=0;for(var _=0,w=0;y<i;y++,_+=3){var b=c[y];u+=b;var x=u;if(d)x%=v,x<0&&(x+=v),w=0;else{if(x<0){m!=e.BEFORE&&(m=e.BEFORE,n.computeWorldVertices(s,2,4,h,0,2)),this.addBeforePosition(x,h,0,l,_);continue}if(x>v){m!=e.AFTER&&(m=e.AFTER,n.computeWorldVertices(s,p-6,4,h,0,2)),this.addAfterPosition(x-v,h,0,l,_);continue}}for(;;w++){var C=g[w];if(!(x>C)){if(0==w)x/=C;else{var S=g[w-1];x=(x-S)/(C-S)}break}}w!=m&&(m=w,d&&w==f?(n.computeWorldVertices(s,p-4,4,h,0,2),n.computeWorldVertices(s,0,4,h,4,2)):n.computeWorldVertices(s,6*w+2,8,h,0,2)),this.addCurvePosition(x,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],l,_,r||y>0&&0==b)}return l}d?(p+=2,h=t.Utils.setArraySize(this.world,p),n.computeWorldVertices(s,2,p-4,h,0,2),n.computeWorldVertices(s,0,2,h,p-4,2),h[p-2]=h[0],h[p-1]=h[1]):(f--,p-=4,h=t.Utils.setArraySize(this.world,p),n.computeWorldVertices(s,2,p,h,0,2));for(var k=t.Utils.setArraySize(this.curves,f),T=0,R=h[0],M=h[1],A=0,I=0,P=0,E=0,O=0,D=0,V=0,B=0,F=0,N=0,L=0,j=0,U=0,X=0,z=(y=0,2);y<f;y++,z+=6)A=h[z],I=h[z+1],P=h[z+2],E=h[z+3],O=h[z+4],D=h[z+5],V=.1875*(R-2*A+P),B=.1875*(M-2*I+E),F=.09375*(3*(A-P)-R+O),N=.09375*(3*(I-E)-M+D),L=2*V+F,j=2*B+N,U=.75*(A-R)+V+.16666667*F,X=.75*(I-M)+B+.16666667*N,T+=Math.sqrt(U*U+X*X),U+=L,X+=j,L+=F,j+=N,T+=Math.sqrt(U*U+X*X),U+=L,X+=j,T+=Math.sqrt(U*U+X*X),U+=L+F,X+=j+N,T+=Math.sqrt(U*U+X*X),k[y]=T,R=O,M=D;if(o&&(u*=T),a)for(y=0;y<i;y++)c[y]*=T;for(var G=this.segments,W=0,q=(y=0,_=0,w=0,0);y<i;y++,_+=3){b=c[y];u+=b;x=u;if(d)x%=T,x<0&&(x+=T),w=0;else{if(x<0){this.addBeforePosition(x,h,0,l,_);continue}if(x>T){this.addAfterPosition(x-T,h,p-4,l,_);continue}}for(;;w++){var H=k[w];if(!(x>H)){if(0==w)x/=H;else{S=k[w-1];x=(x-S)/(H-S)}break}}if(w!=m){m=w;var Y=6*w;for(R=h[Y],M=h[Y+1],A=h[Y+2],I=h[Y+3],P=h[Y+4],E=h[Y+5],O=h[Y+6],D=h[Y+7],V=.03*(R-2*A+P),B=.03*(M-2*I+E),F=.006*(3*(A-P)-R+O),N=.006*(3*(I-E)-M+D),L=2*V+F,j=2*B+N,U=.3*(A-R)+V+.16666667*F,X=.3*(I-M)+B+.16666667*N,W=Math.sqrt(U*U+X*X),G[0]=W,Y=1;Y<8;Y++)U+=L,X+=j,L+=F,j+=N,W+=Math.sqrt(U*U+X*X),G[Y]=W;U+=L,X+=j,W+=Math.sqrt(U*U+X*X),G[8]=W,U+=L+F,X+=j+N,W+=Math.sqrt(U*U+X*X),G[9]=W,q=0}for(x*=W;;q++){var Q=G[q];if(!(x>Q)){if(0==q)x/=Q;else{S=G[q-1];x=q+(x-S)/(Q-S)}break}}this.addCurvePosition(.1*x,R,M,A,I,P,E,O,D,l,_,r||y>0&&0==b)}return l},e.prototype.addBeforePosition=function(t,e,n,i,r){var o=e[n],a=e[n+1],s=e[n+2]-o,u=e[n+3]-a,c=Math.atan2(u,s);i[r]=o+t*Math.cos(c),i[r+1]=a+t*Math.sin(c),i[r+2]=c},e.prototype.addAfterPosition=function(t,e,n,i,r){var o=e[n+2],a=e[n+3],s=o-e[n],u=a-e[n+1],c=Math.atan2(u,s);i[r]=o+t*Math.cos(c),i[r+1]=a+t*Math.sin(c),i[r+2]=c},e.prototype.addCurvePosition=function(t,e,n,i,r,o,a,s,u,c,l,h){(0==t||isNaN(t))&&(t=1e-4);var d=t*t,p=d*t,f=1-t,m=f*f,g=m*f,v=f*t,y=3*v,_=f*y,w=y*t,b=e*g+i*_+o*w+s*p,x=n*g+r*_+a*w+u*p;c[l]=b,c[l+1]=x,h&&(c[l+2]=Math.atan2(x-(n*m+r*v*2+a*d),b-(e*m+i*v*2+o*d)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}();t.PathConstraint=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n}return i(e,t),e}(t.ConstraintData);t.PathConstraintData=e,function(t){t[t["Fixed"]=0]="Fixed",t[t["Percent"]=1]="Percent"}(t.PositionMode||(t.PositionMode={})),function(t){t[t["Length"]=0]="Length",t[t["Fixed"]=1]="Fixed",t[t["Percent"]=2]="Percent"}(t.SpacingMode||(t.SpacingMode={})),function(t){t[t["Tangent"]=0]="Tangent",t[t["Chain"]=1]="Chain",t[t["ChainScale"]=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var n=0;n<e.bones.length;n++){var i=e.bones[n],r=void 0;if(null==i.parent)r=new t.Bone(i,this,null);else{var o=this.bones[i.parent.index];r=new t.Bone(i,this,o),o.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(n=0;n<e.slots.length;n++){var a=e.slots[n],s=(r=this.bones[a.boneData.index],new t.Slot(a,r));this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(n=0;n<e.ikConstraints.length;n++){var u=e.ikConstraints[n];this.ikConstraints.push(new t.IkConstraint(u,this))}this.transformConstraints=new Array;for(n=0;n<e.transformConstraints.length;n++){var c=e.transformConstraints[n];this.transformConstraints.push(new t.TransformConstraint(c,this))}this.pathConstraints=new Array;for(n=0;n<e.pathConstraints.length;n++){var l=e.pathConstraints[n];this.pathConstraints.push(new t.PathConstraint(l,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){var t=this._updateCache;t.length=0,this.updateCacheReset.length=0;for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];r.sorted=r.data.skinRequired,r.active=!r.sorted}if(null!=this.skin){var o=this.skin.bones;for(n=0,i=this.skin.bones.length;n<i;n++){r=this.bones[o[n].index];do{r.sorted=!1,r.active=!0,r=r.parent}while(null!=r)}}var a=this.ikConstraints,s=this.transformConstraints,u=this.pathConstraints,c=a.length,l=s.length,h=u.length,d=c+l+h;t:for(n=0;n<d;n++){for(var p=0;p<c;p++){var f=a[p];if(f.data.order==n){this.sortIkConstraint(f);continue t}}for(p=0;p<l;p++){f=s[p];if(f.data.order==n){this.sortTransformConstraint(f);continue t}}for(p=0;p<h;p++){f=u[p];if(f.data.order==n){this.sortPathConstraint(f);continue t}}}for(n=0,i=e.length;n<i;n++)this.sortBone(e[n])},e.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var n=e.target;this.sortBone(n);var i=e.bones,r=i[0];if(this.sortBone(r),i.length>1){var o=i[i.length-1];this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}this._updateCache.push(e),this.sortReset(r.children),i[i.length-1].sorted=!0}},e.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var n=e.target,i=n.data.index,r=n.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,i,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,r);for(var o=0,a=this.data.skins.length;o<a;o++)this.sortPathConstraintAttachment(this.data.skins[o],i,r);var s=n.getAttachment();s instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(s,r);var u=e.bones,c=u.length;for(o=0;o<c;o++)this.sortBone(u[o]);this._updateCache.push(e);for(o=0;o<c;o++)this.sortReset(u[o].children);for(o=0;o<c;o++)u[o].sorted=!0}},e.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){this.sortBone(e.target);var n=e.bones,i=n.length;if(e.data.local)for(var r=0;r<i;r++){var o=n[r];this.sortBone(o.parent),this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}else for(r=0;r<i;r++)this.sortBone(n[r]);this._updateCache.push(e);for(var a=0;a<i;a++)this.sortReset(n[a].children);for(a=0;a<i;a++)n[a].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,e,n){var i=t.attachments[e];if(i)for(var r in i)this.sortPathConstraintAttachmentWith(i[r],n)},e.prototype.sortPathConstraintAttachmentWith=function(e,n){if(e instanceof t.PathAttachment){var i=e.bones;if(null==i)this.sortBone(n);else{var r=this.bones,o=0;while(o<i.length)for(var a=i[o++],s=o+a;o<s;o++){var u=i[o];this.sortBone(r[u])}}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var i=t[e];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}var r=this._updateCache;for(e=0,n=r.length;e<n;e++)r[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var i=this.ikConstraints;for(e=0,n=i.length;e<n;e++){var r=i[e];r.mix=r.data.mix,r.softness=r.data.softness,r.bendDirection=r.data.bendDirection,r.compress=r.data.compress,r.stretch=r.data.stretch}var o=this.transformConstraints;for(e=0,n=o.length;e<n;e++){r=o[e];var a=r.data;r.rotateMix=a.rotateMix,r.translateMix=a.translateMix,r.scaleMix=a.scaleMix,r.shearMix=a.shearMix}var s=this.pathConstraints;for(e=0,n=s.length;e<n;e++){r=s[e],a=r.data;r.position=a.position,r.spacing=a.spacing,r.rotateMix=a.rotateMix,r.translateMix=a.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var n=0,i=e.length;n<i;n++)e[n].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].data.name==t)return n;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n],o=r.data.attachmentName;if(null!=o){var a=t.getAttachment(n,o);null!=a&&r.setAttachment(a)}}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,i=0,r=n.length;i<r;i++){var o=n[i];if(o.data.name==t){var a=null;if(null!=e&&(a=this.getAttachment(i,e),null==a))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(a)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.data.name==t)return r}return null},e.prototype.getBounds=function(e,n,i){if(void 0===i&&(i=new Array(2)),null==e)throw new Error("offset cannot be null.");if(null==n)throw new Error("size cannot be null.");for(var r=this.drawOrder,o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=0,l=r.length;c<l;c++){var h=r[c];if(h.bone.active){var d=0,p=null,f=h.getAttachment();if(f instanceof t.RegionAttachment)d=8,p=t.Utils.setArraySize(i,d,0),f.computeWorldVertices(h.bone,p,0,2);else if(f instanceof t.MeshAttachment){var m=f;d=m.worldVerticesLength,p=t.Utils.setArraySize(i,d,0),m.computeWorldVertices(h,0,d,p,0,2)}if(null!=p)for(var g=0,v=p.length;g<v;g+=2){var y=p[g],_=p[g+1];o=Math.min(o,y),a=Math.min(a,_),s=Math.max(s,y),u=Math.max(u,_)}}}e.set(o,a),n.set(s-o,u-a)},e.prototype.update=function(t){this.time+=t},Object.defineProperty(e.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!1,configurable:!0}),e.deprecatedWarning1=!1,e}();t.Skeleton=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var r=this.scale,o=new t.SkeletonData;o.name="";var a=new n(i);if(o.hash=a.readString(),o.version=a.readString(),"3.8.75"===o.version){var s="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(s)}o.x=a.readFloat(),o.y=a.readFloat(),o.width=a.readFloat(),o.height=a.readFloat();var u=a.readBoolean();u&&(o.fps=a.readFloat(),o.imagesPath=a.readString(),o.audioPath=a.readString());var c=0;c=a.readInt(!0);for(var l=0;l<c;l++)a.strings.push(a.readString());c=a.readInt(!0);for(l=0;l<c;l++){var h=a.readString(),d=0==l?null:o.bones[a.readInt(!0)],p=new t.BoneData(l,h,d);p.rotation=a.readFloat(),p.x=a.readFloat()*r,p.y=a.readFloat()*r,p.scaleX=a.readFloat(),p.scaleY=a.readFloat(),p.shearX=a.readFloat(),p.shearY=a.readFloat(),p.length=a.readFloat()*r,p.transformMode=e.TransformModeValues[a.readInt(!0)],p.skinRequired=a.readBoolean(),u&&t.Color.rgba8888ToColor(p.color,a.readInt32()),o.bones.push(p)}c=a.readInt(!0);for(l=0;l<c;l++){var f=a.readString(),m=o.bones[a.readInt(!0)];p=new t.SlotData(l,f,m);t.Color.rgba8888ToColor(p.color,a.readInt32());var g=a.readInt32();-1!=g&&t.Color.rgb888ToColor(p.darkColor=new t.Color,g),p.attachmentName=a.readStringRef(),p.blendMode=e.BlendModeValues[a.readInt(!0)],o.slots.push(p)}c=a.readInt(!0);l=0;for(var v=void 0;l<c;l++){p=new t.IkConstraintData(a.readString());p.order=a.readInt(!0),p.skinRequired=a.readBoolean(),v=a.readInt(!0);for(var y=0;y<v;y++)p.bones.push(o.bones[a.readInt(!0)]);p.target=o.bones[a.readInt(!0)],p.mix=a.readFloat(),p.softness=a.readFloat()*r,p.bendDirection=a.readByte(),p.compress=a.readBoolean(),p.stretch=a.readBoolean(),p.uniform=a.readBoolean(),o.ikConstraints.push(p)}c=a.readInt(!0);for(l=0,v=void 0;l<c;l++){p=new t.TransformConstraintData(a.readString());p.order=a.readInt(!0),p.skinRequired=a.readBoolean(),v=a.readInt(!0);for(y=0;y<v;y++)p.bones.push(o.bones[a.readInt(!0)]);p.target=o.bones[a.readInt(!0)],p.local=a.readBoolean(),p.relative=a.readBoolean(),p.offsetRotation=a.readFloat(),p.offsetX=a.readFloat()*r,p.offsetY=a.readFloat()*r,p.offsetScaleX=a.readFloat(),p.offsetScaleY=a.readFloat(),p.offsetShearY=a.readFloat(),p.rotateMix=a.readFloat(),p.translateMix=a.readFloat(),p.scaleMix=a.readFloat(),p.shearMix=a.readFloat(),o.transformConstraints.push(p)}c=a.readInt(!0);for(l=0,v=void 0;l<c;l++){p=new t.PathConstraintData(a.readString());p.order=a.readInt(!0),p.skinRequired=a.readBoolean(),v=a.readInt(!0);for(y=0;y<v;y++)p.bones.push(o.bones[a.readInt(!0)]);p.target=o.slots[a.readInt(!0)],p.positionMode=e.PositionModeValues[a.readInt(!0)],p.spacingMode=e.SpacingModeValues[a.readInt(!0)],p.rotateMode=e.RotateModeValues[a.readInt(!0)],p.offsetRotation=a.readFloat(),p.position=a.readFloat(),p.positionMode==t.PositionMode.Fixed&&(p.position*=r),p.spacing=a.readFloat(),p.spacingMode!=t.SpacingMode.Length&&p.spacingMode!=t.SpacingMode.Fixed||(p.spacing*=r),p.rotateMix=a.readFloat(),p.translateMix=a.readFloat(),o.pathConstraints.push(p)}var _=this.readSkin(a,o,!0,u);null!=_&&(o.defaultSkin=_,o.skins.push(_));l=o.skins.length;for(t.Utils.setArraySize(o.skins,c=l+a.readInt(!0));l<c;l++)o.skins[l]=this.readSkin(a,o,!1,u);c=this.linkedMeshes.length;for(l=0;l<c;l++){var w=this.linkedMeshes[l],b=null==w.skin?o.defaultSkin:o.findSkin(w.skin);if(null==b)throw new Error("Skin not found: "+w.skin);var x=b.getAttachment(w.slotIndex,w.parent);if(null==x)throw new Error("Parent mesh not found: "+w.parent);w.mesh.deformAttachment=w.inheritDeform?x:w.mesh,w.mesh.setParentMesh(x)}this.linkedMeshes.length=0,c=a.readInt(!0);for(l=0;l<c;l++){p=new t.EventData(a.readStringRef());p.intValue=a.readInt(!1),p.floatValue=a.readFloat(),p.stringValue=a.readString(),p.audioPath=a.readString(),null!=p.audioPath&&(p.volume=a.readFloat(),p.balance=a.readFloat()),o.events.push(p)}c=a.readInt(!0);for(l=0;l<c;l++)o.animations.push(this.readAnimation(a,a.readString(),o));return o},e.prototype.readSkin=function(e,n,i,r){var o=null,a=0;if(i){if(a=e.readInt(!0),0==a)return null;o=new t.Skin("default")}else{o=new t.Skin(e.readStringRef()),o.bones.length=e.readInt(!0);for(var s=0,u=o.bones.length;s<u;s++)o.bones[s]=n.bones[e.readInt(!0)];for(s=0,u=e.readInt(!0);s<u;s++)o.constraints.push(n.ikConstraints[e.readInt(!0)]);for(s=0,u=e.readInt(!0);s<u;s++)o.constraints.push(n.transformConstraints[e.readInt(!0)]);for(s=0,u=e.readInt(!0);s<u;s++)o.constraints.push(n.pathConstraints[e.readInt(!0)]);a=e.readInt(!0)}for(s=0;s<a;s++)for(var c=e.readInt(!0),l=0,h=e.readInt(!0);l<h;l++){var d=e.readStringRef(),p=this.readAttachment(e,n,o,c,d,r);null!=p&&o.setAttachment(c,d,p)}return o},e.prototype.readAttachment=function(n,r,o,a,s,u){var c=this.scale,l=n.readStringRef();null==l&&(l=s);var h=n.readByte(),d=e.AttachmentTypeValues[h];switch(d){case t.AttachmentType.Region:var p=n.readStringRef(),f=n.readFloat(),m=n.readFloat(),g=n.readFloat(),v=n.readFloat(),y=n.readFloat(),_=n.readFloat(),w=n.readFloat(),b=n.readInt32();null==p&&(p=l);var x=this.attachmentLoader.newRegionAttachment(o,l,p);return null==x?null:(x.path=p,x.x=m*c,x.y=g*c,x.scaleX=v,x.scaleY=y,x.rotation=f,x.width=_*c,x.height=w*c,t.Color.rgba8888ToColor(x.color,b),x);case t.AttachmentType.BoundingBox:var C=n.readInt(!0),S=this.readVertices(n,C),k=(b=u?n.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(o,l));return null==k?null:(k.worldVerticesLength=C<<1,k.vertices=S.vertices,k.bones=S.bones,u&&t.Color.rgba8888ToColor(k.color,b),k);case t.AttachmentType.Mesh:p=n.readStringRef(),b=n.readInt32(),C=n.readInt(!0);var T=this.readFloatArray(n,C<<1,1),R=this.readShortArray(n),M=(S=this.readVertices(n,C),n.readInt(!0)),A=null;_=0,w=0;u&&(A=this.readShortArray(n),_=n.readFloat(),w=n.readFloat()),null==p&&(p=l);var I=this.attachmentLoader.newMeshAttachment(o,l,p);return null==I?null:(I.path=p,t.Color.rgba8888ToColor(I.color,b),I.bones=S.bones,I.vertices=S.vertices,I.worldVerticesLength=C<<1,I.triangles=R,I.regionUVs=new Float32Array(T),I.hullLength=M<<1,u&&(I.edges=A,I.width=_*c,I.height=w*c),I);case t.AttachmentType.LinkedMesh:p=n.readStringRef(),b=n.readInt32();var P=n.readStringRef(),E=n.readStringRef(),O=n.readBoolean();_=0,w=0;u&&(_=n.readFloat(),w=n.readFloat()),null==p&&(p=l);I=this.attachmentLoader.newMeshAttachment(o,l,p);return null==I?null:(I.path=p,t.Color.rgba8888ToColor(I.color,b),u&&(I.width=_*c,I.height=w*c),this.linkedMeshes.push(new i(I,P,a,E,O)),I);case t.AttachmentType.Path:for(var D=n.readBoolean(),V=n.readBoolean(),B=(C=n.readInt(!0),S=this.readVertices(n,C),t.Utils.newArray(C/3,0)),F=0,N=B.length;F<N;F++)B[F]=n.readFloat()*c;b=u?n.readInt32():0,p=this.attachmentLoader.newPathAttachment(o,l);return null==p?null:(p.closed=D,p.constantSpeed=V,p.worldVerticesLength=C<<1,p.vertices=S.vertices,p.bones=S.bones,p.lengths=B,u&&t.Color.rgba8888ToColor(p.color,b),p);case t.AttachmentType.Point:f=n.readFloat(),m=n.readFloat(),g=n.readFloat(),b=u?n.readInt32():0;var L=this.attachmentLoader.newPointAttachment(o,l);return null==L?null:(L.x=m*c,L.y=g*c,L.rotation=f,u&&t.Color.rgba8888ToColor(L.color,b),L);case t.AttachmentType.Clipping:var j=n.readInt(!0),U=(C=n.readInt(!0),S=this.readVertices(n,C),b=u?n.readInt32():0,this.attachmentLoader.newClippingAttachment(o,l));return null==U?null:(U.endSlot=r.slots[j],U.worldVerticesLength=C<<1,U.vertices=S.vertices,U.bones=S.bones,u&&t.Color.rgba8888ToColor(U.color,b),U)}return null},e.prototype.readVertices=function(e,n){var i=n<<1,o=new r,a=this.scale;if(!e.readBoolean())return o.vertices=this.readFloatArray(e,i,a),o;for(var s=new Array,u=new Array,c=0;c<n;c++){var l=e.readInt(!0);u.push(l);for(var h=0;h<l;h++)u.push(e.readInt(!0)),s.push(e.readFloat()*a),s.push(e.readFloat()*a),s.push(e.readFloat())}return o.vertices=t.Utils.toFloatArray(s),o.bones=u,o},e.prototype.readFloatArray=function(t,e,n){var i=new Array(e);if(1==n)for(var r=0;r<e;r++)i[r]=t.readFloat();else for(r=0;r<e;r++)i[r]=t.readFloat()*n;return i},e.prototype.readShortArray=function(t){for(var e=t.readInt(!0),n=new Array(e),i=0;i<e;i++)n[i]=t.readShort();return n},e.prototype.readAnimation=function(n,i,r){for(var o=new Array,a=this.scale,s=0,u=new t.Color,c=new t.Color,l=0,h=n.readInt(!0);l<h;l++)for(var d=n.readInt(!0),p=0,f=n.readInt(!0);p<f;p++){var m=n.readByte(),g=n.readInt(!0);switch(m){case e.SLOT_ATTACHMENT:var v=new t.AttachmentTimeline(g);v.slotIndex=d;for(var y=0;y<g;y++)v.setFrame(y,n.readFloat(),n.readStringRef());o.push(v),s=Math.max(s,v.frames[g-1]);break;case e.SLOT_COLOR:v=new t.ColorTimeline(g);v.slotIndex=d;for(y=0;y<g;y++){var _=n.readFloat();t.Color.rgba8888ToColor(u,n.readInt32()),v.setFrame(y,_,u.r,u.g,u.b,u.a),y<g-1&&this.readCurve(n,y,v)}o.push(v),s=Math.max(s,v.frames[(g-1)*t.ColorTimeline.ENTRIES]);break;case e.SLOT_TWO_COLOR:v=new t.TwoColorTimeline(g);v.slotIndex=d;for(y=0;y<g;y++){_=n.readFloat();t.Color.rgba8888ToColor(u,n.readInt32()),t.Color.rgb888ToColor(c,n.readInt32()),v.setFrame(y,_,u.r,u.g,u.b,u.a,c.r,c.g,c.b),y<g-1&&this.readCurve(n,y,v)}o.push(v),s=Math.max(s,v.frames[(g-1)*t.TwoColorTimeline.ENTRIES]);break}}for(l=0,h=n.readInt(!0);l<h;l++){var w=n.readInt(!0);for(p=0,f=n.readInt(!0);p<f;p++){m=n.readByte(),g=n.readInt(!0);switch(m){case e.BONE_ROTATE:v=new t.RotateTimeline(g);v.boneIndex=w;for(y=0;y<g;y++)v.setFrame(y,n.readFloat(),n.readFloat()),y<g-1&&this.readCurve(n,y,v);o.push(v),s=Math.max(s,v.frames[(g-1)*t.RotateTimeline.ENTRIES]);break;case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:v=void 0;var b=1;m==e.BONE_SCALE?v=new t.ScaleTimeline(g):m==e.BONE_SHEAR?v=new t.ShearTimeline(g):(v=new t.TranslateTimeline(g),b=a),v.boneIndex=w;for(y=0;y<g;y++)v.setFrame(y,n.readFloat(),n.readFloat()*b,n.readFloat()*b),y<g-1&&this.readCurve(n,y,v);o.push(v),s=Math.max(s,v.frames[(g-1)*t.TranslateTimeline.ENTRIES]);break}}}for(l=0,h=n.readInt(!0);l<h;l++){var x=n.readInt(!0);g=n.readInt(!0),v=new t.IkConstraintTimeline(g);v.ikConstraintIndex=x;for(y=0;y<g;y++)v.setFrame(y,n.readFloat(),n.readFloat(),n.readFloat()*a,n.readByte(),n.readBoolean(),n.readBoolean()),y<g-1&&this.readCurve(n,y,v);o.push(v),s=Math.max(s,v.frames[(g-1)*t.IkConstraintTimeline.ENTRIES])}for(l=0,h=n.readInt(!0);l<h;l++){x=n.readInt(!0),g=n.readInt(!0),v=new t.TransformConstraintTimeline(g);v.transformConstraintIndex=x;for(y=0;y<g;y++)v.setFrame(y,n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat()),y<g-1&&this.readCurve(n,y,v);o.push(v),s=Math.max(s,v.frames[(g-1)*t.TransformConstraintTimeline.ENTRIES])}for(l=0,h=n.readInt(!0);l<h;l++){x=n.readInt(!0);var C=r.pathConstraints[x];for(p=0,f=n.readInt(!0);p<f;p++){m=n.readByte(),g=n.readInt(!0);switch(m){case e.PATH_POSITION:case e.PATH_SPACING:v=void 0,b=1;m==e.PATH_SPACING?(v=new t.PathConstraintSpacingTimeline(g),C.spacingMode!=t.SpacingMode.Length&&C.spacingMode!=t.SpacingMode.Fixed||(b=a)):(v=new t.PathConstraintPositionTimeline(g),C.positionMode==t.PositionMode.Fixed&&(b=a)),v.pathConstraintIndex=x;for(y=0;y<g;y++)v.setFrame(y,n.readFloat(),n.readFloat()*b),y<g-1&&this.readCurve(n,y,v);o.push(v),s=Math.max(s,v.frames[(g-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case e.PATH_MIX:v=new t.PathConstraintMixTimeline(g);v.pathConstraintIndex=x;for(y=0;y<g;y++)v.setFrame(y,n.readFloat(),n.readFloat(),n.readFloat()),y<g-1&&this.readCurve(n,y,v);o.push(v),s=Math.max(s,v.frames[(g-1)*t.PathConstraintMixTimeline.ENTRIES]);break}}}for(l=0,h=n.readInt(!0);l<h;l++){var S=r.skins[n.readInt(!0)];for(p=0,f=n.readInt(!0);p<f;p++){d=n.readInt(!0);for(var k=0,T=n.readInt(!0);k<T;k++){var R=S.getAttachment(d,n.readStringRef()),M=null!=R.bones,A=R.vertices,I=M?A.length/3*2:A.length;g=n.readInt(!0),v=new t.DeformTimeline(g);v.slotIndex=d,v.attachment=R;for(y=0;y<g;y++){_=n.readFloat();var P=void 0,E=n.readInt(!0);if(0==E)P=M?t.Utils.newFloatArray(I):A;else{P=t.Utils.newFloatArray(I);var O=n.readInt(!0);if(E+=O,1==a)for(var D=O;D<E;D++)P[D]=n.readFloat();else for(D=O;D<E;D++)P[D]=n.readFloat()*a;if(!M){D=0;for(var V=P.length;D<V;D++)P[D]+=A[D]}}v.setFrame(y,_,P),y<g-1&&this.readCurve(n,y,v)}o.push(v),s=Math.max(s,v.frames[g-1])}}}var B=n.readInt(!0);if(B>0){v=new t.DrawOrderTimeline(B);var F=r.slots.length;for(l=0;l<B;l++){_=n.readFloat();var N=n.readInt(!0),L=t.Utils.newArray(F,0);for(p=F-1;p>=0;p--)L[p]=-1;var j=t.Utils.newArray(F-N,0),U=0,X=0;for(p=0;p<N;p++){d=n.readInt(!0);while(U!=d)j[X++]=U++;L[U+n.readInt(!0)]=U++}while(U<F)j[X++]=U++;for(p=F-1;p>=0;p--)-1==L[p]&&(L[p]=j[--X]);v.setFrame(l,_,L)}o.push(v),s=Math.max(s,v.frames[B-1])}var z=n.readInt(!0);if(z>0){for(v=new t.EventTimeline(z),l=0;l<z;l++){_=n.readFloat();var G=r.events[n.readInt(!0)],W=new t.Event(_,G);W.intValue=n.readInt(!1),W.floatValue=n.readFloat(),W.stringValue=n.readBoolean()?n.readString():G.stringValue,null!=W.data.audioPath&&(W.volume=n.readFloat(),W.balance=n.readFloat()),v.setFrame(l,W)}o.push(v),s=Math.max(s,v.frames[z-1])}return new t.Animation(i,o,s)},e.prototype.readCurve=function(t,n,i){switch(t.readByte()){case e.CURVE_STEPPED:i.setStepped(n);break;case e.CURVE_BEZIER:this.setCurve(i,n,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat());break}},e.prototype.setCurve=function(t,e,n,i,r,o){t.setCurve(e,n,i,r,o)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],e.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],e.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],e.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],e.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}();t.SkeletonBinary=e;var n=function(){function t(t,e,n,i){void 0===e&&(e=new Array),void 0===n&&(n=0),void 0===i&&(i=new DataView(t.buffer)),this.strings=e,this.index=n,this.buffer=i}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),n=127&e;return 0!=(128&e)&&(e=this.readByte(),n|=(127&e)<<7,0!=(128&e)&&(e=this.readByte(),n|=(127&e)<<14,0!=(128&e)&&(e=this.readByte(),n|=(127&e)<<21,0!=(128&e)&&(e=this.readByte(),n|=(127&e)<<28)))),t?n:n>>>1^-(1&n)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",n=0;n<t;){var i=this.readByte();switch(i>>4){case 12:case 13:e+=String.fromCharCode((31&i)<<6|63&this.readByte()),n+=2;break;case 14:e+=String.fromCharCode((15&i)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:e+=String.fromCharCode(i),n++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}(),i=function(){function t(t,e,n,i,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=i,this.inheritDeform=r}return t}(),r=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e}return t}()})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return e.prototype.update=function(e,n){if(null==e)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,r=this.polygons,o=this.polygonPool,a=e.slots,s=a.length;i.length=0,o.freeAll(r),r.length=0;for(var u=0;u<s;u++){var c=a[u];if(c.bone.active){var l=c.getAttachment();if(l instanceof t.BoundingBoxAttachment){var h=l;i.push(h);var d=o.obtain();d.length!=h.worldVerticesLength&&(d=t.Utils.newFloatArray(h.worldVerticesLength)),r.push(d),h.computeWorldVertices(c,0,h.worldVerticesLength,d,0,2)}}}n?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=this.polygons,o=0,a=r.length;o<a;o++)for(var s=r[o],u=s,c=0,l=s.length;c<l;c+=2){var h=u[c],d=u[c+1];t=Math.min(t,h),e=Math.min(e,d),n=Math.max(n,h),i=Math.max(i,d)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=i},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,n,i){var r=this.minX,o=this.minY,a=this.maxX,s=this.maxY;if(t<=r&&n<=r||e<=o&&i<=o||t>=a&&n>=a||e>=s&&i>=s)return!1;var u=(i-e)/(n-t),c=u*(r-t)+e;if(c>o&&c<s)return!0;if(c=u*(a-t)+e,c>o&&c<s)return!0;var l=(o-e)/u+t;return l>r&&l<a||(l=(s-e)/u+t,l>r&&l<a)},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var n=this.polygons,i=0,r=n.length;i<r;i++)if(this.containsPointPolygon(n[i],t,e))return this.boundingBoxes[i];return null},e.prototype.containsPointPolygon=function(t,e,n){for(var i=t,r=t.length,o=r-2,a=!1,s=0;s<r;s+=2){var u=i[s+1],c=i[o+1];if(u<n&&c>=n||c<n&&u>=n){var l=i[s];l+(n-u)/(c-u)*(i[o]-l)<e&&(a=!a)}o=s}return a},e.prototype.intersectsSegment=function(t,e,n,i){for(var r=this.polygons,o=0,a=r.length;o<a;o++)if(this.intersectsSegmentPolygon(r[o],t,e,n,i))return this.boundingBoxes[o];return null},e.prototype.intersectsSegmentPolygon=function(t,e,n,i,r){for(var o=t,a=t.length,s=e-i,u=n-r,c=e*r-n*i,l=o[a-2],h=o[a-1],d=0;d<a;d+=2){var p=o[d],f=o[d+1],m=l*f-h*p,g=l-p,v=h-f,y=s*v-u*g,_=(c*g-s*m)/y;if((_>=l&&_<=p||_>=p&&_<=l)&&(_>=e&&_<=i||_>=i&&_<=e)){var w=(c*v-u*m)/y;if((w>=h&&w<=f||w>=f&&w<=h)&&(w>=n&&w<=r||w>=r&&w<=n))return!0}l=p,h=f}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(n,i){if(null!=this.clipAttachment)return 0;this.clipAttachment=i;var r=i.worldVerticesLength,o=t.Utils.setArraySize(this.clippingPolygon,r);i.computeWorldVertices(n,0,r,o,0,2);var a=this.clippingPolygon;e.makeClockwise(a);for(var s=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a)),u=0,c=s.length;u<c;u++){var l=s[u];e.makeClockwise(l),l.push(l[0]),l.push(l[1])}return s.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,n,i,r,o,a,s,u){var c=this.clipOutput,l=this.clippedVertices,h=this.clippedTriangles,d=this.clippingPolygons,p=this.clippingPolygons.length,f=u?12:8,m=0;l.length=0,h.length=0;t:for(var g=0;g<r;g+=3){var v=i[g]<<1,y=e[v],_=e[v+1],w=o[v],b=o[v+1];v=i[g+1]<<1;var x=e[v],C=e[v+1],S=o[v],k=o[v+1];v=i[g+2]<<1;for(var T=e[v],R=e[v+1],M=o[v],A=o[v+1],I=0;I<p;I++){var P=l.length;if(!this.clip(y,_,x,C,T,R,d[I],c)){j=t.Utils.setArraySize(l,P+3*f);j[P]=y,j[P+1]=_,j[P+2]=a.r,j[P+3]=a.g,j[P+4]=a.b,j[P+5]=a.a,u?(j[P+6]=w,j[P+7]=b,j[P+8]=s.r,j[P+9]=s.g,j[P+10]=s.b,j[P+11]=s.a,j[P+12]=x,j[P+13]=C,j[P+14]=a.r,j[P+15]=a.g,j[P+16]=a.b,j[P+17]=a.a,j[P+18]=S,j[P+19]=k,j[P+20]=s.r,j[P+21]=s.g,j[P+22]=s.b,j[P+23]=s.a,j[P+24]=T,j[P+25]=R,j[P+26]=a.r,j[P+27]=a.g,j[P+28]=a.b,j[P+29]=a.a,j[P+30]=M,j[P+31]=A,j[P+32]=s.r,j[P+33]=s.g,j[P+34]=s.b,j[P+35]=s.a):(j[P+6]=w,j[P+7]=b,j[P+8]=x,j[P+9]=C,j[P+10]=a.r,j[P+11]=a.g,j[P+12]=a.b,j[P+13]=a.a,j[P+14]=S,j[P+15]=k,j[P+16]=T,j[P+17]=R,j[P+18]=a.r,j[P+19]=a.g,j[P+20]=a.b,j[P+21]=a.a,j[P+22]=M,j[P+23]=A),P=h.length;Q=t.Utils.setArraySize(h,P+3);Q[P]=m,Q[P+1]=m+1,Q[P+2]=m+2,m+=3;continue t}var E=c.length;if(0!=E){for(var O=C-R,D=T-x,V=y-T,B=R-_,F=1/(O*V+D*(_-R)),N=E>>1,L=this.clipOutput,j=t.Utils.setArraySize(l,P+N*f),U=0;U<E;U+=2){var X=L[U],z=L[U+1];j[P]=X,j[P+1]=z,j[P+2]=a.r,j[P+3]=a.g,j[P+4]=a.b,j[P+5]=a.a;var G=X-T,W=z-R,q=(O*G+D*W)*F,H=(B*G+V*W)*F,Y=1-q-H;j[P+6]=w*q+S*H+M*Y,j[P+7]=b*q+k*H+A*Y,u&&(j[P+8]=s.r,j[P+9]=s.g,j[P+10]=s.b,j[P+11]=s.a),P+=f}P=h.length;var Q=t.Utils.setArraySize(h,P+3*(N-2));N--;for(U=1;U<N;U++)Q[P]=m,Q[P+1]=m+U,Q[P+2]=m+U+1,P+=3;m+=N+1}}}},e.prototype.clip=function(t,e,n,i,r,o,a,s){var u=s,c=!1,l=null;a.length%4>=2?(l=s,s=this.scratch):l=this.scratch,l.length=0,l.push(t),l.push(e),l.push(n),l.push(i),l.push(r),l.push(o),l.push(t),l.push(e),s.length=0;for(var h=a,d=a.length-4,p=0;;p+=2){for(var f=h[p],m=h[p+1],g=h[p+2],v=h[p+3],y=f-g,_=m-v,w=l,b=l.length-2,x=s.length,C=0;C<b;C+=2){var S=w[C],k=w[C+1],T=w[C+2],R=w[C+3],M=y*(R-v)-_*(T-g)>0;if(y*(k-v)-_*(S-g)>0){if(M){s.push(T),s.push(R);continue}var A=R-k,I=T-S,P=(I*(m-k)-A*(f-S))/(A*(g-f)-I*(v-m));s.push(f+(g-f)*P),s.push(m+(v-m)*P)}else if(M){A=R-k,I=T-S,P=(I*(m-k)-A*(f-S))/(A*(g-f)-I*(v-m));s.push(f+(g-f)*P),s.push(m+(v-m)*P),s.push(T),s.push(R)}c=!0}if(x==s.length)return u.length=0,!0;if(s.push(s[0]),s.push(s[1]),p==d)break;var E=s;s=l,s.length=0,l=E}if(u!=s){u.length=0;p=0;for(var O=s.length-2;p<O;p++)u[p]=s[p]}else u.length=u.length-2;return c},e.makeClockwise=function(t){for(var e=t,n=t.length,i=e[n-2]*e[1]-e[0]*e[n-1],r=0,o=0,a=0,s=0,u=0,c=n-3;u<c;u+=2)r=e[u],o=e[u+1],a=e[u+2],s=e[u+3],i+=r*s-a*o;if(!(i<0)){u=0;var l=n-2;for(c=n>>1;u<c;u+=2){var h=e[u],d=e[u+1],p=l-u;e[u]=e[p],e[u+1]=e[p+1],e[p]=h,e[p+1]=d}}},e}();t.SkeletonClipping=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,i=e.length;n<i;n++)if(e[n].name==t)return n;return-1},t}();t.SkeletonData=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){t.FAIL_ON_NON_EXISTING_SKIN=!1;var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(n){var i=this.scale,r=new t.SkeletonData,o="string"===typeof n?JSON.parse(n):n,a=o.skeleton;if(null!=a){if(r.hash=a.hash,r.version=a.spine,"3.8"!==r.version.substr(0,3)){var s="PixiJS Spine plugin supports only format for Spine 3.8. Your model has version "+a.spine+". Please look in pixi-spine repository README for another branch.";console.error(s)}if("3.8.75"===r.version){s="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(s)}r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height,r.fps=a.fps,r.imagesPath=a.images}if(o.bones)for(var u=0;u<o.bones.length;u++){var c=o.bones[u],l=null,h=this.getValue(c,"parent",null);if(null!=h&&(l=r.findBone(h),null==l))throw new Error("Parent bone not found: "+h);var d=new t.BoneData(r.bones.length,c.name,l);d.length=this.getValue(c,"length",0)*i,d.x=this.getValue(c,"x",0)*i,d.y=this.getValue(c,"y",0)*i,d.rotation=this.getValue(c,"rotation",0),d.scaleX=this.getValue(c,"scaleX",1),d.scaleY=this.getValue(c,"scaleY",1),d.shearX=this.getValue(c,"shearX",0),d.shearY=this.getValue(c,"shearY",0),d.transformMode=e.transformModeFromString(this.getValue(c,"transform","normal")),d.skinRequired=this.getValue(c,"skin",!1),r.bones.push(d)}if(o.slots)for(u=0;u<o.slots.length;u++){var p=o.slots[u],f=p.name,m=p.bone,g=r.findBone(m);if(null==g)throw new Error("Slot bone not found: "+m);d=new t.SlotData(r.slots.length,f,g);var v=this.getValue(p,"color",null);null!=v&&d.color.setFromString(v);var y=this.getValue(p,"dark",null);null!=y&&(d.darkColor=new t.Color(1,1,1,1),d.darkColor.setFromString(y)),d.attachmentName=this.getValue(p,"attachment",null),d.blendMode=e.blendModeFromString(this.getValue(p,"blend","normal")),r.slots.push(d)}if(o.ik)for(u=0;u<o.ik.length;u++){var _=o.ik[u];d=new t.IkConstraintData(_.name);d.order=this.getValue(_,"order",0),d.skinRequired=this.getValue(_,"skin",!1);for(var w=0;w<_.bones.length;w++){m=_.bones[w];var b=r.findBone(m);if(null==b)throw new Error("IK bone not found: "+m);d.bones.push(b)}var x=_.target;if(d.target=r.findBone(x),null==d.target)throw new Error("IK target bone not found: "+x);d.mix=this.getValue(_,"mix",1),d.softness=this.getValue(_,"softness",0)*i,d.bendDirection=this.getValue(_,"bendPositive",!0)?1:-1,d.compress=this.getValue(_,"compress",!1),d.stretch=this.getValue(_,"stretch",!1),d.uniform=this.getValue(_,"uniform",!1),r.ikConstraints.push(d)}if(o.transform)for(u=0;u<o.transform.length;u++){_=o.transform[u],d=new t.TransformConstraintData(_.name);d.order=this.getValue(_,"order",0),d.skinRequired=this.getValue(_,"skin",!1);for(w=0;w<_.bones.length;w++){m=_.bones[w],b=r.findBone(m);if(null==b)throw new Error("Transform constraint bone not found: "+m);d.bones.push(b)}x=_.target;if(d.target=r.findBone(x),null==d.target)throw new Error("Transform constraint target bone not found: "+x);d.local=this.getValue(_,"local",!1),d.relative=this.getValue(_,"relative",!1),d.offsetRotation=this.getValue(_,"rotation",0),d.offsetX=this.getValue(_,"x",0)*i,d.offsetY=this.getValue(_,"y",0)*i,d.offsetScaleX=this.getValue(_,"scaleX",0),d.offsetScaleY=this.getValue(_,"scaleY",0),d.offsetShearY=this.getValue(_,"shearY",0),d.rotateMix=this.getValue(_,"rotateMix",1),d.translateMix=this.getValue(_,"translateMix",1),d.scaleMix=this.getValue(_,"scaleMix",1),d.shearMix=this.getValue(_,"shearMix",1),r.transformConstraints.push(d)}if(o.path)for(u=0;u<o.path.length;u++){_=o.path[u],d=new t.PathConstraintData(_.name);d.order=this.getValue(_,"order",0),d.skinRequired=this.getValue(_,"skin",!1);for(w=0;w<_.bones.length;w++){m=_.bones[w],b=r.findBone(m);if(null==b)throw new Error("Transform constraint bone not found: "+m);d.bones.push(b)}x=_.target;if(d.target=r.findSlot(x),null==d.target)throw new Error("Path target slot not found: "+x);d.positionMode=e.positionModeFromString(this.getValue(_,"positionMode","percent")),d.spacingMode=e.spacingModeFromString(this.getValue(_,"spacingMode","length")),d.rotateMode=e.rotateModeFromString(this.getValue(_,"rotateMode","tangent")),d.offsetRotation=this.getValue(_,"rotation",0),d.position=this.getValue(_,"position",0),d.positionMode==t.PositionMode.Fixed&&(d.position*=i),d.spacing=this.getValue(_,"spacing",0),d.spacingMode!=t.SpacingMode.Length&&d.spacingMode!=t.SpacingMode.Fixed||(d.spacing*=i),d.rotateMix=this.getValue(_,"rotateMix",1),d.translateMix=this.getValue(_,"translateMix",1),r.pathConstraints.push(d)}if(o.skins)for(u=0;u<o.skins.length;u++){var C=o.skins[u],S=new t.Skin(C.name);if(C.bones)for(var k=0;k<C.bones.length;k++){b=r.findBone(C.bones[k]);if(null==b)throw new Error("Skin bone not found: "+C.bones[u]);S.bones.push(b)}if(C.ik)for(k=0;k<C.ik.length;k++){var T=r.findIkConstraint(C.ik[k]);if(null==T)throw new Error("Skin IK constraint not found: "+C.ik[u]);S.constraints.push(T)}if(C.transform)for(k=0;k<C.transform.length;k++){T=r.findTransformConstraint(C.transform[k]);if(null==T)throw new Error("Skin transform constraint not found: "+C.transform[u]);S.constraints.push(T)}if(C.path)for(k=0;k<C.path.length;k++){T=r.findPathConstraint(C.path[k]);if(null==T)throw new Error("Skin path constraint not found: "+C.path[u]);S.constraints.push(T)}for(var f in C.attachments){var R=r.findSlot(f);if(null==R)throw new Error("Slot not found: "+f);p=C.attachments[f];for(var M in p){var A=this.readAttachment(p[M],S,R.index,M,r);null!=A&&S.setAttachment(R.index,M,A)}}r.skins.push(S),"default"==S.name&&(r.defaultSkin=S)}u=0;for(var I=this.linkedMeshes.length;u<I;u++){var P=this.linkedMeshes[u];S=null==P.skin?r.defaultSkin:r.findSkin(P.skin);if(null==S)throw new Error("Skin not found: "+P.skin);var E=S.getAttachment(P.slotIndex,P.parent);if(null==E)throw new Error("Parent mesh not found: "+P.parent);P.mesh.deformAttachment=P.inheritDeform?E:P.mesh,P.mesh.setParentMesh(E)}if(this.linkedMeshes.length=0,o.events)for(var O in o.events){var D=o.events[O];d=new t.EventData(O);d.intValue=this.getValue(D,"int",0),d.floatValue=this.getValue(D,"float",0),d.stringValue=this.getValue(D,"string",""),d.audioPath=this.getValue(D,"audio",null),null!=d.audioPath&&(d.volume=this.getValue(D,"volume",1),d.balance=this.getValue(D,"balance",0)),r.events.push(d)}if(o.animations)for(var V in o.animations){var B=o.animations[V];this.readAnimation(B,V,r)}return r},e.prototype.readAttachment=function(e,i,r,o,a){var s=this.scale;o=this.getValue(e,"name",o);var u=this.getValue(e,"type","region");switch(u){case"region":var c=this.getValue(e,"path",o),l=this.attachmentLoader.newRegionAttachment(i,o,c);if(null==l)return null;l.path=c,l.x=this.getValue(e,"x",0)*s,l.y=this.getValue(e,"y",0)*s,l.scaleX=this.getValue(e,"scaleX",1),l.scaleY=this.getValue(e,"scaleY",1),l.rotation=this.getValue(e,"rotation",0),l.width=e.width*s,l.height=e.height*s;var h=this.getValue(e,"color",null);return null!=h&&l.color.setFromString(h),l;case"boundingbox":var d=this.attachmentLoader.newBoundingBoxAttachment(i,o);if(null==d)return null;this.readVertices(e,d,e.vertexCount<<1);h=this.getValue(e,"color",null);return null!=h&&d.color.setFromString(h),d;case"mesh":case"linkedmesh":c=this.getValue(e,"path",o);var p=this.attachmentLoader.newMeshAttachment(i,o,c);if(null==p)return null;p.path=c;h=this.getValue(e,"color",null);null!=h&&p.color.setFromString(h),p.width=this.getValue(e,"width",0)*s,p.height=this.getValue(e,"height",0)*s;var f=this.getValue(e,"parent",null);if(null!=f)return this.linkedMeshes.push(new n(p,this.getValue(e,"skin",null),r,f,this.getValue(e,"deform",!0))),p;var m=e.uvs;return this.readVertices(e,p,m.length),p.triangles=e.triangles,p.regionUVs=new Float32Array(m),p.edges=this.getValue(e,"edges",null),p.hullLength=2*this.getValue(e,"hull",0),p;case"path":c=this.attachmentLoader.newPathAttachment(i,o);if(null==c)return null;c.closed=this.getValue(e,"closed",!1),c.constantSpeed=this.getValue(e,"constantSpeed",!0);var g=e.vertexCount;this.readVertices(e,c,g<<1);for(var v=t.Utils.newArray(g/3,0),y=0;y<e.lengths.length;y++)v[y]=e.lengths[y]*s;c.lengths=v;h=this.getValue(e,"color",null);return null!=h&&c.color.setFromString(h),c;case"point":var _=this.attachmentLoader.newPointAttachment(i,o);if(null==_)return null;_.x=this.getValue(e,"x",0)*s,_.y=this.getValue(e,"y",0)*s,_.rotation=this.getValue(e,"rotation",0);h=this.getValue(e,"color",null);return null!=h&&_.color.setFromString(h),_;case"clipping":var w=this.attachmentLoader.newClippingAttachment(i,o);if(null==w)return null;var b=this.getValue(e,"end",null);if(null!=b){var x=a.findSlot(b);if(null==x)throw new Error("Clipping end slot not found: "+b);w.endSlot=x}g=e.vertexCount;this.readVertices(e,w,g<<1);h=this.getValue(e,"color",null);return null!=h&&w.color.setFromString(h),w}return null},e.prototype.readVertices=function(e,n,i){var r=this.scale;n.worldVerticesLength=i;var o=e.vertices;if(i!=o.length){var a=new Array,s=new Array;for(h=0,d=o.length;h<d;){var u=o[h++];s.push(u);for(var c=h+4*u;h<c;h+=4)s.push(o[h]),a.push(o[h+1]*r),a.push(o[h+2]*r),a.push(o[h+3])}n.bones=s,n.vertices=t.Utils.toFloatArray(a)}else{var l=t.Utils.toFloatArray(o);if(1!=r)for(var h=0,d=o.length;h<d;h++)l[h]*=r;n.vertices=l}},e.prototype.readAnimation=function(e,n,i){var r=this.scale,o=new Array,a=0;if(e.slots)for(var s in e.slots){var u=e.slots[s],c=i.findSlotIndex(s);if(-1==c)throw new Error("Slot not found: "+s);for(var l in u){var h=u[l];if("attachment"==l){var d=new t.AttachmentTimeline(h.length);d.slotIndex=c;for(var p=0,f=0;f<h.length;f++){var m=h[f];d.setFrame(p++,this.getValue(m,"time",0),m.name)}o.push(d),a=Math.max(a,d.frames[d.getFrameCount()-1])}else if("color"==l){d=new t.ColorTimeline(h.length);d.slotIndex=c;for(p=0,f=0;f<h.length;f++){m=h[f];var g=new t.Color;g.setFromString(m.color||"ffffffff"),d.setFrame(p,this.getValue(m,"time",0),g.r,g.g,g.b,g.a),this.readCurve(m,d,p),p++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=l)throw new Error("Invalid timeline type for a slot: "+l+" ("+s+")");d=new t.TwoColorTimeline(h.length);d.slotIndex=c;for(p=0,f=0;f<h.length;f++){m=h[f];var v=new t.Color,y=new t.Color;v.setFromString(m.light),y.setFromString(m.dark),d.setFrame(p,this.getValue(m,"time",0),v.r,v.g,v.b,v.a,y.r,y.g,y.b),this.readCurve(m,d,p),p++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var _ in e.bones){var w=e.bones[_],b=i.findBoneIndex(_);if(-1==b)throw new Error("Bone not found: "+_);for(var l in w){h=w[l];if("rotate"===l){d=new t.RotateTimeline(h.length);d.boneIndex=b;for(p=0,f=0;f<h.length;f++){m=h[f];d.setFrame(p,this.getValue(m,"time",0),this.getValue(m,"angle",0)),this.readCurve(m,d,p),p++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==l&&"scale"!==l&&"shear"!==l)throw new Error("Invalid timeline type for a bone: "+l+" ("+_+")");d=null;var x=1,C=0;"scale"===l?(d=new t.ScaleTimeline(h.length),C=1):"shear"===l?d=new t.ShearTimeline(h.length):(d=new t.TranslateTimeline(h.length),x=r),d.boneIndex=b;for(p=0,f=0;f<h.length;f++){m=h[f];var S=this.getValue(m,"x",C),k=this.getValue(m,"y",C);d.setFrame(p,this.getValue(m,"time",0),S*x,k*x),this.readCurve(m,d,p),p++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(e.ik)for(var T in e.ik){var R=e.ik[T],M=i.findIkConstraint(T);d=new t.IkConstraintTimeline(R.length);d.ikConstraintIndex=i.ikConstraints.indexOf(M);for(p=0,f=0;f<R.length;f++){m=R[f];d.setFrame(p,this.getValue(m,"time",0),this.getValue(m,"mix",1),this.getValue(m,"softness",0)*r,this.getValue(m,"bendPositive",!0)?1:-1,this.getValue(m,"compress",!1),this.getValue(m,"stretch",!1)),this.readCurve(m,d,p),p++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var T in e.transform){R=e.transform[T],M=i.findTransformConstraint(T),d=new t.TransformConstraintTimeline(R.length);d.transformConstraintIndex=i.transformConstraints.indexOf(M);for(p=0,f=0;f<R.length;f++){m=R[f];d.setFrame(p,this.getValue(m,"time",0),this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1),this.getValue(m,"scaleMix",1),this.getValue(m,"shearMix",1)),this.readCurve(m,d,p),p++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.path)for(var T in e.path){R=e.path[T];var A=i.findPathConstraintIndex(T);if(-1==A)throw new Error("Path constraint not found: "+T);var I=i.pathConstraints[A];for(var l in R){h=R[l];if("position"===l||"spacing"===l){d=null,x=1;"spacing"===l?(d=new t.PathConstraintSpacingTimeline(h.length),I.spacingMode!=t.SpacingMode.Length&&I.spacingMode!=t.SpacingMode.Fixed||(x=r)):(d=new t.PathConstraintPositionTimeline(h.length),I.positionMode==t.PositionMode.Fixed&&(x=r)),d.pathConstraintIndex=A;for(p=0,f=0;f<h.length;f++){m=h[f];d.setFrame(p,this.getValue(m,"time",0),this.getValue(m,l,0)*x),this.readCurve(m,d,p),p++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===l){d=new t.PathConstraintMixTimeline(h.length);d.pathConstraintIndex=A;for(p=0,f=0;f<h.length;f++){m=h[f];d.setFrame(p,this.getValue(m,"time",0),this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1)),this.readCurve(m,d,p),p++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(e.deform)for(var P in e.deform){var E=e.deform[P],O=i.findSkin(P);if(null!=O)for(var s in E){u=E[s],c=i.findSlotIndex(s);if(-1==c)throw new Error("Slot not found: "+u.name);for(var l in u){h=u[l];var D=O.getAttachment(c,l);if(null==D)throw new Error("Deform attachment not found: "+h.name);var V=null!=D.bones,B=D.vertices,F=V?B.length/3*2:B.length;d=new t.DeformTimeline(h.length);d.slotIndex=c,d.attachment=D;p=0;for(var N=0;N<h.length;N++){m=h[N];var L=void 0,j=this.getValue(m,"vertices",null);if(null==j)L=V?t.Utils.newFloatArray(F):B;else{L=t.Utils.newFloatArray(F);var U=this.getValue(m,"offset",0);if(t.Utils.arrayCopy(j,0,L,U,j.length),1!=r){f=U;for(var X=f+j.length;f<X;f++)L[f]*=r}if(!V)for(f=0;f<F;f++)L[f]+=B[f]}d.setFrame(p,this.getValue(m,"time",0),L),this.readCurve(m,d,p),p++}o.push(d),a=Math.max(a,d.frames[d.getFrameCount()-1])}}else if(t.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+P)}var z=e.drawOrder;if(null==z&&(z=e.draworder),null!=z){d=new t.DrawOrderTimeline(z.length);var G=i.slots.length;for(p=0,N=0;N<z.length;N++){var W=z[N],q=null,H=this.getValue(W,"offsets",null);if(null!=H){q=t.Utils.newArray(G,-1);var Y=t.Utils.newArray(G-H.length,0),Q=0,Z=0;for(f=0;f<H.length;f++){var $=H[f];c=i.findSlotIndex($.slot);if(-1==c)throw new Error("Slot not found: "+$.slot);while(Q!=c)Y[Z++]=Q++;q[Q+$.offset]=Q++}while(Q<G)Y[Z++]=Q++;for(f=G-1;f>=0;f--)-1==q[f]&&(q[f]=Y[--Z])}d.setFrame(p++,this.getValue(W,"time",0),q)}o.push(d),a=Math.max(a,d.frames[d.getFrameCount()-1])}if(e.events){for(d=new t.EventTimeline(e.events.length),p=0,f=0;f<e.events.length;f++){var K=e.events[f],J=i.findEvent(K.name);if(null==J)throw new Error("Event not found: "+K.name);var tt=new t.Event(t.Utils.toSinglePrecision(this.getValue(K,"time",0)),J);tt.intValue=this.getValue(K,"int",J.intValue),tt.floatValue=this.getValue(K,"float",J.floatValue),tt.stringValue=this.getValue(K,"string",J.stringValue),null!=tt.data.audioPath&&(tt.volume=this.getValue(K,"volume",1),tt.balance=this.getValue(K,"balance",0)),d.setFrame(p++,tt)}o.push(d),a=Math.max(a,d.frames[d.getFrameCount()-1])}if(isNaN(a))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new t.Animation(n,o,a))},e.prototype.readCurve=function(t,e,n){if(t.hasOwnProperty("curve"))if("stepped"===t.curve)e.setStepped(n);else{var i=t.curve;e.setCurve(n,i,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},e.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},e.blendModeFromString=function(e){if(e=e.toLowerCase(),"normal"==e)return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if(e=e.toLowerCase(),"fixed"==e)return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if(e=e.toLowerCase(),"length"==e)return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if(e=e.toLowerCase(),"tangent"==e)return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if(e=e.toLowerCase(),"normal"==e)return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var n=function(){function t(t,e,n,i,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=i,this.inheritDeform=r}return t}()})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function t(t,e,n){this.slotIndex=t,this.name=e,this.attachment=n}return t}();t.SkinEntry=e;var n=function(){function n(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return n.prototype.setAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var i=this.attachments;t>=i.length&&(i.length=t+1),i[t]||(i[t]={}),i[t][e]=n},n.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],i=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==n){i=!0;break}i||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var o=t.constraints[e];for(i=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==o){i=!0;break}i||this.constraints.push(o)}var a=t.getAttachments();for(e=0;e<a.length;e++){var s=a[e];this.setAttachment(s.slotIndex,s.name,s.attachment)}},n.prototype.copySkin=function(e){for(var n=0;n<e.bones.length;n++){for(var i=e.bones[n],r=!1,o=0;o<this.bones.length;o++)if(this.bones[o]==i){r=!0;break}r||this.bones.push(i)}for(n=0;n<e.constraints.length;n++){var a=e.constraints[n];for(r=!1,o=0;o<this.constraints.length;o++)if(this.constraints[o]==a){r=!0;break}r||this.constraints.push(a)}var s=e.getAttachments();for(n=0;n<s.length;n++){var u=s[n];null!=u.attachment&&(u.attachment instanceof t.MeshAttachment?(u.attachment=u.attachment.newLinkedMesh(),this.setAttachment(u.slotIndex,u.name,u.attachment)):(u.attachment=u.attachment.copy(),this.setAttachment(u.slotIndex,u.name,u.attachment)))}},n.prototype.getAttachment=function(t,e){var n=this.attachments[t];return n?n[e]:null},n.prototype.removeAttachment=function(t,e){var n=this.attachments[t];n&&(n[e]=null)},n.prototype.getAttachments=function(){for(var t=new Array,n=0;n<this.attachments.length;n++){var i=this.attachments[n];if(i)for(var r in i){var o=i[r];o&&t.push(new e(n,r,o))}}return t},n.prototype.getAttachmentsForSlot=function(t,n){var i=this.attachments[t];if(i)for(var r in i){var o=i[r];o&&n.push(new e(t,r,o))}},n.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},n.prototype.attachAll=function(t,e){for(var n=0,i=0;i<t.slots.length;i++){var r=t.slots[i],o=r.getAttachment();if(o&&n<e.attachments.length){var a=e.attachments[n];for(var s in a){var u=a[s];if(o==u){var c=this.getAttachment(n,s);null!=c&&r.setAttachment(c);break}}}n++}},n}();t.Skin=n})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(e,n){if(this.deform=new Array,null==e)throw new Error("data cannot be null.");if(null==n)throw new Error("bone cannot be null.");this.data=e,this.bone=n,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(e,n,i){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==n)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=e,this.name=n,this.boneData=i}return e}();t.SlotData=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e,n,i=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return n.MirroredRepeat;case"clamptoedge":return n.ClampToEdge;case"repeat":return n.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=i,function(t){t[t["Nearest"]=9728]="Nearest",t[t["Linear"]=9729]="Linear",t[t["MipMap"]=9987]="MipMap",t[t["MipMapNearestNearest"]=9984]="MipMapNearestNearest",t[t["MipMapLinearNearest"]=9985]="MipMapLinearNearest",t[t["MipMapNearestLinear"]=9986]="MipMapNearestLinear",t[t["MipMapLinearLinear"]=9987]="MipMapLinearLinear"}(e=t.TextureFilter||(t.TextureFilter={})),function(t){t[t["MirroredRepeat"]=33648]="MirroredRepeat",t[t["ClampToEdge"]=33071]="ClampToEdge",t[t["Repeat"]=10497]="Repeat"}(n=t.TextureWrap||(t.TextureWrap={}));var r=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!1,configurable:!0}),t}();t.TextureRegion=r})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(t,e,n){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,n)}return e.prototype.addTexture=function(e,n){for(var i=this.pages,a=null,s=0;s<i.length;s++)if(i[s].baseTexture===n.baseTexture){a=i[s];break}if(null===a){a=new r,a.name="texturePage";var u=n.baseTexture;a.width=u.realWidth,a.height=u.realHeight,a.baseTexture=u,a.minFilter=a.magFilter=t.TextureFilter.Nearest,a.uWrap=t.TextureWrap.ClampToEdge,a.vWrap=t.TextureWrap.ClampToEdge,i.push(a)}var c=new o;return c.name=e,c.page=a,c.texture=n,c.index=-1,this.regions.push(c),c},e.prototype.addTextureHash=function(t,e){for(var n in t)t.hasOwnProperty(n)&&this.addTexture(e&&-1!==n.indexOf(".")?n.substr(0,n.lastIndexOf(".")):n,t[n])},e.prototype.addSpineAtlas=function(t,e,n){return this.load(t,e,n)},e.prototype.load=function(e,i,a){var s=this;if(null==i)throw new Error("textureLoader cannot be null.");var u=new n(e),c=new Array(4),l=null,h=function(){while(1){var e=u.readLine();if(null==e)return a&&a(s);if(e=e.trim(),0==e.length)l=null;else{if(!l){l=new r,l.name=e,2==u.readTuple(c)&&(l.width=parseInt(c[0]),l.height=parseInt(c[1]),u.readTuple(c)),u.readTuple(c),l.minFilter=t.Texture.filterFromString(c[0]),l.magFilter=t.Texture.filterFromString(c[1]);var n=u.readValue();l.uWrap=t.TextureWrap.ClampToEdge,l.vWrap=t.TextureWrap.ClampToEdge,"x"==n?l.uWrap=t.TextureWrap.Repeat:"y"==n?l.vWrap=t.TextureWrap.Repeat:"xy"==n&&(l.uWrap=l.vWrap=t.TextureWrap.Repeat),i(e,(function(t){if(null===t)return s.pages.splice(s.pages.indexOf(l),1),a&&a(null);l.baseTexture=t,t.valid||t.setSize(l.width,l.height),s.pages.push(l),l.setFilters(),l.width&&l.height||(l.width=t.realWidth,l.height=t.realHeight,l.width&&l.height||console.log("ERROR spine atlas page "+l.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),h()})),s.pages.push(l);break}var d=new o;d.name=e,d.page=l;var p=u.readValue(),f=0;f="true"==p.toLocaleLowerCase()?6:"false"==p.toLocaleLowerCase()?0:(720-parseFloat(p))%360/45,u.readTuple(c);var m=parseInt(c[0]),g=parseInt(c[1]);u.readTuple(c);var v=parseInt(c[0]),y=parseInt(c[1]),_=l.baseTexture.resolution;m/=_,g/=_,v/=_,y/=_;var w=f%4!=0,b=new PIXI.Rectangle(m,g,w?y:v,w?v:y);4==u.readTuple(c)&&4==u.readTuple(c)&&u.readTuple(c);var x=parseInt(c[0])/_,C=parseInt(c[1])/_;u.readTuple(c);var S=parseInt(c[0])/_,k=parseInt(c[1])/_,T=new PIXI.Rectangle(0,0,x,C),R=new PIXI.Rectangle(S,C-y-k,v,y);if("3"!=PIXI.VERSION[0])d.texture=new PIXI.Texture(d.page.baseTexture,b,T,R,f);else{var M=new PIXI.Rectangle(m,g,v,y),A=M.clone();R.width=x,R.height=C,d.texture=new PIXI.Texture(d.page.baseTexture,M,A,R,f)}d.index=parseInt(u.readValue()),d.texture.updateUvs(),s.regions.push(d)}}};h()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}();t.TextureAtlas=e;var n=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw new Error("Invalid line: "+e);for(var i=0,r=n+1;i<3;i++){var o=e.indexOf(",",r);if(-1==o)break;t[i]=e.substr(r,o-r).trim(),r=o+1}return t[i]=e.substring(r).trim(),i+1},t}(),r=function(){function e(){}return e.prototype.setFilters=function(){var e=this.baseTexture,n=this.minFilter;n==t.TextureFilter.Linear?e.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==t.TextureFilter.Nearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:(e.mipmap=PIXI.MIPMAP_MODES.POW2,n==t.TextureFilter.MipMapNearestNearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:e.scaleMode=PIXI.SCALE_MODES.LINEAR)},e}();t.TextureAtlasPage=r;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=o})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(e,n){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==n)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var i=0;i<e.bones.length;i++)this.bones.push(n.findBone(e.bones[i].name));this.target=n.findBone(e.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,n=this.translateMix,i=this.scaleMix,r=this.shearMix,o=this.target,a=o.matrix,s=a.a,u=a.c,c=a.b,l=a.d,h=s*l-u*c>0?t.MathUtils.degRad:-t.MathUtils.degRad,d=this.data.offsetRotation*h,p=this.data.offsetShearY*h,f=this.bones,m=0,g=f.length;m<g;m++){var v=f[m],y=!1,_=v.matrix;if(0!=e){var w=_.a,b=_.c,x=_.b,C=_.d,S=Math.atan2(c,s)-Math.atan2(x,w)+d;S>t.MathUtils.PI?S-=t.MathUtils.PI2:S<-t.MathUtils.PI&&(S+=t.MathUtils.PI2),S*=e;var k=Math.cos(S),T=Math.sin(S);_.a=k*w-T*x,_.c=k*b-T*C,_.b=T*w+k*x,_.d=T*b+k*C,y=!0}if(0!=n){var R=this.temp;o.localToWorld(R.set(this.data.offsetX,this.data.offsetY)),_.tx+=(R.x-_.tx)*n,_.ty+=(R.y-_.ty)*n,y=!0}if(i>0){var M=Math.sqrt(_.a*_.a+_.b*_.b),A=Math.sqrt(s*s+c*c);M>1e-5&&(M=(M+(A-M+this.data.offsetScaleX)*i)/M),_.a*=M,_.b*=M,M=Math.sqrt(_.c*_.c+_.d*_.d),A=Math.sqrt(u*u+l*l),M>1e-5&&(M=(M+(A-M+this.data.offsetScaleY)*i)/M),_.c*=M,_.d*=M,y=!0}if(r>0){b=_.c,C=_.d;var I=Math.atan2(C,b);S=Math.atan2(l,u)-Math.atan2(c,s)-(I-Math.atan2(_.b,_.a));S>t.MathUtils.PI?S-=t.MathUtils.PI2:S<-t.MathUtils.PI&&(S+=t.MathUtils.PI2),S=I+(S+p)*r;M=Math.sqrt(b*b+C*C);_.c=Math.cos(S)*M,_.d=Math.sin(S)*M,y=!0}y&&(v.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,n=this.translateMix,i=this.scaleMix,r=this.shearMix,o=this.target,a=o.matrix,s=a.a,u=a.c,c=a.b,l=a.d,h=s*l-u*c>0?t.MathUtils.degRad:-t.MathUtils.degRad,d=this.data.offsetRotation*h,p=this.data.offsetShearY*h,f=this.bones,m=0,g=f.length;m<g;m++){var v=f[m],y=!1,_=v.matrix;if(0!=e){var w=_.a,b=_.c,x=_.b,C=_.d,S=Math.atan2(c,s)+d;S>t.MathUtils.PI?S-=t.MathUtils.PI2:S<-t.MathUtils.PI&&(S+=t.MathUtils.PI2),S*=e;var k=Math.cos(S),T=Math.sin(S);_.a=k*w-T*x,_.c=k*b-T*C,_.b=T*w+k*x,_.d=T*b+k*C,y=!0}if(0!=n){var R=this.temp;o.localToWorld(R.set(this.data.offsetX,this.data.offsetY)),_.tx+=R.x*n,_.ty+=R.y*n,y=!0}if(i>0){var M=(Math.sqrt(s*s+c*c)-1+this.data.offsetScaleX)*i+1;_.a*=M,_.b*=M,M=(Math.sqrt(u*u+l*l)-1+this.data.offsetScaleY)*i+1,_.c*=M,_.d*=M,y=!0}if(r>0){S=Math.atan2(l,u)-Math.atan2(c,s);S>t.MathUtils.PI?S-=t.MathUtils.PI2:S<-t.MathUtils.PI&&(S+=t.MathUtils.PI2);b=_.c,C=_.d;S=Math.atan2(C,b)+(S-t.MathUtils.PI/2+p)*r;M=Math.sqrt(b*b+C*C);_.c=Math.cos(S)*M,_.d=Math.sin(S)*M,y=!0}y&&(v.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var u=o[a];u.appliedValid||u.updateAppliedTransform();var c=u.arotation;if(0!=t){var l=r.arotation-c+this.data.offsetRotation;l-=360*(16384-(16384.499999999996-l/360|0)),c+=l*t}var h=u.ax,d=u.ay;0!=e&&(h+=(r.ax-h+this.data.offsetX)*e,d+=(r.ay-d+this.data.offsetY)*e);var p=u.ascaleX,f=u.ascaleY;n>0&&(p>1e-5&&(p=(p+(r.ascaleX-p+this.data.offsetScaleX)*n)/p),f>1e-5&&(f=(f+(r.ascaleY-f+this.data.offsetScaleY)*n)/f));var m=u.ashearY;if(i>0){l=r.ashearY-m+this.data.offsetShearY;l-=360*(16384-(16384.499999999996-l/360|0)),u.shearY+=l*i}u.updateWorldTransformWith(h,d,c,p,f,u.ashearX,m)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,i=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var u=o[a];u.appliedValid||u.updateAppliedTransform();var c=u.arotation;0!=t&&(c+=(r.arotation+this.data.offsetRotation)*t);var l=u.ax,h=u.ay;0!=e&&(l+=(r.ax+this.data.offsetX)*e,h+=(r.ay+this.data.offsetY)*e);var d=u.ascaleX,p=u.ascaleY;n>0&&(d>1e-5&&(d*=(r.ascaleX-1+this.data.offsetScaleX)*n+1),p>1e-5&&(p*=(r.ascaleY-1+this.data.offsetScaleY)*n+1));var f=u.ashearY;i>0&&(f+=(r.ashearY+this.data.offsetShearY)*i),u.updateWorldTransformWith(l,h,c,d,p,u.ashearX,f)}},e}();t.TransformConstraint=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return i(e,t),e}(t.ConstraintData);t.TransformConstraintData=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return e.prototype.triangulate=function(t){var n=t,i=t.length>>1,r=this.indicesArray;r.length=0;for(var o=0;o<i;o++)r[o]=o;var a=this.isConcaveArray;a.length=0;o=0;for(var s=i;o<s;++o)a[o]=e.isConcave(o,i,n,r);var u=this.triangles;u.length=0;while(i>3){var c=i-1,l=(o=0,1);while(1){t:if(!a[o]){for(var h=r[c]<<1,d=r[o]<<1,p=r[l]<<1,f=n[h],m=n[h+1],g=n[d],v=n[d+1],y=n[p],_=n[p+1],w=(l+1)%i;w!=c;w=(w+1)%i)if(a[w]){var b=r[w]<<1,x=n[b],C=n[b+1];if(e.positiveArea(y,_,f,m,x,C)&&e.positiveArea(f,m,g,v,x,C)&&e.positiveArea(g,v,y,_,x,C))break t}break}if(0==l){do{if(!a[o])break;o--}while(o>0);break}c=o,o=l,l=(l+1)%i}u.push(r[(i+o-1)%i]),u.push(r[o]),u.push(r[(o+1)%i]),r.splice(o,1),a.splice(o,1),i--;var S=(i+o-1)%i,k=o==i?0:o;a[S]=e.isConcave(S,i,n,r),a[k]=e.isConcave(k,i,n,r)}return 3==i&&(u.push(r[2]),u.push(r[0]),u.push(r[1])),u},e.prototype.decompose=function(t,n){var i=t,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var o=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(o),o.length=0;var a=this.polygonIndicesPool.obtain();a.length=0;var s=this.polygonPool.obtain();s.length=0;for(var u=-1,c=0,l=0,h=n.length;l<h;l+=3){var d=n[l]<<1,p=n[l+1]<<1,f=n[l+2]<<1,m=i[d],g=i[d+1],v=i[p],y=i[p+1],_=i[f],w=i[f+1],b=!1;if(u==d){var x=s.length-4,C=e.winding(s[x],s[x+1],s[x+2],s[x+3],_,w),S=e.winding(_,w,s[0],s[1],s[2],s[3]);C==c&&S==c&&(s.push(_),s.push(w),a.push(f),b=!0)}b||(s.length>0?(r.push(s),o.push(a)):(this.polygonPool.free(s),this.polygonIndicesPool.free(a)),s=this.polygonPool.obtain(),s.length=0,s.push(m),s.push(g),s.push(v),s.push(y),s.push(_),s.push(w),a=this.polygonIndicesPool.obtain(),a.length=0,a.push(d),a.push(p),a.push(f),c=e.winding(m,g,v,y,_,w),u=d)}s.length>0&&(r.push(s),o.push(a));for(l=0,h=r.length;l<h;l++)if(a=o[l],0!=a.length){var k=a[0],T=a[a.length-1];s=r[l];x=s.length-4;for(var R=s[x],M=s[x+1],A=s[x+2],I=s[x+3],P=s[0],E=s[1],O=s[2],D=s[3],V=e.winding(R,M,A,I,P,E),B=0;B<h;B++)if(B!=l){var F=o[B];if(3==F.length){var N=F[0],L=F[1],j=F[2],U=r[B];_=U[U.length-2],w=U[U.length-1];if(N==k&&L==T){C=e.winding(R,M,A,I,_,w),S=e.winding(_,w,P,E,O,D);C==V&&S==V&&(U.length=0,F.length=0,s.push(_),s.push(w),a.push(j),R=A,M=I,A=_,I=w,B=0)}}}}for(l=r.length-1;l>=0;l--)s=r[l],0==s.length&&(r.splice(l,1),this.polygonPool.free(s),a=o[l],o.splice(l,1),this.polygonIndicesPool.free(a));return r},e.isConcave=function(t,e,n,i){var r=i[(e+t-1)%e]<<1,o=i[t]<<1,a=i[(t+1)%e]<<1;return!this.positiveArea(n[r],n[r+1],n[o],n[o+1],n[a],n[a+1])},e.positiveArea=function(t,e,n,i,r,o){return t*(o-i)+n*(e-o)+r*(i-e)>=0},e.winding=function(t,e,n,i,r,o){var a=n-t,s=i-e;return r*s-o*a+a*e-t*s>=0?1:-1},e}();t.Triangulator=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return void 0!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var n=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.r=t,this.g=e,this.b=n,this.a=i}return t.prototype.set=function(t,e,n,i){return this.r=t,this.g=e,this.b=n,this.a=i,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,n,i){return this.r+=t,this.g+=e,this.b+=n,this.a+=i,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=n;var r=function(){function t(){}return t.clamp=function(t,e,n){return t<e?e:t>n?n:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,n){return t.randomTriangularWith(e,n,.5*(e+n))},t.randomTriangularWith=function(t,e,n){var i=Math.random(),r=e-t;return i<=(n-t)/r?t+Math.sqrt(i*r*(n-t)):e-Math.sqrt((1-i)*r*(e-n))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();t.MathUtils=r;var o=function(){function t(){}return t.prototype.apply=function(t,e,n){return t+(e-t)*this.applyInternal(n)},t}();t.Interpolation=o;var a=function(t){function e(e){var n=t.call(this)||this;return n.power=2,n.power=e,n}return i(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(o);t.Pow=a;var s=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(a);t.PowOut=s;var u=function(){function t(){}return t.arrayCopy=function(t,e,n,i,r){for(var o=e,a=i;o<e+r;o++,a++)n[a]=t[o]},t.setArraySize=function(t,e,n){void 0===n&&(n=0);var i=t.length;if(i==e)return t;if(t.length=e,i<e)for(var r=i;r<e;r++)t[r]=n;return t},t.ensureArrayCapacity=function(e,n,i){return void 0===i&&(i=0),e.length>=n?e:t.setArraySize(e,n,i)},t.newArray=function(t,e){for(var n=new Array(t),i=0;i<t;i++)n[i]=e;return n},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var n=new Array(e),i=0;i<n.length;i++)n[i]=0;return n},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var n=new Array(e),i=0;i<n.length;i++)n[i]=0;return n},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,n){void 0===n&&(n=!0);for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},t.SUPPORTS_TYPED_ARRAYS="undefined"!==typeof Float32Array,t}();t.Utils=u;var c=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e],i=n.matrix;console.log(n.data.name+", "+i.a+", "+i.b+", "+i.c+", "+i.d+", "+i.tx+", "+i.ty)}},t}();t.DebugUtils=c;var l=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.free(t[e])},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=l;var h=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=h;var d=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=d;var p=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=p})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function t(t){if(null==t)throw new Error("name cannot be null.");this.name=t}return t}();t.Attachment=e;var n=function(e){function n(t){var i=e.call(this,t)||this;return i.id=(65535&n.nextID++)<<11,i.worldVerticesLength=0,i.deformAttachment=i,i}return i(n,e),n.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},n.prototype.computeWorldVertices=function(t,e,n,i,r,o){n=r+(n>>1)*o;var a=t.bone.skeleton,s=t.deform,u=this.vertices,c=this.bones;if(null!=c){for(var l=0,h=0,d=0;d<e;d+=2){var p=c[l];l+=p+1,h+=p}var f=a.bones;if(0==s.length)for(M=r,S=3*h;M<n;M+=o){var m=0,g=0;p=c[l++];for(p+=l;l<p;l++,S+=3){w=f[c[l]].matrix,A=u[S],I=u[S+1];var v=u[S+2];m+=(A*w.a+I*w.c+w.tx)*v,g+=(A*w.b+I*w.d+w.ty)*v}i[M]=m,i[M+1]=g}else for(var y=s,_=(M=r,S=3*h,h<<1);M<n;M+=o){m=0,g=0,p=c[l++];for(p+=l;l<p;l++,S+=3,_+=2){w=f[c[l]].matrix,A=u[S]+y[_],I=u[S+1]+y[_+1],v=u[S+2];m+=(A*w.a+I*w.c+w.tx)*v,g+=(A*w.b+I*w.d+w.ty)*v}i[M]=m,i[M+1]=g}}else{s.length>0&&(u=s);for(var w=t.bone.matrix,b=w.tx,x=w.ty,C=w.a,S=w.c,k=w.b,T=w.d,R=e,M=r;M<n;R+=2,M+=o){var A=u[R],I=u[R+1];i[M]=A*C+I*S+b,i[M+1]=A*k+I*T+x}}},n.prototype.copyTo=function(e){null!=this.bones?(e.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,null!=this.vertices?(e.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},n.nextID=0,n}(e);t.VertexAttachment=n})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){(function(t){t[t["Region"]=0]="Region",t[t["BoundingBox"]=1]="BoundingBox",t[t["Mesh"]=2]="Mesh",t[t["LinkedMesh"]=3]="LinkedMesh",t[t["Path"]=4]="Path",t[t["Point"]=5]="Point",t[t["Clipping"]=6]="Clipping"})(t.AttachmentType||(t.AttachmentType={}))})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.color=new t.Color(1,1,1,1),i}return i(n,e),n.prototype.copy=function(){var t=new n(name);return this.copyTo(t),t.color.setFromColor(this.color),t},n}(t.VertexAttachment);t.BoundingBoxAttachment=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.color=new t.Color(.2275,.2275,.8078,1),i}return i(n,e),n.prototype.copy=function(){var t=new n(name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},n}(t.VertexAttachment);t.ClippingAttachment=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.color=new t.Color(1,1,1,1),i.tempColor=new t.Color(0,0,0,0),i}return i(n,e),n.prototype.getParentMesh=function(){return this.parentMesh},n.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},n.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var e=new n(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Float32Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,null!=this.edges&&(e.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},n.prototype.newLinkedMesh=function(){var t=new n(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},n}(t.VertexAttachment);t.MeshAttachment=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.closed=!1,i.constantSpeed=!1,i.color=new t.Color(1,1,1,1),i}return i(n,e),n.prototype.copy=function(){var e=new n(name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},n}(t.VertexAttachment);t.PathAttachment=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.color=new t.Color(.38,.94,0,1),i}return i(n,e),n.prototype.computeWorldPosition=function(t,e){var n=t.matrix;return e.x=this.x*n.a+this.y*n.c+t.worldX,e.y=this.x*n.b+this.y*n.d+t.worldY,e},n.prototype.computeWorldRotation=function(e){var n=e.matrix,i=t.MathUtils.cosDeg(this.rotation),r=t.MathUtils.sinDeg(this.rotation),o=i*n.a+r*n.c,a=i*n.b+r*n.d;return Math.atan2(a,o)*t.MathUtils.radDeg},n.prototype.copy=function(){var t=new n(name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},n}(t.VertexAttachment);t.PointAttachment=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(e){function n(n){var i=e.call(this,n)||this;return i.x=0,i.y=0,i.scaleX=1,i.scaleY=1,i.rotation=0,i.width=0,i.height=0,i.color=new t.Color(1,1,1,1),i.offset=t.Utils.newFloatArray(8),i.uvs=t.Utils.newFloatArray(8),i.tempColor=new t.Color(1,1,1,1),i}return i(n,e),n.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,o=i+this.region.width*t,a=r+this.region.height*e,s=this.rotation*Math.PI/180,u=Math.cos(s),c=Math.sin(s),l=i*u+this.x,h=i*c,d=r*u+this.y,p=r*c,f=o*u+this.x,m=o*c,g=a*u+this.y,v=a*c,y=this.offset;y[n.OX1]=l-p,y[n.OY1]=d+h,y[n.OX2]=l-v,y[n.OY2]=g+h,y[n.OX3]=f-v,y[n.OY3]=g+m,y[n.OX4]=f-p,y[n.OY4]=d+m},n.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},n.prototype.computeWorldVertices=function(t,e,i,r){var o=this.offset,a=t.matrix,s=a.tx,u=a.ty,c=a.a,l=a.c,h=a.b,d=a.d,p=0,f=0;p=o[n.OX1],f=o[n.OY1],e[i]=p*c+f*l+s,e[i+1]=p*h+f*d+u,i+=r,p=o[n.OX2],f=o[n.OY2],e[i]=p*c+f*l+s,e[i+1]=p*h+f*d+u,i+=r,p=o[n.OX3],f=o[n.OY3],e[i]=p*c+f*l+s,e[i+1]=p*h+f*d+u,i+=r,p=o[n.OX4],f=o[n.OY4],e[i]=p*c+f*l+s,e[i+1]=p*h+f*d+u},n.prototype.copy=function(){var e=new n(this.name);return e.region=this.region,e.rendererObject=this.rendererObject,e.path=this.path,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,t.Utils.arrayCopy(this.uvs,0,e.uvs,0,8),t.Utils.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e},n.OX1=0,n.OY1=1,n.OX2=2,n.OY2=3,n.OX3=4,n.OY3=5,n.OX4=6,n.OY4=7,n.X1=0,n.Y1=1,n.C1R=2,n.C1G=3,n.C1B=4,n.C1A=5,n.U1=6,n.V1=7,n.X2=8,n.Y2=9,n.C2R=10,n.C2G=11,n.C2B=12,n.C2A=13,n.U2=14,n.V2=15,n.X3=16,n.Y3=17,n.C3R=18,n.C3G=19,n.C3B=20,n.C3A=21,n.U3=22,n.V3=23,n.X4=24,n.Y4=25,n.C4R=26,n.C4G=27,n.C4B=28,n.C4A=29,n.U4=30,n.V4=31,n}(t.Attachment);t.RegionAttachment=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return e.prototype.begin=function(t){},e.prototype.transform=function(e,n,i,r){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();t.JitterEffect=e})(t.core||(t.core={}))}(n||(n={})),function(t){(function(t){var e=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(n,i,r,o){var a=this.angle*t.MathUtils.degreesToRadians,s=n.x-this.worldX,u=n.y-this.worldY,c=Math.sqrt(s*s+u*u);if(c<this.radius){var l=e.interpolation.apply(0,a,(this.radius-c)/this.radius),h=Math.cos(l),d=Math.sin(l);n.x=h*s-d*u+this.worldX,n.y=d*s+h*u+this.worldY}},e.prototype.end=function(){},e.interpolation=new t.PowOut(2),e}();t.SwirlEffect=e})(t.core||(t.core={}))}(n||(n={})),function(){Math.fround||(Math.fround=Math.fround=function(t){return function(e){return t[0]=e,t[0]}}(new Float32Array(1)))}(),function(t){t.core.Bone.yDown=!0;var e=[0,0,0],n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e.attachment=null,e}return i(e,t),e}(PIXI.Sprite);t.SpineSprite=n;var r=PIXI.GraphicsGeometry.prototype;if(!r.invalidate){var o=[];r.invalidate=function(){var t=this.graphicsData;o.push(0),this.graphicsData=o,this.clear(),this.graphicsData=t}}var a=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i,r,o)||this;return a.region=null,a.attachment=null,a}return i(e,t),e}(PIXI.SimpleMesh);t.SpineMesh=a;var s=function(r){function o(e){var n=r.call(this)||this;if(!e)throw new Error("The spineData param is required.");if("string"===typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');n.spineData=e,n.skeleton=new t.core.Skeleton(e),n.skeleton.updateWorldTransform(),n.stateData=new t.core.AnimationStateData(e),n.state=new t.core.AnimationState(n.stateData),n.slotContainers=[],n.tempClipContainers=[];for(var i=0,o=n.skeleton.slots.length;i<o;i++){var a=n.skeleton.slots[i],s=a.getAttachment(),u=n.newContainer();if(n.slotContainers.push(u),n.addChild(u),n.tempClipContainers.push(null),s instanceof t.core.RegionAttachment){var c=s.region.name,l=n.createSprite(a,s,c);a.currentSprite=l,a.currentSpriteName=c,u.addChild(l)}else if(s instanceof t.core.MeshAttachment){var h=n.createMesh(a,s);a.currentMesh=h,a.currentMeshName=s.name,u.addChild(h)}else{if(!(s instanceof t.core.ClippingAttachment))continue;n.createGraphics(a,s),u.addChild(a.clippingContainer),u.addChild(a.currentGraphics)}}return n.tintRgb=new Float32Array([1,1,1]),n.autoUpdate=!0,n.visible=!0,n}return i(o,r),Object.defineProperty(o.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,this.updateTransform=t?o.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"delayLimit",{get:function(){var t="undefined"!==typeof this.localDelayLimit?this.localDelayLimit:o.globalDelayLimit;return t||Number.MAX_VALUE},enumerable:!1,configurable:!0}),o.prototype.update=function(n){var i=this.delayLimit;if(n>i&&(n=i),this.state.update(n),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var r=this.skeleton.slots,o=this.color,a=null,s=null;o?(a=o.light,s=o.dark):a=this.tintRgb;for(var u=0,c=r.length;u<c;u++){var l=r[u],h=l.getAttachment(),d=this.slotContainers[u];if(h){var p=null,f=h.color;if(h instanceof t.core.RegionAttachment){var m=h.region;if(m){l.currentMesh&&(l.currentMesh.visible=!1,l.currentMesh=null,l.currentMeshName=void 0);var g=m;if(l.currentSpriteName&&l.currentSpriteName===g.name)l.currentSpriteName!==g.name||l.hackRegion||this.setSpriteRegion(h,l.currentSprite,m);else{var v=g.name;if(l.currentSprite&&(l.currentSprite.visible=!1),l.sprites=l.sprites||{},void 0!==l.sprites[v])l.sprites[v].visible=!0;else{var y=this.createSprite(l,h,v);d.addChild(y)}l.currentSprite=l.sprites[v],l.currentSpriteName=v}}var _=d.transform;_.setFromMatrix(l.bone.matrix),l.currentSprite.color?p=l.currentSprite.color:(e[0]=a[0]*l.color.r*f.r,e[1]=a[1]*l.color.g*f.g,e[2]=a[2]*l.color.b*f.b,l.currentSprite.tint=PIXI.utils.rgb2hex(e)),l.currentSprite.blendMode=l.blendMode}else if(h instanceof t.core.MeshAttachment){if(l.currentSprite){l.currentSprite.visible=!1,l.currentSprite=null,l.currentSpriteName=void 0;_=new PIXI.Transform;_._parentID=-1,_._worldID=d.transform._worldID,d.transform=_}if(!l.currentMeshName||l.currentMeshName!==h.name){var w=h.name;if(l.currentMesh&&(l.currentMesh.visible=!1),l.meshes=l.meshes||{},void 0!==l.meshes[w])l.meshes[w].visible=!0;else{var b=this.createMesh(l,h);d.addChild(b)}l.currentMesh=l.meshes[w],l.currentMeshName=w}h.computeWorldVerticesOld(l,l.currentMesh.vertices),l.currentMesh.color?p=l.currentMesh.color:(e[0]=a[0]*l.color.r*f.r,e[1]=a[1]*l.color.g*f.g,e[2]=a[2]*l.color.b*f.b,l.currentMesh.tint=PIXI.utils.rgb2hex(e)),l.currentMesh.blendMode=l.blendMode}else{if(!(h instanceof t.core.ClippingAttachment)){d.visible=!1;continue}l.currentGraphics||(this.createGraphics(l,h),d.addChild(l.clippingContainer),d.addChild(l.currentGraphics)),this.updateGraphics(l,h)}if(d.visible=!0,p){var x=l.color.r*f.r,C=l.color.g*f.g,S=l.color.b*f.b;p.setLight(a[0]*x+s[0]*(1-x),a[1]*C+s[1]*(1-C),a[2]*S+s[2]*(1-S)),l.darkColor?(x=l.darkColor.r,C=l.darkColor.g,S=l.darkColor.b):(x=0,C=0,S=0),p.setDark(a[0]*x+s[0]*(1-x),a[1]*C+s[1]*(1-C),a[2]*S+s[2]*(1-S))}d.alpha=l.color.a}else d.visible=!1}var k=this.skeleton.drawOrder,T=null,R=null;for(u=0,c=k.length;u<c;u++){l=r[k[u].data.index],d=this.slotContainers[k[u].data.index];if(R||null!==d.parent&&d.parent!==this&&(d.parent.removeChild(d),d.parent=this),l.currentGraphics&&l.getAttachment())R=l.clippingContainer,T=l.getAttachment(),R.children.length=0,this.children[u]=d,T.endSlot==l.data&&(T.endSlot=null);else if(R){var M=this.tempClipContainers[u];M||(M=this.tempClipContainers[u]=this.newContainer(),M.visible=!1),this.children[u]=M,d.parent=null,R.addChild(d),T.endSlot==l.data&&(R.renderable=!0,R=null,T=null)}else this.children[u]=d}}},o.prototype.setSpriteRegion=function(e,n,i){n.attachment===e&&n.region===i||(n.region=i,n.attachment=e,n.texture=i.texture,n.rotation=e.rotation*t.core.MathUtils.degRad,n.position.x=e.x,n.position.y=e.y,n.alpha=e.color.a,i.size?(n.scale.x=i.size.width/i.originalWidth,n.scale.y=-i.size.height/i.originalHeight):(n.scale.x=e.scaleX*e.width/i.originalWidth,n.scale.y=-e.scaleY*e.height/i.originalHeight))},o.prototype.setMeshRegion=function(t,e,n){e.attachment===t&&e.region===n||(e.region=n,e.attachment=t,e.texture=n.texture,n.texture.updateUvs(),e.uvBuffer.update(t.regionUVs))},o.prototype.autoUpdateTransform=function(){if(o.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},o.prototype.createSprite=function(t,e,n){var i=e.region;t.hackAttachment===e&&(i=t.hackRegion);var r=i.texture,o=this.newSprite(r);return o.anchor.set(.5),this.setSpriteRegion(e,o,e.region),t.sprites=t.sprites||{},t.sprites[n]=o,o},o.prototype.createMesh=function(t,e){var n=e.region;t.hackAttachment===e&&(n=t.hackRegion,t.hackAttachment=null,t.hackRegion=null);var i=this.newMesh(n.texture,new Float32Array(e.regionUVs.length),e.regionUVs,new Uint16Array(e.triangles),PIXI.DRAW_MODES.TRIANGLES);return"undefined"!==typeof i._canvasPadding&&(i._canvasPadding=1.5),i.alpha=e.color.a,i.region=e.region,this.setMeshRegion(e,i,n),t.meshes=t.meshes||{},t.meshes[e.name]=i,i},o.prototype.createGraphics=function(t,e){var n=this.newGraphics(),i=new PIXI.Polygon([]);return n.clear(),n.beginFill(16777215,1),n.drawPolygon(i),n.renderable=!1,t.currentGraphics=n,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,n},o.prototype.updateGraphics=function(t,e){var n=t.currentGraphics.geometry,i=n.graphicsData[0].shape.points,r=e.worldVerticesLength;i.length=r,e.computeWorldVertices(t,0,r,i,0,2),n.invalidate()},o.prototype.hackTextureBySlotIndex=function(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var r=this.skeleton.slots[e];if(!r)return!1;var o=r.getAttachment(),a=o.region;return n?(a=new t.core.TextureRegion,a.texture=n,a.size=i,r.hackRegion=a,r.hackAttachment=o):(r.hackRegion=null,r.hackAttachment=null),r.currentSprite&&r.currentSprite.region!=a?(this.setSpriteRegion(o,r.currentSprite,a),r.currentSprite.region=a):r.currentMesh&&r.currentMesh.region!=a&&this.setMeshRegion(o,r.currentMesh,a),!0},o.prototype.hackTextureBySlotName=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var i=this.skeleton.findSlotIndex(t);return-1!=i&&this.hackTextureBySlotIndex(i,e,n)},o.prototype.hackTextureAttachment=function(e,n,i,r){void 0===r&&(r=null);var o=this.skeleton.findSlotIndex(e),a=this.skeleton.getAttachmentByName(e,n);a.region.texture=i;var s=this.skeleton.slots[o];if(!s)return!1;var u=s.getAttachment();if(n===u.name){var c=a.region;return i?(c=new t.core.TextureRegion,c.texture=i,c.size=r,s.hackRegion=c,s.hackAttachment=u):(s.hackRegion=null,s.hackAttachment=null),s.currentSprite&&s.currentSprite.region!=c?(this.setSpriteRegion(u,s.currentSprite,c),s.currentSprite.region=c):s.currentMesh&&s.currentMesh.region!=c&&this.setMeshRegion(u,s.currentMesh,c),!0}return!1},o.prototype.newContainer=function(){return new PIXI.Container},o.prototype.newSprite=function(t){return new n(t)},o.prototype.newGraphics=function(){return new PIXI.Graphics},o.prototype.newMesh=function(t,e,n,i,r){return new a(t,e,n,i,r)},o.prototype.transformHack=function(){return 1},o.prototype.hackAttachmentGroups=function(t,e,n){if(t){for(var i=[],r=[],o=0,a=this.skeleton.slots.length;o<a;o++){var s=this.skeleton.slots[o],u=s.currentSpriteName||s.currentMeshName||"",c=s.currentSprite||s.currentMesh;u.endsWith(t)?(c.parentGroup=e,r.push(c)):n&&c&&(c.parentGroup=n,i.push(c))}return[i,r]}},o.prototype.destroy=function(t){for(var e=0,n=this.skeleton.slots.length;e<n;e++){var i=this.skeleton.slots[e];for(var o in i.meshes)i.meshes[o].destroy(t);for(var a in i.meshes=null,i.sprites)i.sprites[a].destroy(t);i.sprites=null}for(e=0,n=this.slotContainers.length;e<n;e++)this.slotContainers[e].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,r.prototype.destroy.call(this,t)},o.globalAutoUpdate=!0,o.globalDelayLimit=0,o.clippingPolygon=[],o}(PIXI.Container);t.Spine=s}(n||(n={})),function(t){PIXI.spine=t;var e=PIXI.Texture.prototype;e._updateUvs||(e._updateUvs=e.updateUvs)}(n||(n={})),function(t){function e(t){return t.type===PIXI.LoaderResource.TYPE.JSON}function n(t){return t.xhrType===PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER}PIXI.LoaderResource.setExtensionXhrType("skel",PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var i=function(){function i(){}return i.use=function(i,o){if(!i.data)return o();var s=e(i)&&i.data.bones,u=n(i)&&("skel"===i.extension||i.metadata.spineMetadata);if(!s&&!u)return o();var c=null,l=i.data;s?c=new t.core.SkeletonJson(null):(c=new t.core.SkeletonBinary(null),i.data instanceof ArrayBuffer&&(l=new Uint8Array(i.data)));var h=i.metadata||{},d=h?i.metadata.spineSkeletonScale:null;d&&(c.scale=d);var p=h?i.metadata.spineAtlas:null;if(!1===p)return o();if(p&&p.pages)return c.attachmentLoader=new t.core.AtlasAttachmentLoader(p),i.spineData=c.readSkeletonData(l),i.spineAtlas=p,o();var f=h.spineAtlasSuffix||".atlas",m=i.url,g=m.indexOf("?");g>0&&(m=m.substr(0,g)),m=m.substr(0,m.lastIndexOf("."))+f,i.metadata&&i.metadata.spineAtlasFile&&(m=i.metadata.spineAtlasFile),m=m.replace(this.baseUrl,"");var v={crossOrigin:i.crossOrigin,xhrType:PIXI.LoaderResource.XHR_RESPONSE_TYPE.TEXT,metadata:h.spineMetadata||null,parentResource:i},y={crossOrigin:i.crossOrigin,metadata:h.imageMetadata||null,parentResource:i},_=i.url.substr(0,i.url.lastIndexOf("/")+1);_=_.replace(this.baseUrl,"");var w=h.imageNamePrefix||i.name+"_atlas_page_",b=h.images?a(h.images):h.image?a({default:h.image}):h.imageLoader?h.imageLoader(this,w,_,y):r(this,w,_,y),x=function(e){new t.core.TextureAtlas(e,b,(function(e){e&&(c.attachmentLoader=new t.core.AtlasAttachmentLoader(e),i.spineData=c.readSkeletonData(l),i.spineAtlas=e),o()}))};i.metadata&&i.metadata.atlasRawData?x(i.metadata.atlasRawData):this.add(i.name+"_atlas",m,v,(function(t){t.error?o():x(t.data)}))},i}();function r(t,e,n,i){return n&&n.lastIndexOf("/")!==n.length-1&&(n+="/"),function(r,o){var a=e+r,s=n+r,u=t.resources[a];if(u){var c=function(){o(u.texture.baseTexture)};u.texture?c():u.onAfterMiddleware.add(c)}else t.add(a,s,i,(function(t){t.error?o(null):o(t.texture.baseTexture)}))}}function o(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,n){n(PIXI.BaseTexture.from(t,e))}}function a(t){return function(e,n){var i=t[e]||t["default"];i&&i.baseTexture?n(i.baseTexture):n(i)}}t.AtlasParser=i,t.imageLoaderAdapter=r,t.syncImageLoaderAdapter=o,t.staticImageLoader=a,PIXI.Loader&&PIXI.Loader.registerPlugin(i)}(n||(n={}))},3410:function(t,e,n){var i=n("23e7"),r=n("d039"),o=n("7b0b"),a=n("e163"),s=n("e177"),u=r((function(){a(1)}));i({target:"Object",stat:!0,forced:u,sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},"34dd":function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},"38cf":function(t,e,n){var i=n("23e7"),r=n("1148");i({target:"String",proto:!0},{repeat:r})},"3ca3":function(t,e,n){"use strict";var i=n("6547").charAt,r=n("69f3"),o=n("7dd0"),a="String Iterator",s=r.set,u=r.getterFor(a);o(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=i(n,r),e.index+=t.length,{value:t,done:!1})}))},"45fc":function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").some,o=n("a640"),a=n("ae40"),s=o("some"),u=a("some");i({target:"Array",proto:!0,forced:!s||!u},{some:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"466d":function(t,e,n){"use strict";var i=n("d784"),r=n("825a"),o=n("50c4"),a=n("1d80"),s=n("8aa5"),u=n("14c3");i("match",1,(function(t,e,n){return[function(e){var n=a(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,t,this);if(i.done)return i.value;var a=r(t),c=String(this);if(!a.global)return u(a,c);var l=a.unicode;a.lastIndex=0;var h,d=[],p=0;while(null!==(h=u(a,c))){var f=String(h[0]);d[p]=f,""===f&&(a.lastIndex=s(c,o(a.lastIndex),l)),p++}return 0===p?null:d}]}))},"48da":function(t,e,n){var i=n("1de3"),r=n("fd32"),o=n("12ae"),a=n("d4f8");function s(t,e){return i(t)||r(t,e)||o(t,e)||a()}t.exports=s,t.exports["default"]=t.exports,t.exports.__esModule=!0},"4ae1":function(t,e,n){var i=n("23e7"),r=n("d066"),o=n("1c0b"),a=n("825a"),s=n("861d"),u=n("7c73"),c=n("0538"),l=n("d039"),h=r("Reflect","construct"),d=l((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),p=!l((function(){h((function(){}))})),f=d||p;i({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(p&&!d)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(c.apply(t,i))}var r=n.prototype,l=u(s(r)?r:Object.prototype),f=Function.apply.call(t,l,e);return s(f)?f:l}})},"4df4":function(t,e,n){"use strict";var i=n("0366"),r=n("7b0b"),o=n("9bdd"),a=n("e95a"),s=n("50c4"),u=n("8418"),c=n("35a1");t.exports=function(t){var e,n,l,h,d,p,f=r(t),m="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,y=void 0!==v,_=c(f),w=0;if(y&&(v=i(v,g>2?arguments[2]:void 0,2)),void 0==_||m==Array&&a(_))for(e=s(f.length),n=new m(e);e>w;w++)p=y?v(f[w],w):f[w],u(n,w,p);else for(h=_.call(f),d=h.next,n=new m;!(l=d.call(h)).done;w++)p=y?o(h,v,[l.value,w],!0):l.value,u(n,w,p);return n.length=w,n}},"4ec9":function(t,e,n){"use strict";var i=n("6d61"),r=n("6566");t.exports=i("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},"4fad":function(t,e,n){var i=n("23e7"),r=n("6f53").entries;i({target:"Object",stat:!0},{entries:function(t){return r(t)}})},5319:function(t,e,n){"use strict";var i=n("d784"),r=n("825a"),o=n("50c4"),a=n("a691"),s=n("1d80"),u=n("8aa5"),c=n("0cb2"),l=n("14c3"),h=Math.max,d=Math.min,p=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var f=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=i.REPLACE_KEEPS_$0,g=f?"$":"$0";return[function(n,i){var r=s(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!f&&m||"string"===typeof i&&-1===i.indexOf(g)){var s=n(e,t,this,i);if(s.done)return s.value}var v=r(t),y=String(this),_="function"===typeof i;_||(i=String(i));var w=v.global;if(w){var b=v.unicode;v.lastIndex=0}var x=[];while(1){var C=l(v,y);if(null===C)break;if(x.push(C),!w)break;var S=String(C[0]);""===S&&(v.lastIndex=u(y,o(v.lastIndex),b))}for(var k="",T=0,R=0;R<x.length;R++){C=x[R];for(var M=String(C[0]),A=h(d(a(C.index),y.length),0),I=[],P=1;P<C.length;P++)I.push(p(C[P]));var E=C.groups;if(_){var O=[M].concat(I,A,y);void 0!==E&&O.push(E);var D=String(i.apply(void 0,O))}else D=c(M,y,A,I,E,i);A>=T&&(k+=y.slice(T,A)+D,T=A+M.length)}return k+y.slice(T)}]}))},"5fb2":function(t,e,n){"use strict";var i=2147483647,r=36,o=1,a=26,s=38,u=700,c=72,l=128,h="-",d=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,f="Overflow: input needs wider integers to process",m=r-o,g=Math.floor,v=String.fromCharCode,y=function(t){var e=[],n=0,i=t.length;while(n<i){var r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),n--)}else e.push(r)}return e},_=function(t){return t+22+75*(t<26)},w=function(t,e,n){var i=0;for(t=n?g(t/u):t>>1,t+=g(t/e);t>m*a>>1;i+=r)t=g(t/m);return g(i+(m+1)*t/(t+s))},b=function(t){var e=[];t=y(t);var n,s,u=t.length,d=l,p=0,m=c;for(n=0;n<t.length;n++)s=t[n],s<128&&e.push(v(s));var b=e.length,x=b;b&&e.push(h);while(x<u){var C=i;for(n=0;n<t.length;n++)s=t[n],s>=d&&s<C&&(C=s);var S=x+1;if(C-d>g((i-p)/S))throw RangeError(f);for(p+=(C-d)*S,d=C,n=0;n<t.length;n++){if(s=t[n],s<d&&++p>i)throw RangeError(f);if(s==d){for(var k=p,T=r;;T+=r){var R=T<=m?o:T>=m+a?a:T-m;if(k<R)break;var M=k-R,A=r-R;e.push(v(_(R+M%A))),k=g(M/A)}e.push(v(_(k))),m=w(p,S,x==b),p=0,++x}}++p,++d}return e.join("")};t.exports=function(t){var e,n,i=[],r=t.toLowerCase().replace(p,".").split(".");for(e=0;e<r.length;e++)n=r[e],i.push(d.test(n)?"xn--"+b(n):n);return i.join(".")}},6547:function(t,e,n){var i=n("a691"),r=n("1d80"),o=function(t){return function(e,n){var o,a,s=String(r(e)),u=i(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},6566:function(t,e,n){"use strict";var i=n("9bf2").f,r=n("7c73"),o=n("e2cc"),a=n("0366"),s=n("19aa"),u=n("2266"),c=n("7dd0"),l=n("2626"),h=n("83ab"),d=n("f183").fastKey,p=n("69f3"),f=p.set,m=p.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,i){s(t,l,e),f(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),h||(t.size=0),void 0!=i&&u(i,t[c],{that:t,AS_ENTRIES:n})})),p=m(e),g=function(t,e,n){var i,r,o=p(t),a=v(t,e);return a?a.value=n:(o.last=a={index:r=d(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=a),i&&(i.next=a),h?o.size++:t.size++,"F"!==r&&(o.index[r]=a)),t},v=function(t,e){var n,i=p(t),r=d(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return o(l.prototype,{clear:function(){var t=this,e=p(t),n=e.index,i=e.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;e.first=e.last=void 0,h?e.size=0:t.size=0},delete:function(t){var e=this,n=p(e),i=v(e,t);if(i){var r=i.next,o=i.previous;delete n.index[i.index],i.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first==i&&(n.first=r),n.last==i&&(n.last=o),h?n.size--:e.size--}return!!i},forEach:function(t){var e,n=p(this),i=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){i(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!v(this,t)}}),o(l.prototype,n?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),h&&i(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(t,e,n){var i=e+" Iterator",r=m(e),o=m(i);c(t,e,(function(t,e){f(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},"6d61":function(t,e,n){"use strict";var i=n("23e7"),r=n("da84"),o=n("94ca"),a=n("6eeb"),s=n("f183"),u=n("2266"),c=n("19aa"),l=n("861d"),h=n("d039"),d=n("1c7e"),p=n("d44e"),f=n("7156");t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),v=m?"set":"add",y=r[t],_=y&&y.prototype,w=y,b={},x=function(t){var e=_[t];a(_,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof y||!(g||_.forEach&&!h((function(){(new y).entries().next()})))))w=n.getConstructor(e,t,m,v),s.REQUIRED=!0;else if(o(t,!0)){var C=new w,S=C[v](g?{}:-0,1)!=C,k=h((function(){C.has(1)})),T=d((function(t){new y(t)})),R=!g&&h((function(){var t=new y,e=5;while(e--)t[v](e,e);return!t.has(-0)}));T||(w=e((function(e,n){c(e,w,t);var i=f(new y,e,w);return void 0!=n&&u(n,i[v],{that:i,AS_ENTRIES:m}),i})),w.prototype=_,_.constructor=w),(k||R)&&(x("delete"),x("has"),m&&x("get")),(R||S)&&x(v),g&&_.clear&&delete _.clear}return b[t]=w,i({global:!0,forced:w!=y},b),p(w,t),g||n.setStrong(w,t,m),w}},"6f53":function(t,e,n){var i=n("83ab"),r=n("df75"),o=n("fc6a"),a=n("d1e7").f,s=function(t){return function(e){var n,s=o(e),u=r(s),c=u.length,l=0,h=[];while(c>l)n=u[l++],i&&!a.call(s,n)||h.push(t?[n,s[n]]:s[n]);return h}};t.exports={entries:s(!0),values:s(!1)}},7156:function(t,e,n){var i=n("861d"),r=n("d2bb");t.exports=function(t,e,n){var o,a;return r&&"function"==typeof(o=e.constructor)&&o!==n&&i(a=o.prototype)&&a!==n.prototype&&r(t,a),t}},"857a":function(t,e,n){var i=n("1d80"),r=/"/g;t.exports=function(t,e,n,o){var a=String(i(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(r,"&quot;")+'"'),s+">"+a+"</"+e+">"}},"85a6":function(t,e,n){},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},9263:function(t,e,n){"use strict";var i=n("ad6d"),r=n("9f7f"),o=RegExp.prototype.exec,a=String.prototype.replace,s=o,u=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=r.UNSUPPORTED_Y||r.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],h=u||l||c;h&&(s=function(t){var e,n,r,s,h=this,d=c&&h.sticky,p=i.call(h),f=h.source,m=0,g=t;return d&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),g=String(t).slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==t[h.lastIndex-1])&&(f="(?: "+f+")",g=" "+g,m++),n=new RegExp("^(?:"+f+")",p)),l&&(n=new RegExp("^"+f+"$(?!\\s)",p)),u&&(e=h.lastIndex),r=o.call(d?n:h,g),d?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=h.lastIndex,h.lastIndex+=r[0].length):h.lastIndex=0:u&&r&&(h.lastIndex=h.global?r.index+r[0].length:e),l&&r&&r.length>1&&a.call(r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r}),t.exports=s},"96cf":function(t,e,n){var i=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(E){u=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var r=e&&e.prototype instanceof g?e:g,o=Object.create(r.prototype),a=new A(i||[]);return o._invoke=k(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=c;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",m={};function g(){}function v(){}function y(){}var _={};_[o]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(I([])));b&&b!==n&&i.call(b,o)&&(_=b);var x=y.prototype=g.prototype=Object.create(_);function C(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(r,o,a,s){var u=l(t[r],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"===typeof h&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var r;function o(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}this._invoke=o}function k(t,e,n){var i=h;return function(r,o){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw o;return P()}n.method=r,n.arg=o;while(1){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=l(t,e,n);if("normal"===u.type){if(i=n.done?f:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=f,n.method="throw",n.arg=u.arg)}}}function T(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=l(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function I(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){while(++r<t.length)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:e,done:!0}}return v.prototype=x.constructor=y,y.constructor=v,v.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},C(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new S(c(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(x),u(x,s,"Generator"),x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=I,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:I(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=i}catch(r){Function("r","regeneratorRuntime = r")(i)}},9861:function(t,e,n){"use strict";n("e260");var i=n("23e7"),r=n("d066"),o=n("0d3b"),a=n("6eeb"),s=n("e2cc"),u=n("d44e"),c=n("9ed3"),l=n("69f3"),h=n("19aa"),d=n("5135"),p=n("0366"),f=n("f5df"),m=n("825a"),g=n("861d"),v=n("7c73"),y=n("5c6c"),_=n("9a1f"),w=n("35a1"),b=n("b622"),x=r("fetch"),C=r("Headers"),S=b("iterator"),k="URLSearchParams",T=k+"Iterator",R=l.set,M=l.getterFor(k),A=l.getterFor(T),I=/\+/g,P=Array(4),E=function(t){return P[t-1]||(P[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},O=function(t){try{return decodeURIComponent(t)}catch(e){return t}},D=function(t){var e=t.replace(I," "),n=4;try{return decodeURIComponent(e)}catch(i){while(n)e=e.replace(E(n--),O);return e}},V=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=function(t){return B[t]},N=function(t){return encodeURIComponent(t).replace(V,F)},L=function(t,e){if(e){var n,i,r=e.split("&"),o=0;while(o<r.length)n=r[o++],n.length&&(i=n.split("="),t.push({key:D(i.shift()),value:D(i.join("="))}))}},j=function(t){this.entries.length=0,L(this.entries,t)},U=function(t,e){if(t<e)throw TypeError("Not enough arguments")},X=c((function(t,e){R(this,{type:T,iterator:_(M(t).entries),kind:e})}),"Iterator",(function(){var t=A(this),e=t.kind,n=t.iterator.next(),i=n.value;return n.done||(n.value="keys"===e?i.key:"values"===e?i.value:[i.key,i.value]),n})),z=function(){h(this,z,k);var t,e,n,i,r,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,p=[];if(R(l,{type:k,entries:p,updateURL:function(){},updateSearchParams:j}),void 0!==c)if(g(c))if(t=w(c),"function"===typeof t){e=t.call(c),n=e.next;while(!(i=n.call(e)).done){if(r=_(m(i.value)),o=r.next,(a=o.call(r)).done||(s=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");p.push({key:a.value+"",value:s.value+""})}}else for(u in c)d(c,u)&&p.push({key:u,value:c[u]+""});else L(p,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},G=z.prototype;s(G,{append:function(t,e){U(arguments.length,2);var n=M(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){U(arguments.length,1);var e=M(this),n=e.entries,i=t+"",r=0;while(r<n.length)n[r].key===i?n.splice(r,1):r++;e.updateURL()},get:function(t){U(arguments.length,1);for(var e=M(this).entries,n=t+"",i=0;i<e.length;i++)if(e[i].key===n)return e[i].value;return null},getAll:function(t){U(arguments.length,1);for(var e=M(this).entries,n=t+"",i=[],r=0;r<e.length;r++)e[r].key===n&&i.push(e[r].value);return i},has:function(t){U(arguments.length,1);var e=M(this).entries,n=t+"",i=0;while(i<e.length)if(e[i++].key===n)return!0;return!1},set:function(t,e){U(arguments.length,1);for(var n,i=M(this),r=i.entries,o=!1,a=t+"",s=e+"",u=0;u<r.length;u++)n=r[u],n.key===a&&(o?r.splice(u--,1):(o=!0,n.value=s));o||r.push({key:a,value:s}),i.updateURL()},sort:function(){var t,e,n,i=M(this),r=i.entries,o=r.slice();for(r.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(r[e].key>t.key){r.splice(e,0,t);break}e===n&&r.push(t)}i.updateURL()},forEach:function(t){var e,n=M(this).entries,i=p(t,arguments.length>1?arguments[1]:void 0,3),r=0;while(r<n.length)e=n[r++],i(e.value,e.key,this)},keys:function(){return new X(this,"keys")},values:function(){return new X(this,"values")},entries:function(){return new X(this,"entries")}},{enumerable:!0}),a(G,S,G.entries),a(G,"toString",(function(){var t,e=M(this).entries,n=[],i=0;while(i<e.length)t=e[i++],n.push(N(t.key)+"="+N(t.value));return n.join("&")}),{enumerable:!0}),u(z,k),i({global:!0,forced:!o},{URLSearchParams:z}),o||"function"!=typeof x||"function"!=typeof C||i({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,i,r=[t];return arguments.length>1&&(e=arguments[1],g(e)&&(n=e.body,f(n)===k&&(i=e.headers?new C(e.headers):new C,i.has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=v(e,{body:y(0,String(n)),headers:y(0,i)}))),r.push(e)),x.apply(this,r)}}),t.exports={URLSearchParams:z,getState:M}},"99af":function(t,e,n){"use strict";var i=n("23e7"),r=n("d039"),o=n("e8b5"),a=n("861d"),s=n("7b0b"),u=n("50c4"),c=n("8418"),l=n("65f0"),h=n("1dde"),d=n("b622"),p=n("2d00"),f=d("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",v=p>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),y=h("concat"),_=function(t){if(!a(t))return!1;var e=t[f];return void 0!==e?!!e:o(t)},w=!v||!y;i({target:"Array",proto:!0,forced:w},{concat:function(t){var e,n,i,r,o,a=s(this),h=l(a,0),d=0;for(e=-1,i=arguments.length;e<i;e++)if(o=-1===e?a:arguments[e],_(o)){if(r=u(o.length),d+r>m)throw TypeError(g);for(n=0;n<r;n++,d++)n in o&&c(h,d,o[n])}else{if(d>=m)throw TypeError(g);c(h,d++,o)}return h.length=d,h}})},"9a1f":function(t,e,n){var i=n("825a"),r=n("35a1");t.exports=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return i(e.call(t))}},"9bdd":function(t,e,n){var i=n("825a"),r=n("2a62");t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(a){throw r(t),a}}},"9ce6":function(t,e,n){"use strict";n.d(e,"a",(function(){return yt})),n.d(e,"b",(function(){return yt}));var i,r,o,a,s,u,c,l,h=n("a5cf"),d=function(){return"undefined"!==typeof window},p={},f=180/Math.PI,m=Math.PI/180,g=Math.atan2,v=1e8,y=/([A-Z])/g,_=/(?:left|right|width|margin|padding|x)/i,w=/[\s,\(]\S/,b={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},x=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},C=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},S=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},k=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},T=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},R=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},M=function(t,e,n){return t.style[e]=n},A=function(t,e,n){return t.style.setProperty(e,n)},I=function(t,e,n){return t._gsap[e]=n},P=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},E=function(t,e,n,i,r){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(r,o)},O=function(t,e,n,i,r){var o=t._gsap;o[e]=n,o.renderTransform(r,o)},D="transform",V=D+"Origin",B=function(t,e){var n=r.createElementNS?r.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):r.createElement(t);return n.style?n:r.createElement(t)},F=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(y,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,L(n)||n,1)||""},N="O,Moz,ms,Ms,Webkit".split(","),L=function(t,e,n){var i=e||s,r=i.style,o=5;if(t in r&&!n)return t;t=t.charAt(0).toUpperCase()+t.substr(1);while(o--&&!(N[o]+t in r));return o<0?null:(3===o?"ms":o>=0?N[o]:"")+t},j=function(){d()&&(i=window,r=i.document,o=r.documentElement,s=B("div")||{style:{}},u=B("div"),D=L(D),V=L(V),s.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",l=!!L("perspective"),a=1)},U=function t(e){var n,i=B("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,a=this.nextSibling,s=this.style.cssText;if(o.appendChild(i),i.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(u){}else this._gsapBBox&&(n=this._gsapBBox());return r&&(a?r.insertBefore(this,a):r.appendChild(this)),o.removeChild(i),this.style.cssText=s,n},X=function(t,e){var n=e.length;while(n--)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},z=function(t){var e;try{e=t.getBBox()}catch(n){e=U.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===U||(e=U.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+X(t,["x","cx","x1"])||0,y:+X(t,["y","cy","y1"])||0,width:0,height:0}},G=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!z(t))},W=function(t,e){if(e){var n=t.style;e in p&&(e=D),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(y,"-$1").toLowerCase())):n.removeAttribute(e)}},q=function(t,e,n,i,r,o){var a=new h["c"](t._pt,e,n,0,1,o?R:T);return t._pt=a,a.b=i,a.e=r,t._props.push(n),a},H={deg:1,rad:1,turn:1},Y=function t(e,n,i,o){var a,u,c,l,d=parseFloat(i)||0,f=(i+"").trim().substr((d+"").length)||"px",m=s.style,g=_.test(n),v="svg"===e.tagName.toLowerCase(),y=(v?"client":"offset")+(g?"Width":"Height"),w=100,b="px"===o,x="%"===o;return o===f||!d||H[o]||H[f]?d:("px"!==f&&!b&&(d=t(e,n,i,"px")),l=e.getCTM&&G(e),x&&(p[n]||~n.indexOf("adius"))?Object(h["t"])(d/(l?e.getBBox()[g?"width":"height"]:e[y])*w):(m[g?"width":"height"]=w+(b?f:o),u=~n.indexOf("adius")||"em"===o&&e.appendChild&&!v?e:e.parentNode,l&&(u=(e.ownerSVGElement||{}).parentNode),u&&u!==r&&u.appendChild||(u=r.body),c=u._gsap,c&&x&&c.width&&g&&c.time===h["v"].time?Object(h["t"])(d/c.width*w):((x||"%"===f)&&(m.position=F(e,"position")),u===e&&(m.position="static"),u.appendChild(s),a=s[y],u.removeChild(s),m.position="absolute",g&&x&&(c=Object(h["h"])(u),c.time=h["v"].time,c.width=u[y]),Object(h["t"])(b?a*d/w:a&&d?w/a*d:0))))},Q=function(t,e,n,i){var r;return a||j(),e in b&&"transform"!==e&&(e=b[e],~e.indexOf(",")&&(e=e.split(",")[0])),p[e]&&"transform"!==e?(r=st(t,i),r="transformOrigin"!==e?r[e]:ut(F(t,V))+" "+r.zOrigin+"px"):(r=t.style[e],(!r||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=tt[e]&&tt[e](t,e,n)||F(t,e)||Object(h["i"])(t,e)||("opacity"===e?1:0))),n&&!~(r+"").indexOf(" ")?Y(t,e,r,n)+n:r},Z=function(t,e,n,i){if(!n||"none"===n){var r=L(e,t,1),o=r&&F(t,r,1);o&&o!==n&&(e=r,n=o)}var a,s,u,c,l,d,p,f,m,g,v,y,_,w=new h["c"](this._pt,t.style,e,0,1,h["r"]),b=0,x=0;if(w.b=n,w.e=i,n+="",i+="","auto"===i&&(t.style[e]=i,i=F(t,e)||i,t.style[e]=n),a=[n,i],Object(h["e"])(a),n=a[0],i=a[1],u=n.match(h["o"])||[],_=i.match(h["o"])||[],_.length){while(s=h["o"].exec(i))p=s[0],m=i.substring(b,s.index),l?l=(l+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(l=1),p!==(d=u[x++]||"")&&(c=parseFloat(d)||0,v=d.substr((c+"").length),y="="===p.charAt(1)?+(p.charAt(0)+"1"):0,y&&(p=p.substr(2)),f=parseFloat(p),g=p.substr((f+"").length),b=h["o"].lastIndex-g.length,g||(g=g||h["f"].units[e]||v,b===i.length&&(i+=g,w.e+=g)),v!==g&&(c=Y(t,e,d,g)||0),w._pt={_next:w._pt,p:m||1===x?m:",",s:c,c:y?y*f:f-c,m:l&&l<4?Math.round:0});w.c=b<i.length?i.substring(b,i.length):""}else w.r="display"===e&&"none"===i?R:T;return h["q"].test(i)&&(w.e=0),this._pt=w,w},$={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},K=function(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(t=n,n=i,i=t),e[0]=$[n]||n,e[1]=$[i]||i,e.join(" ")},J=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,o=e.t,a=o.style,s=e.u,u=o._gsap;if("all"===s||!0===s)a.cssText="",i=1;else{s=s.split(","),r=s.length;while(--r>-1)n=s[r],p[n]&&(i=1,n="transformOrigin"===n?V:D),W(o,n)}i&&(W(o,D),u&&(u.svg&&o.removeAttribute("transform"),st(o,1),u.uncache=1))}},tt={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var o=t._pt=new h["c"](t._pt,e,n,0,0,J);return o.u=i,o.pr=-10,o.tween=r,t._props.push(n),1}}},et=[1,0,0,1,0,0],nt={},it=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},rt=function(t){var e=F(t,D);return it(e)?et:e.substr(7).match(h["n"]).map(h["t"])},ot=function(t,e){var n,i,r,a,s=t._gsap||Object(h["h"])(t),u=t.style,c=rt(t);return s.svg&&t.getAttribute("transform")?(r=t.transform.baseVal.consolidate().matrix,c=[r.a,r.b,r.c,r.d,r.e,r.f],"1,0,0,1,0,0"===c.join(",")?et:c):(c!==et||t.offsetParent||t===o||s.svg||(r=u.display,u.display="block",n=t.parentNode,n&&t.offsetParent||(a=1,i=t.nextSibling,o.appendChild(t)),c=rt(t),r?u.display=r:W(t,"display"),a&&(i?n.insertBefore(t,i):n?n.appendChild(t):o.removeChild(t))),e&&c.length>6?[c[0],c[1],c[4],c[5],c[12],c[13]]:c)},at=function(t,e,n,i,r,o){var a,s,u,c,l=t._gsap,h=r||ot(t,!0),d=l.xOrigin||0,p=l.yOrigin||0,f=l.xOffset||0,m=l.yOffset||0,g=h[0],v=h[1],y=h[2],_=h[3],w=h[4],b=h[5],x=e.split(" "),C=parseFloat(x[0])||0,S=parseFloat(x[1])||0;n?h!==et&&(s=g*_-v*y)&&(u=C*(_/s)+S*(-y/s)+(y*b-_*w)/s,c=C*(-v/s)+S*(g/s)-(g*b-v*w)/s,C=u,S=c):(a=z(t),C=a.x+(~x[0].indexOf("%")?C/100*a.width:C),S=a.y+(~(x[1]||x[0]).indexOf("%")?S/100*a.height:S)),i||!1!==i&&l.smooth?(w=C-d,b=S-p,l.xOffset=f+(w*g+b*y)-w,l.yOffset=m+(w*v+b*_)-b):l.xOffset=l.yOffset=0,l.xOrigin=C,l.yOrigin=S,l.smooth=!!i,l.origin=e,l.originIsAbsolute=!!n,t.style[V]="0px 0px",o&&(q(o,l,"xOrigin",d,C),q(o,l,"yOrigin",p,S),q(o,l,"xOffset",f,l.xOffset),q(o,l,"yOffset",m,l.yOffset)),t.setAttribute("data-svg-origin",C+" "+S)},st=function(t,e){var n=t._gsap||new h["a"](t);if("x"in n&&!e&&!n.uncache)return n;var i,r,o,a,s,u,c,d,p,v,y,_,w,b,x,C,S,k,T,R,M,A,I,P,E,O,B,N,L,j,U,X,z=t.style,W=n.scaleX<0,q="px",H="deg",Y=F(t,V)||"0";return i=r=o=u=c=d=p=v=y=0,a=s=1,n.svg=!(!t.getCTM||!G(t)),b=ot(t,n.svg),n.svg&&(P=!n.uncache&&t.getAttribute("data-svg-origin"),at(t,P||Y,!!P||n.originIsAbsolute,!1!==n.smooth,b)),_=n.xOrigin||0,w=n.yOrigin||0,b!==et&&(k=b[0],T=b[1],R=b[2],M=b[3],i=A=b[4],r=I=b[5],6===b.length?(a=Math.sqrt(k*k+T*T),s=Math.sqrt(M*M+R*R),u=k||T?g(T,k)*f:0,p=R||M?g(R,M)*f+u:0,p&&(s*=Math.cos(p*m)),n.svg&&(i-=_-(_*k+w*R),r-=w-(_*T+w*M))):(X=b[6],j=b[7],B=b[8],N=b[9],L=b[10],U=b[11],i=b[12],r=b[13],o=b[14],x=g(X,L),c=x*f,x&&(C=Math.cos(-x),S=Math.sin(-x),P=A*C+B*S,E=I*C+N*S,O=X*C+L*S,B=A*-S+B*C,N=I*-S+N*C,L=X*-S+L*C,U=j*-S+U*C,A=P,I=E,X=O),x=g(-R,L),d=x*f,x&&(C=Math.cos(-x),S=Math.sin(-x),P=k*C-B*S,E=T*C-N*S,O=R*C-L*S,U=M*S+U*C,k=P,T=E,R=O),x=g(T,k),u=x*f,x&&(C=Math.cos(x),S=Math.sin(x),P=k*C+T*S,E=A*C+I*S,T=T*C-k*S,I=I*C-A*S,k=P,A=E),c&&Math.abs(c)+Math.abs(u)>359.9&&(c=u=0,d=180-d),a=Object(h["t"])(Math.sqrt(k*k+T*T+R*R)),s=Object(h["t"])(Math.sqrt(I*I+X*X)),x=g(A,I),p=Math.abs(x)>2e-4?x*f:0,y=U?1/(U<0?-U:U):0),n.svg&&(b=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!it(F(t,D)),b&&t.setAttribute("transform",b))),Math.abs(p)>90&&Math.abs(p)<270&&(W?(a*=-1,p+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,p+=p<=0?180:-180)),n.x=((n.xPercent=i&&Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)?0:i)+q,n.y=((n.yPercent=r&&Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)?0:r)+q,n.z=o+q,n.scaleX=Object(h["t"])(a),n.scaleY=Object(h["t"])(s),n.rotation=Object(h["t"])(u)+H,n.rotationX=Object(h["t"])(c)+H,n.rotationY=Object(h["t"])(d)+H,n.skewX=p+H,n.skewY=v+H,n.transformPerspective=y+q,(n.zOrigin=parseFloat(Y.split(" ")[2])||0)&&(z[V]=ut(Y)),n.xOffset=n.yOffset=0,n.force3D=h["f"].force3D,n.renderTransform=n.svg?mt:l?ft:lt,n.uncache=0,n},ut=function(t){return(t=t.split(" "))[0]+" "+t[1]},ct=function(t,e,n){var i=Object(h["x"])(e);return Object(h["t"])(parseFloat(e)+parseFloat(Y(t,"x",n+"px",i)))+i},lt=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,ft(t,e)},ht="0deg",dt="0px",pt=") ",ft=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,o=n.x,a=n.y,s=n.z,u=n.rotation,c=n.rotationY,l=n.rotationX,h=n.skewX,d=n.skewY,p=n.scaleX,f=n.scaleY,g=n.transformPerspective,v=n.force3D,y=n.target,_=n.zOrigin,w="",b="auto"===v&&t&&1!==t||!0===v;if(_&&(l!==ht||c!==ht)){var x,C=parseFloat(c)*m,S=Math.sin(C),k=Math.cos(C);C=parseFloat(l)*m,x=Math.cos(C),o=ct(y,o,S*x*-_),a=ct(y,a,-Math.sin(C)*-_),s=ct(y,s,k*x*-_+_)}g!==dt&&(w+="perspective("+g+pt),(i||r)&&(w+="translate("+i+"%, "+r+"%) "),(b||o!==dt||a!==dt||s!==dt)&&(w+=s!==dt||b?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+pt),u!==ht&&(w+="rotate("+u+pt),c!==ht&&(w+="rotateY("+c+pt),l!==ht&&(w+="rotateX("+l+pt),h===ht&&d===ht||(w+="skew("+h+", "+d+pt),1===p&&1===f||(w+="scale("+p+", "+f+pt),y.style[D]=w||"translate(0, 0)"},mt=function(t,e){var n,i,r,o,a,s=e||this,u=s.xPercent,c=s.yPercent,l=s.x,d=s.y,p=s.rotation,f=s.skewX,g=s.skewY,v=s.scaleX,y=s.scaleY,_=s.target,w=s.xOrigin,b=s.yOrigin,x=s.xOffset,C=s.yOffset,S=s.forceCSS,k=parseFloat(l),T=parseFloat(d);p=parseFloat(p),f=parseFloat(f),g=parseFloat(g),g&&(g=parseFloat(g),f+=g,p+=g),p||f?(p*=m,f*=m,n=Math.cos(p)*v,i=Math.sin(p)*v,r=Math.sin(p-f)*-y,o=Math.cos(p-f)*y,f&&(g*=m,a=Math.tan(f-g),a=Math.sqrt(1+a*a),r*=a,o*=a,g&&(a=Math.tan(g),a=Math.sqrt(1+a*a),n*=a,i*=a)),n=Object(h["t"])(n),i=Object(h["t"])(i),r=Object(h["t"])(r),o=Object(h["t"])(o)):(n=v,o=y,i=r=0),(k&&!~(l+"").indexOf("px")||T&&!~(d+"").indexOf("px"))&&(k=Y(_,"x",l,"px"),T=Y(_,"y",d,"px")),(w||b||x||C)&&(k=Object(h["t"])(k+w-(w*n+b*r)+x),T=Object(h["t"])(T+b-(w*i+b*o)+C)),(u||c)&&(a=_.getBBox(),k=Object(h["t"])(k+u/100*a.width),T=Object(h["t"])(T+c/100*a.height)),a="matrix("+n+","+i+","+r+","+o+","+k+","+T+")",_.setAttribute("transform",a),S&&(_.style[D]=a)},gt=function(t,e,n,i,r,o){var a,s,u=360,c=Object(h["k"])(r),l=parseFloat(r)*(c&&~r.indexOf("rad")?f:1),d=o?l*o:l-i,p=i+d+"deg";return c&&(a=r.split("_")[1],"short"===a&&(d%=u,d!==d%(u/2)&&(d+=d<0?u:-u)),"cw"===a&&d<0?d=(d+u*v)%u-~~(d/u)*u:"ccw"===a&&d>0&&(d=(d-u*v)%u-~~(d/u)*u)),t._pt=s=new h["c"](t._pt,e,n,i,d,C),s.e=p,s.u="deg",t._props.push(n),s},vt=function(t,e,n){var i,o,a,s,c,l,d,f,m=u.style,g=n._gsap,v="perspective,force3D,transformOrigin,svgOrigin";for(o in m.cssText=getComputedStyle(n).cssText+";position:absolute;display:block;",m[D]=e,r.body.appendChild(u),i=st(u,1),p)a=g[o],s=i[o],a!==s&&v.indexOf(o)<0&&(d=Object(h["x"])(a),f=Object(h["x"])(s),c=d!==f?Y(n,o,a,f):parseFloat(a),l=parseFloat(s),t._pt=new h["c"](t._pt,g,o,c,l-c,x),t._pt.u=f||0,t._props.push(o));r.body.removeChild(u)};
/*!
 * CSSPlugin 3.2.6
 * https://greensock.com
 *
 * Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/Object(h["g"])("padding,margin,Width,Radius",(function(t,e){var n="Top",i="Right",r="Bottom",o="Left",a=(e<3?[n,i,r,o]:[n+o,n+i,r+i,r+o]).map((function(n){return e<2?t+n:"border"+n+t}));tt[e>1?"border"+t:t]=function(t,e,n,i,r){var o,s;if(arguments.length<4)return o=a.map((function(e){return Q(t,e,n)})),s=o.join(" "),5===s.split(o[0]).length?o[0]:s;o=(i+"").split(" "),s={},a.forEach((function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,s,r)}}));var yt={name:"css",register:j,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var o,s,u,c,l,d,f,m,g,v,y,_,C,T,R,M=this._props,A=t.style;for(f in a||j(),e)if("autoRound"!==f&&(s=e[f],!h["p"][f]||!Object(h["d"])(f,e,n,i,t,r)))if(l=typeof s,d=tt[f],"function"===l&&(s=s.call(n,i,t,r),l=typeof s),"string"===l&&~s.indexOf("random(")&&(s=Object(h["s"])(s)),d)d(this,t,f,s,n)&&(R=1);else if("--"===f.substr(0,2))this.add(A,"setProperty",getComputedStyle(t).getPropertyValue(f)+"",s+"",i,r,0,0,f);else{if(o=Q(t,f),c=parseFloat(o),v="string"===l&&"="===s.charAt(1)?+(s.charAt(0)+"1"):0,v&&(s=s.substr(2)),u=parseFloat(s),f in b&&("autoAlpha"===f&&(1===c&&"hidden"===Q(t,"visibility")&&u&&(c=0),q(this,A,"visibility",c?"inherit":"hidden",u?"inherit":"hidden",!u)),"scale"!==f&&"transform"!==f&&(f=b[f],~f.indexOf(",")&&(f=f.split(",")[0]))),y=f in p,y)if(_||(C=t._gsap,C.renderTransform||st(t),T=!1!==e.smoothOrigin&&C.smooth,_=this._pt=new h["c"](this._pt,A,D,0,1,C.renderTransform,C,0,-1),_.dep=1),"scale"===f)this._pt=new h["c"](this._pt,C,"scaleY",C.scaleY,v?v*u:u-C.scaleY),M.push("scaleY",f),f+="X";else{if("transformOrigin"===f){s=K(s),C.svg?at(t,s,0,T,0,this):(g=parseFloat(s.split(" ")[2])||0,g!==C.zOrigin&&q(this,C,"zOrigin",C.zOrigin,g),q(this,A,f,ut(o),ut(s)));continue}if("svgOrigin"===f){at(t,s,1,T,0,this);continue}if(f in nt){gt(this,C,f,c,s,v);continue}if("smoothOrigin"===f){q(this,C,"smooth",C.smooth,s);continue}if("force3D"===f){C[f]=s;continue}if("transform"===f){vt(this,s,t);continue}}else f in A||(f=L(f)||f);if(y||(u||0===u)&&(c||0===c)&&!w.test(s)&&f in A)m=(o+"").substr((c+"").length),u||(u=0),g=(s+"").substr((u+"").length)||(f in h["f"].units?h["f"].units[f]:m),m!==g&&(c=Y(t,f,o,g)),this._pt=new h["c"](this._pt,y?C:A,f,c,v?v*u:u-c,"px"!==g||!1===e.autoRound||y?x:k),this._pt.u=g||0,m!==g&&(this._pt.b=o,this._pt.r=S);else if(f in A)Z.call(this,t,f,o,s);else{if(!(f in t)){Object(h["m"])(f,s);continue}this.add(t,f,t[f],s,i,r)}M.push(f)}R&&Object(h["u"])(this)},get:Q,aliases:b,getSetter:function(t,e,n){var i=b[e];return i&&i.indexOf(",")<0&&(e=i),e in p&&e!==V&&(t._gsap.x||Q(t,"x"))?n&&c===n?"scale"===e?P:I:(c=n||{})&&("scale"===e?E:O):t.style&&!Object(h["l"])(t.style[e])?M:~e.indexOf("-")?A:Object(h["j"])(t,e)},core:{_removeProperty:W,_getMatrix:ot}};h["y"].utils.checkPrefix=L,function(t,e,n,i){var r=Object(h["g"])(t+","+e+","+n,(function(t){p[t]=1}));Object(h["g"])(e,(function(t){h["f"].units[t]="deg",nt[t]=1})),b[r[13]]=t+","+e,Object(h["g"])(i,(function(t){var e=t.split(":");b[e[1]]=r[e[0]]}))}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),Object(h["g"])("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){h["f"].units[t]="px"})),h["y"].registerPlugin(yt)},"9f7f":function(t,e,n){"use strict";var i=n("d039");function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a434:function(t,e,n){"use strict";var i=n("23e7"),r=n("23cb"),o=n("a691"),a=n("50c4"),s=n("7b0b"),u=n("65f0"),c=n("8418"),l=n("1dde"),h=n("ae40"),d=l("splice"),p=h("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var n,i,l,h,d,p,y=s(this),_=a(y.length),w=r(t,_),b=arguments.length;if(0===b?n=i=0:1===b?(n=0,i=_-w):(n=b-2,i=m(f(o(e),0),_-w)),_+n-i>g)throw TypeError(v);for(l=u(y,i),h=0;h<i;h++)d=w+h,d in y&&c(l,h,y[d]);if(l.length=i,n<i){for(h=w;h<_-i;h++)d=h+i,p=h+n,d in y?y[p]=y[d]:delete y[p];for(h=_;h>_-i+n;h--)delete y[h-1]}else if(n>i)for(h=_-i;h>w;h--)d=h+i-1,p=h+n-1,d in y?y[p]=y[d]:delete y[p];for(h=0;h<n;h++)y[h+w]=arguments[h+2];return y.length=_-i+n,l}})},a5cf:function(t,e,n){"use strict";function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
 * GSAP 3.2.6
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/n.d(e,"a",(function(){return Pe})),n.d(e,"c",(function(){return on})),n.d(e,"y",(function(){return ln})),n.d(e,"b",(function(){return hn})),n.d(e,"w",(function(){return ln})),n.d(e,"x",(function(){return Lt})),n.d(e,"i",(function(){return nt})),n.d(e,"n",(function(){return O})),n.d(e,"o",(function(){return D})),n.d(e,"k",(function(){return C})),n.d(e,"l",(function(){return T})),n.d(e,"r",(function(){return Ke})),n.d(e,"q",(function(){return F})),n.d(e,"g",(function(){return it})),n.d(e,"u",(function(){return rn})),n.d(e,"e",(function(){return ve})),n.d(e,"s",(function(){return ne})),n.d(e,"d",(function(){return Ne})),n.d(e,"p",(function(){return Q})),n.d(e,"v",(function(){return ye})),n.d(e,"f",(function(){return p})),n.d(e,"t",(function(){return rt})),n.d(e,"m",(function(){return X})),n.d(e,"j",(function(){return Qe})),n.d(e,"h",(function(){return et}));var o,a,s,u,c,l,h,d,p={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},f={duration:.5,overwrite:!1,delay:0},m=1e8,g=1/m,v=2*Math.PI,y=v/4,_=0,w=Math.sqrt,b=Math.cos,x=Math.sin,C=function(t){return"string"===typeof t},S=function(t){return"function"===typeof t},k=function(t){return"number"===typeof t},T=function(t){return"undefined"===typeof t},R=function(t){return"object"===typeof t},M=function(t){return!1!==t},A=function(){return"undefined"!==typeof window},I=function(t){return S(t)||C(t)},P=Array.isArray,E=/(?:-?\.?\d|\.)+/gi,O=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,D=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,V=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,B=/\(([^()]+)\)/i,F=/[+-]=-?[\.\d]+/,N=/[#\-+.]*\b[a-z\d-=+%.]+/gi,L={},j={},U=function(t){return(j=pt(t,L))&&ln},X=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},z=function(t,e){return!e&&console.warn(t)},G=function(t,e){return t&&(L[t]=e)&&j&&(j[t]=e)||L},W=function(){return 0},q={},H=[],Y={},Q={},Z={},$=30,K=[],J="",tt=function(t){var e,n,i=t[0];if(R(i)||S(i)||(t=[t]),!(e=(i._gsap||{}).harness)){n=K.length;while(n--&&!K[n].targetTest(i));e=K[n]}n=t.length;while(n--)t[n]&&(t[n]._gsap||(t[n]._gsap=new Pe(t[n],e)))||t.splice(n,1);return t},et=function(t){return t._gsap||tt(Gt(t))[0]._gsap},nt=function(t,e){var n=t[e];return S(n)?t[e]():T(n)&&t.getAttribute(e)||n},it=function(t,e){return(t=t.split(",")).forEach(e)||t},rt=function(t){return Math.round(1e5*t)/1e5||0},ot=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},at=function(t,e,n){var i,r=k(t[1]),o=(r?2:1)+(e<2?0:1),a=t[o];if(r&&(a.duration=t[1]),a.parent=n,e){i=a;while(n&&!("immediateRender"in i))i=n.vars.defaults||{},n=M(n.vars.inherit)&&n.parent;a.immediateRender=M(i.immediateRender),e<2?a.runBackwards=1:a.startAt=t[o-1]}return a},st=function(){var t,e,n=H.length,i=H.slice(0);for(Y={},H.length=0,t=0;t<n;t++)e=i[t],e&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},ut=function(t,e,n,i){H.length&&st(),t.render(e,n,i),H.length&&st()},ct=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(N).length<2?e:t},lt=function(t){return t},ht=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},dt=function(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])},pt=function(t,e){for(var n in e)t[n]=e[n];return t},ft=function t(e,n){for(var i in n)e[i]=R(n[i])?t(e[i]||(e[i]={}),n[i]):n[i];return e},mt=function(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i},gt=function(t){var e=t.parent||o,n=t.keyframes?dt:ht;if(M(t.inherit))while(e)n(t,e.vars.defaults),e=e.parent;return t},vt=function(t,e){var n=t.length,i=n===e.length;while(i&&n--&&t[n]===e[n]);return n<0},yt=function(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var o,a=t[i];if(r){o=e[r];while(a&&a[r]>o)a=a._prev}return a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=a,e.parent=e._dp=t,e},_t=function(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,o=e._next;r?r._next=o:t[n]===e&&(t[n]=o),o?o._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},wt=function(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0},bt=function(t){var e=t;while(e)e._dirty=1,e=e.parent;return t},xt=function(t){var e=t.parent;while(e&&e.parent)e._dirty=1,e.totalDuration(),e=e.parent;return t},Ct=function t(e){return!e||e._ts&&t(e.parent)},St=function(t){return t._repeat?kt(t._tTime,t=t.duration()+t._rDelay)*t:0},kt=function(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},Tt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Rt=function(t){return t._end=rt(t._start+(t._tDur/Math.abs(t._ts||t._rts||g)||0))},Mt=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=Tt(t.rawTime(),e),(!e._dur||Nt(0,e.totalDuration(),n)-e._tTime>g)&&e.render(n,!0)),bt(t)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration()){n=t;while(n._dp)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp}t._zTime=-g}},At=function(t,e,n,i){return e.parent&&wt(e),e._start=rt(n+e._delay),e._end=rt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),yt(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,i||Mt(t,e),t},It=function(t,e,n,i){return Le(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&l!==ye.frame?(H.push(t),t._lazy=[e,i],1):void 0:1},Pt=function(t,e,n,i){var r,o,a,s=t._zTime<0?0:1,u=e<0?0:1,c=t._rDelay,l=0;if(c&&t._repeat&&(l=Nt(0,t._tDur,e),o=kt(l,c),a=kt(t._tTime,c),o!==a&&(s=1-u,t.vars.repeatRefresh&&t._initted&&t.invalidate())),(t._initted||!It(t,e,i,n))&&(u!==s||i||t._zTime===g||!e&&t._zTime)){t._zTime=e||(n?g:0),t.ratio=u,t._from&&(u=1-u),t._time=0,t._tTime=l,n||ae(t,"onStart"),r=t._pt;while(r)r.r(u,r.d),r=r._next;!u&&t._startAt&&!t._onUpdate&&t._start&&t._startAt.render(e,!0,i),t._onUpdate&&(n||ae(t,"onUpdate")),l&&t._repeat&&!n&&t.parent&&ae(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===u&&(t.ratio&&wt(t,1),n||(ae(t,t.ratio?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}},Et=function(t,e,n){var i;if(n>e){i=t._first;while(i&&i._start<=n){if(!i._dur&&"isPause"===i.data&&i._start>e)return i;i=i._next}}else{i=t._last;while(i&&i._start>=n){if(!i._dur&&"isPause"===i.data&&i._start<e)return i;i=i._prev}}},Ot=function(t,e,n){var i=t._repeat,r=rt(e)||0;return t._dur=r,t._tDur=i?i<0?1e12:rt(r*(i+1)+t._rDelay*i):r,t._time>r&&(t._time=r,t._tTime=Math.min(t._tTime,t._tDur)),!n&&bt(t.parent),t.parent&&Rt(t),t},Dt=function(t){return t instanceof Oe?bt(t):Ot(t,t._dur)},Vt={_start:0,endTime:W},Bt=function t(e,n){var i,r,o=e.labels,a=e._recent||Vt,s=e.duration()>=m?a.endTime(!1):e._dur;return C(n)&&(isNaN(n)||n in o)?(i=n.charAt(0),"<"===i||">"===i?("<"===i?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0):(i=n.indexOf("="),i<0?(n in o||(o[n]=s),o[n]):(r=+(n.charAt(i-1)+n.substr(i+1)),i>1?t(e,n.substr(0,i-1))+r:s+r))):null==n?s:+n},Ft=function(t,e){return t||0===t?e(t):e},Nt=function(t,e,n){return n<t?t:n>e?e:n},Lt=function(t){return(t+"").substr((parseFloat(t)+"").length)},jt=function(t,e,n){return Ft(n,(function(n){return Nt(t,e,n)}))},Ut=[].slice,Xt=function(t,e){return t&&R(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&R(t[0]))&&!t.nodeType&&t!==a},zt=function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var i;return C(t)&&!e||Xt(t,1)?(i=n).push.apply(i,Gt(t)):n.push(t)}))||n},Gt=function(t,e){return!C(t)||e||!s&&_e()?P(t)?zt(t,e):Xt(t)?Ut.call(t,0):t?[t]:[]:Ut.call(u.querySelectorAll(t),0)},Wt=function(t){return t.sort((function(){return.5-Math.random()}))},qt=function(t){if(S(t))return t;var e=R(t)?t:{each:t},n=Te(e.ease),i=e.from||0,r=parseFloat(e.base)||0,o={},a=i>0&&i<1,s=isNaN(i)||a,u=e.axis,c=i,l=i;return C(i)?c=l={center:.5,edges:.5,end:1}[i]||0:!a&&s&&(c=i[0],l=i[1]),function(t,a,h){var d,p,f,g,v,y,_,b,x,C=(h||e).length,S=o[C];if(!S){if(x="auto"===e.grid?0:(e.grid||[1,m])[1],!x){_=-m;while(_<(_=h[x++].getBoundingClientRect().left)&&x<C);x--}for(S=o[C]=[],d=s?Math.min(x,C)*c-.5:i%x,p=s?C*l/x-.5:i/x|0,_=0,b=m,y=0;y<C;y++)f=y%x-d,g=p-(y/x|0),S[y]=v=u?Math.abs("y"===u?g:f):w(f*f+g*g),v>_&&(_=v),v<b&&(b=v);"random"===i&&Wt(S),S.max=_-b,S.min=b,S.v=C=(parseFloat(e.amount)||parseFloat(e.each)*(x>C?C-1:u?"y"===u?C/x:x:Math.max(x,C/x))||0)*("edges"===i?-1:1),S.b=C<0?r-C:r,S.u=Lt(e.amount||e.each)||0,n=n&&C<0?ke(n):n}return C=(S[t]-S.min)/S.max||0,rt(S.b+(n?n(C):C)*S.v)+S.u}},Ht=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(n){return~~(Math.round(parseFloat(n)/t)*t*e)/e+(k(n)?0:Lt(n))}},Yt=function(t,e){var n,i,r=P(t);return!r&&R(t)&&(n=r=t.radius||m,t.values?(t=Gt(t.values),(i=!k(t[0]))&&(n*=n)):t=Ht(t.increment)),Ft(e,r?S(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){var r,o,a=parseFloat(i?e.x:e),s=parseFloat(i?e.y:0),u=m,c=0,l=t.length;while(l--)i?(r=t[l].x-a,o=t[l].y-s,r=r*r+o*o):r=Math.abs(t[l]-a),r<u&&(u=r,c=l);return c=!n||u<=n?t[c]:e,i||c===e||k(e)?c:c+Lt(e)}:Ht(t))},Qt=function(t,e,n,i){return Ft(P(t)?!e:!0===n?!!(n=0):!i,(function(){return P(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&~~(Math.round((t+Math.random()*(e-t))/n)*n*i)/i}))},Zt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},$t=function(t,e){return function(n){return t(parseFloat(n))+(e||Lt(n))}},Kt=function(t,e,n){return ie(t,e,0,1,n)},Jt=function(t,e,n){return Ft(n,(function(n){return t[~~e(n)]}))},te=function t(e,n,i){var r=n-e;return P(e)?Jt(e,t(0,e.length),n):Ft(i,(function(t){return(r+(t-e)%r)%r+e}))},ee=function t(e,n,i){var r=n-e,o=2*r;return P(e)?Jt(e,t(0,e.length-1),n):Ft(i,(function(t){return t=(o+(t-e)%o)%o,e+(t>r?o-t:t)}))},ne=function(t){var e,n,i,r,o=0,a="";while(~(e=t.indexOf("random(",o)))i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?N:E),a+=t.substr(o,e-o)+Qt(r?n:+n[0],+n[1],+n[2]||1e-5),o=i+1;return a+t.substr(o,t.length-o)},ie=function(t,e,n,i,r){var o=e-t,a=i-n;return Ft(r,(function(e){return n+(e-t)/o*a}))},re=function t(e,n,i,r){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var a,s,u,c,l,h=C(e),d={};if(!0===i&&(r=1)&&(i=null),h)e={p:e},n={p:n};else if(P(e)&&!P(n)){for(u=[],c=e.length,l=c-2,s=1;s<c;s++)u.push(t(e[s-1],e[s]));c--,o=function(t){t*=c;var e=Math.min(l,~~t);return u[e](t-e)},i=n}else r||(e=pt(P(e)?[]:{},e));if(!u){for(a in n)Be.call(d,e,a,"get",n[a]);o=function(t){return Je(t,d)||(h?e.p:e)}}}return Ft(i,o)},oe=function(t,e,n){var i,r,o,a=t.labels,s=m;for(i in a)r=a[i]-e,r<0===!!n&&r&&s>(r=Math.abs(r))&&(o=i,s=r);return o},ae=function(t,e,n){var i,r,o=t.vars,a=o[e];if(a)return i=o[e+"Params"],r=o.callbackScope||t,n&&H.length&&st(),i?a.apply(r,i):a.call(r)},se=function(t){return wt(t),t.progress()<1&&ae(t,"onInterrupt"),t},ue=function(t){t=!t.name&&t["default"]||t;var e=t.name,n=S(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:W,render:Je,add:Be,kill:en,modifier:tn,rawVars:0},o={targetTest:0,get:0,getSetter:Qe,aliases:{},register:0};if(_e(),t!==i){if(Q[e])return;ht(i,ht(mt(t,r),o)),pt(i.prototype,pt(r,mt(t,o))),Q[i.prop=e]=i,t.targetTest&&(K.push(i),q[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}G(e,i),t.register&&t.register(ln,i,on)},ce=255,le={aqua:[0,ce,ce],lime:[0,ce,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ce],navy:[0,0,128],white:[ce,ce,ce],olive:[128,128,0],yellow:[ce,ce,0],orange:[ce,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ce,0,0],pink:[ce,192,203],cyan:[0,ce,ce],transparent:[ce,ce,ce,0]},he=function(t,e,n){return t=t<0?t+1:t>1?t-1:t,(6*t<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*ce+.5|0},de=function(t,e,n){var i,r,o,a,s,u,c,l,h,d,p=t?k(t)?[t>>16,t>>8&ce,t&ce]:0:le.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),le[t])p=le[t];else if("#"===t.charAt(0))4===t.length&&(i=t.charAt(1),r=t.charAt(2),o=t.charAt(3),t="#"+i+i+r+r+o+o),t=parseInt(t.substr(1),16),p=[t>>16,t>>8&ce,t&ce];else if("hsl"===t.substr(0,3))if(p=d=t.match(E),e){if(~t.indexOf("="))return p=t.match(O),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,s=+p[1]/100,u=+p[2]/100,r=u<=.5?u*(s+1):u+s-u*s,i=2*u-r,p.length>3&&(p[3]*=1),p[0]=he(a+1/3,i,r),p[1]=he(a,i,r),p[2]=he(a-1/3,i,r);else p=t.match(E)||le.transparent;p=p.map(Number)}return e&&!d&&(i=p[0]/ce,r=p[1]/ce,o=p[2]/ce,c=Math.max(i,r,o),l=Math.min(i,r,o),u=(c+l)/2,c===l?a=s=0:(h=c-l,s=u>.5?h/(2-c-l):h/(c+l),a=c===i?(r-o)/h+(r<o?6:0):c===r?(o-i)/h+2:(i-r)/h+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*s+.5),p[2]=~~(100*u+.5)),n&&p.length<4&&(p[3]=1),p},pe=function(t){var e=[],n=[],i=-1;return t.split(me).forEach((function(t){var r=t.match(D)||[];e.push.apply(e,r),n.push(i+=r.length+1)})),e.c=n,e},fe=function(t,e,n){var i,r,o,a,s="",u=(t+s).match(me),c=e?"hsla(":"rgba(",l=0;if(!u)return t;if(u=u.map((function(t){return(t=de(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(o=pe(t),i=n.c,i.join(s)!==o.c.join(s)))for(r=t.replace(me,"1").split(D),a=r.length-1;l<a;l++)s+=r[l]+(~i.indexOf(l)?u.shift()||c+"0,0,0,0)":(o.length?o:u.length?u:n).shift());if(!r)for(r=t.split(me),a=r.length-1;l<a;l++)s+=r[l]+u[l];return s+r[a]},me=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in le)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),ge=/hsl[a]?\(/,ve=function(t){var e,n=t.join(" ");if(me.lastIndex=0,me.test(n))return e=ge.test(n),t[1]=fe(t[1],e),t[0]=fe(t[0],e,pe(t[1])),!0},ye=function(){var t,e,n,i,r=Date.now,o=500,l=33,h=r(),p=h,f=1/240,m=f,v=[],y=function n(a){var s,u,c=r()-p,d=!0===a;c>o&&(h+=c-l),p+=c,i.time=(p-h)/1e3,s=i.time-m,(s>0||d)&&(i.frame++,m+=s+(s>=f?.004:f-s),u=1),d||(t=e(n)),u&&v.forEach((function(t){return t(i.time,c,i.frame,a)}))};return i={time:0,frame:0,tick:function(){y(!0)},wake:function(){c&&(!s&&A()&&(a=s=window,u=a.document||{},L.gsap=ln,(a.gsapVersions||(a.gsapVersions=[])).push(ln.version),U(j||a.GreenSockGlobals||!a.gsap&&a||{}),n=a.requestAnimationFrame),t&&i.sleep(),e=n||function(t){return setTimeout(t,1e3*(m-i.time)+1|0)},d=1,y(2))},sleep:function(){(n?a.cancelAnimationFrame:clearTimeout)(t),d=0,e=W},lagSmoothing:function(t,e){o=t||1/g,l=Math.min(e,o,0)},fps:function(t){f=1/(t||240),m=i.time+f},add:function(t){v.indexOf(t)<0&&v.push(t),_e()},remove:function(t){var e;~(e=v.indexOf(t))&&v.splice(e,1)},_listeners:v},i}(),_e=function(){return!d&&ye.wake()},we={},be=/^[\d.\-M][\d.\-,\s]/,xe=/["']/g,Ce=function(t){for(var e,n,i,r={},o=t.substr(1,t.length-3).split(":"),a=o[0],s=1,u=o.length;s<u;s++)n=o[s],e=s!==u-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[a]=isNaN(i)?i.replace(xe,"").trim():+i,a=n.substr(e+1).trim();return r},Se=function(t){var e=(t+"").split("("),n=we[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[Ce(e[1])]:B.exec(t)[1].split(",").map(ct)):we._CE&&be.test(t)?we._CE("",t):n},ke=function(t){return function(e){return 1-t(1-e)}},Te=function(t,e){return t&&(S(t)?t:we[t]||Se(t))||e},Re=function(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,o={easeIn:e,easeOut:n,easeInOut:i};return it(t,(function(t){for(var e in we[t]=L[t]=o,we[r=t.toLowerCase()]=n,o)we[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=we[t+"."+e]=o[e]})),o},Me=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Ae=function t(e,n,i){var r=n>=1?n:1,o=(i||(e?.3:.45))/(n<1?n:1),a=o/v*(Math.asin(1/r)||0),s=function(t){return 1===t?1:r*Math.pow(2,-10*t)*x((t-a)*o)+1},u="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:Me(s);return o=v/o,u.config=function(n,i){return t(e,n,i)},u},Ie=function t(e,n){void 0===n&&(n=1.70158);var i=function(t){return t?--t*t*((n+1)*t+n)+1:0},r="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:Me(i);return r.config=function(n){return t(e,n)},r};it("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;Re(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),we.Linear.easeNone=we.none=we.Linear.easeIn,Re("Elastic",Ae("in"),Ae("out"),Ae()),function(t,e){var n=1/e,i=2*n,r=2.5*n,o=function(o){return o<n?t*o*o:o<i?t*Math.pow(o-1.5/e,2)+.75:o<r?t*(o-=2.25/e)*o+.9375:t*Math.pow(o-2.625/e,2)+.984375};Re("Bounce",(function(t){return 1-o(1-t)}),o)}(7.5625,2.75),Re("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Re("Circ",(function(t){return-(w(1-t*t)-1)})),Re("Sine",(function(t){return 1-b(t*y)})),Re("Back",Ie("in"),Ie("out"),Ie()),we.SteppedEase=we.steps=L.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0,o=1-g;return function(t){return((i*Nt(0,o,t)|0)+r)*n}}},f.ease=we["quad.out"],it("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return J+=t+","+t+"Params,"}));var Pe=function(t,e){this.id=_++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:nt,this.set=e?e.getSetter:Qe},Ee=function(){function t(t,e){var n=t.parent||o;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ot(this,+t.duration,1),this.data=t.data,d||ye.wake(),n&&At(n,this,e||0===e?e:n._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Ot(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(_e(),!arguments.length)return this._tTime;var n=this.parent||this._dp;if(n&&n.smoothChildTiming&&this._ts){this._start=rt(n._time-(this._ts>0?t/this._ts:((this._dirty?this.totalDuration():this._tDur)-t)/-this._ts)),Rt(this),n._dirty||bt(n);while(n.parent)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&At(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===g)&&(this._ts||(this._pTime=t),ut(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+St(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+St(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?kt(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return this._rts===-g?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Tt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-g?0:this._rts,xt(this.totalTime(Nt(0,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_e(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=g)&&Math.abs(this._zTime)!==g))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&At(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(M(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Tt(e.rawTime(t),this):this._tTime:this._tTime},e.repeat=function(t){return arguments.length?(this._repeat=t,Dt(this)):this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,Dt(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Bt(this,t),M(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,M(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-g:0)),this):this._rts<0},e.invalidate=function(){return this._initted=0,this._zTime=-g,this},e.isActive=function(t){var e,n=this.parent||this._dp,i=this._start;return!(n&&!(this._ts&&(this._initted||!t)&&n.isActive(t)&&(e=n.rawTime(!0))>=i&&e<this.endTime(!0)-g))},e.eventCallback=function(t,e,n){var i=this.vars;return arguments.length>1?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise((function(n){var i=S(t)?t:lt,r=function(){var t=e.then;e.then=null,S(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),n(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r}))},e.kill=function(){se(this)},t}();ht(Ee.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-g,_prom:0,_ps:!1,_rts:1});var Oe=function(t){function e(e,n){var r;return void 0===e&&(e={}),r=t.call(this,e,n)||this,r.labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=M(e.sortChildren),r.parent&&Mt(r.parent,i(r)),r}r(e,t);var n=e.prototype;return n.to=function(t,e,n){return new Ge(t,at(arguments,0,this),Bt(this,k(e)?arguments[3]:n)),this},n.from=function(t,e,n){return new Ge(t,at(arguments,1,this),Bt(this,k(e)?arguments[3]:n)),this},n.fromTo=function(t,e,n,i){return new Ge(t,at(arguments,2,this),Bt(this,k(e)?arguments[4]:i)),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,gt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Ge(t,e,Bt(this,n),1),this},n.call=function(t,e,n){return At(this,Ge.delayedCall(0,t,e),Bt(this,n))},n.staggerTo=function(t,e,n,i,r,o,a){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new Ge(t,n,Bt(this,r)),this},n.staggerFrom=function(t,e,n,i,r,o,a){return n.runBackwards=1,gt(n).immediateRender=M(n.immediateRender),this.staggerTo(t,e,n,i,r,o,a)},n.staggerFromTo=function(t,e,n,i,r,o,a,s){return i.startAt=n,gt(i).immediateRender=M(i.immediateRender),this.staggerTo(t,e,i,r,o,a,s)},n.render=function(t,e,n){var i,r,a,s,u,c,l,h,d,p,f,m,v=this._time,y=this._dirty?this.totalDuration():this._tDur,_=this._dur,w=this!==o&&t>y-g&&t>=0?y:t<g?0:t,b=this._zTime<0!==t<0&&(this._initted||!_);if(w!==this._tTime||n||b){if(v!==this._time&&_&&(w+=this._time-v,t+=this._time-v),i=w,d=this._start,h=this._ts,c=!h,b&&(_||(v=this._zTime),!t&&e||(this._zTime=t)),this._repeat&&(f=this._yoyo,u=_+this._rDelay,i=rt(w%u),(i>_||y===w)&&(i=_),s=~~(w/u),s&&s===w/u&&(i=_,s--),p=kt(this._tTime,u),f&&1&s&&(i=_-i,m=1),s!==p&&!this._lock)){var x=f&&1&p,C=x===(f&&1&s);if(s<p&&(x=!x),v=x?0:_,this._lock=1,this.render(v,e,!_)._lock=0,!e&&this.parent&&ae(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),v!==this._time||c!==!this._ts)return this;if(C&&(this._lock=2,v=x?_+1e-4:-1e-4,this.render(v,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!c)return this}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=Et(this,rt(v),rt(i)),l&&(w-=i-(i=l._start))),this._tTime=w,this._time=i,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),v||!i||e||ae(this,"onStart"),i>=v&&t>=0){r=this._first;while(r){if(a=r._next,(r._act||i>=r._start)&&r._ts&&l!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!c){l=0,a&&(w+=this._zTime=-g);break}}r=a}}else{r=this._last;var S=t<0?t:i;while(r){if(a=r._prev,(r._act||S<=r._end)&&r._ts&&l!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(S-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(S-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!c){l=0,a&&(w+=this._zTime=S?-g:g);break}}r=a}}if(l&&!e&&(this.pause(),l.render(i>=v?0:-g)._zTime=i>=v?1:-1,this._ts))return this._start=d,Rt(this),this.render(t,e,n);this._onUpdate&&!e&&ae(this,"onUpdate",!0),(w===y&&y>=this.totalDuration()||!w&&this._ts<0)&&(d!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((t||!_)&&(t&&this._ts>0||!w&&this._ts<0)&&wt(this,1),e||t<0&&!v||(ae(this,w===y?"onComplete":"onReverseComplete",!0),this._prom&&this._prom())))}return this},n.add=function(t,e){var n=this;if(k(e)||(e=Bt(this,e)),!(t instanceof Ee)){if(P(t))return t.forEach((function(t){return n.add(t,e)})),bt(this);if(C(t))return this.addLabel(t,e);if(!S(t))return this;t=Ge.delayedCall(0,t)}return this!==t?At(this,t,e):this},n.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-m);var r=[],o=this._first;while(o)o._start>=i&&(o instanceof Ge?e&&r.push(o):(n&&r.push(o),t&&r.push.apply(r,o.getChildren(!0,e,n)))),o=o._next;return r},n.getById=function(t){var e=this.getChildren(1,1,1),n=e.length;while(n--)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return C(t)?this.removeLabel(t):S(t)?this.killTweensOf(t):(_t(this,t),t===this._recent&&(this._recent=this._last),bt(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,this.parent||this._dp||!this._ts||(this._start=rt(ye.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=Bt(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var i=Ge.delayedCall(0,e||W,n);return i.data="isPause",this._hasPause=1,At(this,i,Bt(this,t))},n.removePause=function(t){var e=this._first;t=Bt(this,t);while(e)e._start===t&&"isPause"===e.data&&wt(e),e=e._next},n.killTweensOf=function(t,e,n){var i=this.getTweensOf(t,n),r=i.length;while(r--)De!==i[r]&&i[r].kill(t,e);return this},n.getTweensOf=function(t,e){var n,i=[],r=Gt(t),o=this._first;while(o)o instanceof Ge?!ot(o._targets,r)||e&&!o.isActive("started"===e)||i.push(o):(n=o.getTweensOf(r,e)).length&&i.push.apply(i,n),o=o._next;return i},n.tweenTo=function(t,e){e=e||{};var n=this,i=Bt(n,t),r=e,o=r.startAt,a=r.onStart,s=r.onStartParams,u=Ge.to(n,ht(e,{ease:"none",lazy:!1,time:i,duration:e.duration||Math.abs((i-(o&&"time"in o?o.time:n._time))/n.timeScale())||g,onStart:function(){n.pause();var t=e.duration||Math.abs((i-n._time)/n.timeScale());u._dur!==t&&Ot(u,t).render(u._time,!0,!0),a&&a.apply(u,s||[])}}));return u},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,ht({startAt:{time:Bt(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),oe(this,Bt(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),oe(this,Bt(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+g)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);var i,r=this._first,o=this.labels;while(r)r._start>=n&&(r._start+=t),r=r._next;if(e)for(i in o)o[i]>=n&&(o[i]+=t);return bt(this)},n.invalidate=function(){var e=this._first;this._lock=0;while(e)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},n.clear=function(t){void 0===t&&(t=!0);var e,n=this._first;while(n)e=n._next,this.remove(n),n=e;return this._time=this._tTime=0,t&&(this.labels={}),bt(this)},n.totalDuration=function(t){var e,n,i,r,a=0,s=this,u=s._last,c=m;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){r=s.parent;while(u)e=u._prev,u._dirty&&u.totalDuration(),i=u._start,i>c&&s._sort&&u._ts&&!s._lock?(s._lock=1,At(s,u,i-u._delay,1)._lock=0):c=i,i<0&&u._ts&&(a-=i,(!r&&!s._dp||r&&r.smoothChildTiming)&&(s._start+=i/s._ts,s._time-=i,s._tTime-=i),s.shiftChildren(-i,!1,-1e20),c=0),n=Rt(u),n>a&&u._ts&&(a=n),u=e;Ot(s,s===o&&s._time>a?s._time:Math.min(m,a),1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(o._ts&&(ut(o,Tt(t,o)),l=ye.frame),ye.frame>=$){$+=p.autoSleep||120;var e=o._first;if((!e||!e._ts)&&p.autoSleep&&ye._listeners.length<2){while(e&&!e._ts)e=e._next;e||ye.sleep()}}},e}(Ee);ht(Oe.prototype,{_lock:0,_hasPause:0,_forcing:0});var De,Ve=function(t,e,n,i,r,o,a){var s,u,c,l,h,d,p,f,m=new on(this._pt,t,e,0,1,Ke,null,r),g=0,v=0;m.b=n,m.e=i,n+="",i+="",(p=~i.indexOf("random("))&&(i=ne(i)),o&&(f=[n,i],o(f,t,e),n=f[0],i=f[1]),u=n.match(V)||[];while(s=V.exec(i))l=s[0],h=i.substring(g,s.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),l!==u[v++]&&(d=parseFloat(u[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:d,c:"="===l.charAt(1)?parseFloat(l.substr(2))*("-"===l.charAt(0)?-1:1):parseFloat(l)-d,m:c&&c<4?Math.round:0},g=V.lastIndex);return m.c=g<i.length?i.substring(g,i.length):"",m.fp=a,(F.test(i)||p)&&(m.e=0),this._pt=m,m},Be=function(t,e,n,i,r,o,a,s,u){S(i)&&(i=i(r||0,t,o));var c,l=t[e],h="get"!==n?n:S(l)?u?t[e.indexOf("set")||!S(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():l,d=S(l)?u?He:qe:We;if(C(i)&&(~i.indexOf("random(")&&(i=ne(i)),"="===i.charAt(1)&&(i=parseFloat(h)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(Lt(h)||0))),h!==i)return isNaN(h+i)?(!l&&!(e in t)&&X(e,i),Ve.call(this,t,e,h,i,d,s||p.stringFilter,u)):(c=new on(this._pt,t,e,+h||0,i-(h||0),"boolean"===typeof l?$e:Ze,0,d),u&&(c.fp=u),a&&c.modifier(a,this,t),this._pt=c)},Fe=function(t,e,n,i,r){if(S(t)&&(t=Ue(t,r,e,n,i)),!R(t)||t.style&&t.nodeType||P(t))return C(t)?Ue(t,r,e,n,i):t;var o,a={};for(o in t)a[o]=Ue(t[o],r,e,n,i);return a},Ne=function(t,e,n,i,r,o){var a,s,u,c;if(Q[t]&&!1!==(a=new Q[t]).init(r,a.rawVars?e[t]:Fe(e[t],i,r,o,n),n,i,o)&&(n._pt=s=new on(n._pt,r,t,0,1,a.render,a,0,a.priority),n!==h)){u=n._ptLookup[n._targets.indexOf(r)],c=a._props.length;while(c--)u[a._props[c]]=s}return a},Le=function t(e,n){var i,r,a,s,u,c,l,h,d,p,m,v,y=e.vars,_=y.ease,w=y.startAt,b=y.immediateRender,x=y.lazy,C=y.onUpdate,S=y.onUpdateParams,k=y.callbackScope,T=y.runBackwards,R=y.yoyoEase,A=y.keyframes,I=y.autoRevert,P=e._dur,E=e._startAt,O=e._targets,D=e.parent,V=D&&"nested"===D.data?D.parent._targets:O,B="auto"===e._overwrite,F=e.timeline;if(!F||A&&_||(_="none"),e._ease=Te(_,f.ease),e._yEase=R?ke(Te(!0===R?_:R,f.ease)):0,R&&e._yoyo&&!e._repeat&&(R=e._yEase,e._yEase=e._ease,e._ease=R),!F){if(E&&E.render(-1,!0).kill(),w){if(wt(e._startAt=Ge.set(O,ht({data:"isStart",overwrite:!1,parent:D,immediateRender:!0,lazy:M(x),startAt:null,delay:0,onUpdate:C,onUpdateParams:S,callbackScope:k,stagger:0},w))),b)if(n>0)!I&&(e._startAt=0);else if(P)return}else if(T&&P)if(E)!I&&(e._startAt=0);else if(n&&(b=!1),wt(e._startAt=Ge.set(O,pt(mt(y,q),{overwrite:!1,data:"isFromStart",lazy:b&&M(x),immediateRender:b,stagger:0,parent:D}))),b){if(!n)return}else t(e._startAt,g);for(i=mt(y,q),e._pt=0,h=O[0]?et(O[0]).harness:0,v=h&&y[h.prop],x=P&&M(x)||x&&!P,r=0;r<O.length;r++){if(u=O[r],l=u._gsap||tt(O)[r]._gsap,e._ptLookup[r]=p={},Y[l.id]&&st(),m=V===O?r:V.indexOf(u),h&&!1!==(d=new h).init(u,v||i,e,m,V)&&(e._pt=s=new on(e._pt,u,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(t){p[t]=s})),d.priority&&(c=1)),!h||v)for(a in i)Q[a]&&(d=Ne(a,i,e,m,u,V))?d.priority&&(c=1):p[a]=s=Be.call(e,u,a,"get",i[a],m,V,0,y.stringFilter);e._op&&e._op[r]&&e.kill(u,e._op[r]),B&&e._pt&&(De=e,o.killTweensOf(u,p,"started"),De=0),e._pt&&x&&(Y[l.id]=1)}c&&rn(e),e._onInit&&e._onInit(e)}e._from=!F&&!!y.runBackwards,e._onUpdate=C,e._initted=1},je=function(t,e){var n,i,r,o,a=t[0]?et(t[0]).harness:0,s=a&&a.aliases;if(!s)return e;for(i in n=pt({},e),s)if(i in n){o=s[i].split(","),r=o.length;while(r--)n[o[r]]=n[i]}return n},Ue=function(t,e,n,i,r){return S(t)?t.call(e,n,i,r):C(t)&&~t.indexOf("random(")?ne(t):t},Xe=J+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",ze=(Xe+",id,stagger,delay,duration,paused").split(","),Ge=function(t){function e(e,n,r,a){var s;"number"===typeof n&&(r.duration=n,n=r,r=null),s=t.call(this,a?n:gt(n),r)||this;var u,c,l,h,d,f,m,v,y=s.vars,_=y.duration,w=y.delay,b=y.immediateRender,x=y.stagger,C=y.overwrite,S=y.keyframes,T=y.defaults,A=s.parent,E=(P(e)?k(e[0]):"length"in n)?[e]:Gt(e);if(s._targets=E.length?tt(E):z("GSAP target "+e+" not found. https://greensock.com",!p.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=C,S||x||I(_)||I(w)){if(n=s.vars,u=s.timeline=new Oe({data:"nested",defaults:T||{}}),u.kill(),u.parent=i(s),S)ht(u.vars.defaults,{ease:"none"}),S.forEach((function(t){return u.to(E,t,">")}));else{if(h=E.length,m=x?qt(x):W,R(x))for(d in x)~Xe.indexOf(d)&&(v||(v={}),v[d]=x[d]);for(c=0;c<h;c++){for(d in l={},n)ze.indexOf(d)<0&&(l[d]=n[d]);l.stagger=0,v&&pt(l,v),n.yoyoEase&&!n.repeat&&(l.yoyoEase=n.yoyoEase),f=E[c],l.duration=+Ue(_,i(s),c,f,E),l.delay=(+Ue(w,i(s),c,f,E)||0)-s._delay,!x&&1===h&&l.delay&&(s._delay=w=l.delay,s._start+=w,l.delay=0),u.to(f,l,m(c,f,E))}_=w=0}_||s.duration(_=u.duration())}else s.timeline=0;return!0===C&&(De=i(s),o.killTweensOf(E),De=0),A&&Mt(A,i(s)),(b||!_&&!S&&s._start===A._time&&M(b)&&Ct(i(s))&&"nested"!==A.data)&&(s._tTime=-g,s.render(Math.max(0,-w))),s}r(e,t);var n=e.prototype;return n.render=function(t,e,n){var i,r,o,a,s,u,c,l,h,d=this._time,p=this._tDur,f=this._dur,m=t>p-g&&t>=0?p:t<g?0:t;if(f){if(m!==this._tTime||!t||n||this._startAt&&this._zTime<0!==t<0){if(i=m,l=this.timeline,this._repeat){if(a=f+this._rDelay,i=rt(m%a),(i>f||p===m)&&(i=f),o=~~(m/a),o&&o===m/a&&(i=f,o--),u=this._yoyo&&1&o,u&&(h=this._yEase,i=f-i),s=kt(this._tTime,a),i===d&&!n&&this._initted)return this;o!==s&&(!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(a*o,!0).invalidate()._lock=0))}if(!this._initted){if(It(this,i,n,e))return this._tTime=0,this;if(f!==this._dur)return this.render(t,e,n)}this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(i/f),this._from&&(this.ratio=c=1-c),d||!i||e||ae(this,"onStart"),r=this._pt;while(r)r.r(c,r.d),r=r._next;l&&l.render(t<0?t:!i&&u?-g:l._dur*c,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),ae(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!e&&this.parent&&ae(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,n),(t||!f)&&(t&&this._ts>0||!m&&this._ts<0)&&wt(this,1),e||t<0&&!d||m<p&&this.timeScale()>0||(ae(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&this._prom()))}}else Pt(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},n.kill=function(t,e){if(void 0===e&&(e="all"),!t&&(!e||"all"===e)&&(this._lazy=0,this.parent))return se(this);if(this.timeline)return this.timeline.killTweensOf(t,e,De&&!0!==De.vars.overwrite),this;var n,i,r,o,a,s,u,c=this._targets,l=t?Gt(t):c,h=this._ptLookup,d=this._pt;if((!e||"all"===e)&&vt(c,l))return se(this);n=this._op=this._op||[],"all"!==e&&(C(e)&&(a={},it(e,(function(t){return a[t]=1})),e=a),e=je(c,e)),u=c.length;while(u--)if(~l.indexOf(c[u]))for(a in i=h[u],"all"===e?(n[u]=e,o=i,r={}):(r=n[u]=n[u]||{},o=e),o)s=i&&i[a],s&&("kill"in s.d&&!0!==s.d.kill(a)||_t(this,s,"_pt"),delete i[a]),"all"!==r&&(r[a]=1);return this._initted&&!this._pt&&d&&se(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,n){return new e(t,at(arguments,1))},e.delayedCall=function(t,n,i,r){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},e.fromTo=function(t,n,i){return new e(t,at(arguments,2))},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return o.killTweensOf(t,e,n)},e}(Ee);ht(Ge.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),it("staggerTo,staggerFrom,staggerFromTo",(function(t){Ge[t]=function(){var e=new Oe,n=Ut.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var We=function(t,e,n){return t[e]=n},qe=function(t,e,n){return t[e](n)},He=function(t,e,n,i){return t[e](i.fp,n)},Ye=function(t,e,n){return t.setAttribute(e,n)},Qe=function(t,e){return S(t[e])?qe:T(t[e])&&t.setAttribute?Ye:We},Ze=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},$e=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Ke=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{while(n)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},Je=function(t,e){var n=e._pt;while(n)n.r(t,n.d),n=n._next},tn=function(t,e,n,i){var r,o=this._pt;while(o)r=o._next,o.p===i&&o.modifier(t,e,n),o=r},en=function(t){var e,n,i=this._pt;while(i)n=i._next,i.p===t&&!i.op||i.op===t?_t(this,i,"_pt"):i.dep||(e=1),i=n;return!e},nn=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},rn=function(t){var e,n,i,r,o=t._pt;while(o){e=o._next,n=i;while(n&&n.pr>o.pr)n=n._next;(o._prev=n?n._prev:r)?o._prev._next=o:i=o,(o._next=n)?n._prev=o:r=o,o=e}t._pt=i},on=function(){function t(t,e,n,i,r,o,a,s,u){this.t=e,this.s=i,this.c=r,this.p=n,this.r=o||Ze,this.d=a||this,this.set=s||We,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=t.prototype;return e.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=nn,this.m=t,this.mt=n,this.tween=e},t}();it(J+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert",(function(t){return q[t]=1})),L.TweenMax=L.TweenLite=Ge,L.TimelineLite=L.TimelineMax=Oe,o=new Oe({sortChildren:!1,defaults:f,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),p.stringFilter=ve;var an={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return ue(t)}))},timeline:function(t){return new Oe(t)},getTweensOf:function(t,e){return o.getTweensOf(t,e)},getProperty:function(t,e,n,i){C(t)&&(t=Gt(t)[0]);var r=et(t||{}).get,o=n?lt:ct;return"native"===n&&(n=""),t?e?o((Q[e]&&Q[e].get||r)(t,e,n,i)):function(e,n,i){return o((Q[e]&&Q[e].get||r)(t,e,n,i))}:t},quickSetter:function(t,e,n){if(t=Gt(t),t.length>1){var i=t.map((function(t){return ln.quickSetter(t,e,n)})),r=i.length;return function(t){var e=r;while(e--)i[e](t)}}t=t[0]||{};var o=Q[e],a=et(t),s=o?function(e){var i=new o;h._pt=0,i.init(t,n?e+n:e,h,0,[t]),i.render(1,i),h._pt&&Je(1,h)}:a.set(t,e);return o?s:function(i){return s(t,e,n?i+n:i,a,1)}},isTweening:function(t){return o.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Te(t.ease,f.ease)),ft(f,t||{})},config:function(t){return ft(p,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,o=t.extendTimeline;(i||"").split(",").forEach((function(t){return t&&!Q[t]&&!L[t]&&z(e+" effect requires "+t+" plugin.")})),Z[e]=function(t,e,i){return n(Gt(t),ht(e||{},r),i)},o&&(Oe.prototype[e]=function(t,n,i){return this.add(Z[e](t,R(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){we[t]=Te(e)},parseEase:function(t,e){return arguments.length?Te(t,e):we},getById:function(t){return o.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new Oe(t);r.smoothChildTiming=M(t.smoothChildTiming),o.remove(r),r._dp=0,r._time=r._tTime=o._time,n=o._first;while(n)i=n._next,!e&&!n._dur&&n instanceof Ge&&n.vars.onComplete===n._targets[0]||At(r,n,n._start-n._delay),n=i;return At(o,r,0),r},utils:{wrap:te,wrapYoyo:ee,distribute:qt,random:Qt,snap:Yt,normalize:Kt,getUnit:Lt,clamp:jt,splitColor:de,toArray:Gt,mapRange:ie,pipe:Zt,unitize:$t,interpolate:re,shuffle:Wt},install:U,effects:Z,ticker:ye,updateRoot:Oe.updateRoot,plugins:Q,globalTimeline:o,core:{PropTween:on,globals:G,Tween:Ge,Timeline:Oe,Animation:Ee,getCache:et,_removeLinkedListItem:_t}};it("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return an[t]=Ge[t]})),ye.add(Oe.updateRoot),h=an.to({},{duration:0});var sn=function(t,e){var n=t._pt;while(n&&n.p!==e&&n.op!==e&&n.fp!==e)n=n._next;return n},un=function(t,e){var n,i,r,o=t._targets;for(n in e){i=o.length;while(i--)r=t._ptLookup[i][n],r&&(r=r.d)&&(r._pt&&(r=sn(r,n)),r&&r.modifier&&r.modifier(e[n],t,o[i],n))}},cn=function(t,e){return{name:t,rawVars:1,init:function(t,n,i){i._onInit=function(t){var i,r;if(C(n)&&(i={},it(n,(function(t){return i[t]=1})),n=i),e){for(r in i={},n)i[r]=e(n[r]);n=i}un(t,n)}}}},ln=an.registerPlugin({name:"attr",init:function(t,e,n,i,r){for(var o in e)this.add(t,"setAttribute",(t.getAttribute(o)||0)+"",e[o],i,r,0,0,o),this._props.push(o)}},{name:"endArray",init:function(t,e){var n=e.length;while(n--)this.add(t,n,t[n]||0,e[n])}},cn("roundProps",Ht),cn("modifiers"),cn("snap",Yt))||an;Ge.version=Oe.version=ln.version="3.2.6",c=1,A()&&_e();var hn=we.Power0;we.Power1,we.Power2,we.Power3,we.Power4,we.Linear,we.Quad,we.Cubic,we.Quart,we.Quint,we.Strong,we.Elastic,we.Back,we.SteppedEase,we.Bounce,we.Sine,we.Expo,we.Circ},a630:function(t,e,n){var i=n("23e7"),r=n("4df4"),o=n("1c7e"),a=!o((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:a},{from:r})},a9ee:function(t,e,n){"use strict";(function(n,i){var r,o;
/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */
function a(t,e){if(!t)throw"First parameter is required.";e=e||{type:"video"},e=new s(t,e);var n=this;function i(i){return e.disableLogs||console.log("RecordRTC version: ",n.version),i&&(e=new s(t,i)),e.disableLogs||console.log("started recording "+e.type+" stream."),g?(g.clearRecordedData(),g.record(),f("recording"),n.recordingDuration&&p(),n):(r((function(){n.recordingDuration&&p()})),n)}function r(n){n&&(e.initCallback=function(){n(),n=e.initCallback=null});var i=new u(t,e);g=new i(t,e),g.record(),f("recording"),e.disableLogs||console.log("Initialized recorderType:",g.constructor.name,"for output-type:",e.type)}function o(t){if(t=t||function(){},g){if("paused"===n.state)return n.resumeRecording(),void setTimeout((function(){o(t)}),1);"recording"===n.state||e.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',n.state),e.disableLogs||console.log("Stopped recording "+e.type+" stream."),"gif"!==e.type?g.stop(i):(g.stop(),i()),f("stopped")}else y();function i(i){if(g){Object.keys(g).forEach((function(t){"function"!==typeof g[t]&&(n[t]=g[t])}));var r=g.blob;if(!r){if(!i)throw"Recording failed.";g.blob=r=i}if(r&&!e.disableLogs&&console.log(r.type,"->",x(r.size)),t){var o;try{o=m.createObjectURL(r)}catch(a){}"function"===typeof t.call?t.call(n,o):t(o)}e.autoWriteToDisk&&d((function(t){var n={};n[e.type+"Blob"]=t,V.Store(n)}))}else"function"===typeof t.call?t.call(n,""):t("")}}function c(){g?"recording"===n.state?(f("paused"),g.pause(),e.disableLogs||console.log("Paused recording.")):e.disableLogs||console.warn("Unable to pause the recording. Recording state: ",n.state):y()}function l(){g?"paused"===n.state?(f("recording"),g.resume(),e.disableLogs||console.log("Resumed recording.")):e.disableLogs||console.warn("Unable to resume the recording. Recording state: ",n.state):y()}function h(t){postMessage((new FileReaderSync).readAsDataURL(t))}function d(t,n){if(!t)throw"Pass a callback function over getDataURL.";var i=n?n.blob:(g||{}).blob;if(!i)return e.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout((function(){d(t,n)}),1e3);if("undefined"===typeof Worker||navigator.mozGetUserMedia){var r=new FileReader;r.readAsDataURL(i),r.onload=function(e){t(e.target.result)}}else{var o=a(h);o.onmessage=function(e){t(e.data)},o.postMessage(i)}function a(t){try{var e=m.createObjectURL(new Blob([t.toString(),"this.onmessage =  function (eee) {"+t.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(e);return m.revokeObjectURL(e),n}catch(i){}}}function p(t){t=t||0,"paused"!==n.state?"stopped"!==n.state&&(t>=n.recordingDuration?o(n.onRecordingStopped):(t+=1e3,setTimeout((function(){p(t)}),1e3))):setTimeout((function(){p(t)}),1e3)}function f(t){n&&(n.state=t,"function"===typeof n.onStateChanged.call?n.onStateChanged.call(n,t):n.onStateChanged(t))}var g,v='It seems that recorder is destroyed or "startRecording" is not invoked for '+e.type+" recorder.";function y(){!0!==e.disableLogs&&console.warn(v)}var _={startRecording:i,stopRecording:o,pauseRecording:c,resumeRecording:l,initRecorder:r,setRecordingDuration:function(t,e){if("undefined"===typeof t)throw"recordingDuration is required.";if("number"!==typeof t)throw"recordingDuration must be a number.";return n.recordingDuration=t,n.onRecordingStopped=e||function(){},{onRecordingStopped:function(t){n.onRecordingStopped=t}}},clearRecordedData:function(){g?(g.clearRecordedData(),e.disableLogs||console.log("Cleared old recorded data.")):y()},getBlob:function(){if(g)return g.blob;y()},getDataURL:d,toURL:function(){if(g)return m.createObjectURL(g.blob);y()},getInternalRecorder:function(){return g},save:function(t){g?C(g.blob,t):y()},getFromDisk:function(t){g?a.getFromDisk(e.type,t):y()},setAdvertisementArray:function(t){e.advertisement=[];for(var n=t.length,i=0;i<n;i++)e.advertisement.push({duration:i,image:t[i]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==n.state||e.disableLogs||console.warn("Stop an active recorder."),g&&"function"===typeof g.clearRecordedData&&g.clearRecordedData(),g=null,f("inactive"),n.blob=null},onStateChanged:function(t){e.disableLogs||console.log("Recorder state changed:",t)},state:"inactive",getState:function(){return n.state},destroy:function(){var t=e.disableLogs;e={disableLogs:!0},n.reset(),f("destroyed"),_=n=null,M.AudioContextConstructor&&(M.AudioContextConstructor.close(),M.AudioContextConstructor=null),e.disableLogs=t,e.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.1"};if(!this)return n=_,_;for(var w in _)this[w]=_[w];return n=this,_}
/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */
function s(t,e){return e.recorderType||e.type||(e.audio&&e.video?e.type="video":e.audio&&!e.video&&(e.type="audio")),e.recorderType&&!e.type&&(e.recorderType===O||e.recorderType===E||"undefined"!==typeof j&&e.recorderType===j?e.type="video":e.recorderType===B?e.type="gif":e.recorderType===P?e.type="audio":e.recorderType===I&&(k(t,"audio").length&&k(t,"video").length||!k(t,"audio").length&&k(t,"video").length?e.type="video":k(t,"audio").length&&!k(t,"video").length&&(e.type="audio"))),"undefined"!==typeof I&&"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(e.mimeType||(e.mimeType="video/webm"),e.type||(e.type=e.mimeType.split("/")[0]),e.bitsPerSecond),e.type||(e.mimeType&&(e.type=e.mimeType.split("/")[0]),e.type||(e.type="audio")),e}
/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function u(t,e){var n;return(_||g||v)&&(n=P),"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!_&&(n=I),"video"===e.type&&(_||v)&&(n=O,"undefined"!==typeof j&&"undefined"!==typeof ReadableStream&&(n=j)),"gif"===e.type&&(n=B),"canvas"===e.type&&(n=E),A()&&n!==E&&n!==B&&"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(k(t,"video").length||k(t,"audio").length)&&("audio"===e.type?"function"===typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(n=I):"function"===typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(n=I)),t instanceof Array&&t.length&&(n=N),e.recorderType&&(n=e.recorderType),!e.disableLogs&&n&&n.name&&console.log("Using recorderType:",n.name||n.constructor.name),!n&&w&&(n=I),n}
/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function c(t){this.addStream=function(e){e&&(t=e)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var e,n=this.mediaType,i=this.mimeType||{audio:null,video:null,gif:null};if("function"!==typeof n.audio&&A()&&!k(t,"audio").length&&(n.audio=!1),"function"!==typeof n.video&&A()&&!k(t,"video").length&&(n.video=!1),"function"!==typeof n.gif&&A()&&!k(t,"video").length&&(n.gif=!1),!n.audio&&!n.video&&!n.gif)throw"MediaStream must have either audio or video tracks.";if(n.audio&&(e=null,"function"===typeof n.audio&&(e=n.audio),this.audioRecorder=new a(t,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:e,mimeType:i.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),n.video||this.audioRecorder.startRecording()),n.video){e=null,"function"===typeof n.video&&(e=n.video);var r=t;if(A()&&n.audio&&"function"===typeof n.audio){var o=k(t,"video")[0];y?(r=new b,r.addTrack(o),e&&e===O&&(e=I)):(r=new b,r.addTrack(o))}this.videoRecorder=new a(r,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:e,mimeType:i.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),n.audio||this.videoRecorder.startRecording()}if(n.audio&&n.video){var s=this,u=!0===A();(n.audio instanceof P&&n.video||!0!==n.audio&&!0!==n.video&&n.audio!==n.video)&&(u=!1),!0===u?(s.audioRecorder=null,s.videoRecorder.startRecording()):s.videoRecorder.initRecorder((function(){s.audioRecorder.initRecorder((function(){s.videoRecorder.startRecording(),s.audioRecorder.startRecording()}))}))}n.gif&&(e=null,"function"===typeof n.gif&&(e=n.gif),this.gifRecorder=new a(t,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:e,mimeType:i.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(t){t=t||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(e){t(e,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(e){t(e,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(e){t(e,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(t){var e={};return this.audioRecorder&&(e.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(e.video=this.videoRecorder.getBlob()),this.gifRecorder&&(e.gif=this.gifRecorder.getBlob()),t&&t(e),e},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(t){function e(t,e){if("undefined"!==typeof Worker){var i=n((function(t){postMessage((new FileReaderSync).readAsDataURL(t))}));i.onmessage=function(t){e(t.data)},i.postMessage(t)}else{var r=new FileReader;r.readAsDataURL(t),r.onload=function(t){e(t.target.result)}}}function n(t){var e,n=m.createObjectURL(new Blob([t.toString(),"this.onmessage =  function (eee) {"+t.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(n);if("undefined"!==typeof m)e=m;else{if("undefined"===typeof webkitURL)throw"Neither URL nor webkitURL detected.";e=webkitURL}return e.revokeObjectURL(n),i}this.getBlob((function(n){n.audio&&n.video?e(n.audio,(function(i){e(n.video,(function(e){t({audio:i,video:e})}))})):n.audio?e(n.audio,(function(e){t({audio:e})})):n.video&&e(n.video,(function(e){t({video:e})}))}))},this.writeToDisk=function(){a.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(t){t=t||{audio:!0,video:!0,gif:!0},t.audio&&this.audioRecorder&&this.audioRecorder.save("string"===typeof t.audio?t.audio:""),t.video&&this.videoRecorder&&this.videoRecorder.save("string"===typeof t.video?t.video:""),t.gif&&this.gifRecorder&&this.gifRecorder.save("string"===typeof t.gif?t.gif:"")}}a.version="5.6.1",t.exports=a,r=[],o=function(){return a}.apply(e,r),void 0===o||(t.exports=o),a.getFromDisk=function(t,e){if(!e)throw"callback is mandatory.";console.log("Getting recorded "+("all"===t?"blobs":t+" blob ")+" from disk!"),V.Fetch((function(n,i){"all"!==t&&i===t+"Blob"&&e&&e(n),"all"===t&&e&&e(n,i.replace("Blob",""))}))},a.writeToDisk=function(t){console.log("Writing recorded blob(s) to disk!"),t=t||{},t.audio&&t.video&&t.gif?t.audio.getDataURL((function(e){t.video.getDataURL((function(n){t.gif.getDataURL((function(t){V.Store({audioBlob:e,videoBlob:n,gifBlob:t})}))}))})):t.audio&&t.video?t.audio.getDataURL((function(e){t.video.getDataURL((function(t){V.Store({audioBlob:e,videoBlob:t})}))})):t.audio&&t.gif?t.audio.getDataURL((function(e){t.gif.getDataURL((function(t){V.Store({audioBlob:e,gifBlob:t})}))})):t.video&&t.gif?t.video.getDataURL((function(e){t.gif.getDataURL((function(t){V.Store({videoBlob:e,gifBlob:t})}))})):t.audio?t.audio.getDataURL((function(t){V.Store({audioBlob:t})})):t.video?t.video.getDataURL((function(t){V.Store({videoBlob:t})})):t.gif&&t.gif.getDataURL((function(t){V.Store({gifBlob:t})}))},c.getFromDisk=a.getFromDisk,c.writeToDisk=a.writeToDisk,"undefined"!==typeof a&&(a.MRecordRTC=c);var l="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(t){t&&"undefined"===typeof window&&"undefined"!==typeof n&&(n.navigator={userAgent:l,getUserMedia:function(){}},n.console||(n.console={}),"undefined"!==typeof n.console.log&&"undefined"!==typeof n.console.error||(n.console.error=n.console.log=n.console.log||function(){console.log(arguments)}),"undefined"===typeof document&&(t.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var t={getContext:function(){return t},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return t},t.HTMLVideoElement=function(){}),"undefined"===typeof location&&(t.location={protocol:"file:",href:"",hash:""}),"undefined"===typeof screen&&(t.screen={width:0,height:0}),"undefined"===typeof m&&(t.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),t.window=n)})("undefined"!==typeof n?n:null);var h=window.requestAnimationFrame;if("undefined"===typeof h)if("undefined"!==typeof webkitRequestAnimationFrame)h=webkitRequestAnimationFrame;else if("undefined"!==typeof mozRequestAnimationFrame)h=mozRequestAnimationFrame;else if("undefined"!==typeof msRequestAnimationFrame)h=msRequestAnimationFrame;else if("undefined"===typeof h){var d=0;h=function(t,e){var n=(new Date).getTime(),i=Math.max(0,16-(n-d)),r=setTimeout((function(){t(n+i)}),i);return d=n+i,r}}var p=window.cancelAnimationFrame;"undefined"===typeof p&&("undefined"!==typeof webkitCancelAnimationFrame?p=webkitCancelAnimationFrame:"undefined"!==typeof mozCancelAnimationFrame?p=mozCancelAnimationFrame:"undefined"!==typeof msCancelAnimationFrame?p=msCancelAnimationFrame:"undefined"===typeof p&&(p=function(t){clearTimeout(t)}));var f=window.AudioContext;"undefined"===typeof f&&("undefined"!==typeof webkitAudioContext&&(f=webkitAudioContext),"undefined"!==typeof mozAudioContext&&(f=mozAudioContext));var m=window.URL;"undefined"===typeof m&&"undefined"!==typeof webkitURL&&(m=webkitURL),"undefined"!==typeof navigator&&"undefined"===typeof navigator.getUserMedia&&("undefined"!==typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!==typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var g=-1!==navigator.userAgent.indexOf("Edge")&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),v=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),y=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),_=!v&&!g&&!!navigator.webkitGetUserMedia||S()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),w=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);w&&!_&&-1!==navigator.userAgent.indexOf("CriOS")&&(w=!1,_=!0);var b=window.MediaStream;function x(t){var e=1e3,n=["Bytes","KB","MB","GB","TB"];if(0===t)return"0 Bytes";var i=parseInt(Math.floor(Math.log(t)/Math.log(e)),10);return(t/Math.pow(e,i)).toPrecision(3)+" "+n[i]}function C(t,e){if(!t)throw"Blob object is required.";if(!t.type)try{t.type="video/webm"}catch(a){}var n=(t.type||"video/webm").split("/")[1];if(e&&-1!==e.indexOf(".")){var i=e.split(".");e=i[0],n=i[1]}var r=(e||Math.round(9999999999*Math.random())+888888888)+"."+n;if("undefined"!==typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(t,r);if("undefined"!==typeof navigator.msSaveBlob)return navigator.msSaveBlob(t,r);var o=document.createElement("a");o.href=m.createObjectURL(t),o.download=r,o.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(o),"function"===typeof o.click?o.click():(o.target="_blank",o.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),m.revokeObjectURL(o.href)}function S(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof i||"object"!==typeof i.versions||!i.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function k(t,e){return t&&t.getTracks?t.getTracks().filter((function(t){return t.kind===(e||"audio")})):[]}function T(t,e){"srcObject"in e?e.srcObject=t:"mozSrcObject"in e?e.mozSrcObject=t:e.srcObject=t}function R(t,e){if("undefined"===typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var n=new EBML.Reader,i=new EBML.Decoder,r=EBML.tools,o=new FileReader;o.onload=function(t){var o=i.decode(this.result);o.forEach((function(t){n.read(t)})),n.stop();var a=r.makeMetadataSeekable(n.metadatas,n.duration,n.cues),s=this.result.slice(n.metadataSize),u=new Blob([a,s],{type:"video/webm"});e(u)},o.readAsArrayBuffer(t)}"undefined"===typeof b&&"undefined"!==typeof webkitMediaStream&&(b=webkitMediaStream),"undefined"!==typeof b&&"undefined"===typeof b.prototype.stop&&(b.prototype.stop=function(){this.getTracks().forEach((function(t){t.stop()}))}),"undefined"!==typeof a&&(a.invokeSaveAsDialog=C,a.getTracks=k,a.getSeekableBlob=R,a.bytesToSize=x,a.isElectron=S);
/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */
var M={};function A(){if(y||w||g)return!0;navigator.appVersion;var t,e,n=navigator.userAgent,i=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return(_||v)&&(t=n.indexOf("Chrome"),i=n.substring(t+7)),-1!==(e=i.indexOf(";"))&&(i=i.substring(0,e)),-1!==(e=i.indexOf(" "))&&(i=i.substring(0,e)),r=parseInt(""+i,10),isNaN(r)&&(i=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),r>=49}
/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function I(t,e){var n=this;if("undefined"===typeof t)throw'First argument "MediaStream" is required.';if("undefined"===typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(e=e||{mimeType:"video/webm"},"audio"===e.type){var i;if(k(t,"video").length&&k(t,"audio").length)navigator.mozGetUserMedia?(i=new b,i.addTrack(k(t,"audio")[0])):i=new b(k(t,"audio")),t=i;e.mimeType&&-1!==e.mimeType.toString().toLowerCase().indexOf("audio")||(e.mimeType=_?"audio/webm":"audio/ogg"),e.mimeType&&"audio/ogg"!==e.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(e.mimeType="audio/ogg")}var r,o=[];function a(){n.timestamps.push((new Date).getTime()),"function"===typeof e.onTimeStamp&&e.onTimeStamp(n.timestamps[n.timestamps.length-1],n.timestamps)}function s(t){return r&&r.mimeType?r.mimeType:t.mimeType||"video/webm"}function u(){o=[],r=null,n.timestamps=[]}function c(){if("active"in t){if(!t.active)return!1}else if("ended"in t&&t.ended)return!1;return!0}this.getArrayOfBlobs=function(){return o},this.record=function(){n.blob=null,n.clearRecordedData(),n.timestamps=[],l=[],o=[];var i=e;e.disableLogs||console.log("Passing following config over MediaRecorder API.",i),r&&(r=null),_&&!A()&&(i="video/vp8"),"function"===typeof MediaRecorder.isTypeSupported&&i.mimeType&&(MediaRecorder.isTypeSupported(i.mimeType)||(e.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",i.mimeType),i.mimeType="audio"===e.type?"audio/webm":"video/webm"));try{r=new MediaRecorder(t,i),e.mimeType=i.mimeType}catch(u){r=new MediaRecorder(t)}i.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in r&&!1===r.canRecordMimeType(i.mimeType)&&(e.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",i.mimeType)),r.ondataavailable=function(t){if(t.data&&l.push("ondataavailable: "+x(t.data.size)),"number"!==typeof e.timeSlice)!t.data||!t.data.size||t.data.size<100||n.blob?n.recordingCallback&&(n.recordingCallback(new Blob([],{type:s(i)})),n.recordingCallback=null):(n.blob=e.getNativeBlob?t.data:new Blob([t.data],{type:s(i)}),n.recordingCallback&&(n.recordingCallback(n.blob),n.recordingCallback=null));else if(t.data&&t.data.size&&t.data.size>100&&(o.push(t.data),a(),"function"===typeof e.ondataavailable)){var r=e.getNativeBlob?t.data:new Blob([t.data],{type:s(i)});e.ondataavailable(r)}},r.onstart=function(){l.push("started")},r.onpause=function(){l.push("paused")},r.onresume=function(){l.push("resumed")},r.onstop=function(){l.push("stopped")},r.onerror=function(t){t&&(t.name||(t.name="UnknownError"),l.push("error: "+t),e.disableLogs||(-1!==t.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",t):-1!==t.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",i.mimeType,") is not supported.",t):-1!==t.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",t):"OutOfMemory"===t.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",t):"IllegalStreamModification"===t.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",t):"OtherRecordingError"===t.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",t):"GenericError"===t.name?console.error("The UA cannot provide the codec or recording option that has been requested.",t):console.error("MediaRecorder Error",t)),function(t){if(!n.manuallyStopped&&r&&"inactive"===r.state)return delete e.timeslice,void r.start(6e5);setTimeout(t,1e3)}(),"inactive"!==r.state&&"stopped"!==r.state&&r.stop())},"number"===typeof e.timeSlice?(a(),r.start(e.timeSlice)):r.start(36e5),e.initCallback&&e.initCallback()},this.timestamps=[],this.stop=function(t){t=t||function(){},n.manuallyStopped=!0,r&&(this.recordingCallback=t,"recording"===r.state&&r.stop(),"number"===typeof e.timeSlice&&setTimeout((function(){n.blob=new Blob(o,{type:s(e)}),n.recordingCallback(n.blob)}),100))},this.pause=function(){r&&"recording"===r.state&&r.pause()},this.resume=function(){r&&"paused"===r.state&&r.resume()},this.clearRecordedData=function(){r&&"recording"===r.state&&n.stop(u),u()},this.getInternalRecorder=function(){return r},this.blob=null,this.getState=function(){return r&&r.state||"inactive"};var l=[];this.getAllStates=function(){return l},"undefined"===typeof e.checkForInactiveTracks&&(e.checkForInactiveTracks=!1);n=this;(function t(){if(r&&!1!==e.checkForInactiveTracks)return!1===c()?(e.disableLogs||console.log("MediaStream seems stopped."),void n.stop()):void setTimeout(t,1e3)})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}
/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */
function P(t,e){if(!k(t,"audio").length)throw"Your stream has no audio tracks.";e=e||{};var n,i=this,r=[],o=[],s=!1,u=0,c=2,l=e.desiredSampRate;function h(){if(!1===e.checkForInactiveTracks)return!0;if("active"in t){if(!t.active)return!1}else if("ended"in t&&t.ended)return!1;return!0}function d(t,e){function n(t,e){var n,i=t.numberOfAudioChannels,r=t.leftBuffers.slice(0),o=t.rightBuffers.slice(0),a=t.sampleRate,s=t.internalInterleavedLength,u=t.desiredSampRate;function c(t,e,n){var i=Math.round(t.length*(e/n)),r=[],o=Number((t.length-1)/(i-1));r[0]=t[0];for(var a=1;a<i-1;a++){var s=a*o,u=Number(Math.floor(s)).toFixed(),c=Number(Math.ceil(s)).toFixed(),h=s-u;r[a]=l(t[u],t[c],h)}return r[i-1]=t[t.length-1],r}function l(t,e,n){return t+(e-t)*n}function h(t,e){for(var n=new Float64Array(e),i=0,r=t.length,o=0;o<r;o++){var a=t[o];n.set(a,i),i+=a.length}return n}function d(t,e){for(var n=t.length+e.length,i=new Float64Array(n),r=0,o=0;o<n;)i[o++]=t[r],i[o++]=e[r],r++;return i}function p(t,e,n){for(var i=n.length,r=0;r<i;r++)t.setUint8(e+r,n.charCodeAt(r))}2===i&&(r=h(r,s),o=h(o,s),u&&(r=c(r,u,a),o=c(o,u,a))),1===i&&(r=h(r,s),u&&(r=c(r,u,a))),u&&(a=u),2===i&&(n=d(r,o)),1===i&&(n=r);var f=n.length,m=44+2*f,g=new ArrayBuffer(m),v=new DataView(g);p(v,0,"RIFF"),v.setUint32(4,36+2*f,!0),p(v,8,"WAVE"),p(v,12,"fmt "),v.setUint32(16,16,!0),v.setUint16(20,1,!0),v.setUint16(22,i,!0),v.setUint32(24,a,!0),v.setUint32(28,2*a,!0),v.setUint16(32,2*i,!0),v.setUint16(34,16,!0),p(v,36,"data"),v.setUint32(40,2*f,!0);for(var y=f,_=44,w=1,b=0;b<y;b++)v.setInt16(_,n[b]*(32767*w),!0),_+=2;if(e)return e({buffer:g,view:v});postMessage({buffer:g,view:v})}if(t.noWorker)n(t,(function(t){e(t.buffer,t.view)}));else{var i=p(n);i.onmessage=function(t){e(t.data.buffer,t.data.view),m.revokeObjectURL(i.workerURL),i.terminate()},i.postMessage(t)}}function p(t){var e=m.createObjectURL(new Blob([t.toString(),";this.onmessage =  function (eee) {"+t.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(e);return n.workerURL=e,n}!0===e.leftChannel&&(c=1),1===e.numberOfAudioChannels&&(c=1),(!c||c<1)&&(c=2),e.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+c),"undefined"===typeof e.checkForInactiveTracks&&(e.checkForInactiveTracks=!0),this.record=function(){if(!1===h())throw"Please make sure MediaStream is active.";b(),C=w=!1,s=!0,"undefined"!==typeof e.timeSlice&&R()},this.stop=function(t){t=t||function(){},s=!1,d({desiredSampRate:l,sampleRate:_,numberOfAudioChannels:c,internalInterleavedLength:u,leftBuffers:r,rightBuffers:1===c?[]:o,noWorker:e.noWorker},(function(e,n){i.blob=new Blob([n],{type:"audio/wav"}),i.buffer=new ArrayBuffer(n.buffer.byteLength),i.view=n,i.sampleRate=l||_,i.bufferSize=y,i.length=u,C=!1,t&&t(i.blob)}))},"undefined"===typeof a.Storage&&(a.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),a.Storage.AudioContextConstructor&&"closed"!==a.Storage.AudioContextConstructor.state||(a.Storage.AudioContextConstructor=new a.Storage.AudioContext);var f=a.Storage.AudioContextConstructor,g=f.createMediaStreamSource(t),v=[0,256,512,1024,2048,4096,8192,16384],y="undefined"===typeof e.bufferSize?4096:e.bufferSize;if(-1===v.indexOf(y)&&(e.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(v,null,"\t"))),f.createJavaScriptNode)n=f.createJavaScriptNode(y,c,c);else{if(!f.createScriptProcessor)throw"WebAudio API has no support on this browser.";n=f.createScriptProcessor(y,c,c)}g.connect(n),e.bufferSize||(y=n.bufferSize);var _="undefined"!==typeof e.sampleRate?e.sampleRate:f.sampleRate||44100;(_<22050||_>96e3)&&(e.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),e.disableLogs||e.desiredSampRate&&console.log("Desired sample-rate: "+e.desiredSampRate);var w=!1;function b(){r=[],o=[],u=0,C=!1,s=!1,w=!1,f=null,i.leftchannel=r,i.rightchannel=o,i.numberOfAudioChannels=c,i.desiredSampRate=l,i.sampleRate=_,i.recordingLength=u,T={left:[],right:[],recordingLength:0}}function x(){n&&(n.onaudioprocess=null,n.disconnect(),n=null),g&&(g.disconnect(),g=null),b()}this.pause=function(){w=!0},this.resume=function(){if(!1===h())throw"Please make sure MediaStream is active.";if(!s)return e.disableLogs||console.log("Seems recording has been restarted."),void this.record();w=!1},this.clearRecordedData=function(){e.checkForInactiveTracks=!1,s&&this.stop(x),x()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var C=!1;function S(t){if(!w)if(!1===h()&&(e.disableLogs||console.log("MediaStream seems stopped."),n.disconnect(),s=!1),s){C||(C=!0,e.onAudioProcessStarted&&e.onAudioProcessStarted(),e.initCallback&&e.initCallback());var a=t.inputBuffer.getChannelData(0),l=new Float32Array(a);if(r.push(l),2===c){var d=t.inputBuffer.getChannelData(1),p=new Float32Array(d);o.push(p)}u+=y,i.recordingLength=u,"undefined"!==typeof e.timeSlice&&(T.recordingLength+=y,T.left.push(l),2===c&&T.right.push(p))}else g&&(g.disconnect(),g=null)}n.onaudioprocess=S,f.createMediaStreamDestination?n.connect(f.createMediaStreamDestination()):n.connect(f.destination),this.leftchannel=r,this.rightchannel=o,this.numberOfAudioChannels=c,this.desiredSampRate=l,this.sampleRate=_,i.recordingLength=u;var T={left:[],right:[],recordingLength:0};function R(){s&&"function"===typeof e.ondataavailable&&"undefined"!==typeof e.timeSlice&&(T.left.length?(d({desiredSampRate:l,sampleRate:_,numberOfAudioChannels:c,internalInterleavedLength:T.recordingLength,leftBuffers:T.left,rightBuffers:1===c?[]:T.right},(function(t,n){var i=new Blob([n],{type:"audio/wav"});e.ondataavailable(i),setTimeout(R,e.timeSlice)})),T={left:[],right:[],recordingLength:0}):setTimeout(R,e.timeSlice))}}
/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */
function E(t,e){if("undefined"===typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";e=e||{},e.frameInterval||(e.frameInterval=10);var n=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(t){t in document.createElement("canvas")&&(n=!0)}));var i,r,o,a=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,s=50,u=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(a&&u&&u[2]&&(s=parseInt(u[2],10)),a&&s<52&&(n=!1),e.useWhammyRecorder&&(n=!1),n)if(e.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),t instanceof HTMLCanvasElement)i=t;else{if(!(t instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";i=t.canvas}else navigator.mozGetUserMedia&&(e.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(o=!0,n&&!e.useWhammyRecorder){var t;"captureStream"in i?t=i.captureStream(25):"mozCaptureStream"in i?t=i.mozCaptureStream(25):"webkitCaptureStream"in i&&(t=i.webkitCaptureStream(25));try{var a=new b;a.addTrack(k(t,"video")[0]),t=a}catch(s){}if(!t)throw"captureStream API are NOT available.";r=new I(t,{mimeType:e.mimeType||"video/webm"}),r.record()}else f.frames=[],p=(new Date).getTime(),d();e.initCallback&&e.initCallback()},this.getWebPImages=function(n){if("canvas"===t.nodeName.toLowerCase()){var i=f.frames.length;f.frames.forEach((function(t,n){var r=i-n;e.disableLogs||console.log(r+"/"+i+" frames remaining"),e.onEncodingCallback&&e.onEncodingCallback(r,i);var o=t.image.toDataURL("image/webp",1);f.frames[n].image=o})),e.disableLogs||console.log("Generating WebM"),n()}else n()},this.stop=function(t){o=!1;var i=this;n&&r?r.stop(t):this.getWebPImages((function(){f.compile((function(n){e.disableLogs||console.log("Recording finished!"),i.blob=n,i.blob.forEach&&(i.blob=new Blob([],{type:"video/webm"})),t&&t(i.blob),f.frames=[]}))}))};var c=!1;function l(){f.frames=[],o=!1,c=!1}function h(){var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),e}function d(){if(c)return p=(new Date).getTime(),setTimeout(d,500);if("canvas"===t.nodeName.toLowerCase()){var n=(new Date).getTime()-p;return p=(new Date).getTime(),f.frames.push({image:h(),duration:n}),void(o&&setTimeout(d,e.frameInterval))}html2canvas(t,{grabMouse:"undefined"===typeof e.showMousePointer||e.showMousePointer,onrendered:function(t){var n=(new Date).getTime()-p;if(!n)return setTimeout(d,e.frameInterval);p=(new Date).getTime(),f.frames.push({image:t.toDataURL("image/webp",1),duration:n}),o&&setTimeout(d,e.frameInterval)}})}this.pause=function(){c=!0,r instanceof I&&r.pause()},this.resume=function(){c=!1,r instanceof I?r.resume():o||this.record()},this.clearRecordedData=function(){o&&this.stop(l),l()},this.name="CanvasRecorder",this.toString=function(){return this.name};var p=(new Date).getTime(),f=new D.Video(100)}
/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */
function O(t,e){function n(t){t="undefined"!==typeof t?t:10;var e=(new Date).getTime()-c;return e?a?(c=(new Date).getTime(),setTimeout(n,100)):(c=(new Date).getTime(),u.paused&&u.play(),d.drawImage(u,0,0,h.width,h.height),l.frames.push({duration:e,image:h.toDataURL("image/webp")}),void(o||setTimeout(n,t,t))):setTimeout(n,t,t)}function i(t){var e=-1,n=t.length;(function i(){e++,e!==n?setTimeout((function(){t.functionToLoop(i,e)}),1):t.callback()})()}function r(t,e,n,r,o){var a=document.createElement("canvas");a.width=h.width,a.height=h.height;var s=a.getContext("2d"),u=[],c=-1===e,l=e&&e>0&&e<=t.length?e:t.length,d={r:0,g:0,b:0},p=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),f=n&&n>=0&&n<=1?n:0,m=r&&r>=0&&r<=1?r:0,g=!1;i({length:l,functionToLoop:function(e,n){var i,r,o,a=function(){!g&&o-i<=o*m||(c&&(g=!0),u.push(t[n])),e()};if(g)a();else{var l=new Image;l.onload=function(){s.drawImage(l,0,0,h.width,h.height);var t=s.getImageData(0,0,h.width,h.height);i=0,r=t.data.length,o=t.data.length/4;for(var e=0;e<r;e+=4){var n={r:t.data[e],g:t.data[e+1],b:t.data[e+2]},u=Math.sqrt(Math.pow(n.r-d.r,2)+Math.pow(n.g-d.g,2)+Math.pow(n.b-d.b,2));u<=p*f&&i++}a()},l.src=t[n].image}},callback:function(){u=u.concat(t.slice(l)),u.length<=0&&u.push(t[t.length-1]),o(u)}})}e=e||{},e.frameInterval||(e.frameInterval=10),e.disableLogs||console.log("Using frames-interval:",e.frameInterval),this.record=function(){e.width||(e.width=320),e.height||(e.height=240),e.video||(e.video={width:e.width,height:e.height}),e.canvas||(e.canvas={width:e.width,height:e.height}),h.width=e.canvas.width||320,h.height=e.canvas.height||240,d=h.getContext("2d"),e.video&&e.video instanceof HTMLVideoElement?(u=e.video.cloneNode(),e.initCallback&&e.initCallback()):(u=document.createElement("video"),T(t,u),u.onloadedmetadata=function(){e.initCallback&&e.initCallback()},u.width=e.video.width,u.height=e.video.height),u.muted=!0,u.play(),c=(new Date).getTime(),l=new D.Video,e.disableLogs||(console.log("canvas resolutions",h.width,"*",h.height),console.log("video width/height",u.width||h.width,"*",u.height||h.height)),n(e.frameInterval)};var o=!1;this.stop=function(t){t=t||function(){},o=!0;var n=this;setTimeout((function(){r(l.frames,-1,null,null,(function(i){l.frames=i,e.advertisement&&e.advertisement.length&&(l.frames=e.advertisement.concat(l.frames)),l.compile((function(e){n.blob=e,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),t&&t(n.blob)}))}))}),10)};var a=!1;function s(){l.frames=[],o=!0,a=!1}this.pause=function(){a=!0},this.resume=function(){a=!1,o&&this.record()},this.clearRecordedData=function(){o||this.stop(s),s()},this.name="WhammyRecorder",this.toString=function(){return this.name};var u,c,l,h=document.createElement("canvas"),d=h.getContext("2d")}"undefined"!==typeof f?M.AudioContext=f:"undefined"!==typeof webkitAudioContext&&(M.AudioContext=webkitAudioContext),"undefined"!==typeof a&&(a.Storage=M),"undefined"!==typeof a&&(a.MediaStreamRecorder=I),"undefined"!==typeof a&&(a.StereoAudioRecorder=P),"undefined"!==typeof a&&(a.CanvasRecorder=E),"undefined"!==typeof a&&(a.WhammyRecorder=O);
/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */
var D=function(){function t(t){this.frames=[],this.duration=t||1,this.quality=.8}function e(t){var e=m.createObjectURL(new Blob([t.toString(),"this.onmessage =  function (eee) {"+t.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(e);return m.revokeObjectURL(e),n}function n(t){function e(t){var e=i(t);if(!e)return[];var r=3e4,o=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:d(e.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:e.width,id:176},{data:e.height,id:186}]}]}]}]}],a=0,u=0;while(a<t.length){var c=[],l=0;do{c.push(t[a]),l+=t[a].duration,a++}while(a<t.length&&l<r);var h=0,p={id:524531317,data:n(u,h,c)};o[1].data.push(p),u+=l}return s(o)}function n(t,e,n){return[{data:t,id:231}].concat(n.map((function(t){var n=u({discardable:0,frame:t.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(e)});return e+=t.duration,{data:n,id:163}})))}function i(t){if(t[0]){for(var e=t[0].width,n=t[0].height,i=t[0].duration,r=1;r<t.length;r++)i+=t[r].duration;return{duration:i,width:e,height:n}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}function r(t){var e=[];while(t>0)e.push(255&t),t>>=8;return new Uint8Array(e.reverse())}function o(t){return new Uint8Array(t.split("").map((function(t){return t.charCodeAt(0)})))}function a(t){var e=[],n=t.length%8?new Array(9-t.length%8).join("0"):"";t=n+t;for(var i=0;i<t.length;i+=8)e.push(parseInt(t.substr(i,8),2));return new Uint8Array(e)}function s(t){for(var e=[],n=0;n<t.length;n++){var i=t[n].data;"object"===typeof i&&(i=s(i)),"number"===typeof i&&(i=a(i.toString(2))),"string"===typeof i&&(i=o(i));var u=i.size||i.byteLength||i.length,c=Math.ceil(Math.ceil(Math.log(u)/Math.log(2))/8),l=u.toString(2),h=new Array(7*c+7+1-l.length).join("0")+l,d=new Array(c).join("0")+"1"+h;e.push(r(t[n].id)),e.push(a(d)),e.push(i)}return new Blob(e,{type:"video/webm"})}function u(t){var e=0;if(t.keyframe&&(e|=128),t.invisible&&(e|=8),t.lacing&&(e|=t.lacing<<1),t.discardable&&(e|=1),t.trackNum>127)throw"TrackNumber > 127 not supported";var n=[128|t.trackNum,t.timecode>>8,255&t.timecode,e].map((function(t){return String.fromCharCode(t)})).join("")+t.frame;return n}function c(t){for(var e,n,i,r=t.RIFF[0].WEBP[0],o=r.indexOf("*"),a=0,s=[];a<4;a++)s[a]=r.charCodeAt(o+3+a);return i=s[1]<<8|s[0],e=16383&i,i=s[3]<<8|s[2],n=16383&i,{width:e,height:n,data:r,riff:t}}function l(t,e){return parseInt(t.substr(e+4,4).split("").map((function(t){var e=t.charCodeAt(0).toString(2);return new Array(8-e.length+1).join("0")+e})).join(""),2)}function h(t){var e=0,n={};while(e<t.length){var i=t.substr(e,4),r=l(t,e),o=t.substr(e+4+4,r);e+=8+r,n[i]=n[i]||[],"RIFF"===i||"LIST"===i?n[i].push(h(o)):n[i].push(o)}return n}function d(t){return[].slice.call(new Uint8Array(new Float64Array([t]).buffer),0).map((function(t){return String.fromCharCode(t)})).reverse().join("")}var p=new e(t.map((function(t){var e=c(h(atob(t.image.slice(23))));return e.duration=t.duration,e})));postMessage(p)}return t.prototype.add=function(t,e){if("canvas"in t&&(t=t.canvas),"toDataURL"in t&&(t=t.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(t))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:t,duration:e||this.duration})},t.prototype.compile=function(t){var i=e(n);i.onmessage=function(e){e.data.error?console.error(e.data.error):t(e.data)},i.postMessage(this.frames)},{Video:t}}();"undefined"!==typeof a&&(a.Whammy=D);
/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var V={init:function(){var t=this;if("undefined"!==typeof indexedDB&&"undefined"!==typeof indexedDB.open){var e,n=1,i=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),r=indexedDB.open(i,n);r.onerror=t.onError,r.onsuccess=function(){if(e=r.result,e.onerror=t.onError,e.setVersion)if(e.version!==n){var i=e.setVersion(n);i.onsuccess=function(){o(e),a()}}else a();else a()},r.onupgradeneeded=function(t){o(t.target.result)}}else console.error("IndexedDB API are not available in this browser.");function o(e){e.createObjectStore(t.dataStoreName)}function a(){var n=e.transaction([t.dataStoreName],"readwrite");function i(e){n.objectStore(t.dataStoreName).get(e).onsuccess=function(n){t.callback&&t.callback(n.target.result,e)}}t.videoBlob&&n.objectStore(t.dataStoreName).put(t.videoBlob,"videoBlob"),t.gifBlob&&n.objectStore(t.dataStoreName).put(t.gifBlob,"gifBlob"),t.audioBlob&&n.objectStore(t.dataStoreName).put(t.audioBlob,"audioBlob"),i("audioBlob"),i("videoBlob"),i("gifBlob")}},Fetch:function(t){return this.callback=t,this.init(),this},Store:function(t){return this.audioBlob=t.audioBlob,this.videoBlob=t.videoBlob,this.gifBlob=t.gifBlob,this.init(),this},onError:function(t){console.error(JSON.stringify(t,null,"\t"))},dataStoreName:"recordRTC",dbName:null};
/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */
function B(t,e){if("undefined"===typeof GIFEncoder){var n=document.createElement("script");n.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(n)}e=e||{};var i=t instanceof CanvasRenderingContext2D||t instanceof HTMLCanvasElement;this.record=function(){function t(n){if(!0!==m.clearedRecordedData){if(r)return setTimeout((function(){t(n)}),100);f=h(t),void 0===typeof l&&(l=n),n-l<90||(!i&&c.paused&&c.play(),i||s.drawImage(c,0,0,a.width,a.height),e.onGifPreview&&e.onGifPreview(a.toDataURL("image/png")),d.addFrame(s),l=n)}}"undefined"!==typeof GIFEncoder&&u?(i||(e.width||(e.width=c.offsetWidth||320),e.height||(e.height=c.offsetHeight||240),e.video||(e.video={width:e.width,height:e.height}),e.canvas||(e.canvas={width:e.width,height:e.height}),a.width=e.canvas.width||320,a.height=e.canvas.height||240,c.width=e.video.width||320,c.height=e.video.height||240),d=new GIFEncoder,d.setRepeat(0),d.setDelay(e.frameRate||200),d.setQuality(e.quality||10),d.start(),"function"===typeof e.onGifRecordingStarted&&e.onGifRecordingStarted(),Date.now(),f=h(t),e.initCallback&&e.initCallback()):setTimeout(m.record,1e3)},this.stop=function(t){t=t||function(){},f&&p(f),Date.now(),this.blob=new Blob([new Uint8Array(d.stream().bin)],{type:"image/gif"}),t(this.blob),d.stream().bin=[]};var r=!1;function o(){d&&(d.stream().bin=[])}this.pause=function(){r=!0},this.resume=function(){r=!1},this.clearRecordedData=function(){m.clearedRecordedData=!0,o()},this.name="GifRecorder",this.toString=function(){return this.name};var a=document.createElement("canvas"),s=a.getContext("2d");i&&(t instanceof CanvasRenderingContext2D?(s=t,a=s.canvas):t instanceof HTMLCanvasElement&&(s=t.getContext("2d"),a=t));var u=!0;if(!i){var c=document.createElement("video");c.muted=!0,c.autoplay=!0,c.playsInline=!0,u=!1,c.onloadedmetadata=function(){u=!0},T(t,c),c.play()}var l,d,f=null,m=this}function F(t,e){var i="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(t){"undefined"===typeof a&&t&&"undefined"===typeof window&&"undefined"!==typeof n&&(n.navigator={userAgent:i,getUserMedia:function(){}},n.console||(n.console={}),"undefined"!==typeof n.console.log&&"undefined"!==typeof n.console.error||(n.console.error=n.console.log=n.console.log||function(){console.log(arguments)}),"undefined"===typeof document&&(t.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var t={getContext:function(){return t},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return t},t.HTMLVideoElement=function(){}),"undefined"===typeof location&&(t.location={protocol:"file:",href:"",hash:""}),"undefined"===typeof screen&&(t.screen={width:0,height:0}),"undefined"===typeof h&&(t.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),t.window=n)})("undefined"!==typeof n?n:null),e=e||"multi-streams-mixer";var r=[],o=!1,s=document.createElement("canvas"),u=s.getContext("2d");s.style.opacity=0,s.style.position="absolute",s.style.zIndex=-1,s.style.top="-1000em",s.style.left="-1000em",s.className=e,(document.body||document.documentElement).appendChild(s),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var c=this,l=window.AudioContext;"undefined"===typeof l&&("undefined"!==typeof webkitAudioContext&&(l=webkitAudioContext),"undefined"!==typeof mozAudioContext&&(l=mozAudioContext));var h=window.URL;"undefined"===typeof h&&"undefined"!==typeof webkitURL&&(h=webkitURL),"undefined"!==typeof navigator&&"undefined"===typeof navigator.getUserMedia&&("undefined"!==typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!==typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var d=window.MediaStream;"undefined"===typeof d&&"undefined"!==typeof webkitMediaStream&&(d=webkitMediaStream),"undefined"!==typeof d&&"undefined"===typeof d.prototype.stop&&(d.prototype.stop=function(){this.getTracks().forEach((function(t){t.stop()}))});var p={};function f(t,e){"srcObject"in e?e.srcObject=t:"mozSrcObject"in e?e.mozSrcObject=t:e.srcObject=t}function m(){if(!o){var t=r.length,e=!1,n=[];if(r.forEach((function(t){t.stream||(t.stream={}),t.stream.fullcanvas?e=t:n.push(t)})),e)s.width=e.stream.width,s.height=e.stream.height;else if(n.length){s.width=t>1?2*n[0].width:n[0].width;var i=1;3!==t&&4!==t||(i=2),5!==t&&6!==t||(i=3),7!==t&&8!==t||(i=4),9!==t&&10!==t||(i=5),s.height=n[0].height*i}else s.width=c.width||360,s.height=c.height||240;e&&e instanceof HTMLVideoElement&&g(e),n.forEach((function(t,e){g(t,e)})),setTimeout(m,c.frameInterval)}}function g(t,e){if(!o){var n=0,i=0,r=t.width,a=t.height;1===e&&(n=t.width),2===e&&(i=t.height),3===e&&(n=t.width,i=t.height),4===e&&(i=2*t.height),5===e&&(n=t.width,i=2*t.height),6===e&&(i=3*t.height),7===e&&(n=t.width,i=3*t.height),"undefined"!==typeof t.stream.left&&(n=t.stream.left),"undefined"!==typeof t.stream.top&&(i=t.stream.top),"undefined"!==typeof t.stream.width&&(r=t.stream.width),"undefined"!==typeof t.stream.height&&(a=t.stream.height),u.drawImage(t,n,i,r,a),"function"===typeof t.stream.onRender&&t.stream.onRender(u,n,i,r,a,e)}}function v(){o=!1;var e=y(),n=_();return n&&n.getTracks().filter((function(t){return"audio"===t.kind})).forEach((function(t){e.addTrack(t)})),t.forEach((function(t){t.fullcanvas&&!0})),e}function y(){var t;b(),"captureStream"in s?t=s.captureStream():"mozCaptureStream"in s?t=s.mozCaptureStream():c.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var e=new d;return t.getTracks().filter((function(t){return"video"===t.kind})).forEach((function(t){e.addTrack(t)})),s.stream=e,e}function _(){p.AudioContextConstructor||(p.AudioContextConstructor=new p.AudioContext),c.audioContext=p.AudioContextConstructor,c.audioSources=[],!0===c.useGainNode&&(c.gainNode=c.audioContext.createGain(),c.gainNode.connect(c.audioContext.destination),c.gainNode.gain.value=0);var e=0;if(t.forEach((function(t){if(t.getTracks().filter((function(t){return"audio"===t.kind})).length){e++;var n=c.audioContext.createMediaStreamSource(t);!0===c.useGainNode&&n.connect(c.gainNode),c.audioSources.push(n)}})),e)return c.audioDestination=c.audioContext.createMediaStreamDestination(),c.audioSources.forEach((function(t){t.connect(c.audioDestination)})),c.audioDestination.stream}function w(t){var n=document.createElement("video");return f(t,n),n.className=e,n.muted=!0,n.volume=0,n.width=t.width||c.width||360,n.height=t.height||c.height||240,n.play(),n}function b(e){r=[],e=e||t,e.forEach((function(t){if(t.getTracks().filter((function(t){return"video"===t.kind})).length){var e=w(t);e.stream=t,r.push(e)}}))}"undefined"!==typeof l?p.AudioContext=l:"undefined"!==typeof webkitAudioContext&&(p.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){m()},this.appendStreams=function(e){if(!e)throw"First parameter is required.";e instanceof Array||(e=[e]),e.forEach((function(e){var n=new d;if(e.getTracks().filter((function(t){return"video"===t.kind})).length){var i=w(e);i.stream=e,r.push(i),n.addTrack(e.getTracks().filter((function(t){return"video"===t.kind}))[0])}if(e.getTracks().filter((function(t){return"audio"===t.kind})).length){var o=c.audioContext.createMediaStreamSource(e);c.audioDestination=c.audioContext.createMediaStreamDestination(),o.connect(c.audioDestination),n.addTrack(c.audioDestination.stream.getTracks().filter((function(t){return"audio"===t.kind}))[0])}t.push(n)}))},this.releaseStreams=function(){r=[],o=!0,c.gainNode&&(c.gainNode.disconnect(),c.gainNode=null),c.audioSources.length&&(c.audioSources.forEach((function(t){t.disconnect()})),c.audioSources=[]),c.audioDestination&&(c.audioDestination.disconnect(),c.audioDestination=null),c.audioContext&&c.audioContext.close(),c.audioContext=null,u.clearRect(0,0,s.width,s.height),s.stream&&(s.stream.stop(),s.stream=null)},this.resetVideoStreams=function(t){!t||t instanceof Array||(t=[t]),b(t)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=v}
/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */
function N(t,e){t=t||[];var n,i,r=this;function o(){var e=[];return t.forEach((function(t){k(t,"video").forEach((function(t){e.push(t)}))})),e}e=e||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},e.frameInterval||(e.frameInterval=10),e.video||(e.video={}),e.video.width||(e.video.width=360),e.video.height||(e.video.height=240),this.record=function(){n=new F(t,e.elementClass||"multi-streams-mixer"),o().length&&(n.frameInterval=e.frameInterval||10,n.width=e.video.width||360,n.height=e.video.height||240,n.startDrawingFrames()),e.previewStream&&"function"===typeof e.previewStream&&e.previewStream(n.getMixedStream()),i=new I(n.getMixedStream(),e),i.record()},this.stop=function(t){i&&i.stop((function(e){r.blob=e,t(e),r.clearRecordedData()}))},this.pause=function(){i&&i.pause()},this.resume=function(){i&&i.resume()},this.clearRecordedData=function(){i&&(i.clearRecordedData(),i=null),n&&(n.releaseStreams(),n=null)},this.addStreams=function(r){if(!r)throw"First parameter is required.";r instanceof Array||(r=[r]),t.concat(r),i&&n&&(n.appendStreams(r),e.previewStream&&"function"===typeof e.previewStream&&e.previewStream(n.getMixedStream()))},this.resetVideoStreams=function(t){n&&(!t||t instanceof Array||(t=[t]),n.resetVideoStreams(t))},this.getMixer=function(){return n},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}
/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */
function L(t,e){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if("undefined"===typeof t)throw'First argument "MediaStream" is required.';var n=this;n.recordRTC=new a(t,e),this.startRecording=function(){return new Promise((function(t,e){try{n.recordRTC.startRecording(),t()}catch(i){e(i)}}))},this.stopRecording=function(){return new Promise((function(t,e){try{n.recordRTC.stopRecording((function(i){n.blob=n.recordRTC.getBlob(),n.blob&&n.blob.size?t(i):e("Empty blob.",n.blob)}))}catch(i){e(i)}}))},this.pauseRecording=function(){return new Promise((function(t,e){try{n.recordRTC.pauseRecording(),t()}catch(i){e(i)}}))},this.resumeRecording=function(){return new Promise((function(t,e){try{n.recordRTC.resumeRecording(),t()}catch(i){e(i)}}))},this.getDataURL=function(t){return new Promise((function(t,e){try{n.recordRTC.getDataURL((function(e){t(e)}))}catch(i){e(i)}}))},this.getBlob=function(){return new Promise((function(t,e){try{t(n.recordRTC.getBlob())}catch(i){e(i)}}))},this.getInternalRecorder=function(){return new Promise((function(t,e){try{t(n.recordRTC.getInternalRecorder())}catch(i){e(i)}}))},this.reset=function(){return new Promise((function(t,e){try{t(n.recordRTC.reset())}catch(i){e(i)}}))},this.destroy=function(){return new Promise((function(t,e){try{t(n.recordRTC.destroy())}catch(i){e(i)}}))},this.getState=function(){return new Promise((function(t,e){try{t(n.recordRTC.getState())}catch(i){e(i)}}))},this.blob=null,this.version="5.6.1"}
/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */
function j(t,e){var n,i,r;function o(){return new ReadableStream({start:function(i){var r=document.createElement("canvas"),o=document.createElement("video"),a=!0;o.srcObject=t,o.muted=!0,o.height=e.height,o.width=e.width,o.volume=0,o.onplaying=function(){r.width=e.width,r.height=e.height;var t=r.getContext("2d"),s=1e3/e.frameRate,u=setInterval((function(){if(n&&(clearInterval(u),i.close()),a&&(a=!1,e.onVideoProcessStarted&&e.onVideoProcessStarted()),t.drawImage(o,0,0),"closed"!==i._controlledReadableStream.state)try{i.enqueue(t.getImageData(0,0,e.width,e.height))}catch(r){}}),s)},o.play()}})}function a(t,s){if(!e.workerPath&&!s)return n=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(e){e.arrayBuffer().then((function(e){a(t,e)}))}));if(!e.workerPath&&s instanceof ArrayBuffer){var c=new Blob([s],{type:"text/javascript"});e.workerPath=m.createObjectURL(c)}e.workerPath||console.error("workerPath parameter is missing."),i=new Worker(e.workerPath),i.postMessage(e.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),i.addEventListener("message",(function(t){"READY"===t.data?(i.postMessage({width:e.width,height:e.height,bitrate:e.bitrate||1200,timebaseDen:e.frameRate||30,realtime:e.realtime}),o().pipeTo(new WritableStream({write:function(t){n?console.error("Got image, but recorder is finished!"):i.postMessage(t.data.buffer,[t.data.buffer])}}))):t.data&&(r||u.push(t.data))}))}function s(t){i?(i.addEventListener("message",(function(e){null===e.data&&(i.terminate(),i=null,t&&t())})),i.postMessage(null)):t&&t()}"undefined"!==typeof ReadableStream&&"undefined"!==typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),e=e||{},e.width=e.width||640,e.height=e.height||480,e.frameRate=e.frameRate||30,e.bitrate=e.bitrate||1200,e.realtime=e.realtime||!0,this.record=function(){u=[],r=!1,this.blob=null,a(t),"function"===typeof e.initCallback&&e.initCallback()},this.pause=function(){r=!0},this.resume=function(){r=!1};var u=[];this.stop=function(t){n=!0;var e=this;s((function(){e.blob=new Blob(u,{type:"video/webm"}),t(e.blob)}))},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){u=[],r=!1,this.blob=null},this.blob=null}"undefined"!==typeof a&&(a.DiskStorage=V),"undefined"!==typeof a&&(a.GifRecorder=B),"undefined"===typeof a&&(t.exports=F,r=[],o=function(){return F}.apply(e,r),void 0===o||(t.exports=o)),"undefined"!==typeof a&&(a.MultiStreamRecorder=N),"undefined"!==typeof a&&(a.RecordRTCPromisesHandler=L),"undefined"!==typeof a&&(a.WebAssemblyRecorder=j)}).call(this,n("c8ba"),n("4362"))},ac1f:function(t,e,n){"use strict";var i=n("23e7"),r=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(t,e,n){"use strict";var i=n("825a");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},af03:function(t,e,n){var i=n("d039");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b627:function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"isIOS",(function(){return Wt})),n.d(i,"isMobilePlatform",(function(){return qt})),n.d(i,"scrollLock",(function(){return Ht})),n.d(i,"isFullscreen",(function(){return Yt})),n.d(i,"setFullScreenMode",(function(){return Qt}));var r={};n.r(r),n.d(r,"getSound",(function(){return Jt})),n.d(r,"syllableToNum",(function(){return te})),n.d(r,"getSyllableType",(function(){return ee})),n.d(r,"shuffleArray",(function(){return ne})),n.d(r,"debugLine",(function(){return ie})),n.d(r,"getConstantVowel",(function(){return re})),n.d(r,"getCombinationType",(function(){return oe})),n.d(r,"getResourceList",(function(){return ae})),n.d(r,"soundPlay",(function(){return se})),n.d(r,"getColorMap",(function(){return ue})),n.d(r,"getColorByPoint",(function(){return ce})),n.d(r,"getSymbol",(function(){return le}));var o={};n.r(o),n.d(o,"day1",(function(){return _n})),n.d(o,"day2",(function(){return wn}));var a={};n.r(a),n.d(a,"day1",(function(){return Pn})),n.d(a,"day2",(function(){return En}));var s={};n.r(s),n.d(s,"day3",(function(){return Qn})),n.d(s,"day6",(function(){return Zn}));var u={};n.r(u),n.d(u,"day16",(function(){return Kp})),n.d(u,"day43",(function(){return Jp}));var c={};n.r(c),n.d(c,"day1",(function(){return Mf})),n.d(c,"day2",(function(){return Af}));var l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"activityPlayer"}},[n("canvas",{ref:"stage",attrs:{id:"stage"}})])},h=[],d=(n("b0c0"),n("ac1f"),n("5319"),n("96cf"),n("1da1"));function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}function v(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}n("4ae1"),n("3410");function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}n("d3b7"),n("25f0");function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("ddb0");function w(t){return w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t,e){return!e||"object"!==w(e)&&"function"!==typeof e?b(t):e}function C(t){var e=_();return function(){var n,i=y(t);if(e){var r=y(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return x(this,n)}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function S(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}var k=n("2b0e");
/**
  * vue-class-component v7.2.6
  * (c) 2015-present Evan You
  * @license MIT
  */function T(t){return T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t){return A(t)||I(t)||P()}function A(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function I(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function P(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function E(){return"undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function O(t,e){D(t,e),Object.getOwnPropertyNames(e.prototype).forEach((function(n){D(t.prototype,e.prototype,n)})),Object.getOwnPropertyNames(e).forEach((function(n){D(t,e,n)}))}function D(t,e,n){var i=n?Reflect.getOwnMetadataKeys(e,n):Reflect.getOwnMetadataKeys(e);i.forEach((function(i){var r=n?Reflect.getOwnMetadata(i,e,n):Reflect.getOwnMetadata(i,e);n?Reflect.defineMetadata(i,r,t,n):Reflect.defineMetadata(i,r,t)}))}var V={__proto__:[]},B=V instanceof Array;function F(t){return function(e,n,i){var r="function"===typeof e?e:e.constructor;r.__decorators__||(r.__decorators__=[]),"number"!==typeof i&&(i=void 0),r.__decorators__.push((function(e){return t(e,n,i)}))}}function N(t){var e=T(t);return null==t||"object"!==e&&"function"!==e}function L(t,e){var n=e.prototype._init;e.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var i in t.$options.props)t.hasOwnProperty(i)||n.push(i);n.forEach((function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})}))};var i=new e;e.prototype._init=n;var r={};return Object.keys(i).forEach((function(t){void 0!==i[t]&&(r[t]=i[t])})),r}var j=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(t){if("constructor"!==t)if(j.indexOf(t)>-1)e[t]=n[t];else{var i=Object.getOwnPropertyDescriptor(n,t);void 0!==i.value?"function"===typeof i.value?(e.methods||(e.methods={}))[t]=i.value:(e.mixins||(e.mixins=[])).push({data:function(){return R({},t,i.value)}}):(i.get||i.set)&&((e.computed||(e.computed={}))[t]={get:i.get,set:i.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return L(this,t)}});var i=t.__decorators__;i&&(i.forEach((function(t){return t(e)})),delete t.__decorators__);var r=Object.getPrototypeOf(t.prototype),o=r instanceof k["a"]?r.constructor:k["a"],a=o.extend(e);return z(a,t,o),E()&&O(a,t),a}var X={prototype:!0,arguments:!0,callee:!0,caller:!0};function z(t,e,n){Object.getOwnPropertyNames(e).forEach((function(i){if(!X[i]){var r=Object.getOwnPropertyDescriptor(t,i);if(!r||r.configurable){var o=Object.getOwnPropertyDescriptor(e,i);if(!B){if("cid"===i)return;var a=Object.getOwnPropertyDescriptor(n,i);if(!N(o.value)&&a&&a.value===o.value)return}0,Object.defineProperty(t,i,o)}}}))}function G(t){return"function"===typeof t?U(t):function(e){return U(e,t)}}G.registerHooks=function(t){j.push.apply(j,M(t))};var W=G;var q="undefined"!==typeof Reflect&&"undefined"!==typeof Reflect.getMetadata;function H(t,e,n){if(q&&!Array.isArray(t)&&"function"!==typeof t&&"undefined"===typeof t.type){var i=Reflect.getMetadata("design:type",e,n);i!==Object&&(t.type=i)}}function Y(t){return void 0===t&&(t={}),function(e,n){H(t,e,n),F((function(e,n){(e.props||(e.props={}))[n]=t}))(e,n)}}var Q=n("644d"),Z=n("e3e9"),$=n("aa81"),K=n("c29d"),J=function(){function t(t,e){this._output=e,this._input=t}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach((function(t){t&&t.disconnect()})),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var n=null;t.forEach((function(t){null===n?e._input.connect(t.destination):n.connect(t.destination),n=t})),n.connect(this._output)}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}(),tt=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){this.destination=t,this.source=e||t},t.prototype.connect=function(t){this.source.connect(t)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}(),et=function(t,e){return(et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function nt(t,e){function n(){this.constructor=t}et(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var it,rt=function(){return(rt=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function ot(){return it}var at,st,ut,ct,lt=function(){function t(){}return t.setParamValue=function(t,e){if(t.setValueAtTime){var n=ot().context;t.setValueAtTime(e,n.audioContext.currentTime)}else t.value=e;return e},t}(),ht=0,dt=function(t){function e(e){var n=t.call(this)||this;return n.id=ht++,n._media=null,n._paused=!1,n._muted=!1,n._elapsed=0,n.init(e),n}return nt(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},e.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){if(this._source){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var n=t.volume*(t.muted?0:1),i=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);lt.setParamValue(this._gain.gain,r*i*n),lt.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed)}},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,n=this._paused||e.paused||t.paused;n!==this._pausedReal&&(this._pausedReal=n,n?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",n))},e.prototype.play=function(t){var e=t.start,n=t.end,i=t.speed,r=t.loop,o=t.volume,a=t.muted;this._paused=!1;var s=this._media.nodes.cloneBufferSource(),u=s.source,c=s.gain;this._source=u,this._gain=c,this._speed=i,this._volume=o,this._loop=!!r,this._muted=a,this.refresh();var l=this._source.buffer.duration;this._duration=l,this._end=n,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=n,this._source.loopStart=e,this._source.start(0,e)):n?this._source.start(0,e,n-e):this._source.start(0,e),this.emit("start"),this._update(!0),this._enabled=!0},e.prototype._toSec=function(t){return t>10&&(t/=1e3),t||0},Object.defineProperty(e.prototype,"_enabled",{set:function(t){Z["a"].shared.remove(this._updateListener,this),t&&Z["a"].shared.add(this._updateListener,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},e.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},e.prototype._now=function(){return this._media.context.audioContext.currentTime},e.prototype._updateListener=function(){this._update()},e.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),n=e-this._lastUpdate;if(n>0||t){var i=this._source.playbackRate.value;this._elapsed+=n*i,this._lastUpdate=e;var r=this._duration,o=void 0;if(this._source.loopStart){var a=this._source.loopEnd-this._source.loopStart;o=(this._source.loopStart+this._elapsed%a)/r}else o=this._elapsed%r/r;this._progress=o,this.emit("progress",this._progress,r)}}},e.prototype.init=function(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},e.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(0),this._source.disconnect(),this._source=null)},e.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.disconnect()),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},e}($["EventEmitter"]),pt=function(t){function e(e){var n=this,i=e.audioContext,r=i.createBufferSource(),o=i.createGain(),a=i.createAnalyser();return r.connect(a),a.connect(o),o.connect(e.destination),(n=t.call(this,a,o)||this).context=e,n.bufferSource=r,n.gain=o,n.analyser=a,n}return nt(e,t),Object.defineProperty(e.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(e.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,lt.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;var n=this.context.audioContext.createGain();return e.connect(n),n.connect(this.destination),{source:e,gain:n}},Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!0,configurable:!0}),e.BUFFER_SIZE=0,e}(J),ft=function(){function t(){}return t.prototype.init=function(t){this.parent=t,this._nodes=new pt(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},t.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source=null,this.source=null},t.prototype.create=function(){return new dt(this)},Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),t.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},t.prototype._loadUrl=function(t){var e=this,n=new XMLHttpRequest,i=this.parent.url;n.open("GET",i,!0),n.responseType="arraybuffer",n.onload=function(){e.source=n.response,e._decode(n.response,t)},n.send()},t.prototype._decode=function(t,e){var n=this;this.parent.context.decode(t,(function(t,i){if(t)e&&e(t);else{n.parent.isLoaded=!0,n.buffer=i;var r=n.parent.autoPlayStart();e&&e(null,n.parent,r)}}))},t}(),mt=function(t){function e(){var n=this,i=window,r=new e.AudioContext,o=r.createDynamicsCompressor(),a=r.createAnalyser();return a.connect(o),o.connect(r.destination),(n=t.call(this,a,o)||this)._ctx=r,n._offlineCtx=new e.OfflineAudioContext(1,2,i.OfflineAudioContext?r.sampleRate:44100),n._unlocked=!1,n.compressor=o,n.analyser=a,n.events=new $["EventEmitter"],n.volume=1,n.speed=1,n.muted=!1,n.paused=!1,"running"!==r.state&&(n._unlock(),n._unlock=n._unlock.bind(n),document.addEventListener("mousedown",n._unlock,!0),document.addEventListener("touchstart",n._unlock,!0),document.addEventListener("touchend",n._unlock,!0)),n}return nt(e,t),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(e,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this._ctx;void 0!==e.close&&e.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.events.emit("refresh")},e.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},e.prototype.decode=function(t,e){this._offlineCtx.decodeAudioData(t,(function(t){e(null,t)}),(function(t){e(new Error(t.message||"Unable to decode file"))}))},e}(J),gt={WebAudioMedia:ft,WebAudioInstance:dt,WebAudioNodes:pt,WebAudioContext:mt,WebAudioUtils:lt},vt={Filter:tt,EqualizerFilter:function(t){function e(n,i,r,o,a,s,u,c,l,h){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),void 0===c&&(c=0),void 0===l&&(l=0),void 0===h&&(h=0);var d=this;if(!ot().useLegacy){var p=[{f:e.F32,type:"lowshelf",gain:n},{f:e.F64,type:"peaking",gain:i},{f:e.F125,type:"peaking",gain:r},{f:e.F250,type:"peaking",gain:o},{f:e.F500,type:"peaking",gain:a},{f:e.F1K,type:"peaking",gain:s},{f:e.F2K,type:"peaking",gain:u},{f:e.F4K,type:"peaking",gain:c},{f:e.F8K,type:"peaking",gain:l},{f:e.F16K,type:"highshelf",gain:h}].map((function(t){var e=ot().context.audioContext.createBiquadFilter();return e.type=t.type,lt.setParamValue(e.Q,1),e.frequency.value=t.f,lt.setParamValue(e.gain,t.gain),e}));(d=t.call(this,p[0],p[p.length-1])||this).bands=p,d.bandsMap={};for(var f=0;f<d.bands.length;f++){var m=d.bands[f];f>0&&d.bands[f-1].connect(m),d.bandsMap[m.frequency.value]=m}return d}d=t.call(this,null)||this}return nt(e,t),e.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency "+t);lt.setParamValue(this.bandsMap[t].gain,e)},e.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);return this.bandsMap[t].gain.value},Object.defineProperty(e.prototype,"f32",{get:function(){return this.getGain(e.F32)},set:function(t){this.setGain(e.F32,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this.getGain(e.F64)},set:function(t){this.setGain(e.F64,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f125",{get:function(){return this.getGain(e.F125)},set:function(t){this.setGain(e.F125,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f250",{get:function(){return this.getGain(e.F250)},set:function(t){this.setGain(e.F250,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f500",{get:function(){return this.getGain(e.F500)},set:function(t){this.setGain(e.F500,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f1k",{get:function(){return this.getGain(e.F1K)},set:function(t){this.setGain(e.F1K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f2k",{get:function(){return this.getGain(e.F2K)},set:function(t){this.setGain(e.F2K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f4k",{get:function(){return this.getGain(e.F4K)},set:function(t){this.setGain(e.F4K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f8k",{get:function(){return this.getGain(e.F8K)},set:function(t){this.setGain(e.F8K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f16k",{get:function(){return this.getGain(e.F16K)},set:function(t){this.setGain(e.F16K,t)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.bands.forEach((function(t){lt.setParamValue(t.gain,0)}))},e.prototype.destroy=function(){this.bands.forEach((function(t){t.disconnect()})),this.bands=null,this.bandsMap=null},e.F32=32,e.F64=64,e.F125=125,e.F250=250,e.F500=500,e.F1K=1e3,e.F2K=2e3,e.F4K=4e3,e.F8K=8e3,e.F16K=16e3,e}(tt),DistortionFilter:function(t){function e(e){void 0===e&&(e=0);var n=this;if(!ot().useLegacy){var i=ot().context.audioContext.createWaveShaper();return(n=t.call(this,i)||this)._distortion=i,n.amount=e,n}n=t.call(this,null)||this}return nt(e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(t){t*=1e3,this._amount=t;for(var e,n=new Float32Array(44100),i=Math.PI/180,r=0;r<44100;++r)e=2*r/44100-1,n[r]=(3+t)*e*20*i/(Math.PI+t*Math.abs(e));this._distortion.curve=n,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,t.prototype.destroy.call(this)},e}(tt),StereoFilter:function(t){function e(e){void 0===e&&(e=0);var n=this;if(!ot().useLegacy){var i,r,o,a=ot().context.audioContext;return a.createStereoPanner?o=i=a.createStereoPanner():((r=a.createPanner()).panningModel="equalpower",o=r),(n=t.call(this,o)||this)._stereo=i,n._panner=r,n.pan=e,n}n=t.call(this,null)||this}return nt(e,t),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?lt.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._stereo=null,this._panner=null},e}(tt),ReverbFilter:function(t){function e(e,n,i){void 0===e&&(e=3),void 0===n&&(n=2),void 0===i&&(i=!1);var r=this;if(!ot().useLegacy)return(r=t.call(this,null)||this)._seconds=r._clamp(e,1,50),r._decay=r._clamp(n,0,100),r._reverse=i,r._rebuild(),r;r=t.call(this,null)||this}return nt(e,t),e.prototype._clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var t,e=ot().context.audioContext,n=e.sampleRate,i=n*this._seconds,r=e.createBuffer(2,i,n),o=r.getChannelData(0),a=r.getChannelData(1),s=0;s<i;s++)t=this._reverse?i-s:s,o[s]=(2*Math.random()-1)*Math.pow(1-t/i,this._decay),a[s]=(2*Math.random()-1)*Math.pow(1-t/i,this._decay);var u=ot().context.audioContext.createConvolver();u.buffer=r,this.init(u)},e}(tt),MonoFilter:function(t){function e(){var e=this;if(!ot().useLegacy){var n=ot().context.audioContext,i=n.createChannelSplitter(),r=n.createChannelMerger();return r.connect(i),(e=t.call(this,r,i)||this)._merger=r,e}e=t.call(this,null)||this}return nt(e,t),e.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,t.prototype.destroy.call(this)},e}(tt),TelephoneFilter:function(t){function e(){if(!ot().useLegacy){var e=ot().context.audioContext,n=e.createBiquadFilter(),i=e.createBiquadFilter(),r=e.createBiquadFilter(),o=e.createBiquadFilter();return n.type="lowpass",lt.setParamValue(n.frequency,2e3),i.type="lowpass",lt.setParamValue(i.frequency,2e3),r.type="highpass",lt.setParamValue(r.frequency,500),o.type="highpass",lt.setParamValue(o.frequency,500),n.connect(i),i.connect(r),r.connect(o),t.call(this,n,o)||this}t.call(this,null)}return nt(e,t),e}(tt)},yt=0,_t=function(t){function e(e){var n=t.call(this)||this;return n.id=yt++,n.init(e),n}return nt(e,t),e.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},Object.defineProperty(e.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype._onPlay=function(){this._playing=!0},e.prototype._onPause=function(){this._playing=!1},e.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},e.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},e.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var n=t.volume*(t.muted?0:1),i=e.volume*(e.muted?0:1),r=this._volume*(this._muted?0:1);this._source.volume=r*n*i,this._source.playbackRate=this._speed*t.speed*e.speed},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,n=this._paused||e.paused||t.paused;n!==this._pausedReal&&(this._pausedReal=n,n?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",n))},e.prototype.play=function(t){var n=this,i=t.start,r=t.end,o=t.speed,a=t.loop,s=t.volume,u=t.muted;this._speed=o,this._volume=s,this._loop=!!a,this._muted=u,this.refresh(),this.loop&&null!==r&&(this.loop=!1),this._start=i,this._end=r||this._duration,this._start=Math.max(0,this._start-e.PADDING),this._end=Math.min(this._end+e.PADDING,this._duration),this._source.onloadedmetadata=function(){n._source&&(n._source.currentTime=i,n._source.onloadedmetadata=null,n.emit("progress",i,n._duration),Z["a"].shared.add(n._onUpdate,n))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},e.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},e.prototype._onComplete=function(){Z["a"].shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},e.prototype.destroy=function(){Z["a"].shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},e.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},e.PADDING=.1,e}($["EventEmitter"]),wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nt(e,t),e.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},e.prototype.create=function(){return new _t(this)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._source.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),e.prototype.load=function(t){var e=this._source,n=this.parent;if(4!==e.readyState){if(!n.url)return t(new Error("sound.url or sound.source must be set"));e.src=n.url;var i=function(){e.removeEventListener("canplaythrough",r),e.removeEventListener("load",r),e.removeEventListener("abort",o),e.removeEventListener("error",a)},r=function(){i(),n.isLoaded=!0;var e=n.autoPlayStart();t&&t(null,n,e)},o=function(){i(),t&&t(new Error("Sound loading has been aborted"))},a=function(){i();var n="Failed to load audio element (code: "+e.error.code+")";t&&t(new Error(n))};e.addEventListener("canplaythrough",r,!1),e.addEventListener("load",r,!1),e.addEventListener("abort",o,!1),e.addEventListener("error",a,!1),e.load()}else{n.isLoaded=!0;var s=n.autoPlayStart();t&&setTimeout((function(){t(null,n,s)}),0)}},e}($["EventEmitter"]),bt=function(t){function e(){var e=t.call(this)||this;return e.speed=1,e.volume=1,e.muted=!1,e.paused=!1,e}return nt(e,t),e.prototype.refresh=function(){this.emit("refresh")},e.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioContext",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},e.prototype.destroy=function(){this.removeAllListeners()},e}($["EventEmitter"]),xt={HTMLAudioMedia:wt,HTMLAudioInstance:_t,HTMLAudioContext:bt},Ct=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid"],St=(at={m4a:"mp4",oga:"ogg"},st=document.createElement("audio"),ut={},ct=/^no$/,Ct.forEach((function(t){var e=at[t]||t,n=st.canPlayType("audio/"+t).replace(ct,""),i=st.canPlayType("audio/"+e).replace(ct,"");ut[t]=!!n||!!i})),Object.freeze(ut)),kt=/\.(\{([^\}]+)\})(\?.*)?$/;function Tt(t){var e=kt,n="string"==typeof t?t:t.url;if(e.test(n)){for(var i=e.exec(n),r=i[2].split(","),o=r[r.length-1],a=0,s=r.length;a<s;a++){var u=r[a];if(St[u]){o=u;break}}var c=n.replace(i[1],o);return"string"!=typeof t&&(t.extension=o,t.url=c),c}return n}var Rt=function(){function t(){}return t.add=function(){t.legacy=ot().useLegacy},Object.defineProperty(t,"legacy",{set:function(t){var e=Ct;t?e.forEach((function(t){Q["c"].setExtensionXhrType(t,Q["c"].XHR_RESPONSE_TYPE.DEFAULT),Q["c"].setExtensionLoadType(t,Q["c"].LOAD_TYPE.AUDIO)})):e.forEach((function(t){Q["c"].setExtensionXhrType(t,Q["c"].XHR_RESPONSE_TYPE.BUFFER),Q["c"].setExtensionLoadType(t,Q["c"].LOAD_TYPE.XHR)}))},enumerable:!0,configurable:!0}),t.pre=function(t,e){Tt(t),e()},t.use=function(t,e){t.data&&Ct.indexOf(t.extension)>-1?t.sound=ot().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},t}(),Mt=function(){function t(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}return t.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},t.prototype.destroy=function(){this.parent=null},t}(),At=function(){function t(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var n=e.complete;this._autoPlayOptions=n?{complete:n}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}return t.from=function(e){var n={};return"string"==typeof e?n.url=e:e instanceof ArrayBuffer||e instanceof HTMLAudioElement?n.source=e:n=e,(n=rt({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},n)).url&&(n.url=Tt(n.url)),Object.freeze(n),new t(ot().useLegacy?new wt:new ft,n)},Object.defineProperty(t.prototype,"context",{get:function(){return ot().context},enumerable:!0,configurable:!0}),t.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},t.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!0,configurable:!0}),t.prototype.addSprites=function(t,e){if("object"==typeof t){var n={};for(var i in t)n[i]=this.addSprites(i,t[i]);return n}if("string"==typeof t){var r=new Mt(this,e);return this._sprites[t]=r,r}},t.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},t.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var n in this._sprites)this.removeSprites(n);return this},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!0,configurable:!0}),t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this},t.prototype.play=function(t,e){var n,i=this;if("string"==typeof t?n={sprite:o=t,loop:this.loop,complete:e}:"function"==typeof t?(n={}).complete=t:n=t,(n=rt({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},n||{})).sprite){var r=n.sprite,o=this._sprites[r];n.start=o.start,n.end=o.end,n.speed=o.speed||1,n.loop=o.loop||n.loop,delete n.sprite}if(n.offset&&(n.start=n.offset),!this.isLoaded)return new Promise((function(t,e){i.autoPlay=!0,i._autoPlayOptions=n,i._preload((function(i,r,o){i?e(i):(n.loaded&&n.loaded(i,r,o),t(o))}))}));this.singleInstance&&this._removeInstances();var a=this._createInstance();return this._instances.push(a),this.isPlaying=!0,a.once("end",(function(){n.complete&&n.complete(i),i._onComplete(a)})),a.once("stop",(function(){i._onComplete(a)})),a.play(n),a},t.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},t.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),t.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),t.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},t.prototype._removeInstances=function(){for(var t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0},t.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)},t.prototype._createInstance=function(){if(t._pool.length>0){var e=t._pool.pop();return e.init(this.media),e}return this.media.create()},t.prototype._poolInstance=function(e){e.destroy(),t._pool.indexOf(e)<0&&t._pool.push(e)},t._pool=[],t}(),It=function(){function t(){this.init()}return t.prototype.init=function(){return this.supported&&(this._webAudioContext=new mt),this._htmlAudioContext=new bt,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==mt.AudioContext},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if("object"==typeof t){var n={};for(var i in t){var r=this._getOptions(t[i],e);n[i]=this.add(i,r)}return n}if("string"==typeof t){if(e instanceof At)return this._sounds[t]=e,e;r=this._getOptions(e);var o=At.from(r);return this._sounds[t]=o,o}},t.prototype._getOptions=function(t,e){var n;return n="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t,rt({},n,e||{})},Object.defineProperty(t.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){Rt.legacy=t,this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!0,configurable:!0}),t.prototype.togglePauseAll=function(){return this._context.togglePause()},t.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},t.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},t.prototype.toggleMuteAll=function(){return this._context.toggleMute()},t.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},t.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},t.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},t.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},t.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},t.prototype.play=function(t,e){return this.find(t).play(e)},t.prototype.stop=function(t){return this.find(t).stop()},t.prototype.pause=function(t){return this.find(t).pause()},t.prototype.resume=function(t){return this.find(t).resume()},t.prototype.volume=function(t,e){var n=this.find(t);return void 0!==e&&(n.volume=e),n.volume},t.prototype.speed=function(t,e){var n=this.find(t);return void 0!==e&&(n.speed=e),n.speed},t.prototype.duration=function(t){return this.find(t).duration},t.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},t}(),Pt=0,Et={get PLAY_ID(){return Pt},playOnce:function(t,e){var n="alias"+Pt++;return ot().add(n,{url:t,preload:!0,autoPlay:!0,loaded:function(t){t&&(ot().remove(n),e&&e(t))},complete:function(){ot().remove(n),e&&e(null)}}),n},render:function(t,e){var n=document.createElement("canvas");e=rt({width:512,height:128,fill:"black"},e||{}),n.width=e.width,n.height=e.height;var i=K["e"].from(n);if(!(t.media instanceof ft))return i;var r=t.media,o=n.getContext("2d");o.fillStyle=e.fill;for(var a=r.buffer.getChannelData(0),s=Math.ceil(a.length/e.width),u=e.height/2,c=0;c<e.width;c++){for(var l=1,h=-1,d=0;d<s;d++){var p=a[c*s+d];p<l&&(l=p),p>h&&(h=p)}o.fillRect(c,(1+l)*u,1,Math.max(1,(h-l)*u))}return i},resolveUrl:Tt,sineTone:function(t,e){void 0===t&&(t=200),void 0===e&&(e=1);var n=At.from({singleInstance:!0});if(!(n.media instanceof ft))return n;for(var i=n.media,r=n.context.audioContext.createBuffer(1,48e3*e,48e3),o=r.getChannelData(0),a=0;a<o.length;a++){var s=t*(a/r.sampleRate)*Math.PI;o[a]=2*Math.sin(s)}return i.buffer=r,n.isLoaded=!0,n},extensions:Ct,supported:St},Ot=function(t){return it=t,t}(new It);Q["b"].registerPlugin(Rt),Object.defineProperties(Ot,{Filterable:{get:function(){return J}},filters:{get:function(){return vt}},htmlaudio:{get:function(){return xt}},Sound:{get:function(){return At}},SoundLibrary:{get:function(){return It}},SoundSprite:{get:function(){return Mt}},utils:{get:function(){return Et}},webaudio:{get:function(){return gt}},sound:{get:function(){return Ot}}});var Dt=Ot,Vt=(n("4160"),n("159b"),n("b85c")),Bt=n("22a2"),Ft={restAPI:"https://www.imestudy.co.kr:443/rsc/",restAPIProd:"./rsc/",w:1280,h:720,fontAry:["BareunBatangOTFM","TmoneyRoundWindExtraBold","NanumBarunGothic"],studyDay:1,data:{1:{symbol:["ㅏ"]},2:{symbol:["ㅑ"]},3:{symbol:["ㅏ","ㅑ"]},4:{symbol:["ㅓ"]},5:{symbol:["ㅕ"]},6:{symbol:["ㅓ","ㅕ"]},7:{symbol:["ㅗ"]},8:{symbol:["ㅛ"]},9:{symbol:["ㅗ","ㅛ"]},10:{symbol:["ㅜ"]},11:{symbol:["ㅠ"]},12:{symbol:["ㅜ","ㅠ"]},13:{symbol:["ㅡ"]},14:{symbol:["ㅣ"]},15:{symbol:["ㅡ","ㅣ"]},16:{symbol:["ㅏ","ㅑ","ㅓ","ㅕ","ㅗ","ㅛ","ㅜ","ㅠ","ㅡ","ㅣ"]},17:{symbol:["ㄱ"]},18:{symbol:["ㅋ"]},19:{symbol:["ㄲ"]},20:{symbol:["ㄱ","ㅋ","ㄲ"]},21:{symbol:["ㄴ"]},22:{symbol:["ㄷ"]},23:{symbol:["ㄸ"]},24:{symbol:["ㄴ","ㄷ","ㄸ"]},25:{symbol:["ㅌ"]},26:{symbol:["ㄹ"]},27:{symbol:["ㅁ"]},28:{symbol:["ㅌ","ㄹ","ㅁ"]},29:{symbol:["ㅂ"]},30:{symbol:["ㅃ"]},31:{symbol:["ㅍ"]},32:{symbol:["ㅂ","ㅃ","ㅍ"]},33:{symbol:["ㅅ"]},34:{symbol:["ㅆ"]},35:{symbol:["ㅅ","ㅆ"]},36:{symbol:["ㅈ"]},37:{symbol:["ㅉ"]},38:{symbol:["ㅈ","ㅉ"]},39:{symbol:["ㅊ"]},40:{symbol:["ㅇ"]},41:{symbol:["ㅎ"]},42:{symbol:["ㅊ","ㅇ","ㅎ"]},43:{symbol:["ㄱ","ㅋ","ㄲ","ㄴ","ㄷ","ㄸ","ㅌ","ㄹ","ㅁ","ㅂ","ㅃ","ㅍ","ㅅ","ㅆ","ㅈ","ㅉ","ㅊ","ㅇ","ㅎ"]},44:{symbol:["ㅐ"]},45:{symbol:["ㅒ"]},46:{symbol:["ㅐ","ㅒ"]},47:{symbol:["ㅔ"]},48:{symbol:["ㅖ"]},49:{symbol:["ㅔ","ㅖ"]},50:{symbol:["ㅢ"]},51:{symbol:["ㅚ"]},52:{symbol:["ㅢ","ㅚ"]},53:{symbol:["ㅘ"]},54:{symbol:["ㅙ"]},55:{symbol:["ㅘ","ㅙ"]},56:{symbol:["ㅟ"]},57:{symbol:["ㅝ"]},58:{symbol:["ㅞ"]},59:{symbol:["ㅝ","ㅞ"]},60:{symbol:["ㅐ","ㅒ","ㅔ","ㅖ","ㅢ","ㅚ","ㅘ","ㅙ","ㅝ","ㅞ"]}},quizWord:"아앉",partnerNtotal:["box_shadow.png","side_type1_dim1.png","side_type1_dim2.png","side_type1_pink1.png","side_type1_pink2.png","side_type2_dim1.png","side_type2_dim2.png","side_type2_pink1.png","side_type2_pink2.png","side_type3_dim1.png","side_type3_dim2.png","side_type3_pink1.png","side_type3_pink2.png","side_type4_dim1.png","side_type4_dim2.png","side_type4_dim3.png","side_type4_pink1.png","side_type4_pink2.png","side_type4_pink3.png","side_type5_dim1.png","side_type5_dim2.png","side_type5_dim3.png","side_type5_pink1.png","side_type5_pink2.png","side_type5_pink3.png","side_type6_dim1.png","side_type6_dim2.png","side_type6_dim3.png","side_type6_pink1.png","side_type6_pink2.png","side_type6_pink3.png","type1_1deep.png","type1_2deep.png","type1_1default.png","type1_2default.png","type1_1pink.png","type1_2pink.png","type1_focus1.png","type1_focus2.png","type2_1deep.png","type2_2deep.png","type2_1default.png","type2_2default.png","type2_1pink.png","type2_2pink.png","type2_focus1.png","type2_focus2.png","type3_1deep.png","type3_2deep.png","type3_1default.png","type3_2default.png","type3_1pink.png","type3_2pink.png","type3_focus1.png","type3_focus2.png","type4_1deep.png","type4_2deep.png","type4_3deep.png","type4_1default.png","type4_2default.png","type4_3default.png","type4_1pink.png","type4_2pink.png","type4_3pink.png","type4_focus1.png","type4_focus2.png","type4_focus3.png","type5_1deep.png","type5_2deep.png","type5_3deep.png","type5_1default.png","type5_2default.png","type5_3default.png","type5_1pink.png","type5_2pink.png","type5_3pink.png","type5_focus1.png","type5_focus2.png","type5_focus3.png","type6_1deep.png","type6_2deep.png","type6_3deep.png","type6_1default.png","type6_2default.png","type6_3default.png","type6_1pink.png","type6_2pink.png","type6_3pink.png","type6_focus1.png","type6_focus2.png","type6_focus3.png"],nodakwords:{3:["아","아야","야"]},nodakQuiz:{3:["word_1.png","word_2.png","word_3.png"]},nodakData:[{quiz:"아",texture:"word_1"},{quiz:"아야",texture:"word_2"},{quiz:"야",texture:"word_3"}],nodakPos:{card2:[{x:712,y:354},{x:1024,y:354}],card3:[{x:570,y:354},{x:846,y:354},{x:1120,y:354}],card4:[{x:712,y:222},{x:1024,y:222},{x:712,y:484},{x:1024,y:484}],card5:[{x:712,y:222},{x:1024,y:222},{x:572,y:484},{x:846,y:484},{x:1120,y:484}],card6:[{x:570,y:222},{x:846,y:222},{x:1120,y:222},{x:570,y:484},{x:846,y:484},{x:2240,y:484}],card8:[{x:570,y:146},{x:846,y:146},{x:570,y:362},{x:846,y:362},{x:1120,y:362},{x:570,y:578},{x:846,y:578},{x:1120,y:578}]},quizWrong:["ㅑ","ㅓ"],partnerWrong:["ㅁ","ㅑ","ㅁ","ㅑ","ㄶ"],position:{type1:[{x:60,y:0},{x:-40,y:0}],type2:[{x:0,y:62},{x:0,y:-62}],type3:[{x:60,y:-62},{x:0,y:0}],type4:[{x:60,y:100},{x:-40,y:100},{x:0,y:-100}],type5:[{x:0,y:84},{x:0,y:2},{x:0,y:-86}],type6:[{x:60,y:86},{x:0,y:42},{x:0,y:-86}]},btnColor:[15074063,16148225,16501523,1758488,287729,7341017],btnName:["btn_red","btn_orange","btn_yellow","btn_green","btn_blue","btn_violet"]},Nt=n("cffa"),Lt=function(t){v(n,t);var e=C(n);function n(t,i){var r;return p(this,n),r=e.call(this),r.beginFill(0,.8),r.drawRect(0,0,t,i),r.endFill(),r.interactive=!0,r}return n}(Bt["Graphics"]);n("99af"),n("4fad");function jt(t){if(Array.isArray(t))return t}function Ut(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)if(n.push(a.value),e&&n.length===e)break}catch(u){r=!0,o=u}finally{try{i||null==s["return"]||s["return"]()}finally{if(r)throw o}}return n}}var Xt=n("06c5");function zt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gt(t,e){return jt(t)||Ut(t,e)||Object(Xt["a"])(t,e)||zt()}n("45fc"),n("466d");function Wt(){var t=[/Macintosh/i,/iPhone/i,/iPad/i,/iPod/i];return t.some((function(t){return navigator.userAgent.match(t)}))}function qt(){var t=[/Android/i,/webOS/i,/Macintosh/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];return t.some((function(t){return navigator.userAgent.match(t)}))}function Ht(t,e){qt()&&screen.orientation.lock&&screen.orientation.lock(t).then((function(){e&&e()})).catch((function(t){console.log(t)}))}function Yt(){return!1}function Qt(t,e){if(qt())if(1==t){var n={navigationUI:"hide"};if(1==Yt())return;document.documentElement.requestFullscreen?document.documentElement.requestFullscreen(n).then((function(){})):document.documentElement["webkitRequestFullscreen"]?document.documentElement["webkitRequestFullscreen"](n).then(e):document.documentElement["mozRequestFullScreen"]?document.documentElement["mozRequestFullScreen"](n).then(e):document.documentElement["msRequestFullscreen"]&&document.documentElement["msRequestFullscreen"](n).then(e)}else{if(!Yt())return;var i=document["exitFullscreen"]||document["mozCancelFullScreen"]||document["webkitExitFullscreen"]||document["msExitFullscreen"];i.call(document).then((function(){e&&e()}))}else console.warn(" This Device is not mobile")}n("c975"),n("18a5");var Zt=n("a5cf"),$t=n("9ce6"),Kt=Zt["w"].registerPlugin($t["b"])||Zt["w"];Kt.core.Tween;function Jt(t){for(var e=["아","아야","야","어","여아","오","요요","우","우유","여우","여유","으","이유","아이","고기","코","꼬끼오","구","쿠키","누나","두유","띠","노크","도끼","머리띠","토끼","라디오","무","타이어","라마","나무","비버","아빠","파","비","뼈","포도","소","씨","사다리","자","가짜","사자","차","아저씨","혀","초","오리","하마","새","얘기","해","얘들아","체조","시계","제비","예배","의자","뇌","의사","교회","사과","돼지","화가","왜가리","귀","샤워","스웨터","쥐","타워","웨이터","악어","환자","돋보기","약국","문","숟가락","활","뱀","입","왕","돌","곰","밥","공","숲","부엌","깎다","깊다","들녘","섞다","짓다","갔다","찾다","빗다","샀다","짖다","쫓다","뱉다","쌓다","빛나다","같다","놓다","읽다","끊다","밝다","많다","짧다","옳다","넓다","잃다","앉다","없다","얹다","값","삶다","핥다","굶다","훑다","읊다","외곬","몫"],n=0,i=e;n<i.length;n++){var r=i[n];if(t==r){var o=e.indexOf(r)+1;return o}}}function te(t){for(var e="",n=["ㄱ","ㅋ","ㄲ","ㄴ","ㄷ","ㄸ","ㅌ","ㄹ","ㅁ","ㅂ","ㅃ","ㅍ","ㅅ","ㅆ","ㅈ","ㅉ","ㅊ","ㅇ","ㅎ","ㅗ","ㅛ","ㅜ","ㅠ","ㅡ","ㅏ","ㅑ","ㅓ","ㅕ","ㅣ","ㅔ","ㅐ","ㅒ","ㅖ","ㅚ","ㅙ","ㅝ","ㅞ","ㅢ","ㅘ","ㅟ","ㄺ","ㄶ","ㄼ","ㅀ","ㄵ","ㅄ","ㄻ","ㄾ","ㄿ","ㄽ","ㄳ"],i=0,r=n;i<r.length;i++){var o=r[i];if(o.toString()==t){e=(n.indexOf(o)+1).toString();break}}return e}function ee(t){for(var e="",n=["ㄱ","ㅋ","ㄲ","ㄴ","ㄷ","ㄸ","ㅌ","ㄹ","ㅁ","ㅂ","ㅃ","ㅍ","ㅅ","ㅆ","ㅈ","ㅉ","ㅊ","ㅇ","ㅎ"],i=["ㅗ","ㅛ","ㅜ","ㅠ","ㅡ","ㅏ","ㅑ","ㅓ","ㅕ","ㅣ","ㅔ","ㅐ","ㅒ","ㅖ","ㅚ","ㅙ","ㅝ","ㅞ","ㅢ","ㅘ","ㅟ"],r=["ㄺ","ㄶ","ㄼ","ㅀ","ㄵ","ㅄ","ㄻ","ㄾ","ㄿ","ㄽ","ㄳ"],o=0,a=n;o<a.length;o++){var s=a[o];if(t==s){e="1cho_";break}}for(var u=0,c=i;u<c.length;u++){var l=c[u];if(t==l){e="2jung_";break}}for(var h=0,d=r;h<d.length;h++){var p=d[h];if(t==p){e="3jong_";break}}return e}function ne(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=[t[n],t[e]];t[e]=i[0],t[n]=i[1]}return t}function ie(t,e){var n=new PIXI.Graphics;n.lineStyle(2,16777215,1),n.drawRect(0,0,t.width,t.height),n.endFill(),t.addChild(n),n.tint=e||16711680}function re(t){var e=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],n=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],i=["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],r=44032,o=t.charCodeAt(0);o-=r;var a=parseInt("".concat(o/588)),s=parseInt("".concat((o-588*a)/28)),u=parseInt("".concat(o%28));return 0==u?[e[a],n[s]]:[e[a],n[s],i[u]]}function oe(t){if(t.length>1)return 0;var e=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],n=["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],i=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅣ"],r=["ㅡ","ㅜ","ㅠ","ㅗ","ㅛ"],o=["ㅘ","ㅙ","ㅚ","ㅝ","ㅞ","ㅟ","ㅢ"],a=44032,s=t.charCodeAt(0);s-=a;for(var u=parseInt("".concat(s/588)),c=parseInt("".concat((s-588*u)/28)),l=parseInt("".concat(s%28)),h=0,d=[i,r,o],p=0;p<d.length;p++)for(var f=0;f<d[p].length;f++)e[c]===d[p][f]&&(h=p+1);return""!==n[l]&&(h+=3),h}function ae(t){for(var e=[],n=[],i=0;i<t.length;i++)n[i]=re(t[i]);e=[].concat(n);for(var r=0,o=0;o<e.length;o++)for(var a=0;a<e[o].length;a++)r+=1;console.log(r);for(var s={},u=0;u<r;u++)s[u]={index:0,syllableIndex:0,type:0};for(var c=0,l=0;l<e.length;l++)s[c].index=c,s[c].syllableIndex=l,s[c].type=oe(e[l]),console.log(e[l]),c+=1,console.log(c);return s}function se(t,e){var n="";n=e?"".concat(Ft.restAPI,"common/sounds/"):"".concat(Ft.restAPI,"viewer/").concat(ye.Handle.getSceneName().toLowerCase(),"/sounds/");var i=document.createElement("audio");i.src="".concat(n).concat(t,".mp3"),i.play(),window["soundManager"]=i,i.onloadedmetadata=function(){Kt.delayedCall(i.duration,(function(){window["soundManager"]=null})),i=null}}function ue(t){if(!t.resource)return!1;var e=t.resource.source,n=null;if(!e)return!1;var i=null;if(e.getContext)n=e,i=n.getContext("2d");else{if(!(e instanceof Image))return!1;n=document.createElement("canvas"),n.width=e.width,n.height=e.height,i=n.getContext("2d"),i.drawImage(e,0,0)}var r=n.width,o=n.height;return t.colormap=i.getImageData(0,0,r,o),!0}function ce(t,e){var n=new PIXI.Point;t.worldTransform.applyInverse(e,n);var i=t.texture.orig.width,r=t.texture.orig.height,o=-i*t.anchor.x,a=0,s=!1;if(n.x>=o&&n.x<o+i&&(a=-r*t.anchor.y,n.y>=a&&n.y<a+r&&(s=!0)),!s)return{r:0,g:0,b:0,a:0};var u=t.texture,c=t.texture.baseTexture;if(!c.colormap&&!ue(c))return{r:0,g:0,b:0,a:0};var l=c.colormap,h=l.data,d=c.resolution,p=Math.round((n.x-o+u.frame.x)*d),f=Math.round((n.y-a+u.frame.y)*d),m=p+f*l.width;return{r:h[4*m],g:h[4*m+1],b:h[4*m+2],a:h[4*m+3]}}function le(){var t=Ft.data,e=Ft.studyDay;return t["".concat(e)]["symbol"]}var he={Config:Ft,Platform:i,Game:r},de=function(){function t(){p(this,t),this.mURLRoot=he.Config.restAPI,this.mCommonResource={},this.mViewerResource={},this.mProductResource={}}return m(t,[{key:"getCommonResource",value:function(t){return this.mCommonResource["".concat(t)]}},{key:"getViewerResource",value:function(t){return this.mViewerResource["".concat(ye.Handle.currentScene.gamename.toLowerCase(),":").concat(t)]}},{key:"getProductResource",value:function(t){return this.mProductResource["".concat(ye.Handle.currentScene.gamename.toLowerCase(),":day").concat(Ft.studyDay,":").concat(t)]}},{key:"loadCommonResource",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){PIXI.Loader.shared.destroy(),PIXI.Loader.shared.reset();for(var i=0,r=Object.entries(e);i<r.length;i++){var o,a=Gt(r[i],2),s=a[0],u=a[1],c=Object(Vt["a"])(u);try{for(c.s();!(o=c.n()).done;){var l=o.value;void 0===n.mCommonResource["".concat(l)]&&(PIXI.Loader.shared.add("".concat(l),"".concat(n.mURLRoot,"common/").concat(s.toLowerCase(),"/").concat(l)),PIXI.Texture.removeFromCache("".concat(l)),PIXI.BaseTexture.removeFromCache("".concat(n.mURLRoot,"common/").concat(s.toLowerCase(),"/").concat(l)))}}catch(h){c.e(h)}finally{c.f()}}PIXI.Loader.shared.load((function(e,i){for(var r=0,o=Object.entries(i);r<o.length;r++){var a=Gt(o[r],2),s=a[0],u=a[1];void 0==n.mCommonResource[s]&&(n.mCommonResource[s]=u)}console.log("공용리소스 로드완료"),t()}))})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadViewerResource",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){PIXI.Loader.shared.destroy(),PIXI.Loader.shared.reset();for(var i=0,r=Object.entries(e);i<r.length;i++){var o,a=Gt(r[i],2),s=a[0],u=a[1],c=Object(Vt["a"])(u);try{for(c.s();!(o=c.n()).done;){var l=o.value;void 0===n.mViewerResource["".concat(ye.Handle.currentScene.gamename.toLowerCase(),":").concat(l)]&&(PIXI.Loader.shared.add("".concat(ye.Handle.currentScene.gamename.toLowerCase(),":").concat(l),"".concat(n.mURLRoot,"viewer/").concat(ye.Handle.currentScene.gamename.toLowerCase(),"/").concat(s.toLowerCase(),"/").concat(l)),PIXI.Texture.removeFromCache("".concat(ye.Handle.currentScene.gamename.toLowerCase(),":").concat(l)),PIXI.BaseTexture.removeFromCache("".concat(n.mURLRoot,"viewer/").concat(ye.Handle.currentScene.gamename.toLowerCase(),"/").concat(s.toLowerCase(),"/").concat(l)))}}catch(h){c.e(h)}finally{c.f()}}PIXI.Loader.shared.load((function(e,i){for(var r=0,o=Object.entries(i);r<o.length;r++){var a=Gt(o[r],2),s=a[0],u=a[1];void 0===n.mViewerResource[s]&&(n.mViewerResource[s]=u)}console.log("뷰어리소스 로드완료"),t()}))})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadProductResource",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){PIXI.Loader.shared.destroy(),PIXI.Loader.shared.reset();for(var i=0,r=Object.entries(e);i<r.length;i++){var o,a=Gt(r[i],2),s=a[0],u=a[1],c=Object(Vt["a"])(u);try{for(c.s();!(o=c.n()).done;){var l=o.value;void 0==n.mProductResource["".concat(ye.Handle.currentScene.gamename.toLowerCase(),":day").concat(Ft.studyDay,":").concat(l)]&&(PIXI.Loader.shared.add("".concat(ye.Handle.currentScene.gamename.toLowerCase(),":day").concat(Ft.studyDay,":").concat(l),"".concat(n.mURLRoot,"product/").concat(ye.Handle.currentScene.gamename.toLowerCase(),"/day").concat(Ft.studyDay,"/").concat(s.toLowerCase(),"/").concat(l)),PIXI.Texture.removeFromCache("".concat(ye.Handle.currentScene.gamename.toLowerCase(),":day").concat(Ft.studyDay,":").concat(l)),PIXI.BaseTexture.removeFromCache("".concat(n.mURLRoot,"product/").concat(ye.Handle.currentScene.gamename.toLowerCase(),"/day").concat(Ft.studyDay,"/").concat(s.toLowerCase(),"/").concat(l)))}}catch(h){c.e(h)}finally{c.f()}}PIXI.Loader.shared.load((function(e,i){for(var r=0,o=Object.entries(i);r<o.length;r++){var a=Gt(o[r],2),s=a[0],u=a[1];void 0==n.mProductResource[s]&&(n.mProductResource[s]=u)}console.log("프로덕트 리소스 로드완료"),t()}))})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"urlRoot",get:function(){return this.mURLRoot}}],[{key:"Handle",get:function(){return void 0===t._handle&&(t._handle=new t),t._handle}}]),t}(),pe=function(t){v(n,t);var e=C(n);function n(){var t;return p(this,n),t=e.call(this),t.mText=new Bt["Text"]("",{fontSize:100,fill:16711680}),t.addChild(t.mText),t}return m(n,[{key:"active",value:function(){this.mText.text=ye.Handle.getSceneName()+"  How To"}},{key:"disable",value:function(t){0==t&&this.active(),this.visible=!t}}]),n}(Bt["Container"]),fe=function(t){v(n,t);var e=C(n);function n(){var t;return p(this,n),t=e.call(this),t.mClickFlag=!1,t.mNormal=de.Handle.getCommonResource("btn_menu.png").texture,t.mClicked=de.Handle.getCommonResource("btn_menu_dim.png").texture,t.mMenuBtn=new Bt["Sprite"](t.mNormal),t.mHowToBtn=new Bt["Sprite"](de.Handle.getCommonResource("btn_howto.png").texture),t.mExitBtn=new Bt["Sprite"](de.Handle.getCommonResource("btn_exit.png").texture),t.addChild(t.mMenuBtn,t.mHowToBtn,t.mExitBtn),t.sortableChildren=!0,t.mMenuBtn.zIndex=3,t.mHowToBtn.zIndex=2,t.mExitBtn.zIndex=1,t.mHowToBtn.visible=!1,t.mExitBtn.visible=!1,t.registerEvent(),t}return m(n,[{key:"registerEvent",value:function(){var t=this;this.mMenuBtn.interactive=!0,this.mMenuBtn.buttonMode=!0,this.mMenuBtn.on("pointertap",Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.parent.howToFlag(!1),t.mMenuBtn.interactive=!1,t.createBtn(),t.changeImg(),e.next=7,t.onClick();case 7:t.mClickFlag=!t.mClickFlag,t.mMenuBtn.interactive=!0;case 9:case"end":return e.stop()}}),e)})))),this.mHowToBtn.buttonMode=!0,this.mHowToBtn.on("pointertap",(function(){t.parent.howToFlag(!0)})),this.mExitBtn.buttonMode=!0,this.mExitBtn.on("pointertap",(function(){t.parent.howToFlag(!1),console.log("링크 수정 필요"),location.href="https://dev.arambookclub.com/hangul"}))}},{key:"changeImg",value:function(){0==this.mClickFlag?this.mMenuBtn.texture=this.mClicked:this.mMenuBtn.texture=this.mNormal}},{key:"createBtn",value:function(){var t=this,e=.25;0==this.mClickFlag?(this.mHowToBtn.visible=!0,this.mExitBtn.visible=!0,Nt["a"].to(this.mHowToBtn,{y:100,duraiton:e}),Nt["a"].to(this.mExitBtn,{y:200,duraiton:2*e}).eventCallback("onComplete",(function(){t.mHowToBtn.interactive=!0,t.mExitBtn.interactive=!0}))):(this.mHowToBtn.interactive=!1,this.mExitBtn.interactive=!1,Nt["a"].to(this.mHowToBtn,{y:0,duraiton:e}),Nt["a"].to(this.mExitBtn,{y:0,duraiton:2*e}).eventCallback("onComplete",(function(){t.mHowToBtn.visible=!1,t.mExitBtn.visible=!1})))}},{key:"onClick",value:function(){}}]),n}(Bt["Container"]),me=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this)}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.removeChildren(),e=new fe,e.position.set(20,10),this.addChild(e),e.onClick=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.showModal();case 2:case"end":return t.stop()}}),t)}))),n=new Bt["Sprite"](de.Handle.getCommonResource("bi.png").texture),n.position.set(Ft.w-100,0),this.addChild(n),this.mDimmed=new Lt(Ft.w,Ft.h),this.mDimmed.alpha=0,this.sortableChildren=!0,this.mDimmed.zIndex=-1,this.mHowTo=new pe,this.mHowTo.position.set(100,0),this.addChild(this.mHowTo),this.mHowTo.zIndex=2,this.mHowTo.disable(!0),this.mShowFlag=!1;case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"howToFlag",value:function(t){this.mHowTo.disable(!t)}},{key:"showModal",value:function(){var t=this;return new Promise((function(e){t.mShowFlag=!t.mShowFlag,t.mShowFlag?(t.dimmedMotion(!0),t.stopAll()):(t.dimmedMotion(!1),t.resumeAll()),Nt["a"].delayedCall(1,(function(){e()}))}))}},{key:"stopAll",value:function(){if(window["recorder"]&&window["recorder"].pauseRecording(),Dt.pauseAll(),window["gameMotion"]&&window["gameMotion"].length>0){var t,e=Object(Vt["a"])(window["gameMotion"]);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.pause()}}catch(i){e.e(i)}finally{e.f()}}window["currentVideo"]&&(1==window["currentVideo"].paused?window["videoPause"]="pause":window["videoPause"]="play",window["currentVideo"].pause())}},{key:"resumeAll",value:function(){if(window["recorder"]&&window["recorder"].resumeRecording(),Dt.resumeAll(),window["gameMotion"]&&window["gameMotion"].length>0){var t,e=Object(Vt["a"])(window["gameMotion"]);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.resume()}}catch(i){e.e(i)}finally{e.f()}}if(window["currentVideo"]){if("pause"==window["videoPause"])return;window["currentVideo"].play()}}},{key:"dimmedMotion",value:function(t){var e=this;t?(this.addChild(this.mDimmed),Nt["a"].to(this.mDimmed,{alpha:1,duration:.25})):Nt["a"].to(this.mDimmed,{alpha:0,duration:.5}).eventCallback("onComplete",(function(){e.removeChild(e.mDimmed)}))}}]),n}(Bt["Container"]);n("32f9");window.PIXI=Bt;var ge=function(t){v(n,t);var e=C(n);function n(){var t;p(this,n),t=e.call(this),console.log("로딩시작");var i=new Bt["Graphics"];return i.beginFill(4015193,1),i.drawRect(0,0,Ft.w,Ft.h),i.endFill(),t.addChild(i),t.mLoading=new Bt["spine"].Spine(de.Handle.getCommonResource("loading.json").spineData),t.addChild(t.mLoading),t.mLoading.position.set(Ft.w/2,Ft.h/2),t.mLoading.state.setAnimation(0,"loading",!0),t}return m(n,[{key:"endLoading",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.removeChild(e.mLoading),Nt["a"].to(e,{alpha:0,duration:.25}).eventCallback("onComplete",(function(){e.mLoading.destroy(),e.mLoading=null,e.removeChildren(),console.log("로딩 끝"),t()}))})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(Bt["Container"]);window.PIXI=Bt,n("32f9");var ve=["home","today","rhythm","paint","partner","myhangul","nodak","total"],ye=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),console.log("App Created"),i=e.call(this,{width:Ft.w,height:Ft.h,backgroundColor:0,view:t}),window["currentBGM"]&&(window["currentBGM"].pause(),window["currentBGM"]=null),window["gameMotion"]&&(window["gameMotion"]=[]),i.mThema="",i.mSceneRoot=new Bt["Container"],i.mLoadingRoot=new Bt["Container"],i.mModalRoot=new me,i.stage.addChild(i.mSceneRoot,i.mModalRoot,i.mLoadingRoot),i.mCurrentSceneIDX=0,i.mSceneArray=[],i._initAppSetup(),n._handle=b(i),window["app"]=b(i),document.addEventListener("visibilitychange",(function(){0==document.hidden?("today"!==i.currentScene.gamename&&window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),window["currentBGM"]&&window["currentBGM"].play(),window["soundManager"]&&window["soundManager"].play(),Nt["a"].globalTimeline.resume(),Dt.resumeAll()):(window["soundManager"]&&window["soundManager"].pause(),window["currentBGM"]&&window["currentBGM"].pause(),Nt["a"].globalTimeline.pause(),Dt.pauseAll())})),i}return m(n,[{key:"_initAppSetup",value:function(){this.stage.sortableChildren=!0}},{key:"addScene",value:function(t){this.mSceneArray.push(t)}},{key:"getScene",value:function(t){if(null==t)return null;var e,n=Object(Vt["a"])(this.mSceneArray);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(t==i.gamename)return i}}catch(r){n.e(r)}finally{n.f()}}},{key:"getSceneName",value:function(){return this.mSceneArray[this.mCurrentSceneIDX].gamename.toLowerCase()}},{key:"resetRoot",value:function(){var t=this;return new Promise((function(e){t.mSceneRoot.children.forEach((function(t){t.removeChildren(),t=null})),t.mSceneRoot.removeChildren(),window["recorder"]&&(window["recorder"]=null),window["record"]&&(window["record"]=null),window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),window["currentBGM"]&&(window["currentBGM"].pause(),window["currentBGM"]=null),Nt["a"].globalTimeline.kill(),Bt["Loader"].shared.destroy(),Bt["Loader"].shared.reset(),t.videoAllStop(),e()}))}},{key:"goScene",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){var n,i,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.resetRoot();case 2:n=!1,i=0,e||(e="home"),r=Object(Vt["a"])(this.mSceneArray),t.prev=6,r.s();case 8:if((o=r.n()).done){t.next=23;break}if(a=o.value,e.toLowerCase()!=a.gamename.toLowerCase()){t.next=20;break}return this.mSceneRoot.addChild(a),this.mModalRoot.onInit(),this.mCurrentSceneIDX=i,console.warn("현재 APP 스텝",this.mCurrentSceneIDX,e),t.next=17,a.onInit();case 17:return t.next=19,a.onStart();case 19:n=!0;case 20:i+=1;case 21:t.next=8;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t["catch"](6),r.e(t.t0);case 28:return t.prev=28,r.f(),t.finish(28);case 31:n||console.log('"['.concat(e,']"이 없습니다.'));case 32:case"end":return t.stop()}}),t,this,[[6,25,28,31]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"nextGame",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=0,n=0;case 2:if(!(n<ve.length)){t.next=9;break}if(ve[n]!=this.getSceneName()){t.next=6;break}return e=n+1,t.abrupt("break",9);case 6:n++,t.next=2;break;case 9:this.goScene(ve[e]);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"startApp",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e,n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("App start"),console.log(e),this.start(),i={images:["bi.png","btn_exit.png","btn_howto.png","btn_menu.png","btn_menu_dim.png"],sounds:[],json:[],videos:[],spine:["loading.json"]},t.next=6,de.Handle.loadCommonResource(i);case 6:return t.next=8,this.onStartApp();case 8:return t.next=10,this.goScene(n);case 10:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"showLoadingScreen",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.mLoadingScreen){t.next=2;break}return t.abrupt("return");case 2:this.mLoadingScreen=new ge,this.mLoadingRoot.addChild(this.mLoadingScreen);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"closeLoadingScreen",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.mLoadingScreen.endLoading();case 2:this.mLoadingScreen=null,this.mLoadingRoot.removeChildren();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"videoAllStop",value:function(){if(window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),window["gameMotion"]&&window["gameMotion"].length>0){var t,e=Object(Vt["a"])(window["gameMotion"]);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.kill(),window["gameMotion"]=[]}}catch(i){e.e(i)}finally{e.f()}}}},{key:"onStartApp",value:function(){}},{key:"onCloseApp",value:function(){}},{key:"sceneRoot",get:function(){return this.mSceneRoot}},{key:"modalRoot",get:function(){return this.mModalRoot}},{key:"videoStop",get:function(){return this.mVideoStopper},set:function(t){this.mVideoStopper=t}},{key:"currentScene",get:function(){return this.mSceneArray[this.mCurrentSceneIDX]}},{key:"currentSceneIDX",get:function(){return this.mCurrentSceneIDX}}],[{key:"Handle",get:function(){return n._handle}}]),n}(Bt["Application"]),_e=["video_bar.png","video_bg.png","video_current.png","hand.png","cursor.png","play_button.png","stop_button.png","btn_play.png","btn_play_bubble.png","rec_dim.png","rec_on.png","btn_rec_play.png","play.png","btn_sound_normal.png","btn_sound_on.png","outro_check.png","outro_next_btn.png","outro_stage.png"],we=[],be=[],xe=["intro.json","timer_3sec.json","outro.json","star_effect.json"],Ce={images:_e,sounds:we,json:[],videos:be,spine:xe},Se=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mName=t,i.mProductName="",i}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onEnd",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"goScene",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Nt["a"].globalTimeline.kill();case 2:e?ye.Handle.goScene(e):ye.Handle.goScene();case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadCommonResource",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de.Handle.loadCommonResource(e);case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadViewerResource",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de.Handle.loadViewerResource(e);case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadProductResource",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,de.Handle.loadProductResource(e);case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getCommonResource",value:function(t){return de.Handle.getCommonResource(t)}},{key:"getViewerResource",value:function(t){return de.Handle.getViewerResource(t)}},{key:"getProductResource",value:function(t){if(""==this.gamename)throw"SceneBase의 프로덕트 이름이 비어있습니다.";return de.Handle.getProductResource(t)}},{key:"gamename",get:function(){return this.mName}},{key:"productName",get:function(){return this.mProductName},set:function(t){this.mProductName=t}}]),n}(Bt["Container"]),ke=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this,"home")}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("%c 배포되면 [studyDay: ".concat(Ft.studyDay,"] 수정필요"),"border:2px blue solid"),Ft.studyDay=1,window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),window["currentBGM"]&&(window["currentBGM"].pause(),window["currentBGM"]=null),this.alpha=0,e=new PIXI.Graphics,e.beginFill(16777215,1),e.drawRect(0,0,Ft.w,Ft.h),e.endFill(),this.addChild(e);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,o,a,s,u,c,l,h,d,p,f,m=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(Nt["a"].to(this,{alpha:1,duration:.5}),e=new PIXI.Container,e.position.set(Ft.w/2,Ft.h/2),this.addChild(e),n=new PIXI.Text("오늘한글"),i=new PIXI.Text("리듬한글"),r=new PIXI.Text("색칠한글"),o=new PIXI.Text("짝꿍한글"),a=new PIXI.Text("나의한글"),s=new PIXI.Text("노닥한글"),u=new PIXI.Text("깨단한글"),c=new PIXI.Text("그림퍼즐"),l=[n,i,r,o,a,s,u,c],h=["Today","Rhythm","Paint","Partner","MyHangul","nodak","total","puzzle"],d=["BareunBatangOTFM","BareunBatangOTFM","BareunBatangOTFM","TmoneyRoundWindExtraBold","TmoneyRoundWindExtraBold","NanumBarunGothic","NanumBarunGothic","NanumBarunGothic"],p=function(t){l[t-1]&&(l[t].x=l[t-1].x+l[t-1].width+100),l[t].y=0,t>=5&&(l[t].x=l[t-1-4].x+l[t-1-4].width+100,l[t].y=200),l[t].style.fontFamily=d[t],l[t].interactive=!0,l[t].buttonMode=!0,l[t].on("pointertap",(function(){m.goScene(h[t])})),e.addChild(l[t]),l[t].hitArea=new PIXI.Rectangle(-l[t].width/2,-90,2*l[t].width,200)},f=0;f<l.length;f++)p(f);e.pivot.set(e.width/2,e.height/2);case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(Se),Te=function(t){v(n,t);var e=C(n);function n(t,i){var r;return p(this,n),r=e.call(this),r.mUnLock=de.Handle.getCommonResource(t).texture,i&&(r.mLock=de.Handle.getCommonResource(i).texture),r.texture=r.mUnLock,r.anchor.set(.5),r.interactive=!0,r.buttonMode=!0,r}return m(n,[{key:"lock",value:function(){this.texture=this.mLock,Nt["a"].to(this,{angle:0,duration:.5})}},{key:"unLock",value:function(){this.mUnLock&&(this.texture=this.mUnLock)}}]),n}(PIXI.Sprite),Re=function(t){v(n,t);var e=C(n);function n(){var t;p(this,n),t=e.call(this);var i=Math.floor(window["currentVideo"].duration/60).toString(),r=Math.floor(window["currentVideo"].duration%60).toString();1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),t.mTotal=new PIXI.Text(i+":"+r,{fill:9933202,fontSize:24}),t.mTotal.x=100;var o=new PIXI.Text("|",{fill:16777215,fontSize:24});return t.mCurrent=new PIXI.Text("00:00",{fill:16777215,fontSize:24}),t.addChild(t.mCurrent,o,t.mTotal),o.x=t.width/2-o.width/2,t}return m(n,[{key:"updateCurrentTime",value:function(){void 0!==this.mSecond&&(1==this.mMinute.length&&(this.mMinute="0"+this.mMinute),1==this.mSecond.length&&(this.mSecond="0"+this.mSecond),this.mCurrent.text=this.mMinute+":"+this.mSecond)}},{key:"minute",get:function(){return this.mMinute},set:function(t){this.mMinute=t,this.updateCurrentTime()}},{key:"second",get:function(){return this.mSecond},set:function(t){this.mSecond=t,this.updateCurrentTime()}}]),n}(PIXI.Container),Me=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mDimmed=new PIXI.Graphics,i.mDimmed.beginFill(0,1),i.mDimmed.drawRect(0,0,Ft.w,Ft.h),i.mDimmed.endFill(),i.mDimmed.alpha=0,i.addChild(i.mDimmed),i.mDimmed.on("pointertap",(function(){i.showORhide()})),i.mCursorFlag=!0,i.mBackUpX=0,i.mVideo=t,window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),window["currentVideo"]=i.mVideo,i.mCurrentVol=.5,i.mVideo.volume=i.mCurrentVol,i.mPlayerFlag=!1,i.createController(),i}return m(n,[{key:"createController",value:function(){var t=this;this.mPlayer=new PIXI.Sprite(de.Handle.getCommonResource("video_bar.png").texture),this.mPlayer.interactive=!0,this.mPlayer.buttonMode=!0,this.mPlayer.visible=!1,this.mPlayer.position.set(0,Ft.h-this.mPlayer.height),this.addChild(this.mPlayer),this.mPlayer.on("pointerup",(function(){t.delayHide()})),this.mPlayerRedBG=new PIXI.Sprite(de.Handle.getCommonResource("video_current.png").texture),this.mPlayerRedBG.position.set(10,this.mPlayer.height/2-this.mPlayerRedBG.height/2),this.mPlayerWhiteBG=new PIXI.Sprite(de.Handle.getCommonResource("video_bg.png").texture),this.mPlayerWhiteBG.position.set(this.mPlayerRedBG.x,this.mPlayerRedBG.y),this.mPlayerBgMask=new PIXI.Graphics,this.mPlayerBgMask.beginFill(16711680,1),this.mPlayerBgMask.drawRect(0,-10,0,this.mPlayerWhiteBG.height+20),this.mPlayerBgMask.endFill(),this.mPlayerBgMask.position.set(this.mPlayerRedBG.x,this.mPlayerRedBG.y),this.mPlayerRedBG.mask=this.mPlayerBgMask,this.mCursor=new Te("cursor.png"),this.mCursor.y=this.mPlayer.height/2;var e=new PIXI.Container;e.position.set(40,this.mPlayer.height/2),this.mPlay=de.Handle.getCommonResource("play_button.png").texture,this.mStop=de.Handle.getCommonResource("stop_button.png").texture,this.mPlayBtn=new PIXI.Sprite,this.mPlayBtn.visible=!1,this.mPlayBtn.texture=this.mStop,this.mPlayBtn.anchor.set(.5),this.mPlayBtn.position.set(Ft.w/2,Ft.h/2),this.addChild(this.mPlayBtn),this.mPlayBtn.interactive=!0,this.mPlayBtn.buttonMode=!0,this.mPlayBtn.on("pointertap",(function(){window["currentVideo"].paused?(window["currentVideo"].play(),t.mPlayBtn.texture=t.mStop):(window["currentVideo"].pause(),t.mPlayBtn.texture=t.mPlay)})),this.mPlayerBarContainer=new PIXI.Container,this.mPlayerBarContainer.addChild(this.mPlayerWhiteBG,this.mPlayerRedBG,this.mPlayerBgMask,this.mCursor),this.eventClickSlider(),this.mPlayer.addChild(this.mPlayerBarContainer),this.mVideoDuration=new Re,this.mPlayer.addChild(this.mVideoDuration),this.mVideoDuration.position.set(20,this.mPlayer.height/2+40),this.mPlayerBarContainer.position.set(this.mVideoDuration.width+50,50)}},{key:"destroyed",value:function(){console.log("destroy"),window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),this.interactive=!1,this.mDimmed.interactive=!1,this.mPlayer.interactive=!1,this.mPlayerBarContainer.interactive=!1}},{key:"delayHide",value:function(){var t=this;this.mDelayTimer&&(this.mDelayTimer.kill(),this.mDelayTimer=void 0),this.mDelayTimer=Nt["a"].globalTimeline,this.mDelayTimer=Nt["a"].delayedCall(3,(function(){t.hideControl()}));for(var e=function(e){var n=Nt["a"].delayedCall(e,(function(){0==t.mCursorFlag||0==t.mPlayerFlag?(t.mDelayTimer&&t.mDelayTimer.kill(),t.mDelayTimer=void 0,n.kill(),n=void 0,console.log("%c Delay Cancel","color: green;font-weight: bold;")):console.log(4-e)}))},n=1;n<4;n++)e(n)}},{key:"showORhide",value:function(){var t=this;0!=this.mCursorFlag&&(this.mDimmed.interactive=!1,Nt["a"].to(this.mDimmed,{alpha:.7,duration:.25}),this.mPlayerFlag=!this.mPlayerFlag,this.mPlayerFlag?(this.mPlayBtn.visible=!0,Nt["a"].to(this.mPlayBtn,{alpha:1,duration:.25}),this.mPlayer.visible=!0,Nt["a"].to(this.mPlayer,{alpha:1,duration:.25})):this.hideControl(),Nt["a"].delayedCall(.5,(function(){t.mDimmed.interactive=!0,t.delayHide()})))}},{key:"hideControl",value:function(){var t=this;this.mPlayerFlag=!1,Nt["a"].to(this.mDimmed,{alpha:0,duration:.25}),Nt["a"].to(this.mPlayBtn,{alpha:0,duration:.25}),Nt["a"].to(this.mPlayer,{alpha:0,duration:.25}).eventCallback("onComplete",(function(){t.mPlayBtn.visible=!1,t.mPlayer.visible=!1}))}},{key:"setCursorX",value:function(){var t=this;this.mVideo.addEventListener("timeupdate",(function(){0!=t.mCursorFlag&&(t.cursorX=t.mVideo.currentTime/t.mVideo.duration*t.mPlayerWhiteBG.width+t.mCursor.width/2,t.mVideoDuration.minute=Math.floor(t.mVideo.currentTime/60).toString(),t.mVideoDuration.second=Math.floor(t.mVideo.currentTime%60).toString())}))}},{key:"eventClickSlider",value:function(){var t=this;this.mPlayerBarContainer.interactive=!0,this.mPlayerBarContainer.buttonMode=!0,console.log(" 모바일 입니까? %c ".concat(qt()),"color:green;"),qt()?this.mPlayerBarContainer.on("touchstart",(function(){t.guageDown()})).on("touchmove",(function(e){t.guageMove(e)})).on("touchend",(function(e){t.guageUp(e)})).on("touchendoutside",(function(){t.guageUp()})).on("touchcancel",(function(){t.guageUp()})):this.mPlayerBarContainer.on("pointerdown",(function(){t.guageDown()})).on("pointermove",(function(e){t.guageMove(e)})).on("pointerup",(function(e){t.guageUp(e)})).on("pointerout",(function(){t.guageUp()}))}},{key:"guageDown",value:function(){this.mCursorFlag=!1,this.mVideo.pause()}},{key:"guageMove",value:function(t){if(1!=this.mCursorFlag){var e=this.mPlayerWhiteBG.toLocal(t.data.global).x;this.moveCursor("move",e)}}},{key:"guageUp",value:function(t){if(1!=this.mCursorFlag){if(void 0===t)this.moveCursor("up",this.mBackUpX);else{var e=this.mPlayerWhiteBG.toLocal(t.data.global).x;this.moveCursor("up",e)}this.mCursorFlag=!0,this.mVideo.play()}}},{key:"moveCursor",value:function(t,e){var n=this;return new Promise((function(i){e<=10?(e=10,"up"==t&&(n.cursorX=e),"move"==t&&(n.mCursor.x=e)):e>=n.mPlayerWhiteBG.width?(e=n.mPlayerWhiteBG.width-50,"up"==t&&(n.cursorX=e),"move"==t&&(n.mCursor.x=e)):("up"==t&&(n.cursorX=e),"move"==t&&(n.cursorX=e,n.mCursor.x=e)),n.mBackUpX=e,i()}))}},{key:"play",value:function(){this.mDimmed.interactive=!0,this.mDimmed.buttonMode=!0,this.mVideo.play(),this.setCursorX()}},{key:"cursorX",get:function(){return this.mCursorX},set:function(t){this.mCursorX=t,this.mCursor&&(this.mPlayerBgMask.clear(),this.mPlayerBgMask.beginFill(16711680,1),this.mCursorFlag?(this.mCursor.x=this.mCursorX,this.mPlayerBgMask.drawRect(0,-10,this.mCursor.x,this.mPlayerWhiteBG.height+20)):(this.mVideo.currentTime=this.mCursorX/this.mPlayerWhiteBG.width*this.mVideo.duration,this.mPlayerBgMask.drawRect(0,-10,this.mCursor.x,this.mPlayerWhiteBG.height+20)),this.mPlayerBgMask.endFill())}},{key:"currentVol",get:function(){return this.mCurrentVol},set:function(t){this.mCurrentVol=t,this.mVideo.volume=this.mCurrentVol}}]),n}(PIXI.Container),Ae=function(t){v(n,t);var e=C(n);function n(t,i){var r;return p(this,n),r=e.call(this),r.mNormal=t,r.mChange=i,r.texture=r.mNormal,r.anchor.set(.5),r.position.set(r.width/2,r.height/2),r.interactive=!0,r.buttonMode=!0,r.on("pointertap",(function(){r.onClick()})),r}return m(n,[{key:"changeTexture",value:function(){this.texture==this.mNormal?this.texture=this.mChange:this.texture=this.mNormal}},{key:"onClick",value:function(){}}]),n}(PIXI.Sprite),Ie=function(t){v(n,t);var e=C(n);function n(t,i,r){var o;p(this,n),o=e.call(this);var a={};return a=r?new PIXI.TextStyle(r):new PIXI.TextStyle({fontSize:58,fill:16777215,fontFamily:"NanumBarunGothic"}),i&&(o.mTintColor=i),o.createTextCard(t,a),Nt["a"].to(o.mCard,{alpha:1,duration:1}),o.interactive=!0,o.buttonMode=!0,o.on("pointertap",(function(){o.interactive=!1,o.buttonMode=!1,o.onClick()})),o}return m(n,[{key:"createTextCard",value:function(t,e){this.mDimmed=new PIXI.Graphics,this.mDimmed.beginFill(0,1),this.mDimmed.drawRect(0,0,Ft.w,Ft.h),this.mDimmed.endFill(),this.mDimmed.alpha=.8,this.mDimmed.interactive=!0,this.mCard=new PIXI.Container;var n=new Ae(de.Handle.getCommonResource("btn_play_bubble.png").texture);n.position.set(Ft.w/2,Ft.h/2-100);var i=new Ae(de.Handle.getCommonResource("btn_play.png").texture);i.position.set(Ft.w/2,Ft.h/2+100),this.mText=new PIXI.Text(t,e),this.mText.pivot.set(this.mText.width/2,this.mText.height/2),this.mText.y=-10,n.addChild(this.mText),this.mCard.addChild(n,i),this.addChild(this.mDimmed,this.mCard),this.mCard.alpha=0}},{key:"changeTint",value:function(t){this.mText.tint=t?this.mTintColor:16777215}},{key:"onClick",value:function(){}}]),n}(PIXI.Container),Pe=(n("38cf"),["today","rhythm","paint","partner","myhangul","nodak","total","puzzle"]),Ee=[20,176,330,488,646],Oe=function(t){v(n,t);var e=C(n);function n(t){var i;p(this,n),i=e.call(this),i.mName=t,i.texture=de.Handle.getCommonResource("outro_stage.png").texture,console.log(i.mName),i.mIndex=0;var r,o=Object(Vt["a"])(Pe);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.mName==a&&(i.mIndex=Pe.indexOf(a))}}catch(s){o.e(s)}finally{o.f()}return i.mCurrent=new Ae(de.Handle.getCommonResource("outro_check.png").texture),i.addChild(i.mCurrent),i.mCurrent.position.set(Ee[i.mIndex],i.mCurrent.height/2),Nt["a"].to(i.mCurrent.scale,{x:1.4,y:1.4,duration:.56}).repeat(-1).yoyo(!0),i}return n}(PIXI.Sprite),De=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this)}return m(n,[{key:"createBg",value:function(){this.mDimmde=new PIXI.Graphics,this.mDimmde.beginFill(0,1),this.mDimmde.drawRect(0,0,Ft.w,Ft.h),this.mDimmde.endFill(),this.addChild(this.mDimmde),this.mDimmde.alpha=0,this.mDimmde.interactive=!0,this.mProcessBar=new Oe(ye.Handle.getSceneName()),this.mProcessBar.position.set(Ft.w/2-this.mProcessBar.width/2,76),this.addChild(this.mProcessBar),this.mSpine=new PIXI.spine.Spine(de.Handle.getCommonResource("outro.json").spineData)}},{key:"start",value:function(){var t=this;return new Promise((function(e){t.createBg();var n=new Ae(de.Handle.getCommonResource("outro_next_btn.png").texture);n.position.set(Ft.w/2,Ft.h-n.height/2-96),n.scale.set(0),t.addChild(n),Nt["a"].to(t.mDimmde,{alpha:.8,duration:.5}).eventCallback("onComplete",(function(){t.mSpine.position.set(Ft.w/2,Ft.h/2),t.mSpine.stateData.defaultMix=.25,t.addChild(t.mSpine);var i=Math.ceil(4*Math.random()),r="com_eop_sound".concat(i);console.log("".concat(i,"번째 eop 사운드 재생")),se(r,!0),t.mSpine.state.setAnimation(0,"01",!1);var o=t.mSpine.state.data.skeletonData.findAnimation("01").duration;Nt["a"].delayedCall(o,(function(){t.mSpine&&t.mSpine.state.setAnimation(0,"02",!0),Nt["a"].to(n.scale,{x:1,y:1,duration:.5,ease:"back"})})),n.on("pointertap",(function(){t.mSpine.destroy(),t.mSpine=null,t.removeChildren(),e()}))}))}))}}]),n}(PIXI.Container),Ve=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this)}return m(n,[{key:"intro",value:function(){var t=this;return new Promise((function(e){ye.Handle.modalRoot.visible=!1,console.log("%c 나중에 홈화면 사라지면 인덱스 맞춰줘야 한다","background: black;color:white");var n=new PIXI.spine.Spine(de.Handle.getCommonResource("intro.json").spineData);t.addChild(n),n.position.set(Ft.w/2,Ft.h/2),n.state.setAnimation(0,"0".concat(ye.Handle.currentSceneIDX),!1);var i=n.state.data.skeletonData.findAnimation("0".concat(ye.Handle.currentSceneIDX)).duration;Nt["a"].delayedCall(i,(function(){ye.Handle.modalRoot.visible=!0,e()})),Nt["a"].delayedCall(2.3,(function(){se("ac".concat(ye.Handle.currentSceneIDX,"_title"),!0)}))}))}}]),n}(PIXI.Container),Be=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this,"today")}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye.Handle.showLoadingScreen();case 2:return console.log("Selected =>  %c  ".concat(this.gamename)," color: red; font-weight:bold; letter-spacing: -0.1rem;"),t.next=5,ye.Handle.closeLoadingScreen();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new Ve,this.addChild(e),t.next=4,e.intro();case 4:return this.removeChildren(),t.next=7,this.settingVideo();case 7:this.mController=new Me(this.mVideoElement),this.addChild(this.mController),this.setCard();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"settingVideo",value:function(){var t=this;return new Promise((function(e){t.mVideoSprite=new PIXI.Sprite,t.addChild(t.mVideoSprite),t.mVideoElement=document.createElement("video"),t.mVideoElement.setAttribute("playsinline",""),t.mVideoElement.setAttribute("autoplay","");var n="".concat(Ft.restAPI,"product/today/video/").concat(Ft.studyDay,"_th.mp4");t.mVideoElement.src=n,t.mVideoElement.crossOrigin="*",t.mVideoElement.volume=.5;var i=function(){0==document.hidden?1==window["videoState"]?t.mVideoElement.pause():t.mVideoElement.play():(window["videoState"]=t.mVideoElement.paused,t.mVideoElement&&t.mVideoElement.pause())};t.mVideoSprite.texture=PIXI.Texture.from(t.mVideoElement),t.mVideoSprite.width=Ft.w,t.mVideoSprite.height=Ft.h,t.mVideoElement.onended=function(){t.onEnded()},document.addEventListener("visibilitychange",i),t.mVideoElement.oncanplay=function(){t.mVideoElement.pause(),t.mVideoElement.currentTime=0,t.mVideoElement.oncanplay=null,e()}}))}},{key:"setCard",value:function(){var t=this,e=new Ie(le(),0,{fontSize:180,fontWeight:"bold",fontFamily:"TmoneyRoundWindExtraBold"});e.changeTint(!0),this.addChild(e),e.onClick=function(){e.onClick=function(){return null},t.removeChild(e),t.mController.play()}}},{key:"onEnded",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.mVideoElement.currentTime=0,this.mController.destroy(),e=new De,this.addChild(e),t.next=6,e.start();case 6:ye.Handle.nextGame();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(Se),Fe=["btn_rec_play.png","hand.png","play.png","popup_rec_box.png","rec_dim.png","rec_on.png","rec_time.png","sound_wave.png"],Ne=[],Le=[],je=[],Ue={images:Fe,sounds:Ne,json:[],videos:Le,spine:je},Xe=(n("2b3d"),n("a9ee")),ze=n.n(Xe),Ge=function(t){v(n,t);var e=C(n);function n(){var t;p(this,n),t=e.call(this);var i=new Lt(Ft.w,Ft.h);return i.alpha=0,t.addChild(i),Nt["a"].to(i,{alpha:1,duration:.5}),t}return m(n,[{key:"startRec",value:function(){this.mRecImg.texture=de.Handle.getViewerResource("rec_on.png").texture,this.mRecordMotion.play()}},{key:"readyRecord",value:function(){var t=this;return new Promise((function(e){window["recMotion"]=new PIXI.spine.Spine(de.Handle.getCommonResource("timer_3sec.json").spineData),t.mRecPlace=new Ae(de.Handle.getViewerResource("popup_rec_box.png").texture),t.addChild(t.mRecPlace),t.mRecPlace.position.set(Ft.w/2,Ft.h/2),t.setText(),t.mRecImg=new Ae(de.Handle.getViewerResource("rec_dim.png").texture),window["recMotion"].position.set(0,120),t.mRecImg.position.set(0,120),t.mRecPlace.addChild(t.mRecImg,window["recMotion"]),t.mRecPlace.sortableChildren=!0,t.mRecImg.zIndex=1,window["recMotion"].zIndex=2,window["recMotion"].alpha=0,t.setRecWave(),e()}))}},{key:"setRecord",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){navigator.mediaDevices.getUserMedia({video:!1,audio:{echoCancellation:!0}}).then(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(n){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=ze()(n,{type:"audio/webm",mimeType:"audio/webm"}),window["recorder"]=i,i.startRecording(),window["recMotion"].alpha=1,window["recMotion"].state.setAnimation(0,"animation",!1),r=function(t){return new Promise((function(e){return setTimeout(e,t)}))},e.next=8,r(3e3);case 8:i.stopRecording((function(){var e=i.getBlob(),n=window.URL.createObjectURL(e),r=new Audio(n);r.volume=1,window["record"]=r,t()}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setRecWave",value:function(){this.mRecordMotion&&(this.mRecordMotion.kill(),this.mRecordMotion=null),this.mRecWaveMask&&(this.mRecPlace.removeChild(this.mRecWaveMask,this.mRecWave),this.mRecWaveMask=null,this.mRecWave=null),this.mRecWaveMask=new PIXI.Graphics,this.mRecWaveMask.beginFill(16711680,1),this.mRecWaveMask.drawRect(0,0,545,65),this.mRecWaveMask.endFill(),this.mRecWaveMask.pivot.set(this.mRecWaveMask.width/2,this.mRecWaveMask.height/2),this.mRecWaveMask.position.set(0,120),this.mRecWave=new Ae(de.Handle.getViewerResource("sound_wave.png").texture),this.mRecWave.position.set(this.mRecWave.width/2-282.5,120),this.mRecWave.mask=this.mRecWaveMask,this.mRecWave.tint=16326945,this.mRecPlace.addChild(this.mRecWaveMask,this.mRecWave),this.mRecordMotion=Nt["a"].timeline({repeat:-1}),this.mRecordMotion.to(this.mRecWave,{x:-this.mRecWave.width/2+565,duration:20,ease:Zt["b"].easeNone}),this.mRecordMotion.pause()}},{key:"setText",value:function(){var t=new PIXI.Text(le(),{fontSize:120,fill:0,fontFamily:"TmoneyRoundWindExtraBold"});t.pivot.set(t.width/2,t.height/2),t.position.set(0,-66),this.mRecPlace.addChild(t)}},{key:"playRecord",value:function(){var t=this;return new Promise((function(e){t.mRecordMotion&&(t.mRecordMotion.kill(),t.mRecordMotion=null),t.mRecPlace.removeChildren(),t.setText();var n=new Ae(de.Handle.getViewerResource("btn_rec_play.png").texture);n.position.set(0,120),n.zIndex=1,t.mRecPlace.addChild(n),n.scale.set(.1),Nt["a"].to(n.scale,{x:1,y:1,duration:.5,ease:"back"}),n.onClick=function(){n.onClick=function(){return null},window["record"]?(n.texture=de.Handle.getViewerResource("play.png").texture,t.setRecWave(),t.mRecordMotion.play(),window["record"].volume=1,window["record"].play(),Nt["a"].delayedCall(3.5,(function(){t.mRecPlace.removeChildren(),window["record"]=null,window["recMotion"]=null,e()}))):e()}}))}}]),n}(PIXI.Container),We=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this,"myhangul")}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye.Handle.showLoadingScreen();case 2:return this.mQuizData=[],t.next=5,this.getData();case 5:return t.next=7,this.loadViewerResource(Ue);case 7:return window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),this.mQuizStep=0,t.next=11,ye.Handle.closeLoadingScreen();case 11:console.log("gamename",this.gamename);case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getData",value:function(){var t=this;return new Promise((function(e){var n="".concat(Ft.restAPI,"data/myhangul_data.json"),i=new XMLHttpRequest;i.open("GET",n),i.responseType="json",i.send(),i.onloadend=function(){t.mQuizData=i.response["data"]["".concat(Ft.studyDay)],e()}}))}},{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.mMyhangulRecordFlag=!1,e=new Ve,this.addChild(e),t.next=5,e.intro();case 5:return this.removeChildren(),t.next=8,this.settingVideo();case 8:this.mVideoElement.addEventListener("timeupdate",Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=Math.floor(n.mVideoElement.currentTime),!(e>=n.mQuizData[n.mQuizStep])){t.next=10;break}if(1!=n.mMyhangulRecordFlag){t.next=4;break}return t.abrupt("return");case 4:return n.mMyhangulRecordFlag=!0,t.next=7,n.startMyhangulRecord();case 7:n.mMyhangulRecordFlag=!1,n.mQuizStep+=1,n.mQuizStep>n.mQuizData.length&&console.log("퀴즈 끝, 동영상 시청");case 10:case"end":return t.stop()}}),t)})))),this.setCard();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"settingVideo",value:function(){var t=this;return new Promise((function(e){t.mVideoSprite=new PIXI.Sprite,t.addChild(t.mVideoSprite),t.mVideoElement=document.createElement("video"),t.mVideoElement.setAttribute("playsinline",""),t.mVideoElement.setAttribute("autoplay","");var n="".concat(Ft.restAPI,"product/myhangul/video/").concat(Ft.studyDay,"_mh.mp4");t.mVideoElement.src=n,t.mVideoElement.crossOrigin="*",t.mVideoElement.volume=.5,window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),window["currentVideo"]=t.mVideoElement;var i=function(){0==document.hidden?window["videoState"]?t.mVideoElement.pause():t.mVideoElement.play():(window["videoState"]=t.mVideoElement.paused,t.mVideoElement&&t.mVideoElement.pause())};t.mVideoSprite.texture=PIXI.Texture.from(t.mVideoElement),t.mVideoSprite.width=Ft.w,t.mVideoSprite.height=Ft.h,t.mVideoElement.onended=function(){t.onEnded()},document.addEventListener("visibilitychange",i),t.mVideoElement.oncanplay=function(){t.mVideoElement.pause(),t.mVideoElement.currentTime=0,t.mVideoElement.oncanplay=null,e()}}))}},{key:"setCard",value:function(){var t=this,e=new Ie(le(),0,{fontSize:180,fontWeight:"bold",fontFamily:"TmoneyRoundWindExtraBold"});e.changeTint(!0),this.addChild(e),e.onClick=function(){t.mVideoElement.play(),t.removeChild(e)}}},{key:"startMyhangulRecord",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return ye.Handle.modalRoot.visible=!1,this.mVideoElement.pause(),t.next=4,this.recordBefore();case 4:return this.mMyhangulRecord=new Ge,this.addChild(this.mMyhangulRecord),t.next=8,this.mMyhangulRecord.readyRecord();case 8:se("ac5_pop"),Nt["a"].delayedCall(1,Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.mMyhangulRecord.startRec(),t.next=3,e.mMyhangulRecord.setRecord();case 3:return t.next=5,e.mMyhangulRecord.playRecord();case 5:Nt["a"].to(e.mMyhangulRecord,{alpha:0,duration:.25}).eventCallback("onComplete",(function(){e.mMyhangulRecord.removeChildren(),e.mMyhangulRecord.destroy(),e.mMyhangulRecord=null,e.removeChild(e.mMyhangulRecord),e.mVideoElement.play(),ye.Handle.modalRoot.visible=!0,Nt["a"].delayedCall(3,(function(){1==e.mVideoElement.paused&&e.mVideoElement.play()}))}));case 6:case"end":return t.stop()}}),t)}))));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"recordBefore",value:function(){return new Promise((function(t){var e=new Audio;e.id="sound",e.src="".concat(Ft.restAPI,"viewer/myhangul/sounds/ac5_script_1-1.mp3"),e.onloadedmetadata=function(){e.play(),Nt["a"].delayedCall(e.duration,(function(){e.pause(),e=null,t()}))}}))}},{key:"onEnded",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window["recorder"]&&(window["recorder"].destroy(),window["recorder"]=null),window["record"]&&(window["record"]=null),this.mVideoElement.pause(),this.mVideoElement=null,window["currentVideo"]&&(0==window["currentVideo"].paused&&window["currentVideo"].pause(),window["currentVideo"]=null),this.mMyhangulRecord=null,e=new De,this.addChild(e),t.next=10,e.start();case 10:Nt["a"].to(this,{y:Ft.h,duration:.5}).eventCallback("onComplete",(function(){n.children.forEach((function(t){null})),location.reload()}));case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(Se);n("4ec9");function qe(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function He(t,e,n){return He=_()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=Function.bind.apply(t,i),o=new r;return n&&g(o,n.prototype),o},He.apply(null,arguments)}function Ye(t){var e="function"===typeof Map?new Map:void 0;return Ye=function(t){if(null===t||!qe(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return He(t,arguments,y(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,t)},Ye(t)}var Qe=["bg_01.png","bg_02.png","bg_03.png","box_green01.png","box_green02.png","box_grey01.png","box_grey02.png","box_red01.png","box_red02.png","box_violet01.png","box_violet02.png","box_white01.png","box_white02.png","box_disable.png","counting_on.png","counting_off.png","ice_01.png","penguin_wait.png","water_front.png","wave.png"],Ze=[],$e=[],Ke=["common_penguin.json"],Je={images:Qe,sounds:Ze,json:[],videos:$e,spine:Ke},tn=function(t){v(n,t);var e=C(n);function n(t,i,r,o){var a;return p(this,n),a=e.call(this),a.mFont=r,a.mState=!1,a.mColor=i,a.mID=o,a.createCard(t,i,r),a.interactive=!0,a.buttonMode=!0,a.on("pointerdown",(function(){a.mCard.texture=a.mClicked,a.mFocus.texture=de.Handle.getViewerResource("box_white02.png").texture})),a.on("pointerup",(function(){a.mCard.texture=a.mNormal,a.mFocus.texture=de.Handle.getViewerResource("box_white01.png").texture})),a.on("pointerout",(function(){a.mCard.texture=a.mNormal,a.mFocus.texture=de.Handle.getViewerResource("box_white01.png").texture})),a.on("pointertap",(function(){a.onClick()})),a}return m(n,[{key:"createCard",value:function(t,e,n){this.mDisable=de.Handle.getViewerResource("box_disable.png").texture,9063935==e&&(this.mNormal=de.Handle.getViewerResource("box_violet01.png").texture,this.mClicked=de.Handle.getViewerResource("box_violet02.png").texture,this.mCard=new PIXI.Sprite(this.mNormal)),16326945==e&&(this.mNormal=de.Handle.getViewerResource("box_red01.png").texture,this.mClicked=de.Handle.getViewerResource("box_red02.png").texture,this.mCard=new PIXI.Sprite(this.mNormal)),2346019==e&&(this.mNormal=de.Handle.getViewerResource("box_green01.png").texture,this.mClicked=de.Handle.getViewerResource("box_green02.png").texture,this.mCard=new PIXI.Sprite(this.mNormal)),this.mFocus=new PIXI.Sprite(de.Handle.getViewerResource("box_white01.png").texture),this.mFocus.tint=e,this.mFocus.alpha=0,this.mText=new PIXI.Text(t,{fill:16777215,fontSize:120,fontWeight:"bold",fontFamily:n}),this.addChild(this.mFocus,this.mCard),this.mCard.addChild(this.mText),this.mText.tint=e,this.mText.pivot.set(this.mText.width/2,this.mText.height/2),this.mText.position.set(this.mCard.width/2,this.mCard.height/2-6),"BareunBatangOTFM"==n&&(this.mText.y+=-6)}},{key:"onClick",value:function(){}},{key:"delayInterAction",value:function(t){var e=this;this.interactive=!1,this.buttonMode=!1,this.mCard.texture=this.mDisable,this.mText.tint=12369084,Nt["a"].delayedCall(t,(function(){e.mState?(e.mCard.texture=e.mDisable,e.mText.tint=12369084):(e.mText.tint=e.mColor,e.mCard.texture=e.mNormal,e.interactive=!0,e.buttonMode=!0)}))}},{key:"focus",value:function(){this.mFocusAni=Nt["a"].to(this.mFocus,{alpha:.6,duration:.5,ease:Zt["b"].easeNone}).repeat(-1).yoyo(!0)}},{key:"destroy",value:function(){var t=this;this.mState=!0,this.interactive=!1,this.mCard.texture=this.mDisable,this.mText.tint=12369084,this.mFocusAni&&(this.mFocusAni.kill(),this.mFocusAni=null),Nt["a"].to(this.mFocus,{alpha:0,duration:.5}).eventCallback("onComplete",(function(){t.removeChild(t.mFocus)}))}},{key:"endMotion",value:function(){this.mState=!1,this.interactive=!1,this.mCard.texture=this.mNormal,this.mText.tint=this.mColor}},{key:"ID",get:function(){return this.mID}},{key:"font",get:function(){return this.mFont}}]),n}(PIXI.Container),en=function(t){v(n,t);var e=C(n);function n(t,i){var r;p(this,n),r=e.call(this),r.type=i;var o=new PIXI.Graphics;return o.beginFill(16711680,0),o.drawRect(0,0,t.width,t.height),o.endFill(),r.mGuideFinger=new Ae(de.Handle.getCommonResource("hand.png").texture),r.mGuideFinger.visible=!1,r.mGuideFinger.position.set(o.width/2,o.height/2),r.resetTimer(),r.addChild(o,r.mGuideFinger),r}return m(n,[{key:"reset",value:function(){var t=this;return new Promise((function(e){if(window["gameMotion"]){var n,i=Object(Vt["a"])(window["gameMotion"]);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.kill()}}catch(o){i.e(o)}finally{i.f()}}window["gameMotion"]=[],t.mFingerMotion&&(t.mFingerMotion.kill(),t.mFingerMotion=null,t.mGuideFinger.y=100,t.mGuideFinger.visible=!1),t.mFingerTimer&&(t.mFingerTimer.kill(),t.mFingerTimer=null,t.mGuideFinger.visible=!1),e()}))}},{key:"resetTimer",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.reset();case 2:this.mFingerTimer=Nt["a"].delayedCall(5,(function(){e.setMotion()})),window["gameMotion"].push(this.mFingerTimer);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setMotion",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.reset();case 2:this.mGuideFinger.visible=!0,this.mFingerMotion=Nt["a"].timeline({repeat:-1,yoyo:!0}),this.type?(this.mGuideFinger.y=100,this.mFingerMotion.to(this.mGuideFinger,{y:Ft.h-100,duration:2,ease:Zt["b"].easeNone}).delay(.5)):(this.mGuideFinger.x=100,this.mFingerMotion.to(this.mGuideFinger,{x:this.width-100,duration:4,ease:Zt["b"].easeNone})),window["gameMotion"].push(this.mFingerMotion);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(PIXI.Container),nn="".concat(Ft.restAPI,"viewer/rhythm/sounds/\n"),rn=[9063935,16326945,2346019],on=["BareunBatangOTFM","TmoneyRoundWindExtraBold","NanumBarunGothic","BareunBatangOTFM"],an=[16735899,16735899,16735899,16735899],sn=["BareunBatangOTFM","TmoneyRoundWindExtraBold","NanumBarunGothic"],un=(ne(sn),function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),"NanumBarunGothic"==t&&(i.src="".concat(Ft.restAPI,"common/sounds/2jung_1.mp3")),"TmoneyRoundWindExtraBold"==t&&(i.src="".concat(Ft.restAPI,"common/sounds/2jung_1_2.mp3")),"BareunBatangOTFM"==t&&(i.src="".concat(Ft.restAPI,"common/sounds/2jung_1_1.mp3")),i.onloadedmetadata=function(){i.play()},i}return m(n,[{key:"destroy",value:function(){this.src=null,this.onloadedmetadata=function(){return null}}}]),n}(Ye(Audio))),cn=function(t){v(n,t);var e=C(n);function n(){var t;p(this,n),t=e.call(this),t.mEndStep=0;var i=new Audio;i.src="".concat(nn,"ac2_bgm1.mp3"),i.play(),i.loop=!0,i.volume=.5,window["currentBGM"]=i,t.mCurrentQuizIndex=0,t.mCardAry=[];var r=new PIXI.Sprite(de.Handle.getViewerResource("bg_01.png").texture);return t.addChild(r),t.createRandomNum(),t.createWordPlace(),t.fingerMotion(),t}return m(n,[{key:"createRandomNum",value:function(){this.mColorIndexAry=[];var t=[0,1,2];this.mColorIndexAry=he.Game.shuffleArray(t),this.mColorIndexAry.push(t[0],t[2],t[1]),this.mQuizIndexAry=[];var e=[0,1,2,3,4,5];this.mQuizIndexAry=he.Game.shuffleArray(e)}},{key:"createWordPlace",value:function(){var t=this;this.mQuizPlace=new PIXI.Container;for(var e=function(e){var n=new tn(le(),rn[t.mColorIndexAry[e]],sn[t.mColorIndexAry[e]],e);t.mQuizPlace.addChild(n),n.position.set(e*(n.width+20)+20,0),t.mCardAry.push(n),n.onClick=function(){var n=new un(sn[t.mColorIndexAry[e]]);n.onloadedmetadata=function(){n.play()},t.decide(e)}},n=0;n<6;n++)e(n);this.mCardAry[this.mQuizIndexAry[this.mCurrentQuizIndex]].focus(),this.addChild(this.mQuizPlace),this.mQuizPlace.pivot.set(this.mQuizPlace.width/2,this.mQuizPlace.height/2),this.mQuizPlace.position.set(Ft.w/2,Ft.h/2)}},{key:"fingerMotion",value:function(){var t=this;this.mAffordance=new en(this.mQuizPlace,!1),this.mQuizPlace.addChild(this.mAffordance),this.mQuizPlace.interactive=!0,this.mQuizPlace.on("pointerup",(function(){return t.mAffordance.resetTimer()}))}},{key:"decide",value:function(t){console.log("cardIndex=> ".concat(t)),console.log("mCurrentQuizIndex=> ".concat(this.mQuizIndexAry[this.mCurrentQuizIndex])),t==this.mQuizIndexAry[this.mCurrentQuizIndex]?(this.mCardAry[this.mQuizIndexAry[this.mCurrentQuizIndex]].destroy(),this.correct()):this.wrong()}},{key:"correct",value:function(){var t=this;this.mCurrentQuizIndex+=1,this.mCardAry[this.mQuizIndexAry[this.mCurrentQuizIndex]]?this.mCardAry[this.mQuizIndexAry[this.mCurrentQuizIndex]].focus():Nt["a"].delayedCall(1,(function(){t.playSound()}))}},{key:"wrong",value:function(){var t,e=Object(Vt["a"])(this.mCardAry);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.delayInterAction(1)}}catch(i){e.e(i)}finally{e.f()}}},{key:"playSound",value:function(){var t=this;ye.Handle.modalRoot.visible=!1,null==this.parent.parent&&(this.playSound=function(){return null});var e=new un(this.mCardAry[this.mQuizIndexAry[this.mEndStep]].font);e.play(),e.onloadedmetadata=function(){t.mCardAry[t.mQuizIndexAry[t.mEndStep]].endMotion(),Nt["a"].delayedCall(e.duration,(function(){t.mEndStep+=1,t.mEndStep>=t.mCardAry.length?t.endIntro():t.playSound()}))}}},{key:"endIntro",value:function(){var t=this;if(ye.Handle.modalRoot.visible=!0,window["currentBGM"]&&(window["currentBGM"].pause(),window["currentBGM"]=null),null!=this.parent.parent){var e=new PIXI.Sprite(de.Handle.getViewerResource("bg_02.png").texture);this.addChild(e),e.x=Ft.w,Nt["a"].to(this,{x:-Ft.w,duration:.5}).eventCallback("onComplete",(function(){t.parent.parent&&t.parent.parent.endIntro()}))}else this.endIntro=function(){return null}}}]),n}(PIXI.Container),ln=function(t){v(n,t);var e=C(n);function n(t,i){var r;p(this,n),r=e.call(this),r.mStep=t,r.createMotion(),r.mText=new PIXI.Text(i,{fontSize:130,fontFamily:on[t],fontWeight:"bold",fill:16777215}),r.mText.tint=an[t],r.mText.anchor.set(.5),r.mText.x=86,r.mText.scale.x=1,r.mText.scale.y=-1,r.mText.angle=-90;var o=r.mMotion.slotContainers[r.mMotion.skeleton.findSlotIndex("text")];return o.removeChildren(),o.addChild(r.mText),o.updateTransform(),r.interactive=!0,r.buttonMode=!0,r.on("pointertap",(function(){r.onClick()})),r}return m(n,[{key:"createMotion",value:function(){this.mMotion=new PIXI.spine.Spine(de.Handle.getViewerResource("common_penguin.json").spineData),this.mMotion.state.setAnimation(0,"default",!0),this.addChild(this.mMotion)}},{key:"success",value:function(){var t=this;return new Promise((function(e){t.onClick=function(){return null},t.mMotion.stateData.defaultMix=.25,t.mMotion.state.setAnimation(0,"succ",!0);var n=t.mMotion.state.data.skeletonData.findAnimation("succ").duration;Nt["a"].delayedCall(n,(function(){e()}))}))}},{key:"fail",value:function(){var t=this;this.onClick=function(){return null},this.mMotion.stateData.defaultMix=.25,this.mMotion.state.setAnimation(0,"fail",!1);var e=this.mMotion.state.data.skeletonData.findAnimation("fail").duration;Nt["a"].delayedCall(e,(function(){t.mMotion.state.setAnimation(0,"fail_default",!0)}))}},{key:"disable",value:function(){var t=this;this.mMotion.stateData.defaultMix=.25;var e=this.mMotion.state.tracks[0].animation.name;if("default"==e){this.mMotion.state.setAnimation(0,"fail",!1);var n=this.mMotion.state.data.skeletonData.findAnimation("fail").duration;Nt["a"].delayedCall(n,(function(){t.mMotion.state.setAnimation(0,"fail_default",!0)}))}else this.mMotion.state.setAnimation(0,"fail_default",!0)}},{key:"onClick",value:function(){}},{key:"text",get:function(){return this.mText.text}},{key:"textStyle",get:function(){return this.mText.style.fontFamily}},{key:"introMode",set:function(t){this.interactive=!t,this.buttonMode=!t}}]),n}(PIXI.Container),hn=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this)}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.mStep=this.parent.parent.currentStep,console.log("%c ".concat(this.mStep,"단계 진행중"),"border:1px red solid;"),se("ac2_transition"),e=2,0===this.mStep){t.next=14;break}if(this.mStep%2!=0){t.next=11;break}return e=2,t.next=9,this.parent.parent.goLeft();case 9:t.next=14;break;case 11:return e=3,t.next=14,this.parent.parent.goRight();case 14:this.removeChildren(),this.position.set(0,0),n=0,n=0==this.mStep?1:3,this.mBg=new PIXI.Sprite(de.Handle.getViewerResource("bg_0".concat(e,".png")).texture),this.addChild(this.mBg),this.mQuizList=[],this.createTarget(n);case 22:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createTarget",value:function(t){var e=this,n=Ft.w/2,i=[n-350,n,n+350],r=[550,500,550],o=[];if(1==t)o=[le()];else{var a=[le(),Ft.quizWrong[0],Ft.quizWrong[1]];o=ne(a)}if(window["gameMotion"]&&window["gameMotion"].length>0){var s,u=Object(Vt["a"])(window["gameMotion"]);try{for(u.s();!(s=u.n()).done;){var c=s.value;c.kill(),c=null}}catch(d){u.e(d)}finally{u.f()}}window["gameMotion"]=[],this.sortableChildren=!0;for(var l=function(n){var a=new ln(e.mStep,o[n]);if(e.mQuizList.push(a),a.zIndex=1,1==n&&(a.zIndex=0),e.addChild(a),1==t)a.introMode=!0,a.position.set(i[1],r[1]),Nt["a"].delayedCall(1,(function(){e.correct(a)}));else{if(e.mStep%2==0){var s=[500,550,500];a.position.set(i[n],s[n])}else a.position.set(i[n],r[n]);a.onClick=function(){if(a.text==le()){var t,n=Object(Vt["a"])(e.mQuizList);try{for(n.s();!(t=n.n()).done;){var i=t.value;i==a?e.correct(a):e.wrong(i,!0),i.interactive=!1,i.buttonMode=!1}}catch(d){n.e(d)}finally{n.f()}}else e.wrong(a)}}},h=0;h<t;h++)l(h)}},{key:"correct",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("정답"),se("ac2_correct"),Nt["a"].delayedCall(1,(function(){var t=new un(e.textStyle);t.play(),t=null})),t.next=5,e.success();case 5:this.parent.parent.currentStep+=1;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"wrong",value:function(t,e){e?t.disable():(se("ac2_wrong1"),t.fail(),console.log("오답"),this.parent.wrongCound+=1)}},{key:"step",get:function(){return this.mStep?this.mStep:0}}]),n}(PIXI.Container),dn=function(t){v(n,t);var e=C(n);function n(){var t;p(this,n),t=e.call(this),t.mSteps=[],t.mTextAry=[],t.mOn=de.Handle.getViewerResource("counting_on.png").texture,t.mOff=de.Handle.getViewerResource("counting_off.png").texture;for(var i=0,r=0;r<3;r++){var o=new Ae(t.mOff);o.position.set(i+o.width/2,o.height/2),i+=o.width+10;var a=new PIXI.Text(le(),{fontSize:24,fontWeight:"bold",fill:16777215,fontFamily:"TmoneyRoundWindExtraBold",padding:20});a.tint=10938615,a.pivot.set(a.width/2,a.height/2),o.addChild(a),t.addChild(o),t.mSteps.push(o),t.mTextAry.push(a)}return t.pivot.set(t.width/2,t.height/2),t}return m(n,[{key:"current",set:function(t){this.mCurrent=t;var e,n=Object(Vt["a"])(this.mSteps);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.texture=this.mOff}}catch(s){n.e(s)}finally{n.f()}var r,o=Object(Vt["a"])(this.mTextAry);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.style.fontSize=24,a.pivot.set(this.mTextAry[this.mCurrent].width/2,this.mTextAry[this.mCurrent].height/2)}}catch(s){o.e(s)}finally{o.f()}this.mSteps[this.mCurrent].texture=this.mOn,this.mTextAry[this.mCurrent].style.fontSize=48,this.mTextAry[this.mCurrent].pivot.set(this.mTextAry[this.mCurrent].width/2,this.mTextAry[this.mCurrent].height/2)}}]),n}(PIXI.Container),pn=function(t){v(n,t);var e=C(n);function n(){var t;return p(this,n),t=e.call(this,"rhythm"),t.mWrongCount=0,t}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye.Handle.showLoadingScreen();case 2:return t.next=4,this.loadViewerResource(Je);case 4:return this.mSceneRoot=new PIXI.Container,this.addChild(this.mSceneRoot),this.mCurrentStep=0,t.next=9,ye.Handle.closeLoadingScreen();case 9:console.log(this.gamename);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new Ve,this.mSceneRoot.addChild(e),t.next=4,e.intro();case 4:e=null,this.mSceneRoot.removeChildren(),this.setIntro();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setIntro",value:function(){var t=new cn;this.mSceneRoot.addChild(t)}},{key:"endIntro",value:function(){this.mSceneRoot.removeChildren(),this.setGame();var t=new Audio;t.src="".concat(nn,"ac2_bgm2.mp3"),t.play(),t.loop=!0,t.volume=.5,window["currentBGM"]=t}},{key:"setProgreesBar",value:function(){this.mProgressBar=new dn,this.mProgressBar.position.set(Ft.w/2,Ft.h-60),this.addChild(this.mProgressBar)}},{key:"setGame",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.mGameScene=null,this.mGameScene=new hn,this.mSceneRoot.addChild(this.mGameScene),t.next=5,this.mGameScene.onInit();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"goRight",value:function(){var t=this;return new Promise((function(e){var n=new PIXI.Sprite(de.Handle.getViewerResource("bg_03.png").texture);n.x=Ft.w,t.mSceneRoot.addChild(n),Nt["a"].to(t.mSceneRoot,{x:-Ft.w,duration:.5}).eventCallback("onComplete",(function(){t.mSceneRoot.x=0,t.mSceneRoot.removeChild(n),e()}))}))}},{key:"goLeft",value:function(){var t=this;return new Promise((function(e){var n=new PIXI.Sprite(de.Handle.getViewerResource("bg_02.png").texture);n.x=-Ft.w,t.mSceneRoot.addChild(n),Nt["a"].to(t.mSceneRoot,{x:Ft.w,duration:.5}).eventCallback("onComplete",(function(){t.mSceneRoot.x=0,t.mSceneRoot.removeChild(n),e()}))}))}},{key:"endgame",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("%c 오답갯수 => [".concat(this.wrongCound,"]"),"border:2px red solid;"),console.log("THE END"),e=new De,this.addChild(e),t.next=6,e.start();case 6:e=null,window["currentBGM"].pause(),window["currentBGM"]=null,this.mSceneRoot.removeChildren(),this.mSceneRoot=null,this.removeChildren(),ye.Handle.nextGame();case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"currentStep",get:function(){return this.mCurrentStep},set:function(t){t>=4?this.endgame():(1==t&&this.setProgreesBar(),this.mCurrentStep=t,this.setGame(),this.mProgressBar.current=t-1)}},{key:"wrongCound",get:function(){return this.mWrongCount},set:function(t){this.mWrongCount=t}}]),n}(Se),fn=(n("a434"),n("04d3"),["bg.png","btn_red.png","btn_red_pick.png","btn_orange.png","btn_orange_pick.png","btn_yellow.png","btn_yellow_pick.png","btn_green.png","btn_green_pick.png","btn_blue.png","btn_blue_pick.png","btn_violet.png","btn_violet_pick.png","btn_gray.png","card.png"]),mn=["ac3_bgm.mp3","ac3_cardpop.mp3","ac3_correct.mp3","ac3_wrong.mp3"],gn=[],vn=[],yn={images:fn,sounds:mn,json:[],videos:gn,spine:vn},_n={images:["day1.png","day1_1_1.png","day1_1_2.png","guideLine1_1_1.png","guideLine1_1_2.png","day1_2_1.png","day1_2_2.png","day1_2_3.png","guideLine1_2_1.png","guideLine1_2_2.png","guideLine1_2_3.png","day1_complete.png"],sounds:[],json:[],videos:[],spine:[]},wn={images:["day2.png","day2_1_1.png","day2_1_2.png","guideLine2_1_1.png","guideLine2_1_2.png","day2_2_1.png","day2_2_2.png","day2_2_3.png","guideLine2_2_1.png","guideLine2_2_2.png","guideLine2_2_3.png","day2_complete.png"],sounds:[],json:[],videos:[],spine:[]},bn=[16326945,16748329,16770084,2346019,2990826,9063935],xn=["btn_red","btn_orange","btn_yellow","btn_green","btn_blue","btn_violet"],Cn=("".concat(Ft.restAPI,"viewer/paint/sounds/"),"".concat(Ft.restAPI,"viewer/paint/sounds/"),function(t){v(n,t);var e=C(n);function n(t,i){var r;return p(this,n),r=e.call(this),r.mActive,r.mBtnColor=bn[t],r.mNormalTexture=de.Handle.getViewerResource("".concat(i,".png")).texture,r.mPickTexture=de.Handle.getViewerResource("".concat(i,"_pick.png")).texture,r.mDisableTexture=de.Handle.getViewerResource("btn_gray.png").texture,r.texture=r.mNormalTexture,r.anchor.set(.5),r.mClickFlag=!1,r.on("pointerdown",(function(){r.mClickFlag=!0,r.changeTexture(!0)})),r.on("pointerup",(function(){r.mClickFlag&&r.onClick(),r.mClickFlag=!1})),r.on("pointerout",(function(){r.changeTexture(!1),r.mClickFlag=!1})),r}return m(n,[{key:"interactiveMode",value:function(t){1==this.mActive?(this.interactive=t,this.buttonMode=t,this.changeTexture(!t)):(this.interactive=!1,this.buttonMode=!1,this.texture=this.mDisableTexture)}},{key:"onClick",value:function(){}},{key:"changeTexture",value:function(t){this.texture=t?this.mPickTexture:this.mNormalTexture}},{key:"active",set:function(t){this.mActive=t,!1===t&&(this.texture=this.mDisableTexture)}},{key:"btnColor",get:function(){return this.mBtnColor}}]),n}(PIXI.Sprite)),Sn=function(t){v(n,t);var e=C(n);function n(t){var i;p(this,n),i=e.call(this),i.mType=t,i.mColorAry=[],i.mQuizStep=0;var r=new PIXI.Sprite(de.Handle.getViewerResource("bg.png").texture);return i.addChild(r),i.mSketchbook=new PIXI.Container,i.mSketchbook.position.set(Ft.w/2,Ft.h/2-30),i.addChild(i.mSketchbook),i}return m(n,[{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("intro"!=this.mType){t.next=4;break}this.createIntro(),t.next=7;break;case 4:return t.next=6,this.createWord();case 6:this.quizStep=0;case 7:return t.next=9,this.createColorBtn();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createIntro",value:function(){this.mIntroQuiz=new PIXI.Sprite(de.Handle.getProductResource("day".concat(Ft.studyDay,".png")).texture),this.mIntroQuiz.anchor.set(.5),this.mIntroQuiz.position.set(this.mSketchbook.width/2,this.mSketchbook.height/2),this.mSketchbook.addChild(this.mIntroQuiz),this.mIntroQuiz.tint=12369084}},{key:"reShuffle",value:function(t){var e=[];return e=ne([0,1,2,3,4,5]),e[0]==t?void this.reShuffle(t):e}},{key:"createWord",value:function(){var t=this;return new Promise((function(e){t.mQuizElement=[],t.mLineElement=[],t.mCorrectColor=[];for(var n=ne([0,1,2,3,4,5]),i=0;i<Ft.quizWord.length;i++){var r=he.Game.getConstantVowel(Ft.quizWord[i]),o=0;o=he.Game.getCombinationType(Ft.quizWord[i]),console.log("".concat(i,"번째 타입 type").concat(o));var a=new PIXI.Container;a.x=210*i;for(var s=0;s<r.length;s++){if(t.mCorrectColor.push(bn[n[0]]),1==n.length){var u=n[0];n.splice(0,1),n=t.reShuffle(u)}else n.splice(0,1);var c=new Ae(de.Handle.getProductResource("day".concat(Ft.studyDay,"_").concat(i+1,"_").concat(s+1,".png")).texture);t.mQuizElement.push(c);var l=new Ae(de.Handle.getProductResource("guideLine".concat(Ft.studyDay,"_").concat(i+1,"_").concat(s+1,".png")).texture);l.tint=t.mCorrectColor[s+i*(r.length-1)],t.mLineElement.push(l),a.addChild(c,l),s==r.length-1&&t.mSketchbook.addChild(a)}t.mSketchbook.position.set(Ft.w/2-t.mSketchbook.width/2,Ft.h/2-t.mSketchbook.height/2-30)}t.mSketchbook.interactive=!0,t.mSketchbook.buttonMode=!0,t.mSketchbook.on("pointertap",Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.mSketchbook.interactive=!1,e.next=3,t.clickWord();case 3:t.mSketchbook.interactive=!0;case 4:case"end":return e.stop()}}),e)})))),t.blink(),e()}))}},{key:"destroyMotion",value:function(){var t=this;return new Promise((function(e){if(t.mDelayMotion){t.mDelayMotion.kill(),t.mDelayMotion=null;var n,i=Object(Vt["a"])(t.mLineElement);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.alpha=1,r.scale.set(1)}}catch(o){i.e(o)}finally{i.f()}}e()}))}},{key:"blink",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.destroyMotion();case 2:this.mDelayMotion=Nt["a"].timeline({}),this.mDelayMotion.to(this.mLineElement[this.mQuizStep],{alpha:0,duration:.25}),this.mDelayMotion.to(this.mLineElement[this.mQuizStep],{alpha:1,duration:.25}),this.mDelayMotion.to(this.mLineElement[this.mQuizStep],{alpha:0,duration:.25}),this.mDelayMotion.to(this.mLineElement[this.mQuizStep],{alpha:1,duration:.25}),this.mDelayMotion.eventCallback("onComplete",(function(){Nt["a"].delayedCall(3,(function(){e.blink()}))}));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"clickWord",value:function(){var t=this;return new Promise((function(e){t.destroyMotion(),t.blink(),e()}))}},{key:"createColorBtn",value:function(){var t=this;return new Promise((function(e){var n=new PIXI.Container;if(se("ac3_cardpop"),"intro"==t.mType){console.log("데이터로 코드 수정 필요");var i="ㅏ",r=te(i),o="2jung_".concat(r);Nt["a"].delayedCall(1,(function(){se(o,!0)}))}for(var a=0,s=function(i){var r=new Cn(i,xn[i]);0==a&&(a=r.width/2),r.position.set(a,r.height/2),a+=r.width+40,t.mColorAry.push(r),n.addChild(r),r.alpha=0,r.active=!1,Nt["a"].to(r,{alpha:1,duration:1}).eventCallback("onComplete",(function(){Nt["a"].delayedCall(1,(function(){r.active=!0,r.interactiveMode(!0),e()}))})),r.onClick=function(){t.selectColor(r)}},u=0;u<6;u++)s(u);n.pivot.set(n.width/2,n.height/2),n.position.set(Ft.w/2,Ft.h-n.height),t.addChild(n),t.mAffordance=new en(n,!1),n.addChild(t.mAffordance),n.interactive=!0,n.hitArea=new Bt["Rectangle"](0,0,n.width,n.height),n.on("pointerup",Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.interactive=!1,!t.mAffordance){e.next=4;break}return e.next=4,t.mAffordance.resetTimer();case 4:n.interactive=!0;case 5:case"end":return e.stop()}}),e)}))))}))}},{key:"selectColor",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.setColorInteractive(!1),"intro"!=this.mType){t.next=6;break}se("ac3_correct"),Nt["a"].to(this.mIntroQuiz,{alpha:0,duration:.25}).eventCallback("onComplete",(function(){n.mIntroQuiz.tint=e.btnColor,Nt["a"].to(n.mIntroQuiz,{alpha:1,duration:.25}).repeat(4).yoyo(!0).eventCallback("onComplete",(function(){console.log("데이터로 코드 수정 필요");var t="ㅏ",e=te(t),i="2jung_".concat(e);se(i,!0),Nt["a"].delayedCall(1,(function(){n.endGame()}))}))})),t.next=20;break;case 6:if(e.btnColor!=this.mCorrectColor[this.mQuizStep]){t.next=14;break}return se("ac3_correct"),t.next=10,this.correctMotion();case 10:this.quizStep=this.mQuizStep+1,this.mQuizStep<this.mCorrectColor.length&&this.setColorInteractive(!0),t.next=20;break;case 14:return se("ac3_wrong"),console.log("오답처리"),e.active=!1,t.next=19,this.blink();case 19:this.setColorInteractive(!0);case 20:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"outro",value:function(){var t=this;se("ac3_cardpop"),this.blink=function(){return null},this.destroyMotion(),this.mAffordance.reset(),this.removeChild(this.mAffordance),this.mAffordance=null;var e,n=Object(Vt["a"])(this.mColorAry);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.interactive=!1}}catch(o){n.e(o)}finally{n.f()}var r=new Lt(Ft.w,Ft.h);r.alpha=0,this.addChild(r),Nt["a"].to(r,{alpha:.4,duration:.5}).eventCallback("onComplete",(function(){var e=new Ae(de.Handle.getViewerResource("card.png").texture);e.position.set(Ft.w/2,Ft.h/2),e.alpha=0,t.addChild(e),Nt["a"].to(e,{alpha:1,duration:.5});var n=new PIXI.Text(le(),{fontSize:350,fontFamily:"TmoneyRoundWindExtraBold"});n.pivot.set(n.width/2,n.height/2),n.position.set(-246,0);var i=new Ae(de.Handle.getProductResource("day".concat(Ft.studyDay,"_complete.png")).texture);i.position.set(188,-58);var r=new PIXI.Text(Ft.quizWord,{fontSize:100,fontFamily:"TmoneyRoundWindExtraBold"});r.anchor.set(.5),r.position.set(188,158),e.addChild(n,i,r),Nt["a"].delayedCall(1,Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:se("word_".concat(Ft.studyDay),!0);case 1:case"end":return t.stop()}}),t)})))),t.destroyMotion(),Nt["a"].delayedCall(3,Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new De,t.addChild(n),e.next=4,n.start();case 4:t.endGame();case 5:case"end":return e.stop()}}),e)}))))}))}},{key:"correctMotion",value:function(){var t=this;return new Promise((function(e){var n,i=Object(Vt["a"])(t.mColorAry);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.active=!1}}catch(o){i.e(o)}finally{i.f()}Nt["a"].to(t.mQuizElement[t.mQuizStep],{alpha:0,duration:.25}).eventCallback("onComplete",(function(){t.mQuizElement[t.mQuizStep].tint=t.mCorrectColor[t.mQuizStep],Nt["a"].to(t.mQuizElement[t.mQuizStep],{alpha:1,duration:.25}).repeat(4).yoyo(!0).eventCallback("onComplete",(function(){t.setColorInteractive(!0,"start"),e()}))}))}))}},{key:"wrongMotion",value:function(){return new Promise((function(t){Nt["a"].delayedCall(1,(function(){t()}))}))}},{key:"setColorInteractive",value:function(t,e){var n,i=Object(Vt["a"])(this.mColorAry);try{for(i.s();!(n=i.n()).done;){var r=n.value;e&&(r.active=!0),r.interactiveMode(t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"endGame",value:function(){this.removeChildren(),"intro"==this.mType?this.parent.next():(this.removeChildren(),this.parent.endGame())}},{key:"quizStep",set:function(t){console.log("현재 진행스텝".concat(t,", 총 퀴즈스텝").concat(this.mCorrectColor.length)),t>=this.mCorrectColor.length?this.outro():(this.mQuizStep=t,se("ac3_cardpop"),this.blink())}}]),n}(PIXI.Container),kn=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this,"Paint")}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye.Handle.showLoadingScreen();case 2:return t.next=4,this.loadViewerResource(yn);case 4:return t.next=6,this.loadProductResource(o["day".concat(Ft.studyDay)]);case 6:return t.next=8,ye.Handle.closeLoadingScreen();case 8:console.log(this.gamename);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.gamename),e=new Ve,this.addChild(e),t.next=5,e.intro();case 5:this.removeChild(e),n=new Audio,n.src="".concat(Ft.restAPI,"viewer/paint/sounds/ac3_bgm.mp3"),n.play(),n.loop=!0,window["currentBGM"]=n,this.removeChildren(),this.mIntroScene=new Sn("intro"),this.addChild(this.mIntroScene),this.mIntroScene.onStart();case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"next",value:function(){this.mIntroScene.removeChild(),this.mIntroScene=null,this.removeChildren(),this.mIntroScene=new Sn("game"),this.addChild(this.mIntroScene),this.mIntroScene.onStart()}},{key:"endGame",value:function(){console.log("THE END"),this.mIntroScene.removeChildren(),this.removeChildren(),ye.Handle.nextGame()}}]),n}(Se),Tn=(n("b64b"),["bg.png","bg_ch1.png","bg_ch2.png","cloud01.png","cloud02.png","card.png","side_bar.png","intro_side_bar.png"]),Rn=[],Mn=[],An=[],In={images:Tn,sounds:Rn,json:[],videos:Mn,spine:An},Pn={images:["word_1.png","1cho_t1_9.png","1cho_t4_9.png","1cho_t1_18.png","1cho_t4_18.png","2jung_t1_25.png","2jung_t4_25.png","2jung_t1_26.png","2jung_t4_26.png","3jong_at_42.png","3jong_at_45.png"],sounds:[],json:[],videos:[],spine:[]},En={images:["word_1.png"],sounds:[],json:[],videos:[],spine:[]},On=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mNormal=de.Handle.getCommonResource("btn_sound_normal.png").texture,i.mOn=de.Handle.getCommonResource("btn_sound_on.png").texture,i.mBtn=new Ae(i.mNormal,i.mOn),i.addChild(i.mBtn),i.mSound=document.createElement("audio"),i.mSound.src="".concat(Ft.restAPI,"common/sounds/").concat(t),i.mSound.onloadedmetadata=function(){i.mDuration=i.mSound.duration},i.mBtn.onClick=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i.mBtn.interactive=!1,t.next=3,i.clickSound();case 3:i.mBtn.interactive=!0;case 4:case"end":return t.stop()}}),t)}))),i.pivot.set(i.width/2,i.height/2),i}return m(n,[{key:"clickSound",value:function(){var t=this;return new Promise((function(e){t.mBtn.changeTexture(),t.mSound.play(),Nt["a"].delayedCall(t.mDuration,(function(){t.mBtn.changeTexture(),e()}))}))}}]),n}(PIXI.Container),Dn="".concat(Ft.restAPI,"viewer/partner/sounds/"),Vn=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mIndex=t,i.mCloud=new PIXI.Sprite(de.Handle.getViewerResource("cloud0".concat(t+1,".png")).texture),i.mCharacter=new PIXI.Sprite(de.Handle.getViewerResource("bg_ch".concat(t+1,".png")).texture),i.mCloud.position.set(60,i.mCharacter.height/2),i.addChild(i.mCloud,i.mCharacter),i.mCloudMotion=Nt["a"].to(i.mCloud,{y:10,duration:5}).yoyo(!0).repeat(-1),i}return m(n,[{key:"move",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Nt["a"].to(this,{y:e-10,duration:2,ease:Zt["b"].easeNone}).repeat(-1).yoyo(!0);case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"destroy",value:function(){this.move=function(){return null},this.mCharacterMotion.kill(),this.mCharacterMotion=null,this.mCloudMotion.kill(),this.mCloudMotion=null}}]),n}(PIXI.Container),Bn=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),console.log(t),i.texture=de.Handle.getCommonResource(t).texture,i.tint=0,i}return m(n,[{key:"blink",value:function(t){var e=this;this.mBlinkMotion&&(this.mBlinkMotion.kill(),this.mBlinkMotion=null),0!=t?(this.mBlinkMotion=Nt["a"].timeline({}),this.mBlinkMotion.to(this,{alpha:0,duration:.25}),this.mBlinkMotion.to(this,{tint:16777215,duration:0}),this.mBlinkMotion.to(this,{alpha:1,duration:.25}),this.mBlinkMotion.to(this,{alpha:0,duration:.25}),this.mBlinkMotion.to(this,{tint:0,duration:0}),this.mBlinkMotion.to(this,{alpha:1,duration:.25}),this.mBlinkMotion.eventCallback("onComplete",(function(){Nt["a"].delayedCall(3,(function(){e.blink(!0)}))}))):this.blink=function(){return null}}}]),n}(PIXI.Sprite),Fn=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mGameStep=0,i.mQuizSound=[],console.log(t),i.mInfo=t,i.mBg=new PIXI.Sprite(de.Handle.getCommonResource("box_shadow.png").texture),i.addChild(i.mBg),i.mFocusAry=[],i.mDeepAry=[],i.mDefaultAry=[],i.mPinkAry=[],i.mTextAry=[],i.createElement(),i.createText(),i.pivot.set(i.width/2,i.height/2),i.interactive=!0,i.buttonMode=!0,i.on("pointertap",(function(){i.onClick()})),i}return m(n,[{key:"onClick",value:function(){var t=this;if(this.mQuizSound[this.mGameStep]){if(null!==this.mDimmed)return;this.interactive=!1,this.mQuizSound[this.mGameStep].play(),Nt["a"].delayedCall(this.mQuizSound[this.mGameStep].duration,(function(){t.interactive=!0}))}}},{key:"createElement",value:function(){this.mDimmed=new Ae(de.Handle.getCommonResource("box_shadow.png").texture),this.mDimmed.tint=12369084,this.mDimmed.alpha=.5,this.mDimmed.onClick=function(){console.log("사운드 비활성화")},this.sortableChildren=!0;for(var t=0;t<Object.keys(this.mInfo).length;t++){var e=new PIXI.Sprite(de.Handle.getCommonResource("type".concat(this.mInfo[t].type,"_").concat(t+1,"deep.png")).texture),n=new PIXI.Sprite(de.Handle.getCommonResource("type".concat(this.mInfo[t].type,"_").concat(t+1,"default.png")).texture),i=new PIXI.Sprite(de.Handle.getCommonResource("type".concat(this.mInfo[t].type,"_").concat(t+1,"pink.png")).texture),r=new PIXI.Sprite(de.Handle.getCommonResource("type".concat(this.mInfo[t].type,"_focus").concat(t+1,".png")).texture);n.zIndex=0,e.zIndex=1,i.zIndex=2,r.zIndex=3,this.mDimmed.zIndex=4,e.alpha=0,i.alpha=0,r.alpha=0,this.mDefaultAry.push(n),this.mDeepAry.push(e),this.mPinkAry.push(i),this.mFocusAry.push(r),this.addChild(e,n,i,r,this.mDimmed)}}},{key:"createText",value:function(){this.mWordSound=document.createElement("audio"),this.mWordSound.src="".concat(Ft.restAPI,"common/sounds/word_").concat(Ft.studyDay,".mp3");for(var t=0;t<Object.keys(this.mInfo).length;t++){var e=null,n=document.createElement("audio");0==t&&(e=new Bn("1cho_t".concat(this.mInfo[t].type,"_").concat(te(this.mInfo[t].text),".png")),n.src="".concat(Ft.restAPI,"common/sounds/1cho_18_t1.mp3")),1==t&&(e=new Bn("2jung_t".concat(this.mInfo[t].type,"_").concat(te(this.mInfo[t].text),".png")),n.src="".concat(Ft.restAPI,"common/sounds/2jung_1.mp3")),2==t&&(e=new Bn("3jong_at_".concat(te(this.mInfo[t].text),".png")),n.src="".concat(Ft.restAPI,"common/sounds/3jong_21.mp3")),this.addChild(e),e.tint=0,e.zIndex=4,e.alpha=0,this.mTextAry.push(e),this.mQuizSound.push(n)}}},{key:"focus",value:function(){var t=this;this.removeChild(this.mDimmed),this.mDimmed=null,this.mFocusMotion&&(this.mFocusMotion.kill(),this.mFocusMotion=null),this.mFocusAry[this.mGameStep]&&(this.mFocusMotion=Nt["a"].timeline({repeat:-1,yoyo:!0}),this.mFocusMotion.to(this.mFocusAry[this.mGameStep],{alpha:1,duration:.8,ease:Zt["b"].easeNone}),Nt["a"].delayedCall(.5,(function(){t.mQuizSound[t.mGameStep]&&t.mQuizSound[t.mGameStep].play()})),this.mFocusAry[this.mGameStep]&&(this.mDeepAry[this.mGameStep].alpha=1))}},{key:"completeFocus",value:function(){this.mFocusMotion&&(this.mFocusMotion.kill(),this.mFocusMotion=null),this.mFocusAry[this.mGameStep].alpha=0,Nt["a"].to(this.mDeepAry[this.mGameStep],{alpha:1,duration:1}),Nt["a"].to(this.mTextAry[this.mGameStep],{alpha:1,duration:1}),Nt["a"].to(this.mPinkAry[this.mGameStep],{alpha:1,duration:1})}},{key:"stopFocus",value:function(){this.mDeepMotion&&(this.mDeepMotion.kill(),this.mDeepMotion=null),this.mFocusMotion&&(this.mFocusMotion.kill(),this.mFocusMotion=null);var t,e=Object(Vt["a"])(this.mDeepAry);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.alpha=1}}catch(a){e.e(a)}finally{e.f()}var i,r=Object(Vt["a"])(this.mDeepAry);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.alpha=0}}catch(a){r.e(a)}finally{r.f()}}},{key:"quizStepBlink",value:function(){for(var t=0;t<this.mTextAry.length;t++)this.mTextAry[t].blink(!1),this.mGameStep==t&&this.mTextAry[t].blink(!0)}},{key:"repeatBlink",value:function(){var t,e=Object(Vt["a"])(this.mTextAry);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.blink(!0)}}catch(i){e.e(i)}finally{e.f()}}},{key:"totalStep",get:function(){return Object.keys(this.mInfo).length}},{key:"gameStep",set:function(t){this.completeFocus(),this.mGameStep+=1}},{key:"firstSound",get:function(){return this.mQuizSound[0]}},{key:"correct",get:function(){return this.mCorrect}},{key:"introVersion",set:function(t){if(1==t){this.focus=function(){return null},this.onClick=function(){return null},this.removeChild(this.mDimmed),this.mDimmed=null;var e,n=Object(Vt["a"])(this.mDeepAry);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.alpha=1}}catch(l){n.e(l)}finally{n.f()}var r,o=Object(Vt["a"])(this.mPinkAry);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.alpha=1}}catch(l){o.e(l)}finally{o.f()}var s,u=Object(Vt["a"])(this.mTextAry);try{for(u.s();!(s=u.n()).done;){var c=s.value;c.alpha=1}}catch(l){u.e(l)}finally{u.f()}}}}]),n}(PIXI.Container),Nn=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mSyllableStep=0,i.mGameStep=0,i.mWord=t,i.mSlicedSyllable=[],i.decideType(),i.createText(),i.mSyllableGameStep=0,i}return m(n,[{key:"decideType",value:function(){var t=0;this.mGameData={};for(var e=0;e<this.mWord.length;e++)for(var n=re(this.mWord[e]),i=oe(this.mWord[e]),r=0;r<n.length;r++){var o="";0==r&&(o="1cho_t".concat(i)),1==r&&(o="2jung_t".concat(i)),2==r&&(o="3jong_at");var a={type:i,text:n[r],index:e,syllableIndex:r,syllableType:o};0==e&&(this.mGameData[r]=a,t=r),1==e&&(this.mGameData[r+n.length-1]=a,t=r+n.length),2==e&&(this.mGameData[r+t]=a)}for(var s=0;s<this.mWord.length;s++)console.log("%c ".concat(this.mWord[s],'의 타입은 "').concat(oe(this.mWord[s]),'"입니다.'),"border:2px red solid;letter-spacing:-0.1rem;font-weight:bold;")}},{key:"createText",value:function(){for(var t=[],e=[],n=[],i=0,r=0;r<Object.keys(this.mGameData).length;r++)0==this.mGameData[r].index&&(t.push(this.mGameData[r]),i=1),1==this.mGameData[r].index&&(e.push(this.mGameData[r]),i=2),2==this.mGameData[r].index&&(n.push(this.mGameData[r]),i=3);for(var o=[t,e,n],a=140,s=0;s<i;s++){var u=new Fn(o[s]);this.addChild(u),u.position.set(a,140),a+=u.width+20,this.mSlicedSyllable.push(u)}this.pivot.set(this.width/2,this.height/2)}},{key:"getStep",value:function(t){for(var e=this.mWord.length,n={},i=0;i<e;i++)n[i]=re(this.mWord[i]).length,i>=1&&(n[i]=re(this.mWord[i]+this.mWord[i-1]).length);var r=this.mSlicedSyllable[this.mSyllableStep].totalStep;if(this.mSyllableGameStep>=r&&(this.mSyllableStep+=1),this.mGameStep<=n[this.mSyllableGameStep]?this.mSyllableGameStep+=1:this.mSyllableGameStep=0,console.log("%c 현재 게임 진행 스텝 ".concat(this.mSyllableGameStep),"border:1px red solid;"),console.log("%c 현재 음절안의 게임 총 스텝 ".concat(this.mSlicedSyllable[this.mSyllableStep].totalStep),"border: 1px green solid;"),console.log("%c 현재 ".concat(this.mSyllableStep+1,"번째 음절 진행중"),"border: 1px blue solid"),this.mSlicedSyllable[this.mSyllableStep].focus(),t){var o,a=Object(Vt["a"])(this.mSlicedSyllable);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.stopFocus()}}catch(u){a.e(u)}finally{a.f()}}}},{key:"introVersion",value:function(){var t,e=this,n=Object(Vt["a"])(this.mSlicedSyllable);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.introVersion=!0}}catch(r){n.e(r)}finally{n.f()}this.mAffordance=new Ae(de.Handle.getCommonResource("hand.png").texture),this.mAffordance.position.set(this.width/2,this.height/2+50),this.mAffordance.alpha=0,this.addChild(this.mAffordance),this.mAffordance.zIndex=4,this.mAffordanceMotion=Nt["a"].timeline({repeat:-1}),this.mAffordanceMotion.to(this.mAffordance,{alpha:1,duration:.25,ease:Zt["b"].easeNone}).to(this.mAffordance,{angle:-10,duration:.25}).to(this.mAffordance,{angle:10,duration:.25}).to(this.mAffordance,{alpha:0,duration:.25,ease:Zt["b"].easeNone}).to(this.mAffordance,{angle:0,duration:1}),this.interactive=!0,this.buttonMode=!0,Nt["a"].to(this.scale,{x:.95,y:.95,duration:.5}).repeat(-1).yoyo(!0),this.hitArea=new Bt["Rectangle"](0,0,this.width,this.height),this.on("pointertap",(function(){e.interactive=!1,e.buttonMode=!1,Nt["a"].killTweensOf(e.scale),e.mAffordanceMotion&&e.mAffordanceMotion.kill(),Nt["a"].killTweensOf(e.mAffordance),e.removeChild(e.mAffordance),e.mAffordance=null,console.log("인트로 타입바디부분(단어) 클릭"),e.goGameScene()}))}},{key:"goGameScene",value:function(){var t,e=this,n=Object(Vt["a"])(this.mSlicedSyllable);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.repeatBlink=function(){return null}}}catch(r){n.e(r)}finally{n.f()}this.mAffordance=null,this.mSlicedSyllable=[],Nt["a"].to(this.scale,{x:1,y:1,duration:.5}).eventCallback("onComplete",(function(){Nt["a"].delayedCall(.5,(function(){se("word_".concat(Ft.studyDay),!0),Nt["a"].delayedCall(1.5,(function(){e.removeChildren(),e.parent.next()}))}))}))}},{key:"gameStep",set:function(t){this.mGameStep=t,this.mSlicedSyllable[this.mSyllableStep].gameStep=t}},{key:"gameData",get:function(){return this.mGameData}},{key:"currentSound",get:function(){return this.mSlicedSyllable[this.mSyllableStep].firstSound}}]),n}(PIXI.Container),Ln=function(t){v(n,t);var e=C(n);function n(t,i,r,o){var a;return p(this,n),a=e.call(this),a.mGameData=o,a.mCorrectFlag=r,a.mBg=new PIXI.Sprite(de.Handle.getCommonResource(t).texture),a.mTextSprite=new PIXI.Sprite(de.Handle.getCommonResource(i).texture),a.mBg.position.set(a.width/2,a.height/2),a.addChild(a.mBg),a.mTextSprite.tint=0,a.mTextSprite.anchor.set(.5),a.mTextSprite.position.set(a.mTextSprite.width/2,a.mTextSprite.height/2),a.addChild(a.mTextSprite),a.pivot.set(a.width/2,a.height/2),a.interactive=!0,a.buttonMode=!0,a.on("pointerup",(function(t){var e=ce(a.mBg,new PIXI.Point(t.data.global.x,t.data.global.y)).a;0!=e&&a.onClick()})),a}return m(n,[{key:"onClick",value:function(){}},{key:"disable",value:function(){this.mBg.texture=de.Handle.getCommonResource("side_type".concat(this.mGameData.type,"_dim").concat(this.mGameData.syllableIndex+1,".png")).texture,this.mTextSprite.alpha=.5}},{key:"correctFlag",get:function(){return this.mCorrectFlag}}]),n}(PIXI.Container),jn=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.texture=de.Handle.getViewerResource("side_bar.png").texture,i.mGameStep=0,i.mGameData=t,i.interactive=!0,i.on("pointerdown",(function(){console.log("resetTimer"),i.mAffordance&&i.mAffordance.resetTimer()})),i}return m(n,[{key:"createEx",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.mAffordance){t.next=5;break}return console.log(this.mAffordance),t.next=4,this.mAffordance.reset();case 4:this.mAffordance=null;case 5:for(this.removeChildren(),e=this.mGameData[this.mGameStep],n=[],this.mCorrect=new Ln("side_type".concat(e.type,"_pink").concat(e.syllableIndex+1,".png"),"".concat(e.syllableType,"_").concat(te(e.text),".png"),!0,e),0==e.syllableIndex&&(this.mCorrect.x=160+this.mCorrect.width/4),1==e.syllableIndex&&(this.mCorrect.x=160-this.mCorrect.width/4),this.mCorrect.y=Ft.h/2,this.mWrong=new Ln("side_type".concat(e.type,"_pink").concat(e.syllableIndex+1,".png"),"".concat(e.syllableType,"_").concat(te(Ft.partnerWrong[this.mGameStep]),".png"),!1,e),this.mWrong.y=Ft.h/2,n=[this.mCorrect,this.mWrong],i=ne(n),r=0;r<i.length;r++)i[r].x=173,i[r].y=Ft.h/2,o=Ft.position["type".concat(e.type)]["".concat(e.syllableIndex)],i[r].x+=o.x,i[r].y+=o.y,console.log("%c ".concat(e.type,"타입: ").concat(e.syllableIndex+1,"번째 , pos:x=>[").concat(o.x,",y=>").concat(o.y," ]"),"border:2px red solid;"),this.addChild(i[r]),a=0,a=0==r?Ft.h/2-150:Ft.h/2+150,Nt["a"].to(i[r],{y:a,duration:.5});this.registerCheck();case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"registerCheck",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.mAffordance=new en(this,!0),this.addChild(this.mAffordance),this.mCorrect.onClick=function(){e.mCorrect.onClick=function(){return null},e.wrongMotion(),console.log("정답"),se("ac4_correct"),Nt["a"].delayedCall(1,(function(){e.parent.next()}))},this.mWrong.onClick=function(){e.mWrong.onClick=function(){se("ac4_wrong")},se("ac4_wrong"),e.wrongMotion(),console.log("오답")};case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"wrongMotion",value:function(){this.mWrong.disable()}},{key:"gameStep",set:function(t){this.mGameStep=t,this.createEx()}}]),n}(PIXI.Sprite),Un=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this)}return m(n,[{key:"onStart",value:function(){this.createBg(),this.createText()}},{key:"createBg",value:function(){var t=new PIXI.Sprite(de.Handle.getViewerResource("bg.png").texture);this.addChild(t);for(var e=0;e<2;e++){var n=new Vn(e);0==e?(n.position.set(80,500),n.move(500)):(n.position.set(762,170),n.move(170)),t.addChild(n)}this.mSideBar=new PIXI.Sprite(de.Handle.getViewerResource("intro_side_bar.png").texture),this.mSideBar.position.set(Ft.w,0),t.addChild(this.mSideBar),Nt["a"].to(this.mSideBar,{x:Ft.w-this.mSideBar.width,duration:1})}},{key:"createText",value:function(){var t=new Nn(Ft.quizWord);t.position.set(Ft.w/2-this.mSideBar.width/2,Ft.h/2),this.addChild(t),t.introVersion()}},{key:"next",value:function(){this.parent.setGame()}}]),n}(PIXI.Container),Xn=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this)}return m(n,[{key:"onStart",value:function(){this.createBg(),this.createText()}},{key:"createBg",value:function(){var t=new PIXI.Sprite(de.Handle.getViewerResource("bg.png").texture);this.addChild(t);for(var e=0;e<2;e++){var n=new Vn(e);0==e?(n.position.set(80,500),n.move(500)):(n.position.set(762,170),n.move(170)),t.addChild(n)}var i=Jt("아"),r=new On("word_".concat(i,".mp3"));r.position.set(Ft.w/2-160,150),this.addChild(r)}},{key:"createText",value:function(){var t=this;this.mGameStep=0,this.mTypeBody=new Nn(Ft.quizWord),this.mTypeBody.position.set(Ft.w/2-160,Ft.h/2),this.addChild(this.mTypeBody),this.mTypeBody.getStep(),this.mGameData=this.mTypeBody.gameData,this.mSideBar=new jn(this.mGameData),this.mSideBar.position.set(Ft.w-this.mSideBar.width,0),this.addChild(this.mSideBar),this.mSideBar.createEx(),Nt["a"].delayedCall(.5,(function(){t.mTypeBody.currentSound.play()}))}},{key:"next",value:function(){this.gameStep+=1}},{key:"outro",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:se("ac4_cardpop"),this.mTypeBody.getStep(!0),e=new Lt(Ft.w,Ft.h),this.addChild(e),n=new PIXI.Sprite(de.Handle.getViewerResource("card.png").texture),n.anchor.set(.5),n.position.set(Ft.w/2,Ft.h/2),n.scale.set(0),this.addChild(n),i=new Ae(de.Handle.getCommonResource("word_".concat(Ft.studyDay,".png")).texture),i.position.set(-260,0),r=new PIXI.Text(Ft.quizWord,{fontSize:200,padding:20,fontFamily:"TmoneyRoundWindExtraBold"}),r.anchor.set(.5),r.position.set(230,0),n.addChild(i,r),Nt["a"].to(n.scale,{x:1,y:1,duration:.5}),Nt["a"].delayedCall(2,(function(){se("word_".concat(Ft.studyDay),!0),Nt["a"].delayedCall(2,(function(){o.parent.endgame()}))}));case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"gameStep",get:function(){return this.mGameStep},set:function(t){var e=this;t>=Object.keys(this.mGameData).length?(this.mTypeBody.gameStep=t,this.mTypeBody.getStep(!0),Nt["a"].delayedCall(1,(function(){console.log("게임 끝!"),e.outro()}))):(this.mGameStep=t,this.mTypeBody.gameStep=t,this.mSideBar.gameStep=this.mGameStep,this.mTypeBody.getStep())}}]),n}(PIXI.Container),zn=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this,"partner")}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye.Handle.showLoadingScreen();case 2:return t.next=4,de.Handle.loadCommonResource(a["day".concat(Ft.studyDay)]);case 4:return t.next=6,de.Handle.loadCommonResource({images:Ft.partnerNtotal});case 6:return t.next=8,de.Handle.loadViewerResource(In);case 8:return t.next=10,ye.Handle.closeLoadingScreen();case 10:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new Ve,this.addChild(e),t.next=4,e.intro();case 4:this.removeChild(e),e=null,this.mBGM=document.createElement("audio"),this.mBGM.src="".concat(Dn,"ac4_bgm.mp3"),this.mBGM.play(),this.mBGM.loop=!0,window["currentBGM"]=this.mBGM,this.mIntroScene=new Un,this.addChild(this.mIntroScene),this.mIntroScene.onStart();case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setGame",value:function(){this.removeChildren(),this.mIntroScene=null,this.mGameScene=new Xn,this.addChild(this.mGameScene),this.mGameScene.onStart()}},{key:"endgame",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new De,this.addChild(e),t.next=4,e.start();case 4:e=null,this.mBGM.pause(),this.mBGM=null,window["currentBGM"].pause(),window["currentBGM"]=null,this.removeChildren(),ye.Handle.nextGame();case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(Se),Gn=(n("fb6a"),["1_cha_1.png","1_cha_2.png","1_cha_3.png","2_cha_1.png","2_cha_2.png","2_cha_3.png","bg_1.png","bg_2.png","bg_3.png","cha_btn_img.png","cha_btn_normal.png","cha_btn_down.png","cha_btn_img_1.png","fast_btn_img.png","fast_btn_normal.png","fast_btn_down.png","next_btn.png","progress_bar.png","robo_btn_img.png","robo_btn_normal.png","robo_btn_down.png","slow_btn_img.png","slow_btn_down.png","slow_btn_normal.png","speaker_down.png","speaker_normal.png","speech_bubble.png","big_box.png","small_box.png","my_voice.png","robot_voice.png","fast_voice.png","slow_voice.png","voice_place.png"]),Wn=["ac6_script_1.mp3","ac6_script_2.mp3","ac6_script_3.mp3","ac6_script_4.mp3","ac6_script_5.mp3","ac6_script_6.mp3","ac6_script_7.mp3","ac6_script_8.mp3","ac6_script_10.mp3"],qn=[],Hn=["01_baru.json","02_baru.json"],Yn={images:Gn,sounds:Wn,json:[],videos:qn,spine:Hn},Qn={images:["word_1.png","word_2.png","word_3.png"],sounds:[],json:[],videos:[],spine:[]},Zn={images:[],sounds:[],json:[],videos:[],spine:[]};const $n="14.7.77";var Kn=n("04d1");const Jn=()=>new DOMException("","AbortError"),ti=t=>(e,n,[i,r,o],a)=>{t(e[r],[n,i,o],t=>t[0]===n&&t[1]===i,a)},ei=t=>(e,n,i)=>{const r=[];for(let t=0;t<i.numberOfInputs;t+=1)r.push(new Set);t.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},ni=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},ii=new WeakSet,ri=new WeakMap,oi=new WeakMap,ai=new WeakMap,si=new WeakMap,ui=new WeakMap,ci=new WeakMap,li=new WeakMap,hi=new WeakMap,di=new WeakMap,pi={construct(){return pi}},fi=t=>{try{const e=new Proxy(t,pi);new e}catch{return!1}return!0},mi=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,gi=(t,e)=>{const n=[];let i=t.replace(/^[\s]+/,""),r=i.match(mi);while(null!==r){const t=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(o),i=i.slice(r[0].length).replace(/^[\s]+/,""),r=i.match(mi)}return[n.join(";"),i]},vi=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},yi=t=>{if(!fi(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!==typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},_i=(t,e,n,i,r,o,a,s,u,c,l,h)=>(d,p,f={credentials:"omit"})=>{const m=o(d);if(void 0!==m.audioWorklet)return Promise.all([r(p),Promise.resolve(t(l,l))]).then(([[t,e],n])=>{const[i,r]=gi(t,e),o=n?r:r.replace(/\s+extends\s+AudioWorkletProcessor\s*{/," extends (class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}){"),u=n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));",c=n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));",l=`${i};(registerProcessor=>{${o}\n})((n,p)=>registerProcessor(n,class extends p{${u}process(i,o,p){${c}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}))`,h=new Blob([l],{type:"application/javascript; charset=utf-8"}),d=URL.createObjectURL(h);return m.audioWorklet.addModule(d,f).then(()=>{if(s(m))return;const t=a(m);return t.audioWorklet.addModule(d,f)}).finally(()=>URL.revokeObjectURL(d))});const g=c.get(d);if(void 0!==g&&g.has(p))return Promise.resolve();const v=u.get(d);if(void 0!==v){const t=v.get(p);if(void 0!==t)return t}const y=r(p).then(([t,e])=>{const[i,r]=gi(t,e),o=`${i};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${r}\n})})(window,'_AWGS')`;return n(o)}).then(()=>{const t=h._AWGS.pop();if(void 0===t)throw new SyntaxError;i(m.currentTime,m.sampleRate,()=>t(class{},void 0,(t,n)=>{if(""===t.trim())throw e();const i=hi.get(m);if(void 0!==i){if(i.has(t))throw e();yi(n),vi(n.parameterDescriptors),i.set(t,n)}else yi(n),vi(n.parameterDescriptors),hi.set(m,new Map([[t,n]]))},m.sampleRate,void 0,void 0))});return void 0===v?u.set(d,new Map([[p,y]])):v.set(p,y),y.then(()=>{const t=c.get(d);void 0===t?c.set(d,new Set([p])):t.add(p)}).finally(()=>{const t=u.get(d);void 0!==t&&t.delete(p)}),y},wi=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},bi=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[i]=n;return t.delete(i),i},xi=(t,e,n,i)=>{const r=wi(t,e),o=bi(r,t=>t[0]===n&&t[1]===i);return 0===r.size&&t.delete(e),o},Ci=t=>wi(ci,t),Si=t=>{if(ii.has(t))throw new Error("The AudioNode is already stored.");ii.add(t),Ci(t).forEach(t=>t(!0))},ki=t=>"port"in t,Ti=t=>{if(!ii.has(t))throw new Error("The AudioNode is not stored.");ii.delete(t),Ci(t).forEach(t=>t(!1))},Ri=(t,e)=>{!ki(t)&&e.every(t=>0===t.size)&&Ti(t)},Mi=(t,e,n,i,r,o,a,s,u,c,l,h,d)=>{const p=new WeakMap;return(f,m,g,v,y)=>{const{activeInputs:_,passiveInputs:w}=o(m),{outputs:b}=o(f),x=s(f),C=o=>{const s=u(m),c=u(f);if(o){const e=xi(w,f,g,v);t(_,f,e,!1),y||h(f)||n(c,s,g,v),d(m)&&Si(m)}else{const t=i(_,f,g,v);e(w,v,t,!1),y||h(f)||r(c,s,g,v);const n=a(m);if(0===n)l(m)&&Ri(m,_);else{const t=p.get(m);void 0!==t&&clearTimeout(t),p.set(m,setTimeout(()=>{l(m)&&Ri(m,_)},1e3*n))}}};return!!c(b,[m,g,v],t=>t[0]===m&&t[1]===g&&t[2]===v,!0)&&(x.add(C),l(f)?t(_,f,[g,v,C],!0):e(w,v,[f,g,C],!0),!0)}},Ai=t=>(e,n,[i,r,o],a)=>{const s=e.get(i);void 0===s?e.set(i,new Set([[r,n,o]])):t(s,[r,n,o],t=>t[0]===r&&t[1]===n,a)},Ii=t=>(e,n)=>{const i=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(e.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(i),i.disconnect()};n.addEventListener("ended",r)},Pi=t=>(e,n)=>{t(e).add(n)},Ei={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Oi=(t,e,n,i,r,o)=>class extends t{constructor(t,n){const a=r(t),s={...Ei,...n},u=i(a,s),c=o(a)?e():null;super(t,!1,u,c),this._nativeAnalyserNode=u}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}},Di=(t,e)=>t.context===e,Vi=(t,e,n)=>()=>{const i=new WeakMap,r=async(r,o,a)=>{let s=e(r);const u=Di(s,o);if(!u){const e={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,fftSize:s.fftSize,maxDecibels:s.maxDecibels,minDecibels:s.minDecibels,smoothingTimeConstant:s.smoothingTimeConstant};s=t(o,e)}return i.set(o,s),await n(r,o,s,a),s};return{render(t,e,n){const o=i.get(e);return void 0!==o?Promise.resolve(o):r(t,e,n)}}},Bi=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Fi=()=>new DOMException("","IndexSizeError"),Ni=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(i){if(12===i.code)throw Fi();throw i}})(t.getChannelData)},Li={numberOfChannels:1},ji=(t,e,n,i,r,o,a,s)=>{let u=null;return class c{constructor(c){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:l,numberOfChannels:h,sampleRate:d}={...Li,...c};null===u&&(u=new r(1,1,44100));const p=null!==i&&e(o,o)?new i({length:l,numberOfChannels:h,sampleRate:d}):u.createBuffer(h,l,d);if(0===p.numberOfChannels)throw n();return"function"!==typeof p.copyFromChannel?(a(p),Ni(p)):e(Bi,()=>Bi(p))||s(p),t.add(p),p}static[Symbol.hasInstance](e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===c.prototype||t.has(e)}}},Ui=-34028234663852886e22,Xi=-Ui,zi=t=>ii.has(t),Gi={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Wi=(t,e,n,i,r,o,a,s)=>class extends t{constructor(t,i){const s=o(t),u={...Gi,...i},c=r(s,u),l=a(s),h=l?e():null;super(t,!1,c,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==u.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,l,c.playbackRate,Xi,Ui)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"===typeof t?s(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){Si(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),zi(this)&&Ti(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}},qi=(t,e,n,i,r)=>()=>{const o=new WeakMap;let a=null,s=null;const u=async(u,c,l)=>{let h=n(u);const d=Di(h,c);if(!d){const t={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(c,t),null!==a&&h.start(...a),null!==s&&h.stop(s)}return o.set(c,h),d?await t(c,u.playbackRate,h.playbackRate,l):await i(c,u.playbackRate,h.playbackRate,l),await r(u,c,h,l),h};return{set start(t){a=t},set stop(t){s=t},render(t,e,n){const i=o.get(e);return void 0!==i?Promise.resolve(i):u(t,e,n)}}},Hi=t=>"playbackRate"in t,Yi=t=>"frequency"in t&&"gain"in t,Qi=t=>"offset"in t,Zi=t=>!("frequency"in t)&&"gain"in t,$i=t=>"detune"in t&&"frequency"in t,Ki=t=>"pan"in t,Ji=t=>wi(ri,t),tr=t=>wi(ai,t),er=(t,e)=>{const{activeInputs:n}=Ji(t);n.forEach(n=>n.forEach(([n])=>{e.includes(t)||er(n,[...e,t])}));const i=Hi(t)?[t.playbackRate]:ki(t)?Array.from(t.parameters.values()):Yi(t)?[t.Q,t.detune,t.frequency,t.gain]:Qi(t)?[t.offset]:Zi(t)?[t.gain]:$i(t)?[t.detune,t.frequency]:Ki(t)?[t.pan]:[];for(const r of i){const t=tr(r);void 0!==t&&t.activeInputs.forEach(([t])=>er(t,e))}zi(t)&&Ti(t)},nr=t=>{er(t.destination,[])},ir=t=>void 0===t||"number"===typeof t||"string"===typeof t&&("balanced"===t||"interactive"===t||"playback"===t),rr=(t,e,n,i,r,o,a,s,u)=>class extends t{constructor(t={}){if(null===u)throw new Error("Missing the native AudioContext constructor.");const e=new u(t);if(null===e)throw i();if(!ir(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:r}=t,{sampleRate:o}=e;if(this._baseLatency="number"===typeof e.baseLatency?e.baseLatency:"balanced"===r?512/o:"interactive"===r||void 0===r?256/o:"playback"===r?1024/o:128*Math.max(2,Math.min(128,Math.round(r*o/128)))/o,this._nativeAudioContext=e,"webkitAudioContext"===u.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),nr(this)}))}createMediaElementSource(t){return new r(this,{mediaElement:t})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(t){return new a(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new s(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw e();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw e();throw t})}},or=(t,e,n,i,r,o,a,s)=>class extends t{constructor(t,n){const i=o(t),u=a(i),c=r(i,n,u),l=u?e(s):null;super(t,!1,c,l),this._isNodeOfNativeOfflineAudioContext=u,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},ar=t=>{let e=null;const n=async(e,n,i)=>{const r=n.destination;return await t(e,n,r,i),r};return{render(t,i,r){return null===e&&(e=n(t,i,r)),e}}},sr=(t,e,n,i,r)=>(o,a)=>{const s=a.listener,u=()=>{const u=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),c=r(a),l=i(a,256,9,0),h=(e,i)=>{const r=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:i});return r.connect(u,0,e),r.start(),Object.defineProperty(r.offset,"defaultValue",{get(){return i}}),t({context:o},c,r.offset,Xi,Ui)};let d=[0,0,-1,0,1,0],p=[0,0,0];return l.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0],t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];e.some((t,e)=>t!==d[e])&&(s.setOrientation(...e),d=e);const n=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];n.some((t,e)=>t!==p[e])&&(s.setPosition(...n),p=n)},u.connect(l),{forwardX:h(0,0),forwardY:h(1,0),forwardZ:h(2,-1),positionX:h(6,0),positionY:h(7,0),positionZ:h(8,0),upX:h(3,0),upY:h(4,1),upZ:h(5,0)}},{forwardX:c,forwardY:l,forwardZ:h,positionX:d,positionY:p,positionZ:f,upX:m,upY:g,upZ:v}=void 0===s.forwardX?u():s;return{get forwardX(){return c},get forwardY(){return l},get forwardZ(){return h},get positionX(){return d},get positionY(){return p},get positionZ(){return f},get upX(){return m},get upY(){return g},get upZ(){return v}}},ur=t=>"context"in t,cr=t=>ur(t[0]),lr=(t,e,n,i)=>{for(const r of t)if(n(r)){if(i)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},hr=(t,e,[n,i],r)=>{lr(t,[e,n,i],t=>t[0]===e&&t[1]===n,r)},dr=(t,[e,n,i],r)=>{const o=t.get(e);void 0===o?t.set(e,new Set([[n,i]])):lr(o,[n,i],t=>t[0]===n,r)},pr=t=>"inputs"in t,fr=(t,e,n,i)=>{if(pr(e)){const r=e.inputs[i];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,i),[e,n,i]},mr=(t,e,n)=>{for(const i of t)if(i[0]===e&&i[1]===n)return t.delete(i),i;return null},gr=(t,e,n)=>bi(t,t=>t[0]===e&&t[1]===n),vr=(t,e)=>{const n=Ci(t);if(!n.delete(e))throw new Error("Missing the expected event listener.")},yr=(t,e,n)=>{const i=wi(t,e),r=bi(i,t=>t[0]===n);return 0===i.size&&t.delete(e),r},_r=(t,e,n,i)=>{pr(e)?t.disconnect(e.inputs[i],n,0):t.disconnect(e,n,i)},wr=t=>wi(oi,t),br=t=>wi(si,t),xr=t=>li.has(t),Cr=t=>!ii.has(t),Sr=t=>new Promise(e=>{const n=t.createScriptProcessor(256,1,1),i=t.createGain(),r=t.createBuffer(1,2,44100),o=r.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=r,a.loop=!0,a.connect(n).connect(t.destination),a.connect(i),a.disconnect(i),n.onaudioprocess=i=>{const r=i.inputBuffer.getChannelData(0);Array.prototype.some.call(r,t=>1===t)?e(!0):e(!1),a.stop(),n.onaudioprocess=null,a.disconnect(n),n.disconnect(t.destination)},a.start()}),kr=(t,e)=>{const n=new Map;for(const i of t)for(const t of i){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach((t,n)=>e(n,t))},Tr=t=>"context"in t,Rr=t=>{const e=new Map;t.connect=(t=>(n,i=0,r=0)=>{const o=Tr(n)?t(n,i,r):t(n,i),a=e.get(n);return void 0===a?e.set(n,[{input:r,output:i}]):a.every(t=>t.input!==r||t.output!==i)&&a.push({input:r,output:i}),o})(t.connect.bind(t)),t.disconnect=(n=>(i,r,o)=>{if(n.apply(t),void 0===i)e.clear();else if("number"===typeof i)for(const[t,n]of e){const r=n.filter(t=>t.output!==i);0===r.length?e.delete(t):e.set(t,r)}else if(e.has(i))if(void 0===r)e.delete(i);else{const t=e.get(i);if(void 0!==t){const n=t.filter(t=>t.output!==r&&(t.input!==o||void 0===o));0===n.length?e.delete(i):e.set(i,n)}}for(const[n,a]of e)a.forEach(e=>{Tr(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)})})(t.disconnect)},Mr=(t,e,n,i)=>{const{activeInputs:r,passiveInputs:o}=tr(e),{outputs:a}=Ji(t),s=Ci(t),u=a=>{const s=wr(t),u=br(e);if(a){const e=yr(o,t,n);hr(r,t,e,!1),i||xr(t)||s.connect(u,n)}else{const e=gr(r,t,n);dr(o,e,!1),i||xr(t)||s.disconnect(u,n)}};return!!lr(a,[e,n],t=>t[0]===e&&t[1]===n,!0)&&(s.add(u),zi(t)?hr(r,t,[n,u],!0):dr(o,[t,n,u],!0),!0)},Ar=(t,e,n,i)=>{const{activeInputs:r,passiveInputs:o}=Ji(e),a=mr(r[i],t,n);if(null===a){const e=xi(o,t,n,i);return[e[2],!1]}return[a[2],!0]},Ir=(t,e,n)=>{const{activeInputs:i,passiveInputs:r}=tr(e),o=mr(i,t,n);if(null===o){const e=yr(r,t,n);return[e[1],!1]}return[o[2],!0]},Pr=(t,e,n,i,r)=>{const[o,a]=Ar(t,n,i,r);if(null!==o&&(vr(t,o),!a||e||xr(t)||_r(wr(t),wr(n),i,r)),zi(n)){const{activeInputs:t}=Ji(n);Ri(n,t)}},Er=(t,e,n,i)=>{const[r,o]=Ir(t,n,i);null!==r&&(vr(t,r),!o||e||xr(t)||wr(t).disconnect(br(n),i))},Or=(t,e)=>{const n=Ji(t),i=[];for(const r of n.outputs)cr(r)?Pr(t,e,...r):Er(t,e,...r),i.push(r[0]);return n.outputs.clear(),i},Dr=(t,e,n)=>{const i=Ji(t),r=[];for(const o of i.outputs)o[1]===n&&(cr(o)?Pr(t,e,...o):Er(t,e,...o),r.push(o[0]),i.outputs.delete(o));return r},Vr=(t,e,n,i,r)=>{const o=Ji(t);return Array.from(o.outputs).filter(t=>t[0]===n&&(void 0===i||t[1]===i)&&(void 0===r||t[2]===r)).map(n=>(cr(n)?Pr(t,e,...n):Er(t,e,...n),o.outputs.delete(n),n[0]))},Br=(t,e,n,i,r,o,a,s,u,c,l,h,d,p,f)=>class extends c{constructor(e,i,r,o){super(r),this._context=e,this._nativeAudioNode=r;const a=l(e);h(a)&&!0!==n(Sr,()=>Sr(a))&&Rr(r),oi.set(this,r),ci.set(this,new Set),"closed"!==e.state&&i&&Si(this),t(this,o,r)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,s=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw r();const c=l(this._context),h=f(c);if(d(t)||p(t))throw o();if(ur(t)){const r=wr(t);try{const e=fr(this._nativeAudioNode,r,n,s),i=Cr(this);(h||i)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!i&&Cr(t)&&Si(t)}catch(v){if(12===v.code)throw o();throw v}const a=e(this,t,n,s,h);if(a){const e=u([this],t);kr(e,i(h))}return t}const m=br(t);if("playbackRate"===m.name)throw a();try{this._nativeAudioNode.connect(m,n),(h||Cr(this))&&this._nativeAudioNode.disconnect(m,n)}catch(v){if(12===v.code)throw o();throw v}const g=Mr(this,t,n,h);if(g){const e=u([this],t);kr(e,i(h))}}disconnect(t,e,n){let i;const a=l(this._context),c=f(a);if(void 0===t)i=Or(this,c);else if("number"===typeof t){if(t<0||t>=this.numberOfOutputs)throw r();i=Dr(this,c,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw r();if(ur(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw r();if(i=Vr(this,c,t,e,n),0===i.length)throw o()}for(const r of i){const t=u([this],r);kr(t,s)}}},Fr=(t,e,n,i,r,o,a,s,u,c,l,h,d)=>(p,f,m,g=null,v=null)=>{const y=new Kn["AutomationEventList"](m.defaultValue),_=f?i(y):null,w={get defaultValue(){return m.defaultValue},get maxValue(){return null===g?m.maxValue:g},get minValue(){return null===v?m.minValue:v},get value(){return m.value},set value(t){m.value=t,w.setValueAtTime(t,p.context.currentTime)},cancelAndHoldAtTime(t){if("function"===typeof m.cancelAndHoldAtTime)null===_&&y.flush(p.context.currentTime),y.add(r(t)),m.cancelAndHoldAtTime(t);else{const e=Array.from(y).pop();null===_&&y.flush(p.context.currentTime),y.add(r(t));const n=Array.from(y).pop();m.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return w},cancelScheduledValues(t){return null===_&&y.flush(p.context.currentTime),y.add(o(t)),m.cancelScheduledValues(t),w},exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===_&&y.flush(p.context.currentTime),y.add(a(t,e)),m.exponentialRampToValueAtTime(t,e),w},linearRampToValueAtTime(t,e){return null===_&&y.flush(p.context.currentTime),y.add(s(t,e)),m.linearRampToValueAtTime(t,e),w},setTargetAtTime(t,e,n){return null===_&&y.flush(p.context.currentTime),y.add(u(t,e,n)),m.setTargetAtTime(t,e,n),w},setValueAtTime(t,e){return null===_&&y.flush(p.context.currentTime),y.add(c(t,e)),m.setValueAtTime(t,e),w},setValueCurveAtTime(t,e,n){const i=t instanceof Float32Array?t:new Float32Array(t);if(null!==h&&"webkitAudioContext"===h.name){const t=e+n,r=p.context.sampleRate,o=Math.ceil(e*r),a=Math.floor(t*r),s=a-o,u=new Float32Array(s);for(let l=0;l<s;l+=1){const t=(i.length-1)/n*((o+l)/r-e),a=Math.floor(t),s=Math.ceil(t);u[l]=a===s?i[a]:(1-(t-a))*i[a]+(1-(s-t))*i[s]}null===_&&y.flush(p.context.currentTime),y.add(l(u,e,n)),m.setValueCurveAtTime(u,e,n);const c=a/r;c<t&&d(w,u[u.length-1],c),d(w,i[i.length-1],t)}else null===_&&y.flush(p.context.currentTime),y.add(l(i,e,n)),m.setValueCurveAtTime(i,e,n);return w}};return n.set(w,m),e.set(w,p),t(w,_),w},Nr=t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:i}=n;e.exponentialRampToValueAtTime(i,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:i}=n;e.linearRampToValueAtTime(i,t)}else if("setTarget"===n.type){const{startTime:t,target:i,timeConstant:r}=n;e.setTargetAtTime(i,t,r)}else if("setValue"===n.type){const{startTime:t,value:i}=n;e.setValueAtTime(i,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:i,values:r}=n;e.setValueCurveAtTime(r,i,t)}}}});class Lr{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((n,i)=>t.call(e,n,i,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const jr={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Ur=(t,e,n,i,r,o,a,s,u,c,l,h,d)=>class extends e{constructor(e,d,p){var f;const m=s(e),g=u(m),v=l({...jr,...p}),y=hi.get(m),_=null===y||void 0===y?void 0:y.get(d),w=g||"closed"!==m.state?m:null!==(f=a(m))&&void 0!==f?f:m,b=r(w,g?null:e.baseLatency,c,d,_,v),x=g?i(d,v,_):null;super(e,!0,b,x);const C=[];b.parameters.forEach((t,e)=>{const i=n(this,g,t);C.push([e,i])}),this._nativeAudioWorkletNode=b,this._onprocessorerror=null,this._parameters=new Lr(C),g&&t(m,this);const{activeInputs:S}=o(this);h(b,S)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"===typeof t?d(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Xr(t,e,n,i,r){if("function"===typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],i,r);else{const o=t.getChannelData(i);if(0===e[n].byteLength)e[n]=o.slice(r,r+128);else{const t=new Float32Array(o.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const zr=(t,e,n,i,r)=>{"function"===typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],i,r):0!==e[n].byteLength&&t.getChannelData(i).set(e[n],r)},Gr=(t,e)=>{const n=[];for(let i=0;i<t;i+=1){const t=[],r="number"===typeof e?e:e[i];for(let e=0;e<r;e+=1)t.push(new Float32Array(128));n.push(t)}return n},Wr=(t,e)=>{const n=wi(di,t),i=wr(e);return wi(n,i)},qr=async(t,e,n,i,r,o,a)=>{const s=null===e?128*Math.ceil(t.context.length/128):e.length,u=i.channelCount*i.numberOfInputs,c=r.reduce((t,e)=>t+e,0),l=0===c?null:n.createBuffer(c,s,n.sampleRate);if(void 0===o)throw new Error("Missing the processor constructor.");const h=Ji(t),d=await Wr(n,t),p=Gr(i.numberOfInputs,i.channelCount),f=Gr(i.numberOfOutputs,r),m=Array.from(t.parameters.keys()).reduce((t,e)=>({...t,[e]:new Float32Array(128)}),{});for(let v=0;v<s;v+=128){if(i.numberOfInputs>0&&null!==e)for(let t=0;t<i.numberOfInputs;t+=1)for(let n=0;n<i.channelCount;n+=1)Xr(e,p[t],n,n,v);void 0!==o.parameterDescriptors&&null!==e&&o.parameterDescriptors.forEach(({name:t},n)=>{Xr(e,m,t,u+n,v)});for(let t=0;t<i.numberOfInputs;t+=1)for(let e=0;e<r[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{const t=p.map((t,e)=>0===h.activeInputs[e].size?[]:t),e=a(v/n.sampleRate,n.sampleRate,()=>d.process(t,f,m));if(null!==l)for(let n=0,o=0;n<i.numberOfOutputs;n+=1){for(let t=0;t<r[n];t+=1)zr(l,f[n],t,o+t,v);o+=r[n]}if(!e)break}catch(g){t.dispatchEvent(new ErrorEvent("processorerror",{colno:g.colno,filename:g.filename,lineno:g.lineno,message:g.message}));break}}return l},Hr=(t,e,n,i,r,o,a,s,u,c,l,h,d,p,f,m)=>(g,v,y)=>{const _=new WeakMap;let w=null;const b=async(s,b,x)=>{let C=l(s),S=null;const k=Di(C,b),T=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(null===h){const t=T.reduce((t,e)=>t+e,0),n=r(b,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),o=[];for(let e=0;e<s.numberOfOutputs;e+=1)o.push(i(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[e]}));const c=a(b,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});c.connect=e.bind(null,o),c.disconnect=u.bind(null,o),S=[n,o,c]}else k||(C=new h(b,g));if(_.set(b,null===S?C:S[2]),null!==S){if(null===w){if(void 0===y)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const t=s.channelCount*s.numberOfInputs,e=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=t+e,u=async()=>{const u=new d(n,128*Math.ceil(s.context.length/128),b.sampleRate),c=[],l=[];for(let t=0;t<v.numberOfInputs;t+=1)c.push(a(u,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),l.push(r(u,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const h=await Promise.all(Array.from(s.parameters.values()).map(async t=>{const e=o(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await p(u,t,e.offset,x),e})),g=i(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<v.numberOfInputs;t+=1){c[t].connect(l[t]);for(let e=0;e<v.channelCount;e+=1)l[t].connect(g,e,t*v.channelCount+e)}for(const[e,n]of h.entries())n.connect(g,0,t+e),n.start(0);return g.connect(u.destination),await Promise.all(c.map(t=>f(s,u,t,x))),m(u)};w=qr(s,0===n?null:await u(),b,v,T,y,c)}const t=await w,e=n(b,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[u,l,h]=S;null!==t&&(e.buffer=t,e.start(0)),e.connect(u);for(let n=0,i=0;n<s.numberOfOutputs;n+=1){const t=l[n];for(let e=0;e<T[n];e+=1)u.connect(t,i+e,e);i+=T[n]}return h}if(k)for(const[e,n]of s.parameters.entries())await t(b,n,C.parameters.get(e),x);else for(const[t,e]of s.parameters.entries())await p(b,e,C.parameters.get(t),x);return await f(s,b,C,x),C};return{render(t,e,n){s(e,t);const i=_.get(e);return void 0!==i?Promise.resolve(i):b(t,e,n)}}},Yr=(t,e,n,i,r,o,a,s,u,c,l,h,d,p,f,m,g,v,y,_)=>class extends f{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(t,e,i){return new n({length:e,numberOfChannels:t,sampleRate:i})}createBufferSource(){return new i(this)}createChannelMerger(t=6){return new o(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new a(this,{numberOfOutputs:t})}createConstantSource(){return new s(this)}createConvolver(){return new u(this)}createDelay(t=1){return new l(this,{maxDelayTime:t})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(t,e){return new p(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new v(this,{...n,imag:e,real:t})}createStereoPanner(){return new y(this)}createWaveShaper(){return new _(this)}decodeAudioData(t,e,n){return c(this._nativeContext,t).then(t=>("function"===typeof e&&e(t),t)).catch(t=>{throw"function"===typeof n&&n(t),t})}},Qr={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Zr=(t,e,n,i,r,o,a,s)=>class extends t{constructor(t,i){const u=o(t),c={...Qr,...i},l=r(u,c),h=a(u),d=h?n():null;super(t,!1,l,d),this._Q=e(this,h,l.Q,Xi,Ui),this._detune=e(this,h,l.detune,1200*Math.log2(Xi),-1200*Math.log2(Xi)),this._frequency=e(this,h,l.frequency,t.sampleRate/2,0),this._gain=e(this,h,l.gain,40*Math.log10(Xi),Ui),this._nativeBiquadFilterNode=l,s(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(r){if(11===r.code)throw i();throw r}if(t.length!==e.length||e.length!==n.length)throw i()}},$r=(t,e,n,i,r)=>()=>{const o=new WeakMap,a=async(a,s,u)=>{let c=n(a);const l=Di(c,s);if(!l){const t={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(s,t)}return o.set(s,c),l?(await t(s,a.Q,c.Q,u),await t(s,a.detune,c.detune,u),await t(s,a.frequency,c.frequency,u),await t(s,a.gain,c.gain,u)):(await i(s,a.Q,c.Q,u),await i(s,a.detune,c.detune,u),await i(s,a.frequency,c.frequency,u),await i(s,a.gain,c.gain,u)),await r(a,s,c,u),c};return{render(t,e,n){const i=o.get(e);return void 0!==i?Promise.resolve(i):a(t,e,n)}}},Kr=(t,e)=>(n,i)=>{const r=e.get(n);if(void 0!==r)return r;const o=t.get(n);if(void 0!==o)return o;try{const r=i();return r instanceof Promise?(t.set(n,r),r.catch(()=>!1).then(i=>(t.delete(n),e.set(n,i),i))):(e.set(n,r),r)}catch{return e.set(n,!1),!1}},Jr={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},to=(t,e,n,i,r)=>class extends t{constructor(t,o){const a=i(t),s={...Jr,...o},u=n(a,s),c=r(a)?e():null;super(t,!1,u,c)}},eo=(t,e,n)=>()=>{const i=new WeakMap,r=async(r,o,a)=>{let s=e(r);const u=Di(s,o);if(!u){const e={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfInputs:s.numberOfInputs};s=t(o,e)}return i.set(o,s),await n(r,o,s,a),s};return{render(t,e,n){const o=i.get(e);return void 0!==o?Promise.resolve(o):r(t,e,n)}}},no={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},io=(t,e,n,i,r,o)=>class extends t{constructor(t,a){const s=i(t),u=o({...no,...a}),c=n(s,u),l=r(s)?e():null;super(t,!1,c,l)}},ro=(t,e,n)=>()=>{const i=new WeakMap,r=async(r,o,a)=>{let s=e(r);const u=Di(s,o);if(!u){const e={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfOutputs:s.numberOfOutputs};s=t(o,e)}return i.set(o,s),await n(r,o,s,a),s};return{render(t,e,n){const o=i.get(e);return void 0!==o?Promise.resolve(o):r(t,e,n)}}},oo=t=>(e,n,i,r)=>t(n,e,i,r),ao=t=>(e,n,i=0,r=0)=>{const o=e[i];if(void 0===o)throw t();return Tr(n)?o.connect(n,0,r):o.connect(n,0)},so=t=>(e,n)=>{const i=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return i.buffer=r,i.loop=!0,i.connect(n),i.start(),()=>{i.stop(),i.disconnect(n)}},uo={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},co=(t,e,n,i,r,o,a)=>class extends t{constructor(t,a){const s=r(t),u={...uo,...a},c=i(s,u),l=o(s),h=l?n():null;super(t,!1,c,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=c,this._offset=e(this,l,c.offset,Xi,Ui),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"===typeof t?a(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){Si(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),zi(this)&&Ti(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}},lo=(t,e,n,i,r)=>()=>{const o=new WeakMap;let a=null,s=null;const u=async(u,c,l)=>{let h=n(u);const d=Di(h,c);if(!d){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(c,t),null!==a&&h.start(a),null!==s&&h.stop(s)}return o.set(c,h),d?await t(c,u.offset,h.offset,l):await i(c,u.offset,h.offset,l),await r(u,c,h,l),h};return{set start(t){a=t},set stop(t){s=t},render(t,e,n){const i=o.get(e);return void 0!==i?Promise.resolve(i):u(t,e,n)}}},ho=t=>e=>(t[0]=e,t[0]),po={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},fo=(t,e,n,i,r,o)=>class extends t{constructor(t,a){const s=i(t),u={...po,...a},c=n(s,u),l=r(s),h=l?e():null;super(t,!1,c,h),this._isBufferNullified=!1,this._nativeConvolverNode=c,null!==u.buffer&&o(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,44100),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}},mo=(t,e,n)=>()=>{const i=new WeakMap,r=async(r,o,a)=>{let s=e(r);const u=Di(s,o);if(!u){const e={buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,disableNormalization:!s.normalize};s=t(o,e)}return i.set(o,s),pr(s)?await n(r,o,s.inputs[0],a):await n(r,o,s,a),s};return{render(t,e,n){const o=i.get(e);return void 0!==o?Promise.resolve(o):r(t,e,n)}}},go=(t,e)=>(n,i,r)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,r)}catch(o){if("SyntaxError"===o.name)throw t();throw o}},vo=()=>new DOMException("","DataCloneError"),yo=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(i=>{n.onmessage=()=>{e.close(),n.close(),i()},e.postMessage(t,[t])})},_o=(t,e,n,i,r,o,a,s,u,c,l)=>(h,d)=>{const p=a(h)?h:o(h);if(r.has(d)){const t=n();return Promise.reject(t)}try{r.add(d)}catch{}return e(u,()=>u(p))?p.decodeAudioData(d).then(n=>(e(s,()=>s(n))||l(n),t.add(n),n)):new Promise((e,n)=>{const r=async()=>{try{await yo(d)}catch{}},o=t=>{n(t),r()};try{p.decodeAudioData(d,n=>{"function"!==typeof n.copyFromChannel&&(c(n),Ni(n)),t.add(n),r().then(()=>e(n))},t=>{o(null===t?i():t)})}catch(a){o(a)}})},wo=(t,e,n,i,r,o,a,s)=>(u,c)=>{const l=e.get(u);if(void 0===l)throw new Error("Missing the expected cycle count.");const h=o(u.context),d=s(h);if(l===c){if(e.delete(u),!d&&a(u)){const e=i(u),{outputs:o}=n(u);for(const n of o)if(cr(n)){const r=i(n[0]);t(e,r,n[1],n[2])}else{const t=r(n[0]);e.connect(t,n[1])}}}else e.set(u,l-c)},bo={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},xo=(t,e,n,i,r,o,a)=>class extends t{constructor(t,s){const u=r(t),c={...bo,...s},l=i(u,c),h=o(u),d=h?n(c.maxDelayTime):null;super(t,!1,l,d),this._delayTime=e(this,h,l.delayTime),a(this,c.maxDelayTime)}get delayTime(){return this._delayTime}},Co=(t,e,n,i,r)=>o=>{const a=new WeakMap,s=async(s,u,c)=>{let l=n(s);const h=Di(l,u);if(!h){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:o};l=e(u,t)}return a.set(u,l),h?await t(u,s.delayTime,l.delayTime,c):await i(u,s.delayTime,l.delayTime,c),await r(s,u,l,c),l};return{render(t,e,n){const i=a.get(e);return void 0!==i?Promise.resolve(i):s(t,e,n)}}},So=t=>(e,n,i,r)=>t(e[r],t=>t[0]===n&&t[1]===i),ko=t=>(e,n)=>{t(e).delete(n)},To=t=>"delayTime"in t,Ro=(t,e,n)=>function i(r,o){const a=ur(o)?o:n(t,o);if(To(a))return[];if(r[0]===a)return[r];if(r.includes(a))return[];const{outputs:s}=e(a);return Array.from(s).map(t=>i([...r,a],t[0])).reduce((t,e)=>t.concat(e),[])},Mo=(t,e,n)=>{const i=e[n];if(void 0===i)throw t();return i},Ao=t=>(e,n,i,r=0)=>void 0===n?e.forEach(t=>t.disconnect()):"number"===typeof n?Mo(t,e,n).disconnect():Tr(n)?void 0===i?e.forEach(t=>t.disconnect(n)):void 0===r?Mo(t,e,i).disconnect(n,0):Mo(t,e,i).disconnect(n,0,r):void 0===i?e.forEach(t=>t.disconnect(n)):Mo(t,e,i).disconnect(n,0),Io={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Po=(t,e,n,i,r,o,a,s)=>class extends t{constructor(t,r){const u=o(t),c={...Io,...r},l=i(u,c),h=a(u),d=h?n():null;super(t,!1,l,d),this._attack=e(this,h,l.attack),this._knee=e(this,h,l.knee),this._nativeDynamicsCompressorNode=l,this._ratio=e(this,h,l.ratio),this._release=e(this,h,l.release),this._threshold=e(this,h,l.threshold),s(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Eo=(t,e,n,i,r)=>()=>{const o=new WeakMap,a=async(a,s,u)=>{let c=n(a);const l=Di(c,s);if(!l){const t={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(s,t)}return o.set(s,c),l?(await t(s,a.attack,c.attack,u),await t(s,a.knee,c.knee,u),await t(s,a.ratio,c.ratio,u),await t(s,a.release,c.release,u),await t(s,a.threshold,c.threshold,u)):(await i(s,a.attack,c.attack,u),await i(s,a.knee,c.knee,u),await i(s,a.ratio,c.ratio,u),await i(s,a.release,c.release,u),await i(s,a.threshold,c.threshold,u)),await r(a,s,c,u),c};return{render(t,e,n){const i=o.get(e);return void 0!==i?Promise.resolve(i):a(t,e,n)}}},Oo=()=>new DOMException("","EncodingError"),Do=t=>e=>new Promise((n,i)=>{if(null===t)return void i(new SyntaxError);const r=t.document.head;if(null===r)i(new SyntaxError);else{const o=t.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),s=URL.createObjectURL(a),u=t.onerror,c=()=>{t.onerror=u,URL.revokeObjectURL(s)};t.onerror=(e,n,r,o,a)=>n===s||n===t.location.href&&1===r&&1===o?(c(),i(a),!1):null!==u?u(e,n,r,o,a):void 0,o.onerror=()=>{c(),i(new SyntaxError)},o.onload=()=>{c(),n()},o.src=s,o.type="module",r.appendChild(o)}}),Vo=t=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(e,n,i){if(null!==n){let r=this._listeners.get(n);void 0===r&&(r=t(this,n),"function"===typeof n&&this._listeners.set(n,r)),this._nativeEventTarget.addEventListener(e,r,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const i=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===i?null:i,n)}},Bo=t=>(e,n,i)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return i()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}},Fo=t=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw t()},No={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Lo=(t,e,n,i,r,o)=>class extends t{constructor(t,a){const s=r(t),u={...No,...a},c=i(s,u),l=o(s),h=l?n():null;super(t,!1,c,h),this._gain=e(this,l,c.gain,Xi,Ui)}get gain(){return this._gain}},jo=(t,e,n,i,r)=>()=>{const o=new WeakMap,a=async(a,s,u)=>{let c=n(a);const l=Di(c,s);if(!l){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(s,t)}return o.set(s,c),l?await t(s,a.gain,c.gain,u):await i(s,a.gain,c.gain,u),await r(a,s,c,u),c};return{render(t,e,n){const i=o.get(e);return void 0!==i?Promise.resolve(i):a(t,e,n)}}},Uo=(t,e)=>n=>e(t,n),Xo=t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},zo=t=>e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:0},Go=t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},Wo=t=>e=>t.get(e),qo=()=>new DOMException("","InvalidStateError"),Ho=t=>e=>{const n=t.get(e);if(void 0===n)throw qo();return n},Yo=(t,e)=>n=>{let i=t.get(n);if(void 0!==i)return i;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,8e3),t.set(n,i),i},Qo=t=>e=>{const n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n},Zo=()=>new DOMException("","InvalidAccessError"),$o=t=>{t.getFrequencyResponse=(e=>(n,i,r)=>{if(n.length!==i.length||i.length!==r.length)throw Zo();return e.call(t,n,i,r)})(t.getFrequencyResponse)},Ko={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Jo=(t,e,n,i,r,o)=>class extends t{constructor(t,a){const s=i(t),u=r(s),c={...Ko,...a},l=e(s,u?null:t.baseLatency,c),h=u?n(c.feedback,c.feedforward):null;super(t,!1,l,h),$o(l),this._nativeIIRFilterNode=l,o(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}},ta=(t,e,n,i,r,o,a,s,u,c,l)=>{const h=c.length;let d=s;for(let p=0;p<h;p+=1){let s=n[0]*c[p];for(let e=1;e<r;e+=1){const i=d-e&u-1;s+=n[e]*o[i],s-=t[e]*a[i]}for(let t=r;t<i;t+=1)s+=n[t]*o[d-t&u-1];for(let n=r;n<e;n+=1)s-=t[n]*a[d-n&u-1];o[d]=c[p],a[d]=s,d=d+1&u-1,l[p]=s}return d},ea=(t,e,n,i)=>{const r=n instanceof Float64Array?n:new Float64Array(n),o=i instanceof Float64Array?i:new Float64Array(i),a=r.length,s=o.length,u=Math.min(a,s);if(1!==r[0]){for(let t=0;t<a;t+=1)o[t]/=r[0];for(let t=1;t<s;t+=1)r[t]/=r[0]}const c=32,l=new Float32Array(c),h=new Float32Array(c),d=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let f=0;f<p;f+=1){const e=t.getChannelData(f),n=d.getChannelData(f);l.fill(0),h.fill(0),ta(r,a,o,s,u,l,h,0,c,e,n)}return d},na=(t,e,n,i,r)=>(o,a)=>{const s=new WeakMap;let u=null;const c=async(c,l,h)=>{let d=null,p=e(c);const f=Di(p,l);if(void 0===l.createIIRFilter?d=t(l,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(p=l.createIIRFilter(a,o)),s.set(l,null===d?p:d),null!==d){if(null===u){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(c.context.destination.channelCount,c.context.length,l.sampleRate);u=(async()=>{await i(c,t,t.destination,h);const e=await r(t);return ea(e,l,o,a)})()}const t=await u;return d.buffer=t,d.start(0),d}return await i(c,l,p,h),p};return{render(t,e,n){const i=s.get(e);return void 0!==i?Promise.resolve(i):c(t,e,n)}}},ia=(t,e,n,i,r,o)=>a=>(s,u)=>{const c=t.get(s);if(void 0===c){if(!a&&o(s)){const t=i(s),{outputs:o}=n(s);for(const n of o)if(cr(n)){const r=i(n[0]);e(t,r,n[1],n[2])}else{const e=r(n[0]);t.disconnect(e,n[1])}}t.set(s,u)}else t.set(s,c+u)},ra=(t,e)=>n=>{const i=t.get(n);return e(i)||e(n)},oa=(t,e)=>n=>t.has(n)||e(n),aa=(t,e)=>n=>t.has(n)||e(n),sa=(t,e)=>n=>{const i=t.get(n);return e(i)||e(n)},ua=t=>e=>null!==t&&e instanceof t,ca=t=>e=>null!==t&&"function"===typeof t.AudioNode&&e instanceof t.AudioNode,la=t=>e=>null!==t&&"function"===typeof t.AudioParam&&e instanceof t.AudioParam,ha=(t,e)=>n=>t(n)||e(n),da=t=>e=>null!==t&&e instanceof t,pa=t=>null!==t&&t.isSecureContext,fa=(t,e,n,i)=>class extends t{constructor(t,r){const o=n(t),a=e(o,r);if(i(o))throw TypeError();super(t,!0,a,null),this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},ma={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ga=(t,e,n,i)=>class extends t{constructor(t,r){const o=n(t);if(i(o))throw new TypeError;const a={...ma,...r},s=e(o,a);super(t,!1,s,null),this._nativeMediaStreamAudioDestinationNode=s}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},va=(t,e,n,i)=>class extends t{constructor(t,r){const o=n(t),a=e(o,r);if(i(o))throw new TypeError;super(t,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},ya=(t,e,n)=>class extends t{constructor(t,i){const r=n(t),o=e(r,i);super(t,!0,o,null)}},_a=(t,e,n,i,r)=>class extends i{constructor(t={}){if(null===r)throw new Error("Missing the native AudioContext constructor.");const i=new r(t);if(null===i)throw n();if(!ir(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&i.sampleRate!==t.sampleRate)throw e();super(i,2);const{latencyHint:o}=t,{sampleRate:a}=i;if(this._baseLatency="number"===typeof i.baseLatency?i.baseLatency:"balanced"===o?512/a:"interactive"===o||void 0===o?256/a:"playback"===o?1024/a:128*Math.max(2,Math.min(128,Math.round(o*a/128)))/a,this._nativeAudioContext=i,"webkitAudioContext"===r.name?(this._nativeGainNode=i.createGain(),this._nativeOscillatorNode=i.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(i.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===i.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),i.removeEventListener("statechange",t)};i.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),nr(this)}))}resume(){return"suspended"===this._state?new Promise((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(e=>{if(void 0===e||15===e.code)throw t();throw e})}suspend(){return this._nativeAudioContext.suspend().catch(e=>{if(void 0===e)throw t();throw e})}},wa=(t,e,n,i,r,o)=>class extends n{constructor(n,o){super(n),this._nativeContext=n,ui.set(this,n),i(n)&&r.set(n,new Set),this._destination=new t(this,o),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"===typeof t?o(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ba=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return void 0!==n&&(n.catch(()=>{}),!0)}catch{}return!1},xa={numberOfChannels:1},Ca=(t,e,n,i,r)=>class extends i{constructor(e){const{length:i,numberOfChannels:r,sampleRate:o}={...xa,...e},a=n(r,i,o);t(ba,()=>ba(a))||a.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(a.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(a,r),this._length=i,this._nativeOfflineAudioContext=a,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(e()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,nr(this)}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}},Sa=(t,e)=>(n,i,r)=>{const o=new Set;return n.connect=(r=>(a,s=0,u=0)=>{const c=0===o.size;if(e(a))return r.call(n,a,s,u),t(o,[a,s,u],t=>t[0]===a&&t[1]===s&&t[2]===u,!0),c&&i(),a;r.call(n,a,s),t(o,[a,s],t=>t[0]===a&&t[1]===s,!0),c&&i()})(n.connect),n.disconnect=(t=>(i,a,s)=>{const u=o.size>0;if(void 0===i)t.apply(n),o.clear();else if("number"===typeof i){t.call(n,i);for(const t of o)t[1]===i&&o.delete(t)}else{e(i)?t.call(n,i,a,s):t.call(n,i,a);for(const t of o)t[0]!==i||void 0!==a&&t[1]!==a||void 0!==s&&t[2]!==s||o.delete(t)}const c=0===o.size;u&&c&&r()})(n.disconnect),n},ka=(t,e,n)=>{const i=e[n];void 0!==i&&i!==t[n]&&(t[n]=i)},Ta=(t,e)=>{ka(t,e,"channelCount"),ka(t,e,"channelCountMode"),ka(t,e,"channelInterpretation")},Ra=t=>"function"===typeof t.getFloatTimeDomainData,Ma=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const i=Math.max(n.length,t.fftSize);for(let t=0;t<i;t+=1)e[t]=.0078125*(n[t]-128);return e}},Aa=(t,e)=>(n,i)=>{const r=n.createAnalyser();if(Ta(r,i),!(i.maxDecibels>i.minDecibels))throw e();return ka(r,i,"fftSize"),ka(r,i,"maxDecibels"),ka(r,i,"minDecibels"),ka(r,i,"smoothingTimeConstant"),t(Ra,()=>Ra(r))||Ma(r),r},Ia=t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Pa=(t,e,n)=>{const i=e[n];void 0!==i&&i!==t[n].value&&(t[n].value=i)},Ea=t=>{t.start=(e=>{let n=!1;return(i=0,r=0,o)=>{if(n)throw qo();e.call(t,i,r,o),n=!0}})(t.start)},Oa=t=>{t.start=(e=>(n=0,i=0,r)=>{if("number"===typeof r&&r<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,i,r)})(t.start)},Da=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},Va=(t,e,n,i,r,o,a,s,u,c,l)=>(h,d)=>{const p=h.createBufferSource();return Ta(p,d),Pa(p,d,"playbackRate"),ka(p,d,"buffer"),ka(p,d,"loop"),ka(p,d,"loopEnd"),ka(p,d,"loopStart"),e(n,()=>n(h))||Ea(p),e(i,()=>i(h))||u(p),e(r,()=>r(h))||c(p,h),e(o,()=>o(h))||Oa(p),e(a,()=>a(h))||l(p,h),e(s,()=>s(h))||Da(p),t(h,p),p},Ba=t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,Fa=(t,e)=>(n,i,r)=>{const o=n.destination;if(o.channelCount!==i)try{o.channelCount=i}catch{}r&&"explicit"!==o.channelCountMode&&(o.channelCountMode="explicit"),0===o.maxChannelCount&&Object.defineProperty(o,"maxChannelCount",{value:i});const a=t(n,{channelCount:i,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(a,"channelCount",t=>()=>t.call(a),t=>e=>{t.call(a,e);try{o.channelCount=e}catch(n){if(e>o.maxChannelCount)throw n}}),e(a,"channelCountMode",t=>()=>t.call(a),t=>e=>{t.call(a,e),o.channelCountMode=e}),e(a,"channelInterpretation",t=>()=>t.call(a),t=>e=>{t.call(a,e),o.channelInterpretation=e}),Object.defineProperty(a,"maxChannelCount",{get:()=>o.maxChannelCount}),a.connect(o),a},Na=t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,La=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},ja=(t,e,n,i,r)=>(o,a,s,u,c,l)=>{if(null!==s)try{const e=new s(o,u,l),i=new Map;let a=null;if(Object.defineProperties(e,{channelCount:{get:()=>l.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>a,set:t=>{"function"===typeof a&&e.removeEventListener("processorerror",a),a="function"===typeof t?t:null,"function"===typeof a&&e.addEventListener("processorerror",a)}}}),e.addEventListener=(t=>(...n)=>{if("processorerror"===n[0]){const t="function"===typeof n[1]?n[1]:"object"===typeof n[1]&&null!==n[1]&&"function"===typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==t){const e=i.get(n[1]);void 0!==e?n[1]=e:(n[1]=e=>{"error"===e.type?(Object.defineProperties(e,{type:{value:"processorerror"}}),t(e)):t(new ErrorEvent(n[0],{...e}))},i.set(t,n[1]))}}return t.call(e,"error",n[1],n[2]),t.call(e,...n)})(e.addEventListener),e.removeEventListener=(t=>(...n)=>{if("processorerror"===n[0]){const t=i.get(n[1]);void 0!==t&&(i.delete(n[1]),n[1]=t)}return t.call(e,"error",n[1],n[2]),t.call(e,n[0],n[1],n[2])})(e.removeEventListener),0!==l.numberOfOutputs){const t=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(t).connect(o.destination);const i=()=>t.disconnect(),a=()=>t.connect(o.destination);return r(e,i,a)}return e}catch(h){if(11===h.code)throw i();throw h}if(void 0===c)throw i();return La(l),e(o,a,c,l)},Ua=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Xa=t=>new Promise((e,n)=>{const{port1:i,port2:r}=new MessageChannel;i.onmessage=({data:t})=>{i.close(),r.close(),e(t)},i.onmessageerror=({data:t})=>{i.close(),r.close(),n(t)},r.postMessage(t)}),za=async(t,e)=>{const n=await Xa(e);return new t(n)},Ga=(t,e,n,i)=>{let r=di.get(t);void 0===r&&(r=new WeakMap,di.set(t,r));const o=za(n,i);return r.set(e,o),o},Wa=(t,e,n,i,r,o,a,s,u,c,l,h,d)=>(p,f,m,g)=>{if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw u();const v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(t=>t<1))throw u();if(v.length!==g.numberOfOutputs)throw e();if("explicit"!==g.channelCountMode)throw u();const y=g.channelCount*g.numberOfInputs,_=v.reduce((t,e)=>t+e,0),w=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(y+w>6||_>6)throw u();const b=new MessageChannel,x=[],C=[];for(let t=0;t<g.numberOfInputs;t+=1)x.push(a(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),C.push(r(p,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const S=[];if(void 0!==m.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:i}of m.parameterDescriptors){const r=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[i]?g.parameterData[i]:void 0===t?0:t});Object.defineProperties(r.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?Xi:e},minValue:{get:()=>void 0===n?Ui:n}}),S.push(r)}const k=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+w)}),T=Ua(f,p.sampleRate),R=s(p,T,y+w,Math.max(1,_)),M=r(p,{channelCount:Math.max(1,_),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_)}),A=[];for(let t=0;t<g.numberOfOutputs;t+=1)A.push(i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[t]}));for(let t=0;t<g.numberOfInputs;t+=1){x[t].connect(C[t]);for(let e=0;e<g.channelCount;e+=1)C[t].connect(k,e,t*g.channelCount+e)}const I=new Lr(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map(({name:t},e)=>{const n=S[e];return n.connect(k,0,y+e),n.start(0),[t,n.offset]}));k.connect(R);let P=g.channelInterpretation,E=null;const O=0===g.numberOfOutputs?[R]:A,D={get bufferSize(){return T},get channelCount(){return g.channelCount},set channelCount(t){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return P},set channelInterpretation(t){for(const e of x)e.channelInterpretation=t;P=t},get context(){return R.context},get inputs(){return x},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return E},set onprocessorerror(t){"function"===typeof E&&D.removeEventListener("processorerror",E),E="function"===typeof t?t:null,"function"===typeof E&&D.addEventListener("processorerror",E)},get parameters(){return I},get port(){return b.port2},addEventListener(...t){return R.addEventListener(t[0],t[1],t[2])},connect:t.bind(null,O),disconnect:c.bind(null,O),dispatchEvent(...t){return R.dispatchEvent(t[0])},removeEventListener(...t){return R.removeEventListener(t[0],t[1],t[2])}},V=new Map;b.port1.addEventListener=(t=>(...e)=>{if("message"===e[0]){const t="function"===typeof e[1]?e[1]:"object"===typeof e[1]&&null!==e[1]&&"function"===typeof e[1].handleEvent?e[1].handleEvent:null;if(null!==t){const n=V.get(e[1]);void 0!==n?e[1]=n:(e[1]=e=>{l(p.currentTime,p.sampleRate,()=>t(e))},V.set(t,e[1]))}}return t.call(b.port1,e[0],e[1],e[2])})(b.port1.addEventListener),b.port1.removeEventListener=(t=>(...e)=>{if("message"===e[0]){const t=V.get(e[1]);void 0!==t&&(V.delete(e[1]),e[1]=t)}return t.call(b.port1,e[0],e[1],e[2])})(b.port1.removeEventListener);let B=null;Object.defineProperty(b.port1,"onmessage",{get:()=>B,set:t=>{"function"===typeof B&&b.port1.removeEventListener("message",B),B="function"===typeof t?t:null,"function"===typeof B&&(b.port1.addEventListener("message",B),b.port1.start())}}),m.prototype.port=b.port1;let F=null;const N=Ga(p,D,m,g);N.then(t=>F=t);const L=Gr(g.numberOfInputs,g.channelCount),j=Gr(g.numberOfOutputs,v),U=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce((t,{name:e})=>({...t,[e]:new Float32Array(128)}),{});let X=!0;const z=()=>{g.numberOfOutputs>0&&R.disconnect(M);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){const n=A[t];for(let i=0;i<v[t];i+=1)M.disconnect(n,e+i,i);e+=v[t]}},G=new Map;R.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==F){const i=h(D);for(let r=0;r<T;r+=128){for(let e=0;e<g.numberOfInputs;e+=1)for(let n=0;n<g.channelCount;n+=1)Xr(t,L[e],n,n,r);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach(({name:e},n)=>{Xr(t,U,e,y+n,r)});for(let t=0;t<g.numberOfInputs;t+=1)for(let e=0;e<v[t];e+=1)0===j[t][e].byteLength&&(j[t][e]=new Float32Array(128));try{const t=L.map((t,e)=>{const n=i[e];if(n.size>0)return G.set(e,T/128),t;const r=G.get(e);return void 0===r?[]:(t.every(t=>t.every(t=>0===t))&&(1===r?G.delete(e):G.set(e,r-1)),t)}),n=l(p.currentTime+r/p.sampleRate,p.sampleRate,()=>F.process(t,j,U));X=n;for(let i=0,o=0;i<g.numberOfOutputs;i+=1){for(let t=0;t<v[i];t+=1)zr(e,j[i],t,o+t,r);o+=v[i]}}catch(n){X=!1,D.dispatchEvent(new ErrorEvent("processorerror",{colno:n.colno,filename:n.filename,lineno:n.lineno,message:n.message}))}if(!X){for(let t=0;t<g.numberOfInputs;t+=1){x[t].disconnect(C[t]);for(let e=0;e<g.channelCount;e+=1)C[r].disconnect(k,e,t*g.channelCount+e)}if(void 0!==m.parameterDescriptors){const t=m.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=S[e];t.disconnect(k,0,y+e),t.stop()}}k.disconnect(R),R.onaudioprocess=null,W?z():Y();break}}}};let W=!1;const q=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),H=()=>R.connect(q).connect(p.destination),Y=()=>{R.disconnect(q),q.disconnect()},Q=()=>{if(X){Y(),g.numberOfOutputs>0&&R.connect(M);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){const n=A[t];for(let i=0;i<v[t];i+=1)M.connect(n,e+i,i);e+=v[t]}}W=!0},Z=()=>{X&&(H(),z()),W=!1};return H(),d(D,Q,Z)},qa=(t,e)=>{const n=t.createBiquadFilter();return Ta(n,e),Pa(n,e,"Q"),Pa(n,e,"detune"),Pa(n,e,"frequency"),Pa(n,e,"gain"),ka(n,e,"type"),n},Ha=(t,e)=>(n,i)=>{const r=n.createChannelMerger(i.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,r),Ta(r,i),r},Ya=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw qo()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw qo()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw qo()}})},Qa=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Ta(n,e),Ya(n),n},Za=(t,e,n,i,r)=>(o,a)=>{if(void 0===o.createConstantSource)return n(o,a);const s=o.createConstantSource();return Ta(s,a),Pa(s,a,"offset"),e(i,()=>i(o))||Oa(s),e(r,()=>r(o))||Da(s),t(o,s),s},$a=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Ka=(t,e,n,i)=>(r,{offset:o,...a})=>{const s=r.createBuffer(1,2,44100),u=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(r,{...a,gain:o}),l=s.getChannelData(0);l[0]=1,l[1]=1,u.buffer=s,u.loop=!0;const h={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return u.onended},set onended(t){u.onended=t},addEventListener(...t){return u.addEventListener(t[0],t[1],t[2])},dispatchEvent(...t){return u.dispatchEvent(t[0])},removeEventListener(...t){return u.removeEventListener(t[0],t[1],t[2])},start(t=0){u.start.call(u,t)},stop(t=0){u.stop.call(u,t)}},d=()=>u.connect(c),p=()=>u.disconnect(c);return t(r,u),i($a(h,c),d,p)},Ja=(t,e)=>(n,i)=>{const r=n.createConvolver();if(Ta(r,i),i.disableNormalization===r.normalize&&(r.normalize=!i.disableNormalization),ka(r,i,"buffer"),i.channelCount>2)throw t();if(e(r,"channelCount",t=>()=>t.call(r),e=>n=>{if(n>2)throw t();return e.call(r,n)}),"max"===i.channelCountMode)throw t();return e(r,"channelCountMode",t=>()=>t.call(r),e=>n=>{if("max"===n)throw t();return e.call(r,n)}),r},ts=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Ta(n,e),Pa(n,e,"delayTime"),n},es=t=>(e,n)=>{const i=e.createDynamicsCompressor();if(Ta(i,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return Pa(i,n,"attack"),Pa(i,n,"knee"),Pa(i,n,"ratio"),Pa(i,n,"release"),Pa(i,n,"threshold"),i},ns=(t,e)=>{const n=t.createGain();return Ta(n,e),Pa(n,e,"gain"),n},is=t=>(e,n,i)=>{if(void 0===e.createIIRFilter)return t(e,n,i);const r=e.createIIRFilter(i.feedforward,i.feedback);return Ta(r,i),r};function rs(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function os(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function as(t,e){let n=[0,0];for(let i=t.length-1;i>=0;i-=1)n=os(n,e),n[0]+=t[i];return n}const ss=(t,e,n,i)=>(r,o,{channelCount:a,channelCountMode:s,channelInterpretation:u,feedback:c,feedforward:l})=>{const h=Ua(o,r.sampleRate),d=c instanceof Float64Array?c:new Float64Array(c),p=l instanceof Float64Array?l:new Float64Array(l),f=d.length,m=p.length,g=Math.min(f,m);if(0===f||f>20)throw i();if(0===d[0])throw e();if(0===m||m>20)throw i();if(0===p[0])throw e();if(1!==d[0]){for(let t=0;t<m;t+=1)p[t]/=d[0];for(let t=1;t<f;t+=1)d[t]/=d[0]}const v=n(r,h,a,a);v.channelCount=a,v.channelCountMode=s,v.channelInterpretation=u;const y=32,_=[],w=[],b=[];for(let t=0;t<a;t+=1){_.push(0);const t=new Float32Array(y),e=new Float32Array(y);t.fill(0),e.fill(0),w.push(t),b.push(e)}v.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,i=e.numberOfChannels;for(let r=0;r<i;r+=1){const t=e.getChannelData(r),i=n.getChannelData(r);_[r]=ta(d,f,p,m,g,w[r],b[r],_[r],y,t,i)}};const x=r.sampleRate/2,C={get bufferSize(){return h},get channelCount(){return v.channelCount},set channelCount(t){v.channelCount=t},get channelCountMode(){return v.channelCountMode},set channelCountMode(t){v.channelCountMode=t},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(t){v.channelInterpretation=t},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...t){return v.addEventListener(t[0],t[1],t[2])},dispatchEvent(...t){return v.dispatchEvent(t[0])},getFrequencyResponse(e,n,i){if(e.length!==n.length||n.length!==i.length)throw t();const r=e.length;for(let t=0;t<r;t+=1){const r=-Math.PI*(e[t]/x),o=[Math.cos(r),Math.sin(r)],a=as(p,o),s=as(d,o),u=rs(a,s);n[t]=Math.sqrt(u[0]*u[0]+u[1]*u[1]),i[t]=Math.atan2(u[1],u[0])}},removeEventListener(...t){return v.removeEventListener(t[0],t[1],t[2])}};return $a(C,v)},us=(t,e)=>t.createMediaElementSource(e.mediaElement),cs=(t,e)=>{const n=t.createMediaStreamDestination();return Ta(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},ls=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((t,e)=>t.id<e.id?-1:t.id>e.id?1:0);const i=n.slice(0,1),r=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(r,"mediaStream",{value:e}),r},hs=(t,e)=>(n,{mediaStreamTrack:i})=>{if("function"===typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(i);const r=new MediaStream([i]),o=n.createMediaStreamSource(r);if("audio"!==i.kind)throw t();if(e(n))throw new TypeError;return o},ds=t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,ps=(t,e,n,i,r,o)=>(a,s)=>{const u=a.createOscillator();return Ta(u,s),Pa(u,s,"detune"),Pa(u,s,"frequency"),void 0!==s.periodicWave?u.setPeriodicWave(s.periodicWave):ka(u,s,"type"),e(n,()=>n(a))||Oa(u),e(i,()=>i(a))||o(u,a),e(r,()=>r(a))||Da(u),t(a,u),u},fs=t=>(e,n)=>{const i=e.createPanner();return void 0===i.orientationX?t(e,n):(Ta(i,n),Pa(i,n,"orientationX"),Pa(i,n,"orientationY"),Pa(i,n,"orientationZ"),Pa(i,n,"positionX"),Pa(i,n,"positionY"),Pa(i,n,"positionZ"),ka(i,n,"coneInnerAngle"),ka(i,n,"coneOuterAngle"),ka(i,n,"coneOuterGain"),ka(i,n,"distanceModel"),ka(i,n,"maxDistance"),ka(i,n,"panningModel"),ka(i,n,"refDistance"),ka(i,n,"rolloffFactor"),i)},ms=(t,e,n,i,r,o,a,s,u)=>(c,{coneInnerAngle:l,coneOuterAngle:h,coneOuterGain:d,distanceModel:p,maxDistance:f,orientationX:m,orientationY:g,orientationZ:v,panningModel:y,positionX:_,positionY:w,positionZ:b,refDistance:x,rolloffFactor:C,...S})=>{const k=c.createPanner();if(S.channelCount>2)throw a();if("max"===S.channelCountMode)throw a();Ta(k,S);const T={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},R=n(c,{...T,channelInterpretation:"speakers",numberOfInputs:6}),M=i(c,{...S,gain:1}),A=i(c,{...T,gain:1}),I=i(c,{...T,gain:0}),P=i(c,{...T,gain:0}),E=i(c,{...T,gain:0}),O=i(c,{...T,gain:0}),D=i(c,{...T,gain:0}),V=r(c,256,6,1),B=o(c,{...T,curve:new Float32Array([1,1]),oversample:"none"});let F=[m,g,v],N=[_,w,b];V.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0]];e.some((t,e)=>t!==F[e])&&(k.setOrientation(...e),F=e);const n=[t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];n.some((t,e)=>t!==N[e])&&(k.setPosition(...n),N=n)},Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0});const L={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(t){if(t>2)throw a();M.channelCount=t,k.channelCount=t},get channelCountMode(){return k.channelCountMode},set channelCountMode(t){if("max"===t)throw a();M.channelCountMode=t,k.channelCountMode=t},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(t){M.channelInterpretation=t,k.channelInterpretation=t},get coneInnerAngle(){return k.coneInnerAngle},set coneInnerAngle(t){k.coneInnerAngle=t},get coneOuterAngle(){return k.coneOuterAngle},set coneOuterAngle(t){k.coneOuterAngle=t},get coneOuterGain(){return k.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();k.coneOuterGain=t},get context(){return k.context},get distanceModel(){return k.distanceModel},set distanceModel(t){k.distanceModel=t},get inputs(){return[M]},get maxDistance(){return k.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;k.maxDistance=t},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get orientationX(){return A.gain},get orientationY(){return I.gain},get orientationZ(){return P.gain},get panningModel(){return k.panningModel},set panningModel(t){k.panningModel=t},get positionX(){return E.gain},get positionY(){return O.gain},get positionZ(){return D.gain},get refDistance(){return k.refDistance},set refDistance(t){if(t<0)throw new RangeError;k.refDistance=t},get rolloffFactor(){return k.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;k.rolloffFactor=t},addEventListener(...t){return M.addEventListener(t[0],t[1],t[2])},dispatchEvent(...t){return M.dispatchEvent(t[0])},removeEventListener(...t){return M.removeEventListener(t[0],t[1],t[2])}};l!==L.coneInnerAngle&&(L.coneInnerAngle=l),h!==L.coneOuterAngle&&(L.coneOuterAngle=h),d!==L.coneOuterGain&&(L.coneOuterGain=d),p!==L.distanceModel&&(L.distanceModel=p),f!==L.maxDistance&&(L.maxDistance=f),m!==L.orientationX.value&&(L.orientationX.value=m),g!==L.orientationY.value&&(L.orientationY.value=g),v!==L.orientationZ.value&&(L.orientationZ.value=v),y!==L.panningModel&&(L.panningModel=y),_!==L.positionX.value&&(L.positionX.value=_),w!==L.positionY.value&&(L.positionY.value=w),b!==L.positionZ.value&&(L.positionZ.value=b),x!==L.refDistance&&(L.refDistance=x),C!==L.rolloffFactor&&(L.rolloffFactor=C),1===F[0]&&0===F[1]&&0===F[2]||k.setOrientation(...F),0===N[0]&&0===N[1]&&0===N[2]||k.setPosition(...N);const j=()=>{M.connect(k),t(M,B,0,0),B.connect(A).connect(R,0,0),B.connect(I).connect(R,0,1),B.connect(P).connect(R,0,2),B.connect(E).connect(R,0,3),B.connect(O).connect(R,0,4),B.connect(D).connect(R,0,5),R.connect(V).connect(c.destination)},U=()=>{M.disconnect(k),s(M,B,0,0),B.disconnect(A),A.disconnect(R),B.disconnect(I),I.disconnect(R),B.disconnect(P),P.disconnect(R),B.disconnect(E),E.disconnect(R),B.disconnect(O),O.disconnect(R),B.disconnect(D),D.disconnect(R),R.disconnect(V),V.disconnect(c.destination)};return u($a(L,k),j,U)},gs=t=>(e,{disableNormalization:n,imag:i,real:r})=>{const o=i instanceof Float32Array?i:new Float32Array(i),a=r instanceof Float32Array?r:new Float32Array(r),s=e.createPeriodicWave(a,o,{disableNormalization:n});if(Array.from(i).length<2)throw t();return s},vs=(t,e,n,i)=>t.createScriptProcessor(e,n,i),ys=(t,e)=>(n,i)=>{const r=i.channelCountMode;if("clamped-max"===r)throw e();if(void 0===n.createStereoPanner)return t(n,i);const o=n.createStereoPanner();return Ta(o,i),Pa(o,i,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>r,set:t=>{if(t!==r)throw e()}}),o},_s=(t,e,n,i,r,o)=>{const a=16385,s=new Float32Array([1,1]),u=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...c,oversample:"none"},h=(t,e,r,o)=>{const h=new Float32Array(a),d=new Float32Array(a);for(let n=0;n<a;n+=1){const t=n/(a-1)*u;h[n]=Math.cos(t),d[n]=Math.sin(t)}const p=n(t,{...c,gain:0}),f=i(t,{...l,curve:h}),m=i(t,{...l,curve:s}),g=n(t,{...c,gain:0}),v=i(t,{...l,curve:d});return{connectGraph(){e.connect(p),e.connect(void 0===m.inputs?m:m.inputs[0]),e.connect(g),m.connect(r),r.connect(void 0===f.inputs?f:f.inputs[0]),r.connect(void 0===v.inputs?v:v.inputs[0]),f.connect(p.gain),v.connect(g.gain),p.connect(o,0,0),g.connect(o,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===m.inputs?m:m.inputs[0]),e.disconnect(g),m.disconnect(r),r.disconnect(void 0===f.inputs?f:f.inputs[0]),r.disconnect(void 0===v.inputs?v:v.inputs[0]),f.disconnect(p.gain),v.disconnect(g.gain),p.disconnect(o,0,0),g.disconnect(o,0,1)}}},d=(t,r,o,h)=>{const d=new Float32Array(a),p=new Float32Array(a),f=new Float32Array(a),m=new Float32Array(a),g=Math.floor(a/2);for(let e=0;e<a;e+=1)if(e>g){const t=(e-g)/(a-1-g)*u;d[e]=Math.cos(t),p[e]=Math.sin(t),f[e]=0,m[e]=1}else{const t=e/(a-1-g)*u;d[e]=1,p[e]=0,f[e]=Math.cos(t),m[e]=Math.sin(t)}const v=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(t,{...c,gain:0}),_=i(t,{...l,curve:d}),w=n(t,{...c,gain:0}),b=i(t,{...l,curve:p}),x=i(t,{...l,curve:s}),C=n(t,{...c,gain:0}),S=i(t,{...l,curve:f}),k=n(t,{...c,gain:0}),T=i(t,{...l,curve:m});return{connectGraph(){r.connect(v),r.connect(void 0===x.inputs?x:x.inputs[0]),v.connect(y,0),v.connect(w,0),v.connect(C,1),v.connect(k,1),x.connect(o),o.connect(void 0===_.inputs?_:_.inputs[0]),o.connect(void 0===b.inputs?b:b.inputs[0]),o.connect(void 0===S.inputs?S:S.inputs[0]),o.connect(void 0===T.inputs?T:T.inputs[0]),_.connect(y.gain),b.connect(w.gain),S.connect(C.gain),T.connect(k.gain),y.connect(h,0,0),C.connect(h,0,0),w.connect(h,0,1),k.connect(h,0,1)},disconnectGraph(){r.disconnect(v),r.disconnect(void 0===x.inputs?x:x.inputs[0]),v.disconnect(y,0),v.disconnect(w,0),v.disconnect(C,1),v.disconnect(k,1),x.disconnect(o),o.disconnect(void 0===_.inputs?_:_.inputs[0]),o.disconnect(void 0===b.inputs?b:b.inputs[0]),o.disconnect(void 0===S.inputs?S:S.inputs[0]),o.disconnect(void 0===T.inputs?T:T.inputs[0]),_.disconnect(y.gain),b.disconnect(w.gain),S.disconnect(C.gain),T.disconnect(k.gain),y.disconnect(h,0,0),C.disconnect(h,0,0),w.disconnect(h,0,1),k.disconnect(h,0,1)}}},p=(t,e,n,i,o)=>{if(1===e)return h(t,n,i,o);if(2===e)return d(t,n,i,o);throw r()};return(e,{channelCount:i,channelCountMode:a,pan:s,...u})=>{if("max"===a)throw r();const c=t(e,{...u,channelCount:1,channelCountMode:a,numberOfInputs:2}),l=n(e,{...u,channelCount:i,channelCountMode:a,gain:1}),h=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let{connectGraph:d,disconnectGraph:f}=p(e,i,l,h,c);Object.defineProperty(h.gain,"defaultValue",{get:()=>0}),Object.defineProperty(h.gain,"maxValue",{get:()=>1}),Object.defineProperty(h.gain,"minValue",{get:()=>-1});const m={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){l.channelCount!==t&&(g&&f(),({connectGraph:d,disconnectGraph:f}=p(e,t,l,h,c)),g&&d()),l.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw r();l.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){l.channelInterpretation=t},get context(){return l.context},get inputs(){return[l]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get pan(){return h.gain},addEventListener(...t){return l.addEventListener(t[0],t[1],t[2])},dispatchEvent(...t){return l.dispatchEvent(t[0])},removeEventListener(...t){return l.removeEventListener(t[0],t[1],t[2])}};let g=!1;const v=()=>{d(),g=!0},y=()=>{f(),g=!1};return o($a(m,c),v,y)}},ws=(t,e,n,i,r,o,a)=>(s,u)=>{const c=s.createWaveShaper();if(null!==o&&"webkitAudioContext"===o.name&&void 0===s.createGain().gain.automationRate)return n(s,u);Ta(c,u);const l=null===u.curve||u.curve instanceof Float32Array?u.curve:new Float32Array(u.curve);if(null!==l&&l.length<2)throw e();ka(c,{curve:l},"curve"),ka(c,u,"oversample");let h=null,d=!1;a(c,"curve",t=>()=>t.call(c),e=>n=>(e.call(c,n),d&&(i(n)&&null===h?h=t(s,c):i(n)||null===h||(h(),h=null)),n));const p=()=>{d=!0,i(c.curve)&&(h=t(s,c))},f=()=>{d=!1,null!==h&&(h(),h=null)};return r(c,p,f)},bs=(t,e,n,i,r)=>(o,{curve:a,oversample:s,...u})=>{const c=o.createWaveShaper(),l=o.createWaveShaper();Ta(c,u),Ta(l,u);const h=n(o,{...u,gain:1}),d=n(o,{...u,gain:-1}),p=n(o,{...u,gain:1}),f=n(o,{...u,gain:-1});let m=null,g=!1,v=null;const y={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){h.channelCount=t,d.channelCount=t,c.channelCount=t,p.channelCount=t,l.channelCount=t,f.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){h.channelCountMode=t,d.channelCountMode=t,c.channelCountMode=t,p.channelCountMode=t,l.channelCountMode=t,f.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t,d.channelInterpretation=t,c.channelInterpretation=t,p.channelInterpretation=t,l.channelInterpretation=t,f.channelInterpretation=t},get context(){return c.context},get curve(){return v},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)c.curve=n,l.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),i=new Float32Array(t+2-t%2);e[0]=n[0],i[0]=-n[t-1];const r=Math.ceil((t+1)/2),o=(t+1)/2-1;for(let a=1;a<r;a+=1){const s=a/r*o,u=Math.floor(s),c=Math.ceil(s);e[a]=u===c?n[u]:(1-(s-u))*n[u]+(1-(c-s))*n[c],i[a]=u===c?-n[t-1-u]:-(1-(s-u))*n[t-1-u]-(1-(c-s))*n[t-1-c]}e[r]=t%2===1?n[r-1]:(n[r-2]+n[r-1])/2,c.curve=e,l.curve=i}v=n,g&&(i(v)&&null===m?m=t(o,h):null!==m&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(t){c.oversample=t,l.oversample=t},addEventListener(...t){return h.addEventListener(t[0],t[1],t[2])},dispatchEvent(...t){return h.dispatchEvent(t[0])},removeEventListener(...t){return h.removeEventListener(t[0],t[1],t[2])}};null!==a&&(y.curve=a instanceof Float32Array?a:new Float32Array(a)),s!==y.oversample&&(y.oversample=s);const _=()=>{h.connect(c).connect(p),h.connect(d).connect(l).connect(f).connect(p),g=!0,i(v)&&(m=t(o,h))},w=()=>{h.disconnect(c),c.disconnect(p),h.disconnect(d),d.disconnect(l),l.disconnect(f),f.disconnect(p),g=!1,null!==m&&(m(),m=null)};return r($a(y,p),_,w)},xs=()=>new DOMException("","NotSupportedError"),Cs={numberOfChannels:1},Ss=(t,e,n,i,r)=>class extends t{constructor(t,n,r){let o;if("number"===typeof t&&void 0!==n&&void 0!==r)o={length:n,numberOfChannels:t,sampleRate:r};else{if("object"!==typeof t)throw new Error("The given parameters are not valid.");o=t}const{length:a,numberOfChannels:s,sampleRate:u}={...Cs,...o},c=i(s,a,u);e(ba,()=>ba(c))||c.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(c.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(c,s),this._length=a,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,nr(this)}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}},ks={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Ts=(t,e,n,i,r,o,a)=>class extends t{constructor(t,a){const s=r(t),u={...ks,...a},c=n(s,u),l=o(s),h=l?i():null,d=t.sampleRate/2;super(t,!1,c,h),this._detune=e(this,l,c.detune,153600,-153600),this._frequency=e(this,l,c.frequency,d,-d),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==u.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=u.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"===typeof t?a(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){Si(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),zi(this)&&Ti(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}},Rs=(t,e,n,i,r)=>()=>{const o=new WeakMap;let a=null,s=null,u=null;const c=async(c,l,h)=>{let d=n(c);const p=Di(d,l);if(!p){const t={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===a?void 0:a,type:d.type};d=e(l,t),null!==s&&d.start(s),null!==u&&d.stop(u)}return o.set(l,d),p?(await t(l,c.detune,d.detune,h),await t(l,c.frequency,d.frequency,h)):(await i(l,c.detune,d.detune,h),await i(l,c.frequency,d.frequency,h)),await r(c,l,d,h),d};return{set periodicWave(t){a=t},set start(t){s=t},set stop(t){u=t},render(t,e,n){const i=o.get(e);return void 0!==i?Promise.resolve(i):c(t,e,n)}}},Ms={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},As=(t,e,n,i,r,o,a)=>class extends t{constructor(t,s){const u=r(t),c={...Ms,...s},l=n(u,c),h=o(u),d=h?i():null;super(t,!1,l,d),this._nativePannerNode=l,this._orientationX=e(this,h,l.orientationX,Xi,Ui),this._orientationY=e(this,h,l.orientationY,Xi,Ui),this._orientationZ=e(this,h,l.orientationZ,Xi,Ui),this._positionX=e(this,h,l.positionX,Xi,Ui),this._positionY=e(this,h,l.positionY,Xi,Ui),this._positionZ=e(this,h,l.positionZ,Xi,Ui),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}},Is=(t,e,n,i,r,o,a,s,u,c)=>()=>{const l=new WeakMap;let h=null;const d=async(d,p,f)=>{let m=null,g=o(d);const v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},y={...v,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},_=Di(g,p);if("bufferSize"in g)m=i(p,{...v,gain:1});else if(!_){const t={...y,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(p,t)}if(l.set(p,null===m?g:m),null!==m){if(null===h){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new a(6,d.context.length,p.sampleRate),i=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});i.connect(t.destination),h=(async()=>{const e=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(async(e,i)=>{const r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===i?1:0});return await s(t,e,r.offset,f),r}));for(let t=0;t<6;t+=1)e[t].connect(i,0,t),e[t].start(0);return c(t)})()}const t=await h,o=i(p,{...v,gain:1});await u(d,p,o,f);const l=[];for(let e=0;e<t.numberOfChannels;e+=1)l.push(t.getChannelData(e));let g=[l[0][0],l[1][0],l[2][0]],_=[l[3][0],l[4][0],l[5][0]],w=i(p,{...v,gain:1}),b=r(p,{...y,orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:_[0],positionY:_[1],positionZ:_[2]});o.connect(w).connect(b.inputs[0]),b.connect(m);for(let e=128;e<t.length;e+=128){const t=[l[0][e],l[1][e],l[2][e]],n=[l[3][e],l[4][e],l[5][e]];if(t.some((t,e)=>t!==g[e])||n.some((t,e)=>t!==_[e])){g=t,_=n;const a=e/p.sampleRate;w.gain.setValueAtTime(0,a),w=i(p,{...v,gain:0}),b=r(p,{...y,orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:_[0],positionY:_[1],positionZ:_[2]}),w.gain.setValueAtTime(1,a),o.connect(w).connect(b.inputs[0]),b.connect(m)}}return m}return _?(await t(p,d.orientationX,g.orientationX,f),await t(p,d.orientationY,g.orientationY,f),await t(p,d.orientationZ,g.orientationZ,f),await t(p,d.positionX,g.positionX,f),await t(p,d.positionY,g.positionY,f),await t(p,d.positionZ,g.positionZ,f)):(await s(p,d.orientationX,g.orientationX,f),await s(p,d.orientationY,g.orientationY,f),await s(p,d.orientationZ,g.orientationZ,f),await s(p,d.positionX,g.positionX,f),await s(p,d.positionY,g.positionY,f),await s(p,d.positionZ,g.positionZ,f)),pr(g)?await u(d,p,g.inputs[0],f):await u(d,p,g,f),g};return{render(t,e,n){const i=l.get(e);return void 0!==i?Promise.resolve(i):d(t,e,n)}}},Ps={disableNormalization:!1},Es=(t,e,n,i)=>class r{constructor(r,o){const a=e(r),s=i({...Ps,...o}),u=t(a,s);return n.add(u),u}static[Symbol.hasInstance](t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===r.prototype||n.has(t)}},Os=(t,e)=>(n,i,r,o)=>{const a=t(i);return a.replay(r),e(i,n,r,o)},Ds=(t,e,n)=>async(i,r,o,a)=>{const s=t(i),u=[...a,i];await Promise.all(s.activeInputs.map((t,a)=>Array.from(t).filter(([t])=>!u.includes(t)).map(async([t,s])=>{const c=e(t),l=await c.render(t,r,u),h=i.context.destination;n(t)||i===h&&n(i)||l.connect(o,s,a)})).reduce((t,e)=>[...t,...e],[]))},Vs=(t,e,n)=>async(i,r,o,a)=>{const s=e(i);await Promise.all(Array.from(s.activeInputs).map(async([e,i])=>{const s=t(e),u=await s.render(e,r,a);n(e)||u.connect(o,i)}))},Bs=(t,e,n,i)=>r=>t(ba,()=>ba(r))?Promise.resolve(t(i,i)).then(t=>{if(!t){const t=n(r,512,0,1);r.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>r.currentTime,t.connect(r.destination)}return r.startRendering()}):new Promise(t=>{const n=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(r.destination),r.startRendering()}),Fs=t=>(e,n)=>{t.set(e,n)},Ns=t=>(e,n)=>t.set(e,n),Ls=(t,e,n,i,r,o,a,s)=>{const u=[];return(c,l)=>n(c).render(c,l,u).then(()=>Promise.all(Array.from(i(l)).map(t=>n(t).render(t,l,u)))).then(()=>r(l)).then(n=>("function"!==typeof n.copyFromChannel?(a(n),Ni(n)):e(o,()=>o(n))||s(n),t.add(n),n))},js={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Us=(t,e,n,i,r,o)=>class extends t{constructor(t,a){const s=r(t),u={...js,...a},c=n(s,u),l=o(s),h=l?i():null;super(t,!1,c,h),this._pan=e(this,l,c.pan)}get pan(){return this._pan}},Xs=(t,e,n,i,r)=>()=>{const o=new WeakMap,a=async(a,s,u)=>{let c=n(a);const l=Di(c,s);if(!l){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(s,t)}return o.set(s,c),l?await t(s,a.pan,c.pan,u):await i(s,a.pan,c.pan,u),pr(c)?await r(a,s,c.inputs[0],u):await r(a,s,c,u),c};return{render(t,e,n){const i=o.get(e);return void 0!==i?Promise.resolve(i):a(t,e,n)}}},zs=t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},Gs=(t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,8e3),r=URL.createObjectURL(n);let o=!1,a=!1;try{await i.audioWorklet.addModule(r);const e=new t(i,"a",{numberOfOutputs:0}),n=i.createOscillator();e.port.onmessage=()=>o=!0,e.onprocessorerror=()=>a=!0,n.connect(e),await i.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return o&&!a},Ws=(t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),i=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(t=>{n.oncomplete=()=>{i.disconnect(),t(0!==n.currentTime)},n.startRendering()})},qs=()=>new DOMException("","UnknownError"),Hs={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Ys=(t,e,n,i,r,o,a)=>class extends t{constructor(t,e){const s=r(t),u={...Hs,...e},c=n(s,u),l=o(s),h=l?i():null;super(t,!0,c,h),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}},Qs=(t,e,n)=>()=>{const i=new WeakMap,r=async(r,o,a)=>{let s=e(r);const u=Di(s,o);if(!u){const e={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,curve:s.curve,oversample:s.oversample};s=t(o,e)}return i.set(o,s),pr(s)?await n(r,o,s.inputs[0],a):await n(r,o,s,a),s};return{render(t,e,n){const o=i.get(e);return void 0!==o?Promise.resolve(o):r(t,e,n)}}},Zs=()=>"undefined"===typeof window?null:window,$s=(t,e)=>n=>{n.copyFromChannel=(i,r,o=0)=>{const a=t(o),s=t(r);if(s>=n.numberOfChannels)throw e();const u=n.length,c=n.getChannelData(s),l=i.length;for(let t=a<0?-a:0;t+a<u&&t<l;t+=1)i[t]=c[t+a]},n.copyToChannel=(i,r,o=0)=>{const a=t(o),s=t(r);if(s>=n.numberOfChannels)throw e();const u=n.length,c=n.getChannelData(s),l=i.length;for(let t=a<0?-a:0;t+a<u&&t<l;t+=1)c[t+a]=i[t]}},Ks=t=>e=>{e.copyFromChannel=(n=>(i,r,o=0)=>{const a=t(o),s=t(r);if(a<e.length)return n.call(e,i,s,a)})(e.copyFromChannel),e.copyToChannel=(n=>(i,r,o=0)=>{const a=t(o),s=t(r);if(a<e.length)return n.call(e,i,s,a)})(e.copyToChannel)},Js=t=>(e,n)=>{const i=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=i),t(e,"buffer",t=>()=>{const n=t.call(e);return n===i?null:n},t=>n=>t.call(e,null===n?i:n))},tu=(t,e)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const r=n.createBufferSource(),o=()=>{const t=i.numberOfInputs;for(let e=0;e<t;e+=1)r.connect(i,0,e)},a=()=>r.disconnect(i);e(i,o,a)},eu=t=>{if(null===t)return!1;const e=t.length;return e%2!==0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},nu=(t,e,n,i)=>{let r=Object.getPrototypeOf(t);while(!r.hasOwnProperty(e))r=Object.getPrototypeOf(r);const{get:o,set:a}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:n(o),set:i(a)})},iu=t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),ru=t=>({...t,channelCount:t.numberOfOutputs}),ou=t=>{const{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},au=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(i){if(9!==i.code)throw i;au(t,e,n+1e-7)}},su=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},uu=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},cu=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},lu=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},hu=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},du=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},pu=t=>{t.start=(e=>(n=0,i=0,r)=>{const o=t.buffer,a=null===o?i:Math.min(o.duration,i);null!==o&&a>o.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,a,r)})(t.start)},fu=(t,e)=>{const n=e.createGain();t.connect(n);const i=(e=>()=>{e.call(t,n),t.removeEventListener("ended",i)})(t.disconnect);t.addEventListener("ended",i),$a(t,n),t.stop=(e=>{let i=!1;return(r=0)=>{if(i)try{e.call(t,r)}catch{n.gain.setValueAtTime(0,r)}else e.call(t,r),i=!0}})(t.stop)},mu=(t,e)=>n=>{const i={value:t};return Object.defineProperties(n,{currentTarget:i,target:i}),"function"===typeof e?e.call(t,n):e.handleEvent.call(t,n)},gu=ti(lr),vu=Ai(lr),yu=So(bi),_u=new WeakMap,wu=zo(_u),bu=Kr(new Map,new WeakMap),xu=Zs(),Cu=Aa(bu,Fi),Su=Xo(Ji),ku=Ds(Ji,Su,xr),Tu=Vi(Cu,wr,ku),Ru=Ho(ui),Mu=ds(xu),Au=da(Mu),Iu=new WeakMap,Pu=Vo(mu),Eu=Ba(xu),Ou=ua(Eu),Du=ca(xu),Vu=la(xu),Bu=Br(ei(ri),Mi(gu,vu,fr,yu,_r,Ji,wu,Ci,wr,lr,zi,xr,Cr),bu,ia(li,_r,Ji,wr,br,zi),Fi,Zo,xs,wo(fr,li,Ji,wr,br,Ru,zi,Au),Ro(Iu,Ji,wi),Pu,Ru,Ou,Du,Vu,Au),Fu=Oi(Bu,Tu,Fi,Cu,Ru,Au),Nu=new WeakSet,Lu=Ia(xu),ju=ho(new Uint32Array(1)),Uu=$s(ju,Fi),Xu=Ks(ju),zu=ji(Nu,bu,xs,Lu,Mu,zs(Lu),Uu,Xu),Gu=Ii(ns),Wu=Vs(Su,tr,xr),qu=oo(Wu),Hu=Va(Gu,bu,su,uu,cu,lu,hu,du,pu,Js(nu),fu),Yu=Os(Go(tr),Wu),Qu=qi(qu,Hu,wr,Yu,ku),Zu=Fr(ni(ai),Iu,si,Nr,Kn["createCancelAndHoldAutomationEvent"],Kn["createCancelScheduledValuesAutomationEvent"],Kn["createExponentialRampToValueAutomationEvent"],Kn["createLinearRampToValueAutomationEvent"],Kn["createSetTargetAutomationEvent"],Kn["createSetValueAutomationEvent"],Kn["createSetValueCurveAutomationEvent"],Eu,au),$u=Wi(Bu,Qu,Zu,qo,Hu,Ru,Au,mu),Ku=or(Bu,ar,Fi,qo,Fa(ns,nu),Ru,Au,ku),Ju=$r(qu,qa,wr,Yu,ku),tc=Ns(_u),ec=Zr(Bu,Zu,Ju,Zo,qa,Ru,Au,tc),nc=Sa(lr,Du),ic=tu(qo,nc),rc=Ha(Eu,ic),oc=eo(rc,wr,ku),ac=to(Bu,oc,rc,Ru,Au),sc=ro(Qa,wr,ku),uc=io(Bu,sc,Qa,Ru,Au,ru),cc=Ka(Gu,Hu,ns,nc),lc=Za(Gu,bu,cc,lu,du),hc=lo(qu,lc,wr,Yu,ku),dc=co(Bu,Zu,hc,lc,Ru,Au,mu),pc=Ja(xs,nu),fc=mo(pc,wr,ku),mc=fo(Bu,fc,pc,Ru,Au,tc),gc=Co(qu,ts,wr,Yu,ku),vc=xo(Bu,Zu,gc,ts,Ru,Au,tc),yc=es(xs),_c=Eo(qu,yc,wr,Yu,ku),wc=Po(Bu,Zu,_c,yc,xs,Ru,Au,tc),bc=jo(qu,ns,wr,Yu,ku),xc=Lo(Bu,Zu,bc,ns,Ru,Au),Cc=ss(Zo,qo,vs,xs),Sc=Bs(bu,ns,vs,Ws(ns,Mu)),kc=na(Hu,wr,Mu,ku,Sc),Tc=is(Cc),Rc=Jo(Bu,Tc,kc,Ru,Au,tc),Mc=sr(Zu,rc,lc,vs,Au),Ac=new WeakMap,Ic=wa(Ku,Mc,Pu,Au,Ac,mu),Pc=ps(Gu,bu,lu,hu,du,fu),Ec=Rs(qu,Pc,wr,Yu,ku),Oc=Ts(Bu,Zu,Pc,Ec,Ru,Au,mu),Dc=so(Hu),Vc=bs(Dc,qo,ns,eu,nc),Bc=ws(Dc,qo,Vc,eu,nc,Eu,nu),Fc=ms(fr,qo,rc,ns,vs,Bc,xs,_r,nc),Nc=fs(Fc),Lc=Is(qu,rc,lc,ns,Nc,wr,Mu,Yu,ku,Sc),jc=As(Bu,Zu,Nc,Lc,Ru,Au,tc),Uc=gs(Fi),Xc=Es(Uc,Ru,new WeakSet,ou),zc=_s(rc,Qa,ns,Bc,xs,nc),Gc=ys(zc,xs),Wc=Xs(qu,Gc,wr,Yu,ku),qc=Us(Bu,Zu,Gc,Wc,Ru,Au),Hc=Qs(Bc,wr,ku),Yc=Ys(Bu,qo,Bc,Hc,Ru,Au,tc),Qc=pa(xu),Zc=Bo(xu),$c=new WeakMap,Kc=Yo($c,Mu),Jc=Na(xu),tl=Qc?_i(bu,xs,Do(xu),Zc,Fo(Jn),Ru,Kc,Au,new WeakMap,new WeakMap,Gs(Jc,Mu),xu):void 0,el=ha(Ou,Au),nl=_o(Nu,bu,vo,Oo,new WeakSet,Ru,el,Bi,ba,Uu,Xu),il=Yr(tl,Fu,zu,$u,ec,ac,uc,dc,mc,nl,vc,wc,xc,Rc,Ic,Oc,jc,Xc,qc,Yc),rl=fa(Bu,us,Ru,Au),ol=ga(Bu,cs,Ru,Au),al=va(Bu,ls,Ru,Au),sl=hs(qo,Au),ul=ya(Bu,sl,Ru),cl=rr(il,qo,xs,qs,rl,ol,al,ul,Eu),ll=Qo(Ac),hl=Pi(ll),dl=ao(Fi),pl=ko(ll),fl=Ao(Fi),ml=new WeakMap,gl=Uo(ml,wi),vl=Wa(dl,Fi,qo,rc,Qa,lc,ns,vs,xs,fl,Zc,gl,nc),yl=ja(qo,vl,ns,xs,nc),_l=Hr(qu,dl,Hu,rc,Qa,lc,ns,pl,fl,Zc,wr,Jc,Mu,Yu,ku,Sc),wl=Wo($c),bl=Fs(ml),xl=Qc?Ur(hl,Bu,Zu,_l,yl,Ji,wl,Ru,Au,Jc,iu,bl,mu):void 0,Cl=(_a(qo,xs,qs,Ic,Eu),go(xs,Mu)),Sl=Ls(Nu,bu,Su,ll,Sc,Bi,Uu,Xu),kl=(Ca(bu,qo,Cl,Ic,Sl),Ss(il,bu,qo,Cl,Sl)),Tl=ra(ui,Ou),Rl=oa(oi,Du),Ml=aa(si,Vu),Al=sa(ui,Au);function Il(t,e){if(!t)throw new Error(e)}function Pl(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function El(t){t.isOffline||"running"===t.state||Vl('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Ol=console;function Dl(...t){Ol.log(...t)}function Vl(...t){Ol.warn(...t)}function Bl(t){return"undefined"===typeof t}function Fl(t){return!Bl(t)}function Nl(t){return"function"===typeof t}function Ll(t){return"number"===typeof t}function jl(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function Ul(t){return"boolean"===typeof t}function Xl(t){return Array.isArray(t)}function zl(t){return"string"===typeof t}function Gl(t){return zl(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Wl(t){return new cl(t)}function ql(t,e,n){return new kl(t,e,n)}const Hl="object"===typeof self?self:null,Yl=Hl&&(Hl.hasOwnProperty("AudioContext")||Hl.hasOwnProperty("webkitAudioContext"));function Ql(t,e,n){return Il(Fl(xl),"This node only works in a secure context (https or localhost)"),new xl(t,e,n)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Zl(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function $l(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function a(t){try{u(i.next(t))}catch(e){o(e)}}function s(t){try{u(i["throw"](t))}catch(e){o(e)}}function u(t){t.done?n(t.value):r(t.value).then(a,s)}u((i=i.apply(t,e||[])).next())}))}Object.create;Object.create;class Kl{constructor(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Jl(t){return Ml(t)}function th(t){return Rl(t)}function eh(t){return Al(t)}function nh(t){return Tl(t)}function ih(t){return t instanceof AudioBuffer}function rh(t,e){return"value"===t||Jl(e)||th(e)||ih(e)}function oh(t,...e){if(!e.length)return t;const n=e.shift();if(jl(t)&&jl(n))for(const i in n)rh(i,n[i])?t[i]=n[i]:jl(n[i])?(t[i]||Object.assign(t,{[i]:{}}),oh(t[i],n[i])):Object.assign(t,{[i]:n[i]});return oh(t,...e)}function ah(t,e){return t.length===e.length&&t.every((t,n)=>e[n]===t)}function sh(t,e,n=[],i){const r={},o=Array.from(e);if(jl(o[0])&&i&&!Reflect.has(o[0],i)){const e=Object.keys(o[0]).some(e=>Reflect.has(t,e));e||(oh(r,{[i]:o[0]}),n.splice(n.indexOf(i),1),o.shift())}if(1===o.length&&jl(o[0]))oh(r,o[0]);else for(let a=0;a<n.length;a++)Fl(o[a])&&(r[n[a]]=o[a]);return oh(t,r)}function uh(t){return t.constructor.getDefaults()}function ch(t,e){return Bl(t)?e:t}function lh(t,e){return e.forEach(e=>{Reflect.has(t,e)&&delete t[e]}),t}
/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class hh{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Hl&&this.toString()===Hl.TONE_DEBUG_CLASS)&&Dl(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}hh.version=$n;const dh=1e-6;function ph(t,e){return t>e+dh}function fh(t,e){return ph(t,e)||gh(t,e)}function mh(t,e){return t+dh<e}function gh(t,e){return Math.abs(t-e)<dh}function vh(t,e,n){return Math.max(Math.min(t,n),e)}class yh extends hh{constructor(){super(),this.name="Timeline",this._timeline=[];const t=sh(yh.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Il(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Il(fh(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(gh(this._timeline[e].time,t)){for(let n=e;n>=0;n--){if(!gh(this._timeline[n].time,t))break;e=n}this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&fh(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let n=0;const i=this._timeline.length;let r=i;if(i>0&&this._timeline[i-1][e]<=t)return i-1;while(n<r){let i=Math.floor(n+(r-n)/2);const o=this._timeline[i],a=this._timeline[i+1];if(gh(o[e],t)){for(let n=i;n<this._timeline.length;n++){const r=this._timeline[n];if(!gh(r[e],t))break;i=n}return i}if(mh(o[e],t)&&ph(a[e],t))return i;ph(o[e],t)?r=i:n=i+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let i=this._search(t),r=this._search(e);return-1!==i&&-1!==r?(this._timeline[i].time!==t&&(i+=1),this._timeline[r].time===e&&(r-=1),this._iterate(n,i,r)):-1===i&&this._iterate(n,0,r),this}forEachFrom(t,e){let n=this._search(t);while(n>=0&&this._timeline[n].time>=t)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&gh(this._timeline[n].time,t)){let i=n;for(let e=n;e>=0;e--){if(!gh(this._timeline[e].time,t))break;i=e}this._iterate(t=>{e(t)},i,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const _h=[];function wh(t){_h.push(t)}function bh(t){_h.forEach(e=>e(t))}const xh=[];function Ch(t){xh.push(t)}function Sh(t){xh.forEach(e=>e(t))}class kh extends hh{constructor(){super(...arguments),this.name="Emitter"}on(t,e){const n=t.split(/\W+/);return n.forEach(t=>{Bl(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)}),this}once(t,e){const n=(...i)=>{e(...i),this.off(t,n)};return this.on(t,n),this}off(t,e){const n=t.split(/\W+/);return n.forEach(n=>{if(Bl(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Bl(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let t=0,i=n.length;t<i;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const n=Object.getOwnPropertyDescriptor(kh.prototype,e);Object.defineProperty(t.prototype,e,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class Th extends kh{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Rh extends Th{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new yh,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=sh(Rh.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=Wl({latencyHint:t.latencyHint}),this._ticker=new Kl(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(bh(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){Il(nh(this._context),"Not available if OfflineAudioContext");const e=this._context;return e.createMediaStreamSource(t)}createMediaElementSource(t){Il(nh(this._context),"Not available if OfflineAudioContext");const e=this._context;return e.createMediaElementSource(t)}createMediaStreamDestination(){Il(nh(this._context),"Not available if OfflineAudioContext");const t=this._context;return t.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Il(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Il(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Il(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Il(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return Ql(this.rawContext,t,e)}addAudioWorkletModule(t,e){return $l(this,void 0,void 0,(function*(){Il(Fl(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)}))}workletsAreReady(){return $l(this,void 0,void 0,(function*(){const t=[];this._workletModules.forEach(e=>t.push(e)),yield Promise.all(t)}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,zl(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25;break}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return nh(this._context)?this._context.resume():Promise.resolve()}close(){return $l(this,void 0,void 0,(function*(){nh(this._context)&&(yield this._context.close()),this._initialized&&Sh(this)}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let r=0;r<n.length;r++)n[r]=t;const i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();while(this._timeouts.length&&e&&e.time<=t)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,i=()=>{const r=this.now();this._timeouts.add({callback:()=>{t(),i()},id:n,time:r+e})};return i(),n}}class Mh extends Th{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return $l(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function Ah(t,e){Xl(e)?e.forEach(e=>Ah(t,e)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Ih(t,e){Xl(e)?e.forEach(e=>Ih(t,e)):Object.defineProperty(t,e,{writable:!0})}const Ph=()=>{};class Eh extends hh{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ph;const t=sh(Eh.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&ih(t.url)||t.url instanceof Eh?this.set(t.url):zl(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:Ph,onload:Ph,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Bh().sampleRate}set(t){return t instanceof Eh?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return $l(this,void 0,void 0,(function*(){const e=Eh.load(t).then(t=>{this.set(t),this.onload(this)});Eh.downloads.push(e);try{yield e}finally{const t=Eh.downloads.indexOf(e);Eh.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Xl(t)&&t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,r=Bh(),o=r.createBuffer(n,i,r.sampleRate),a=e||1!==n?t:[t];for(let s=0;s<n;s++)o.copyToChannel(a[s],s);return this._buffer=o,this}toMono(t){if(Ll(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map(t=>t/e),this.fromArray(t)}return this}toArray(t){if(Ll(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){const n=Math.floor(t*this.sampleRate),i=Math.floor(e*this.sampleRate);Il(n<i,"The start time must be less than the end time");const r=i-n,o=Bh().createBuffer(this.numberOfChannels,r,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(n,i),a);return new Eh(o)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new Eh).fromArray(t)}static fromUrl(t){return $l(this,void 0,void 0,(function*(){const e=new Eh;return yield e.load(t)}))}static load(t){return $l(this,void 0,void 0,(function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let i=n[0];for(const t of n)if(Eh.supportsType(t)){i=t;break}t=t.replace(e[0],i)}const n=""===Eh.baseUrl||Eh.baseUrl.endsWith("/")?Eh.baseUrl:Eh.baseUrl+"/",i=yield fetch(n+t);if(!i.ok)throw new Error("could not load url: "+t);const r=yield i.arrayBuffer(),o=yield Bh().decodeAudioData(r);return o}))}static supportsType(t){const e=t.split("."),n=e[e.length-1],i=document.createElement("audio").canPlayType("audio/"+n);return""!==i}static loaded(){return $l(this,void 0,void 0,(function*(){yield Promise.resolve();while(Eh.downloads.length)yield Eh.downloads[0]}))}}Eh.baseUrl="",Eh.downloads=[];class Oh extends Rh{constructor(){super({clockSource:"offline",context:eh(arguments[0])?arguments[0]:ql(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:eh(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=eh(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return $l(this,void 0,void 0,(function*(){let e=0;while(this._duration-this._currentTime>=0){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n===0&&(yield new Promise(t=>setTimeout(t,1)))}}))}render(t=!0){return $l(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Eh(e)}))}close(){return Promise.resolve()}}const Dh=new Mh;let Vh=Dh;function Bh(){return Vh===Dh&&Yl&&Fh(new Rh),Vh}function Fh(t){Vh=nh(t)?new Rh(t):eh(t)?new Oh(t):t}if(Hl&&!Hl.TONE_SILENCE_LOGGING){let t="v";"dev"===$n&&(t="");const e=` * Tone.js ${t}${$n} * `;console.log("%c"+e,"background: #000; color: #fff")}function Nh(t){return Math.pow(10,t/20)}function Lh(t){return Math.log(t)/Math.LN10*20}function jh(t){return Math.pow(2,t/12)}let Uh=440;function Xh(){return Uh}function zh(t){Uh=t}function Gh(t){return Math.round(Wh(t))}function Wh(t){return 69+12*Math.log2(t/Uh)}function qh(t){return Uh*Math.pow(2,(t-69)/12)}class Hh extends hh{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),i="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/n)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let i=0;return t&&"0"!==t&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i+=this._beatsToUnits(parseFloat(n)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Hh&&this.fromType(this._val),Bl(this._val))return this._noArg();if(zl(this._val)&&Bl(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(jl(this._val)){let t=0;for(const e in this._val)if(Fl(this._val[e])){const n=this._val[e],i=new this.constructor(this.context,e).valueOf()*n;t+=i}return t}if(Fl(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return zl(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Yh extends Hh{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Yh(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),i=this.valueOf(),r=Math.round(i/n),o=r*n,a=o-i;return i+a*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let r=1;r<9;r++){const t=Math.pow(2,r);e.push(t+"n."),e.push(t+"n"),e.push(t+"t")}e.push("0");let n=e[0],i=new Yh(this.context,e[0]).toSeconds();return e.forEach(e=>{const r=new Yh(this.context,e).toSeconds();Math.abs(r-t)<Math.abs(i-t)&&(n=e,i=r)}),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let i=e%1*4;e=Math.floor(e)%this._getTimeSignature();const r=i.toString();r.length>3&&(i=parseFloat(parseFloat(r).toFixed(3)));const o=[n,e,i];return o.join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Gh(this.toFrequency())}_now(){return this.context.now()}}class Qh extends Yh{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Xh()}static set A4(t){zh(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:Qh.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const n=Zh[t.toLowerCase()],i=n+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?i:Qh.mtof(i)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}}})}transpose(t){return new Qh(this.context,this.valueOf()*jh(t))}harmonize(t){return t.map(t=>this.transpose(t))}toMidi(){return Gh(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Qh.A4);let n=Math.round(12*e)+57;const i=Math.floor(n/12);i<0&&(n+=-12*i);const r=$h[n%12];return r+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return qh(t)}static ftom(t){return Gh(t)}}const Zh={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},$h=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Kh extends Yh{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Jh extends hh{constructor(){super();const t=sh(Jh.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Bh()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new Yh(this.context,t).toSeconds()}toFrequency(t){return new Qh(this.context,t).toFrequency()}toTicks(t){return new Kh(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(n=>{Bl(t[n])&&delete e[n]}),e}get(){const t=uh(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const n=this[e];Fl(n)&&Fl(n.value)&&Fl(n.setValueAtTime)?t[e]=n.value:n instanceof Jh?t[e]=n._getPartialProperties(t[e]):Xl(n)||Ll(n)||zl(n)||Ul(n)?t[e]=n:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&Fl(this[e])&&(this[e]&&Fl(this[e].value)&&Fl(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Jh?this[e].set(t[e]):this[e]=t[e])}),this}}class td extends yh{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return Pl(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){const n=this._search(e);for(let i=n;i>=0;i--){const e=this._timeline[i];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let i=n;i<this._timeline.length;i++){const e=this._timeline[i];if(e.state===t)return e}}}class ed extends Jh{constructor(){super(sh(ed.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=sh(ed.getDefaults(),arguments,["param","units","convert"]);Il(Fl(t.param)&&(Jl(t.param)||t.param instanceof ed),"param must be an AudioParam");while(!Jl(t.param))t.param=t.param._param;this._swappable=!!Fl(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new yh(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Fl(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Jh.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Fl(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Fl(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Fl(this.maxValue)&&Fl(this.minValue)&&Pl(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Nh(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Lh(t):t}setValueAtTime(t,e){const n=this.toSeconds(e),i=this._fromType(t);return Il(isFinite(i)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),i=this._events.get(e);let r=this._initialValue;if(null===i)r=this._initialValue;else if("setTargetAtTime"!==i.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)r=i.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=i.value;if("setTargetAtTime"===i.type){const e=this._events.getBefore(i.time);t=null===e?this._initialValue:e.value}r="linearRampToValueAtTime"===n.type?this._linearInterpolate(i.time,t,n.time,n.value,e):this._exponentialInterpolate(i.time,t,n.time,n.value,e)}else r=i.value;else{const t=this._events.getBefore(i.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===i.type&&(r=this._exponentialApproach(i.time,n,i.value,i.constant,e))}return this._toType(r)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),i=this.toSeconds(e);return Il(isFinite(n)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:i,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,i),this._param.linearRampToValueAtTime(n,i),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=gh(n,0)?this._minOutput:n,this._assertRange(n);const i=this.toSeconds(e);return Il(isFinite(n)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,i),this._param.exponentialRampToValueAtTime(n,i),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const i=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,i),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const i=this._fromType(t);Il(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const r=this.toSeconds(e);return this._assertRange(i),Il(isFinite(i)&&isFinite(r),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:r,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",t,r,n),this._param.setTargetAtTime(i,r,n),this}setValueCurveAtTime(t,e,n,i=1){n=this.toSeconds(n),e=this.toSeconds(e);const r=this._fromType(t[0])*i;this.setValueAtTime(this._toType(r),e);const o=n/(t.length-1);for(let a=1;a<t.length;a++){const n=this._fromType(t[a])*i;this.linearRampToValueAtTime(this._toType(n),e+a*o)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Il(isFinite(e),"Invalid argument to cancelScheduledValues: "+JSON.stringify(t)),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Il(isFinite(e),"Invalid argument to cancelAndHoldAtTime: "+JSON.stringify(t)),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const i=this._events.get(e),r=this._events.getAfter(e);return i&&gh(i.time,e)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),"linearRampToValueAtTime"===r.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===r.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const i=this._events.getAfter(n.time),r=i?i.time:e+2,o=(r-e)/10;for(let n=e;n<r;n+=o)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)}),this}setParam(t){Il(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,i,r){return n+(e-n)*Math.exp(-(r-t)/i)}_linearInterpolate(t,e,n,i,r){return e+(r-t)/(n-t)*(i-e)}_exponentialInterpolate(t,e,n,i,r){return e*Math.pow(i/e,(r-t)/(n-t))}}class nd extends Jh{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Fl(this.input)?Jl(this.input)||this.input instanceof ed?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Fl(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Fl(t)&&(t instanceof nd||th(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){const e=this._getInternalNodes();e.forEach(e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();Il(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return rd(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Vl("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return od(this,t,e,n),this}chain(...t){return id(this,...t),this}fan(...t){return t.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Fl(this.input)&&(this.input instanceof nd?this.input.dispose():th(this.input)&&this.input.disconnect()),Fl(this.output)&&(this.output instanceof nd?this.output.dispose():th(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function id(...t){const e=t.shift();t.reduce((t,e)=>(t instanceof nd?t.connect(e):th(t)&&rd(t,e),e),e)}function rd(t,e,n=0,i=0){Il(Fl(t),"Cannot connect from undefined node"),Il(Fl(e),"Cannot connect to undefined node"),(e instanceof nd||th(e))&&Il(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Il(t.numberOfOutputs>0,"Cannot connect from node with no outputs");while(e instanceof nd||e instanceof ed)Fl(e.input)&&(e=e.input);while(t instanceof nd)Fl(t.output)&&(t=t.output);Jl(e)?t.connect(e,n):t.connect(e,n,i)}function od(t,e,n=0,i=0){if(Fl(e))while(e instanceof nd)e=e.input;while(!th(t))Fl(t.output)&&(t=t.output);Jl(e)?t.disconnect(e,n):th(e)?t.disconnect(e,n,i):t.disconnect()}class ad extends nd{constructor(){super(sh(ad.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=sh(ad.getDefaults(),arguments,["gain","units"]);this.gain=new ed({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Ah(this,"gain")}static getDefaults(){return Object.assign(nd.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class sd extends nd{constructor(t){super(t),this.onended=Ph,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ad({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(nd.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ph})}_startGain(t,e=1){Il(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Il(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ph&&(this.onended(this),this.onended=Ph,!this.context.isOffline)){const t=()=>this.dispose();"undefined"!==typeof window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Il(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class ud extends sd{constructor(){super(sh(ud.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=sh(ud.getDefaults(),arguments,["offset"]);rd(this._source,this._gainNode),this.offset=new ed({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(sd.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class cd extends nd{constructor(){super(sh(cd.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=sh(cd.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new ud({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(nd.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return ld(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,i){return this._param.setValueCurveAtTime(t,e,n,i),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function ld(t,e,n,i){(e instanceof ed||Jl(e)||e instanceof cd&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof cd&&(e.overridden=!0)),rd(t,e,n,i)}class hd extends ed{constructor(){super(sh(hd.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new yh(1/0),this._multiplier=1;const t=sh(hd.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ed.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const i=this._fromType(t),r=this._events.get(e),o=Math.round(Math.max(1/n,1));for(let a=0;a<=o;a++){const t=n*a+e,o=this._exponentialApproach(r.time,r.value,i,n,t);this.linearRampToValueAtTime(this._toType(o),t)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const i=this._events.get(n),r=this._events.previousEvent(i),o=this._getTicksUntilEvent(r,n);return i.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const i=this._events.get(n),r=this._events.previousEvent(i),o=this._getTicksUntilEvent(r,n);return i.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(10*(e-i.time),1)),o=(e-i.time)/r;for(let a=0;a<=r;a++){const t=o*a+i.time,r=this._exponentialInterpolate(i.time,i.value,e,n,t);this.linearRampToValueAtTime(this._toType(r),t)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Bl(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let i=this._fromType(this.getValueAtTime(e));const r=this._events.get(e);return r&&r.time===e&&"setValueAtTime"===r.type&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+i)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const i=this._fromType(this.getValueAtTime(e.time)),r=this._fromType(this.getValueAtTime(n.time)),o=(r-i)/(n.time-e.time),a=Math.sqrt(Math.pow(i,2)-2*o*(e.ticks-t)),s=(-i+a)/o,u=(-i-a)/o;return(s>0?s:u)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),i=this.toSeconds(t),r=this.getTicksAtTime(n),o=this.getTicksAtTime(n+i);return o-r}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class dd extends cd{constructor(){super(sh(dd.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=sh(dd.getDefaults(),arguments,["value"]);this.input=this._param=new hd({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(cd.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class pd extends Jh{constructor(){super(sh(pd.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new td,this._tickOffset=new yh;const t=sh(pd.getDefaults(),arguments,["frequency"]);this.frequency=new dd({context:this.context,units:t.units,value:t.frequency}),Ah(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Jh.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Fl(e)&&this.setTicksAtTime(e,n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),i={state:"paused",time:e};this._state.add(i);let r=n,o=0;return this._state.forEachBetween(n.time,e+this.sampleTime,t=>{let e=r.time;const n=this._tickOffset.get(t.time);n&&n.time>=r.time&&(o=n.ticks,e=n.time),"started"===r.state&&"started"!==t.state&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),r=t}),this._state.remove(i),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let i=e,r=0;return this._state.forEachBetween(e.time,t+this.sampleTime,t=>{let e=i.time;const n=this._tickOffset.get(t.time);n&&n.time>=i.time&&(r=n.seconds,e=n.time),"started"===i.state&&"started"!==t.state&&(r+=t.time-e),i=t}),this._state.remove(n),r}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),i=this._state.get(e),r=Math.max(n.time,i.time),o=this.frequency.getTicksAtTime(r)+t-n.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(t,e,n){let i=this._state.get(t);this._state.forEachBetween(t,e,e=>{i&&"started"===i.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(i.time,t),e.time-this.sampleTime,n),i=e});let r=null;if(i&&"started"===i.state){const a=Math.max(i.time,t),s=this.frequency.getTicksAtTime(a),u=this.frequency.getTicksAtTime(i.time),c=s-u;let l=Math.ceil(c)-c;l=gh(l,1)?0:l;let h=this.frequency.getTimeOfTick(s+l);while(h<e){try{n(h,Math.round(this.getTicksAtTime(h)))}catch(o){r=o;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(r)throw r;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class fd extends Jh{constructor(){super(sh(fd.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Ph,this._lastUpdate=0,this._state=new td("stopped"),this._boundLoop=this._loop.bind(this);const t=sh(fd.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new pd({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ah(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Jh.getDefaults(),{callback:Ph,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){El(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),i=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(i+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time);break}}),this._tickSource.forEachTickBetween(t,e,(t,e)=>{this.callback(t,e)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}kh.mixin(fd);class md extends nd{constructor(){super(sh(md.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const t=sh(md.getDefaults(),arguments,["delayTime","maxDelay"]),e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new ed({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),Ah(this,"delayTime")}static getDefaults(){return Object.assign(nd.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class gd extends hh{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=sh(gd.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ph,onload:Ph,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Il(this.has(t),"ToneAudioBuffers has no buffer named: "+t),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,n=Ph,i=Ph){return zl(e)?this._buffers.set(t.toString(),new Eh(this.baseUrl+e,n,i)):this._buffers.set(t.toString(),new Eh(e,n,i)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class vd extends Kh{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class yd extends Jh{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new yh,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;while(this._events.length&&this._events.peek().time-this.anticipation<=t){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}wh(t=>{t.draw=new yd({context:t})}),Ch(t=>{t.draw.dispose()});class _d extends hh{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Il(Fl(t.time),"Events must have a time property"),Il(Fl(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new wd(t.time,t.time+t.duration,t);null===this._root?this._root=e:this._root.insert(e),this._length++;while(null!==e)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,t=>this.remove(t)),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let n,i=null;if(e>0)if(null===t.left.right)n=t.left,n.right=t.right,i=n;else{n=t.left.right;while(null!==n.right)n=n.right;n.parent&&(n.parent.right=n.left,i=n.parent,n.left=t.left,n.right=t.right)}else if(null===t.right.left)n=t.right,n.left=t.left,i=n;else{n=t.right.left;while(null!==n.left)n=n.left;n.parent&&(n.parent.left=n.right,i=n.parent,n.left=t.left,n.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=n:t.parent.right=n:this._setRoot(n),i&&this._rebalance(i)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),i=t.right;i&&(t.right=i.left,i.left=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),i=t.left;i&&(t.left=i.right,i.right=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse(t=>e.push(t)),e.forEach(e=>{e.event&&t(e.event)})}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach(t=>{t.event&&e(t.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class wd{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class bd extends nd{constructor(){super(sh(bd.getDefaults(),arguments,["volume"])),this.name="Volume";const t=sh(bd.getDefaults(),arguments,["volume"]);this.input=this.output=new ad({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Ah(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(nd.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class xd extends nd{constructor(){super(sh(xd.getDefaults(),arguments)),this.name="Destination",this.input=new bd({context:this.context}),this.output=new ad({context:this.context}),this.volume=this.input.volume;const t=sh(xd.getDefaults(),arguments);id(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(nd.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),id(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}wh(t=>{t.destination=new xd({context:t})}),Ch(t=>{t.destination.dispose()});class Cd extends hh{constructor(t){super(),this.name="TimelineValue",this._timeline=new yh({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class Sd{constructor(t,e){this.id=Sd._eventId++;const n=Object.assign(Sd.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:Ph,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Sd._eventId=0;class kd extends Sd{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(kd.getDefaults(),e);this.duration=new vd(t.context,n.duration).valueOf(),this._interval=new vd(t.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Sd.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new vd(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new vd(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new vd(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Td extends Jh{constructor(){super(sh(Td.getDefaults(),arguments)),this.name="Transport",this._loop=new Cd(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new yh,this._repeatedEvents=new _d,this._syncedSignals=[],this._swingAmount=0;const t=sh(Td.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new fd({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Ah(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Jh.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(2*this._swingTicks)!==0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),i=Math.sin(n*Math.PI)*this._swingAmount;t+=new vd(this.context,2*this._swingTicks/3).toSeconds()*i}this._timeline.forEachAtTime(e,e=>e.invoke(t))}schedule(t,e){const n=new Sd(this,{callback:t,time:new Kh(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,i=1/0){const r=new kd(this,{callback:t,duration:new Yh(this.context,i).toTicks(),interval:new Yh(this.context,e).toTicks(),time:new Kh(this.context,n).toTicks()});return this._addEvent(r,this._repeatedEvents)}scheduleOnce(t,e){const n=new Sd(this,{callback:t,once:!0,time:new Kh(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(e,t=>this.clear(t.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new vd(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return Fl(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Xl(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Yh(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Yh(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new vd(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new vd(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now(),e=this._clock.getTicksAtTime(t);return(e-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),i=this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e),r=e+i;this.emit("stop",r),this._clock.setTicksAtTime(t,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=this.getTicksAtTime(e),i=t-n%t;return this._clock.nextTickTime(i,e)}}syncSignal(t,e){if(!e){const n=this.now();if(0!==t.getValueAtTime(n)){const i=this.bpm.getValueAtTime(n),r=1/(60/i/this.PPQ);e=t.getValueAtTime(n)/r}else e=0}const n=new ad(e);return this.bpm.connect(n),n.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:n,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Ih(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}kh.mixin(Td),wh(t=>{t.transport=new Td({context:t})}),Ch(t=>{t.transport.dispose()});class Rd extends nd{constructor(t){super(t),this.input=void 0,this._state=new td("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ph,this._syncedStop=Ph,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new bd({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Ah(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(nd.getDefaults(),{mute:!1,onstop:Ph,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let i=Bl(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),this._synced||"started"!==this._state.getValueAtTime(i))if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){const t=this._state.get(i);t&&(t.offset=this.toSeconds(ch(e,0)),t.duration=n?this.toSeconds(n):void 0);const r=this.context.transport.schedule(t=>{this._start(t,e,n)},i);this._scheduled.push(r),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else El(this.context),this._start(i,e,n);else Il(ph(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,e,n);return this}stop(t){let e=Bl(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Fl(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const i=e-this.toSeconds(n.time);let r;n.duration&&(r=this.toSeconds(n.duration)-i),this._start(t,this.toSeconds(n.offset)+i,r)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ph,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Md extends sd{constructor(){super(sh(Md.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=sh(Md.getDefaults(),arguments,["url","onload"]);rd(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ed({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Eh(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(sd.getDefaults(),{url:new Eh,loop:!1,loopEnd:0,loopStart:0,onload:Ph,onerror:Ph,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,i=1){Il(this.buffer.loaded,"buffer is either not set or not loaded");const r=this.toSeconds(t);this._startGain(r,i),e=this.loop?ch(e,this.loopStart):ch(e,0);let o=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;fh(o,t)&&(o=(o-e)%n+e),gh(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,mh(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(r,o)),Fl(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(r+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Ad extends Rd{constructor(){super(sh(Ad.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const t=sh(Ad.getDefaults(),arguments,["type"]);this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Rd.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(Il(t in Od,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=Od[this._type];this._source=new Md({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Id=220500,Pd=2,Ed={brown:null,pink:null,white:null},Od={get brown(){if(!Ed.brown){const t=[];for(let e=0;e<Pd;e++){const n=new Float32Array(Id);t[e]=n;let i=0;for(let t=0;t<Id;t++){const e=2*Math.random()-1;n[t]=(i+.02*e)/1.02,i=n[t],n[t]*=3.5}}Ed.brown=(new Eh).fromArray(t)}return Ed.brown},get pink(){if(!Ed.pink){const t=[];for(let e=0;e<Pd;e++){const n=new Float32Array(Id);let i,r,o,a,s,u,c;t[e]=n,i=r=o=a=s=u=c=0;for(let t=0;t<Id;t++){const e=2*Math.random()-1;i=.99886*i+.0555179*e,r=.99332*r+.0750759*e,o=.969*o+.153852*e,a=.8665*a+.3104856*e,s=.55*s+.5329522*e,u=-.7616*u-.016898*e,n[t]=i+r+o+a+s+u+c+.5362*e,n[t]*=.11,c=.115926*e}}Ed.pink=(new Eh).fromArray(t)}return Ed.pink},get white(){if(!Ed.white){const t=[];for(let e=0;e<Pd;e++){const n=new Float32Array(Id);t[e]=n;for(let t=0;t<Id;t++)n[t]=2*Math.random()-1}Ed.white=(new Eh).fromArray(t)}return Ed.white}};function Dd(t,e){return $l(this,void 0,void 0,(function*(){const n=e/t.context.sampleRate,i=new Oh(1,n,t.context.sampleRate),r=new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:i})).toDestination();r.start(0);const o=yield i.render();return o.getChannelData(0)}))}class Vd extends sd{constructor(){super(sh(Vd.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=sh(Vd.getDefaults(),arguments,["frequency","type"]);rd(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new ed({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new ed({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Ah(this,["frequency","detune"])}static getDefaults(){return Object.assign(sd.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Bd extends Rd{constructor(){super(sh(Bd.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=sh(Bd.getDefaults(),arguments,["frequency","type"]);this.frequency=new cd({context:this.context,units:"frequency",value:t.frequency}),Ah(this,"frequency"),this.detune=new cd({context:this.context,units:"cents",value:t.detune}),Ah(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Rd.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new Vd({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type){const t=Bd._periodicWaveCache.find(t=>t.phase===this._phase&&ah(t.partials,this._partials));return t}{const t=Bd._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(Fl(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e,n);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Bd._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),Bd._periodicWaveCache.length>100&&Bd._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Pl(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach((t,n)=>e[n]=t),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){const n=4096;let i=n/2;const r=new Float32Array(i),o=new Float32Array(i);let a=1;if("custom"===t){if(a=this._partials.length+1,this._partialCount=this._partials.length,i=a,0===this._partials.length)return[r,o]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(a=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],a=Math.max(a,2),i=a):this._partialCount=0,this._partials=[]}for(let s=1;s<i;++s){const n=2/(s*Math.PI);let i;switch(t){case"sine":i=s<=a?1:0,this._partials[s-1]=i;break;case"square":i=1&s?2*n:0,this._partials[s-1]=i;break;case"sawtooth":i=n*(1&s?1:-1),this._partials[s-1]=i;break;case"triangle":i=1&s?n*n*2*(s-1>>1&1?-1:1):0,this._partials[s-1]=i;break;case"custom":i=this._partials[s-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==i?(r[s]=-i*Math.sin(e*s),o[s]=i*Math.cos(e*s)):(r[s]=0,o[s]=0)}return[r,o]}_inverseFFT(t,e,n){let i=0;const r=t.length;for(let o=0;o<r;o++)i+=t[o]*Math.cos(o*n)+e[o]*Math.sin(o*n);return i}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const i=2*Math.PI,r=32;for(let o=0;o<r;o++)n=Math.max(this._inverseFFT(t,e,o/r*i),n);return vh(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return $l(this,void 0,void 0,(function*(){return Dd(this,t)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Bd._periodicWaveCache=[];class Fd extends nd{constructor(){super(Object.assign(sh(Fd.getDefaults(),arguments,["context"])))}connect(t,e=0,n=0){return ld(this,t,e,n),this}}class Nd extends Fd{constructor(){super(Object.assign(sh(Nd.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=sh(Nd.getDefaults(),arguments,["mapping","length"]);Xl(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):Nl(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(cd.getDefaults(),{length:1024})}setMap(t,e=1024){const n=new Float32Array(e);for(let i=0,r=e;i<r;i++){const e=i/(r-1)*2-1;n[i]=t(e,i)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(e=>e.includes(t));Il(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Ld extends Fd{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Nd({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class jd extends cd{constructor(){super(Object.assign(sh(jd.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=sh(jd.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new ad({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(cd.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ud extends Rd{constructor(){super(sh(Ud.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Ld({context:this.context}),this._modulationNode=new ad({context:this.context});const t=sh(Ud.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Bd({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Bd({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new jd({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ah(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Bd.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return $l(this,void 0,void 0,(function*(){return Dd(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Xd extends Rd{constructor(){super(sh(Xd.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new ad({context:this.context,gain:0});const t=sh(Xd.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Bd({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new cd({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Bd({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new jd({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new jd({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ah(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Bd.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return $l(this,void 0,void 0,(function*(){return Dd(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class zd extends Rd{constructor(){super(sh(zd.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new ad({context:this.context,gain:0}),this._thresh=new Nd({context:this.context,mapping:t=>t<=0?-1:1});const t=sh(zd.getDefaults(),arguments,["frequency","width"]);this.width=new cd({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Bd({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ah(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Rd.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return $l(this,void 0,void 0,(function*(){return Dd(this,t)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Gd extends Rd{constructor(){super(sh(Gd.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=sh(Gd.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new cd({context:this.context,units:"frequency",value:t.frequency}),this.detune=new cd({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Ah(this,["frequency","detune"])}static getDefaults(){return Object.assign(Bd.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach((t,i)=>t.detune.value=e+n*i)}}get count(){return this._oscillators.length}set count(t){if(Pl(t,1),this._oscillators.length!==t){this._forEach(t=>t.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const n=new Bd({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Ph});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((t,e)=>t.phase=this._phase+e/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(t=1024){return $l(this,void 0,void 0,(function*(){return Dd(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class Wd extends Rd{constructor(){super(sh(Wd.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new jd({context:this.context,value:2});const t=sh(Wd.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new zd({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Bd({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ah(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Rd.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return $l(this,void 0,void 0,(function*(){return Dd(this,t)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const qd={am:Ud,fat:Gd,fm:Xd,oscillator:Bd,pulse:zd,pwm:Wd};class Hd extends Rd{constructor(){super(sh(Hd.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=sh(Hd.getDefaults(),arguments,["frequency","type"]);this.frequency=new cd({context:this.context,units:"frequency",value:t.frequency}),this.detune=new cd({context:this.context,units:"cents",value:t.detune}),Ah(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Bd.getDefaults(),Xd.getDefaults(),Ud.getDefaults(),Gd.getDefaults(),zd.getDefaults(),Wd.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=qd[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout(()=>t.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof qd[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&Ll(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&Ll(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&zl(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return $l(this,void 0,void 0,(function*(){return Dd(this,t)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Yd extends cd{constructor(){super(Object.assign(sh(Yd.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new ad({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,id(this._constantSource,this._sum)}static getDefaults(){return Object.assign(cd.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Qd extends Fd{constructor(){super(Object.assign(sh(Qd.getDefaults(),arguments,["min","max"]))),this.name="Scale";const t=sh(Qd.getDefaults(),arguments,["min","max"]);this._mult=this.input=new jd({context:this.context,value:t.max-t.min}),this._add=this.output=new Yd({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Fd.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Zd extends Fd{constructor(){super(Object.assign(sh(Zd.getDefaults(),arguments))),this.name="Zero",this._gain=new ad({context:this.context}),this.output=this._gain,this.input=void 0,rd(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),od(this.context.getConstant(0),this._gain),this}}class $d extends nd{constructor(){super(sh($d.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=ed.prototype._fromType,this._toType=ed.prototype._toType,this._is=ed.prototype._is,this._clampValue=ed.prototype._clampValue;const t=sh($d.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Bd(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new ad({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new cd({context:this.context,units:"audioRange",value:0}),this._zeros=new Zd({context:this.context}),this._a2g=new Ld({context:this.context}),this._scaler=this.output=new Qd({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Ah(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(Bd.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}get state(){return this._oscillator.state}connect(t,e,n){return(t instanceof ed||t instanceof cd)&&(this.convert=t.convert,this.units=t.units),ld(this,t,e,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Kd(t,e=1/0){const n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Pl(i,t,e),n.set(this,i)}})}}function Jd(t,e=1/0){const n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Pl(this.toSeconds(i),t,e),n.set(this,i)}})}}class tp extends Rd{constructor(){super(sh(tp.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=sh(tp.getDefaults(),arguments,["url","onload"]);this._buffer=new Eh({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Rd.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ph,onerror:Ph,playbackRate:1,reverse:!1})}load(t){return $l(this,void 0,void 0,(function*(){return yield this._buffer.load(t),this._onload(),this}))}_onload(t=Ph){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?ch(e,this._loopStart):ch(e,0);const i=this.toSeconds(e),r=n;n=ch(n,Math.max(this._buffer.duration-i,0));let o=this.toSeconds(n);o/=this._playbackRate,t=this.toSeconds(t);const a=new Md({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Bl(r)?a.start(t,i):a.start(t,i,o-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(t=>t.stop(e))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Pl(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Pl(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(t=>t.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Zl([Jd(0)],tp.prototype,"fadeIn",void 0),Zl([Jd(0)],tp.prototype,"fadeOut",void 0);class ep extends Fd{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Nd({context:this.context,mapping:t=>2*Math.abs(t)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class np extends nd{constructor(){super(sh(np.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new cd({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=sh(np.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(nd.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(zl(t))return t;{let n;for(n in ip)if(ip[n][e]===t)return n;return t}}_setCurve(t,e,n){if(zl(n)&&Reflect.has(ip,n)){const i=ip[n];jl(i)?"_decayCurve"!==t&&(this[t]=i[e]):this[t]=i}else{if(!Xl(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Il(["linear","exponential"].some(e=>e===t),"Invalid envelope curve: "+t),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);const n=this.toSeconds(this.attack);let i=n;const r=this.toSeconds(this.decay),o=this.getValueAtTime(t);if(o>0){const t=1/i,e=1-o;i=e/t}if(i<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,i,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,i,t);else{this._sig.cancelAndHoldAtTime(t);let n=this._attackCurve;for(let t=1;t<n.length;t++)if(n[t-1]<=o&&o<=n[t]){n=this._attackCurve.slice(t),n[0]=o;break}this._sig.setValueCurveAtTime(n,t,i,e)}if(r&&this.sustain<1){const n=e*this.sustain,o=t+i;this.log("decay",o),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(n,r+o):this._sig.exponentialApproachValueAtTime(n,o,r)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Il(Xl(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return ld(this,t,e,n),this}asArray(t=1024){return $l(this,void 0,void 0,(function*(){const e=t/this.context.sampleRate,n=new Oh(1,e,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),r=i+this.toSeconds(this.release),o=.1*r,a=r+o,s=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/a,decay:e*this.toSeconds(this.decay)/a,release:e*this.toSeconds(this.release)/a,context:n}));s._sig.toDestination(),s.triggerAttackRelease(e*(i+o)/a,0);const u=yield n.render();return u.getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}Zl([Jd(0)],np.prototype,"attack",void 0),Zl([Jd(0)],np.prototype,"decay",void 0),Zl([Kd(0,1)],np.prototype,"sustain",void 0),Zl([Jd(0)],np.prototype,"release",void 0);const ip=(()=>{const t=128;let e,n;const i=[];for(e=0;e<t;e++)i[e]=Math.sin(e/(t-1)*(Math.PI/2));const r=[],o=6.4;for(e=0;e<t-1;e++){n=e/(t-1);const i=Math.sin(n*(2*Math.PI)*o-Math.PI/2)+1;r[e]=i/10+.83*n}r[t-1]=1;const a=[],s=5;for(e=0;e<t;e++)a[e]=Math.ceil(e/(t-1)*s)/s;const u=[];for(e=0;e<t;e++)n=e/(t-1),u[e]=.5*(1-Math.cos(Math.PI*n));const c=[];for(e=0;e<t;e++){n=e/(t-1);const i=4*Math.pow(n,3)+.2,r=Math.cos(i*Math.PI*2*n);c[e]=Math.abs(r*(1-n))}function l(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}function h(t){return t.slice(0).reverse()}return{bounce:{In:l(c),Out:c},cosine:{In:i,Out:h(i)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:l(r)},sine:{In:u,Out:l(u)},step:{In:a,Out:l(a)}}})();class rp extends nd{constructor(){super(sh(rp.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=sh(rp.getDefaults(),arguments);this._volume=this.output=new bd({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ah(this,"volume")}static getDefaults(){return Object.assign(nd.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const n=this["_original_"+t]=this[t];this[t]=(...t)=>{const i=t[e],r=this.context.transport.schedule(i=>{t[e]=i,n.apply(this,t)},i);this._scheduledEvents.push(r)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,n,i){const r=this.toSeconds(n),o=this.toSeconds(e);return this.triggerAttack(t,r,i),this.triggerRelease(r+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class op extends rp{constructor(){super(sh(op.getDefaults(),arguments));const t=sh(op.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(rp.getDefaults(),{detune:0,onsilence:Ph,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);const i=this.toSeconds(e);return this._triggerEnvelopeAttack(i,n),this.setNote(t,i),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),i=t instanceof Qh?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,t,n)}else this.frequency.setValueAtTime(i,n);return this}}Zl([Jd(0)],op.prototype,"portamento",void 0);class ap extends np{constructor(){super(sh(ap.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ad({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class sp extends op{constructor(){super(sh(sp.getDefaults(),arguments)),this.name="Synth";const t=sh(sp.getDefaults(),arguments);this.oscillator=new Hd(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ap(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Ah(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(op.getDefaults(),{envelope:Object.assign(lh(np.getDefaults(),Object.keys(nd.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(lh(Hd.getDefaults(),[...Object.keys(Rd.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class up extends sp{constructor(){super(sh(up.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=sh(up.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Ah(this,["oscillator","envelope"])}static getDefaults(){return oh(op.getDefaults(),sp.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),i=this.toFrequency(t instanceof Qh?t.toFrequency():t),r=i*this.octaves;return this.oscillator.frequency.setValueAtTime(r,n),this.oscillator.frequency.exponentialRampToValueAtTime(i,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Zl([Kd(0)],up.prototype,"octaves",void 0),Zl([Jd(0)],up.prototype,"pitchDecay",void 0);const cp=new Set;function lp(t){cp.add(t)}function hp(t,e){const n=`registerProcessor("${t}", ${e})`;cp.add(n)}const dp='\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n';lp(dp);const pp="\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n";lp(pp);const fp="\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n";lp(fp);const mp="feedback-comb-filter",gp='\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n';hp(mp,gp);class vp extends rp{constructor(){super(sh(vp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=sh(vp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach(n=>{const i=parseInt(n,10);if(Il(Gl(n)||Ll(i)&&isFinite(i),"url key is neither a note or midi pitch: "+n),Gl(n)){const i=new Qh(this.context,n).toMidi();e[i]=t.urls[n]}else Ll(i)&&isFinite(i)&&(e[i]=t.urls[i])}),this._buffers=new gd({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(rp.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ph,onerror:Ph,release:.1,urls:{}})}_findClosest(t){const e=96;let n=0;while(n<e){if(this._buffers.has(t+n))return-n;if(this._buffers.has(t-n))return n;n++}throw new Error("No available buffers for note: "+t)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach(t=>{const i=Wh(new Qh(this.context,t).toFrequency()),r=Math.round(i),o=i-r,a=this._findClosest(r),s=r-a,u=this._buffers.get(s),c=jh(a+o),l=new Md({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);l.start(e,0,u.duration/c,n),Xl(this._activeSources.get(r))||this._activeSources.set(r,[]),this._activeSources.get(r).push(l),l.onended=()=>{if(this._activeSources&&this._activeSources.has(r)){const t=this._activeSources.get(r),e=t.indexOf(l);-1!==e&&t.splice(e,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(t=>{const n=new Qh(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach(t=>{t.stop(e)}),this._activeSources.set(n,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(t=>{while(t.length){const n=t.shift();n.stop(e)}}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,i=1){const r=this.toSeconds(n);return this.triggerAttack(t,r,i),Xl(e)?(Il(Xl(t),"notes must be an array when duration is array"),t.forEach((t,n)=>{const i=e[Math.min(n,e.length-1)];this.triggerRelease(t,r+this.toSeconds(i))})):this.triggerRelease(t,r+this.toSeconds(e)),this}add(t,e,n){if(Il(Gl(t)||isFinite(t),"note must be a pitch or midi: "+t),Gl(t)){const i=new Qh(this.context,t).toMidi();this._buffers.add(i,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}Zl([Jd(0)],vp.prototype,"attack",void 0),Zl([Jd(0)],vp.prototype,"release",void 0);class yp extends nd{constructor(){super(Object.assign(sh(yp.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new ep({context:this.context}),this.a=new ad({context:this.context,gain:0}),this.b=new ad({context:this.context,gain:0}),this.output=new ad({context:this.context}),this._internalChannels=[this.a,this.b];const t=sh(yp.getDefaults(),arguments,["fade"]);this.fade=new cd({context:this.context,units:"normalRange",value:t.fade}),Ah(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",rd(this._split,this.a.gain,0),rd(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(nd.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class _p extends nd{constructor(t){super(t),this.name="Effect",this._dryWet=new yp({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new ad({context:this.context}),this.effectReturn=new ad({context:this.context}),this.input=new ad({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ah(this,"wet")}static getDefaults(){return Object.assign(nd.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class wp extends nd{constructor(){super(Object.assign(sh(wp.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=sh(wp.getDefaults(),arguments,["pan"]);this.pan=new ed({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Ah(this,"pan")}static getDefaults(){return Object.assign(nd.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const bp="bit-crusher",xp="\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n";hp(bp,xp);class Cp extends _p{constructor(){super(sh(Cp.getDefaults(),arguments,["order"])),this.name="Chebyshev";const t=sh(Cp.getDefaults(),arguments,["order"]);this._shaper=new Nd({context:this.context,length:4096}),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample}static getDefaults(){return Object.assign(_p.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(t,e,n){return n.has(e)||(0===e?n.set(e,0):1===e?n.set(e,t):n.set(e,2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n))),n.get(e)}get order(){return this._order}set order(t){this._order=t,this._shaper.setMap(e=>this._getCoefficient(e,t,new Map))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Sp extends nd{constructor(){super(sh(Sp.getDefaults(),arguments,["channels"])),this.name="Split";const t=sh(Sp.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(nd.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class kp extends nd{constructor(){super(sh(kp.getDefaults(),arguments,["channels"])),this.name="Merge";const t=sh(kp.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(nd.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Tp extends nd{constructor(t){super(t),this.name="StereoEffect",this.input=new ad({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new yp({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new Sp({context:this.context,channels:2}),this._merge=new kp({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Ah(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),id(...t),rd(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),id(...t),rd(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(nd.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Rp extends Tp{constructor(t){super(t),this.feedback=new cd({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new ad({context:this.context}),this._feedbackR=new ad({context:this.context}),this._feedbackSplit=new Sp({context:this.context,channels:2}),this._feedbackMerge=new kp({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Ah(this,["feedback"])}static getDefaults(){return Object.assign(Tp.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Mp extends Rp{constructor(){super(sh(Mp.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const t=sh(Mp.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new $d({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new $d({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new md({context:this.context}),this._delayNodeR=new md({context:this.context}),this.frequency=this._lfoL.frequency,Ah(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(Rp.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return 1e3*this._delayTime}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Ap extends _p{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new ad({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Ah(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(_p.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Ip extends Ap{constructor(){super(sh(Ip.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const t=sh(Ip.getDefaults(),arguments,["pitch"]);this._frequency=new cd({context:this.context}),this._delayA=new md({maxDelay:1,context:this.context}),this._lfoA=new $d({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new md({maxDelay:1,context:this.context}),this._lfoB=new $d({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new yp({context:this.context}),this._crossFadeLFO=new $d({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new md({delayTime:t.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,Ah(this,"delayTime"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const e=this.now();this._lfoA.start(e),this._lfoB.start(e),this._crossFadeLFO.start(e),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(Ap.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(t){this._pitch=t;let e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=jh(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=jh(t)-1),this._frequency.value=e*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Pp extends _p{constructor(){super(sh(Pp.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=sh(Pp.getDefaults(),arguments,["decay"]);this._decay=t.decay,this._preDelay=t.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(_p.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){t=this.toSeconds(t),Pl(t,.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){t=this.toSeconds(t),Pl(t,0),this._preDelay=t,this.generate()}generate(){return $l(this,void 0,void 0,(function*(){const t=this.ready,e=new Oh(2,this._decay+this._preDelay,this.context.sampleRate),n=new Ad({context:e}),i=new Ad({context:e}),r=new kp({context:e});n.connect(r,0,0),i.connect(r,0,1);const o=new ad({context:e}).toDestination();r.connect(o),n.start(0),i.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=e.render();return this.ready=a.then(Ph),yield t,this._convolver.buffer=(yield a).get(),this}))}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Ep extends nd{constructor(){super(sh(Ep.getDefaults(),arguments,["solo"])),this.name="Solo";const t=sh(Ep.getDefaults(),arguments,["solo"]);this.input=this.output=new ad({context:this.context}),Ep._allSolos.has(this.context)||Ep._allSolos.set(this.context,new Set),Ep._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(nd.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Ep._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){Ep._soloed.has(this.context)||Ep._soloed.set(this.context,new Set),Ep._soloed.get(this.context).add(this)}_removeSolo(){Ep._soloed.has(this.context)&&Ep._soloed.get(this.context).delete(this)}_isSoloed(){return Ep._soloed.has(this.context)&&Ep._soloed.get(this.context).has(this)}_noSolos(){return!Ep._soloed.has(this.context)||Ep._soloed.has(this.context)&&0===Ep._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Ep._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Ep._allSolos=new Map,Ep._soloed=new Map;class Op extends nd{constructor(){super(sh(Op.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=sh(Op.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new wp({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new bd({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Ah(this,["pan","volume"])}static getDefaults(){return Object.assign(nd.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Dp extends nd{constructor(){super(sh(Dp.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=sh(Dp.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Ep({solo:t.solo,context:this.context}),this._panVol=this.output=new Op({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ah(this,["pan","volume"])}static getDefaults(){return Object.assign(nd.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return Dp.buses.has(t)||Dp.buses.set(t,new ad({context:this.context})),Dp.buses.get(t)}send(t,e=0){const n=this._getBus(t),i=new ad({context:this.context,units:"decibels",gain:e});return this.connect(i),i.connect(n),i}receive(t){const e=this._getBus(t);return e.connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Dp.buses=new Map;class Vp extends nd{constructor(){super(...arguments),this.name="Listener",this.positionX=new ed({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ed({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ed({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ed({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ed({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ed({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ed({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ed({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ed({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(nd.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}wh(t=>{t.listener=new Vp({context:t})}),Ch(t=>{t.listener.dispose()});const Bp=Bh().transport;Bh().destination,Bh().destination;Bh().listener;Bh().draw;Bh();function Fp(){return Eh.loaded()}var Np=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this)}return m(n,[{key:"setRecord",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){navigator.mediaDevices.getUserMedia({video:!1,audio:{echoCancellation:!0}}).then(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(n){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=ze()(n,{type:"audio/webm",mimeType:"audio/webm"}),window["recorder"]=i,i.startRecording(),r=function(t){return new Promise((function(e){return setTimeout(e,t)}))},window["recSpine"].state.setAnimation(0,"animation",!1),e.next=7,r(3e3);case 7:return e.next=9,i.stopRecording((function(){var e=i.getBlob(),n=window.URL.createObjectURL(e);window["record"]&&(window["record"].pause(),window["record"]=null),window["record"]=new Audio(n),window["record"].volume=1,t()}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"readyRecord",value:function(){var t=this;return new Promise((function(e){t.mRecPlace=new PIXI.Container,t.addChild(t.mRecPlace),t.mRecPlace.position.set(Ft.w/2,Ft.h/2);var n=new Ae(de.Handle.getCommonResource("rec_dim.png").texture);n.position.set(0,120),t.mRecPlace.addChild(n),t.mRecPlace.sortableChildren=!0,n.zIndex=1,n.texture=de.Handle.getCommonResource("rec_on.png").texture,t.removeChild(t.mRecPlace),t.mRecPlace=null,e()}))}},{key:"stop",value:function(){var t=this;return new Promise((function(e){t.mTonePlayer&&(t.mTonePlayer.stop(),t.mTonePlayer=null),t.mCurrentRec&&(t.mCurrentRec.pause(),t.mCurrentRec=null),t.mRecPlace&&(t.removeChild(t.mRecPlace),t.mRecPlace=null),window["recorder"]&&(window["recorder"].stopRecording((function(){window["record"]&&(window["record"].pause(),window["record"]=null),window["record"]=null})),e())}))}},{key:"playRecord",value:function(t){var e=this;return new Promise((function(n){e.mRecordMotion&&(e.mRecordMotion.kill(),e.mRecordMotion=null),e.mRecPlace.removeChildren(),e.mPlayBtn=new Ae(de.Handle.getCommonResource("btn_rec_play.png").texture),e.mPlayBtn.position.set(0,120),e.mPlayBtn.zIndex=1,e.mRecPlace.addChild(e.mPlayBtn),e.mPlayBtn.scale.set(.1),Nt["a"].to(e.mPlayBtn.scale,{x:1,y:1,duration:.5,ease:"back"}),e.mPlayBtn.onClick=Object(d["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!window["record"]){i.next=6;break}return i.next=3,e.playSound(t);case 3:n(),i.next=7;break;case 6:n();case 7:case"end":return i.stop()}}),i)})))}))}},{key:"playSound",value:function(t){var e=this;return new Promise((function(n){console.log(t,e.mTonePlayer),e.mCurrentRec&&(e.mCurrentRec.pause(),e.mCurrentRec=null),e.mPlayBtn&&(e.mPlayBtn.interactive=!1,e.mPlayBtn.texture=de.Handle.getCommonResource("play.png").texture);var i=document.createElement("audio");i.src=window["record"].src,i.volume=1;var r=1,o=3;if("normal"==t&&(e.mCurrentRec=i,e.mCurrentRec.playbackRate=1,e.mCurrentRec.play()),"fast"==t){o=2,r=1.5,Bp.bpm.value=1,e.mTonePlayer=new tp(i.src);var a=new Ip({pitch:6}).toDestination();e.mTonePlayer.connect(a),Bp.start(),Fp().then((function(){e.mTonePlayer.playbackRate=1.5,e.mTonePlayer.start()}))}if("slow"==t){o=3.6,r=.8,Bp.bpm.value=1,e.mTonePlayer=new tp(i.src);var s=new Ip({pitch:-2}).toDestination();e.mTonePlayer.connect(s),Bp.start(),Fp().then((function(){e.mTonePlayer.playbackRate=.8,e.mTonePlayer.start()}))}if("robot"==t){Bp.bpm.value=1,e.mTonePlayer=new tp(i.src);var u=new Mp({wet:1}).toDestination().start(),c=new Dp({volume:6}).connect(u);c.receive("chorus");var l=new Cp(50).toDestination(),h=new Dp({volume:-60}).connect(l);h.receive("cheby");var d=new Pp(3).toDestination(),p=new Dp({volume:6}).connect(d);p.receive("reverb");var f=(new Dp).toDestination();f.send("chorus"),f.send("cheby"),f.send("reverb"),e.mTonePlayer.connect(f);var m=new Ip({pitch:2}).toDestination();e.mTonePlayer.connect(m),Bp.start(),Fp().then((function(){e.mTonePlayer.playbackRate=1.2,e.mTonePlayer.start()}))}console.log("playbackRate => [".concat(r,"배속]")),Nt["a"].delayedCall(o+1,(function(){e.mTonePlayer&&e.mTonePlayer.stop(),e.mCurrentRec&&e.mCurrentRec.pause(),n()}))}))}}]),n}(PIXI.Container),Lp=function(t){v(n,t);var e=C(n);function n(){var t;p(this,n),t=e.call(this);var i=new PIXI.Graphics;return i.beginFill(0,1),i.drawRect(0,0,Ft.w,Ft.h),i.endFill(),t.addChild(i),i.alpha=0,Nt["a"].to(i,{alpha:.8,duration:.5}),i.interactive=!0,t}return m(n,[{key:"createMuck",value:function(){var t=new PIXI.Sprite(de.Handle.getCommonResource("muck_body.png").texture);t.anchor.set(.5),t.position.set(Ft.w/2,Ft.h/2);var e=new PIXI.Sprite(de.Handle.getCommonResource("muck_eye.png").texture);e.anchor.set(.5);var n=new PIXI.Sprite(de.Handle.getCommonResource("muck_left_arm.png").texture);n.anchor.set(.5);var i=new PIXI.Sprite(de.Handle.getCommonResource("muck_right_arm.png").texture);i.anchor.set(.5);var r=new PIXI.Sprite(de.Handle.getCommonResource("muck_left_blink.png").texture);r.anchor.set(.5);var o=new PIXI.Sprite(de.Handle.getCommonResource("muck_right_blink.png").texture);o.anchor.set(.5),Nt["a"].to(r,{alpha:0,angle:15,duration:.5}).yoyo(!0).repeat(-1),Nt["a"].to(o,{alpha:0,angle:-15,duration:.5}).yoyo(!0).repeat(-1),Nt["a"].to(n,{angle:15,duration:.5}).yoyo(!0).repeat(-1),Nt["a"].to(i,{angle:-15,duration:.5}).yoyo(!0).repeat(-1),Nt["a"].to(e,{y:-10,duration:.5}).yoyo(!0).repeat(-1),t.addChild(n,i,r,o,e),t.alpha=0,this.addChild(t),Nt["a"].to(t,{alpha:1,duration:.5})}},{key:"start",value:function(){var t=this;return new Promise((function(e){t.createMuck();var n=new PIXI.Container;n.position.set(Ft.w/2,Ft.h/2+200);var i=new PIXI.Sprite(de.Handle.getCommonResource("button.png").texture);i.anchor.set(.5),n.addChild(i);var r=new PIXI.Text("다음",{fill:16777215,fontSize:68});i.addChild(r),r.pivot.set(r.width/2,r.height/2),i.interactive=!0,i.buttonMode=!0,i.on("pointertap",(function(){e()})),t.addChild(n)}))}}]),n}(PIXI.Container),jp=function(t){v(n,t);var e=C(n);function n(t,i){var r;return p(this,n),r=e.call(this),r.mClickFlag=!0,r.mIndex=i,r.mCardPicture=new Ae(t),r.addChild(r.mCardPicture),r.mCardPicture.position.set(0,0),i||0==i?(r.texture=de.Handle.getViewerResource("small_box.png").texture,r.mCardPicture.scale.set(.4)):(r.texture=de.Handle.getViewerResource("big_box.png").texture,r.mCardPicture.scale.set(.6)),r.anchor.set(.5),r.mCardPicture.onClick=function(){r.onClickPicture()},r.interactive=!0,r.buttonMode=!0,r.on("pointertap",(function(){r.onClick()})),r}return m(n,[{key:"disable",value:function(){this.interactive=!1,this.tint=12369084,this.mCardPicture.alpha=.5}},{key:"onClick",value:function(){}},{key:"onClickPicture",value:function(){}},{key:"cardIndex",get:function(){return this.mIndex}},{key:"clickFlag",get:function(){return this.mClickFlag},set:function(t){0==this.interactive?this.mClickFlag=!1:this.mClickFlag=t}}]),n}(PIXI.Sprite),Up=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mDuration="fast"==t||"slow"==t?"fast"==t?2.4:3.6:3,i.mNormal=de.Handle.getViewerResource("".concat(t,"_btn_normal.png")).texture,i.mDown=de.Handle.getViewerResource("".concat(t,"_btn_down.png")).texture,i.texture=i.mNormal,i.mProfile=new PIXI.Sprite(de.Handle.getViewerResource("".concat(t,"_btn_img.png")).texture),i.mOnSound=de.Handle.getViewerResource("speaker_down.png").texture,i.mOffSound=de.Handle.getViewerResource("speaker_normal.png").texture,i.on("pointertap",(function(){i.onClick()})),i.createElement(),i}return m(n,[{key:"createElement",value:function(){this.mSound=new PIXI.Sprite(this.mOffSound),this.mSound.position.set(270,this.height/2-this.mSound.height/2),this.mProgressBar=new PIXI.Sprite(de.Handle.getViewerResource("progress_bar.png").texture),this.mProfile.anchor.set(.5),this.mProfile.position.set(0,this.mProgressBar.height/2),this.mProgressBar.position.set(70,this.height/2-this.mProgressBar.height/2),this.mProgressBar.addChild(this.mProfile),this.addChild(this.mProgressBar,this.mSound)}},{key:"onClick",value:function(){}},{key:"playMotion",value:function(){var t=this;this.mSound.texture=this.mOnSound,this.texture=this.mDown,this.mProgress=new PIXI.Sprite(de.Handle.getViewerResource("voice_place.png").texture),this.mMask=new PIXI.Graphics,this.mMask.beginFill(0,1),this.mMask.drawRect(0,0,150,32),this.mMask.endFill(),this.mMask.x=-this.mProgress.width,this.mProgress.mask=this.mMask,this.mProgressBar.addChild(this.mProgress,this.mMask),this.mProgressBar.sortableChildren=!0,this.mMask.zIndex=1,this.mProgress.zIndex=1,this.mProfile.zIndex=2,Nt["a"].to(this.mMask,{x:this.mProgress.x,duration:this.mDuration+1}),Nt["a"].to(this.mProfile,{x:this.mProgressBar.width,duration:this.mDuration+1}).eventCallback("onComplete",(function(){t.mProgressBar.removeChild(t.mProgress,t.mMask),t.mProgress=null,t.mMask=null,t.mSound.texture=t.mOffSound,t.texture=t.mNormal,t.mProfile.x=0}))}},{key:"resetState",value:function(){var t=this;return new Promise((function(e){Nt["a"].killTweensOf(t.mProfile),(t.mMask||t.mProgress)&&t.mProgressBar.removeChild(t.mMask,t.mProgress),t.mSound.texture=t.mOffSound,t.texture=t.mNormal,t.mProfile.x=0,e()}))}},{key:"disable",value:function(){this.interactive=!1,this.buttonMode=!1,this.mSound.tint=12369084,this.mProfile.tint=12369084,this.mProgressBar.tint=12369084,this.tint=12369084}},{key:"active",value:function(){this.interactive=!0,this.buttonMode=!0,this.mSound.tint=16777215,this.mProfile.tint=16777215,this.mProgressBar.tint=16777215,this.tint=16777215}}]),n}(PIXI.Sprite),Xp=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this)}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){var n,i,r,o,a,s,u,c,l=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(this.mCardIndex=e,this.interactive=!0,console.warn("[ ".concat(e," ]번째 카드를 클릭")),this.mBg=new PIXI.Sprite(de.Handle.getViewerResource("bg_2.png").texture),this.addChild(this.mBg),n={1:{x:1072,y:540},2:{x:968,y:620}},i=1;i<=2;i++)r=new PIXI.Sprite(de.Handle.getViewerResource("2_cha_".concat(i,".png")).texture),r.position.set(n[i].x,n[i].y),this.addChild(r);return o=new PIXI.spine.Spine(de.Handle.getViewerResource("02_baru.json").spineData),o.position.set(20+o.width,440+o.height),this.addChild(o),o.stateData.defaultMix=.25,o.state.setAnimation(0,"default",!0),t.next=14,this.createText();case 14:for(a=[o.stateData.skeletonData.findAnimation("narr").timelines.slice(-1)[0]["events"][0].time,o.stateData.skeletonData.findAnimation("narr").timelines.slice(-1)[0]["events"][1].time],o.state.setAnimation(0,"narr",!1),s=function(t){Nt["a"].delayedCall(a[t],(function(){var e=o.stateData.skeletonData.findAnimation("narr").timelines.slice(-1)[0]["events"][t].data.audioPath,n=de.Handle.getViewerResource(e).sound;n.play()}))},u=0;u<2;u++)s(u);c=o.stateData.skeletonData.findAnimation("narr").duration,Nt["a"].delayedCall(c,Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o.state.setAnimation(0,"default",!0),t.next=3,l.readyRec();case 3:case"end":return t.stop()}}),t)}))));case 20:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"createText",value:function(){var t=this;return new Promise((function(e){t.mText=new PIXI.Text(Ft.nodakwords[Ft.studyDay][t.mCardIndex],{fontSize:180,fontFamily:"TmoneyRoundWindExtraBold",padding:20,fill:16777215}),t.mText.tint=3355443,t.mText.pivot.set(t.mText.width/2,t.mText.height/2),t.mText.position.set(640,228),t.mText.scale.set(0),t.mBg.addChild(t.mText),Nt["a"].to(t.mText.scale,{x:1,y:1,duration:.5,ease:"back"}).eventCallback("onComplete",(function(){t.mSound=new Audio,t.mSound.src="".concat(Ft.restAPI,"common/sounds/word_").concat(t.mCardIndex+1,".mp3"),t.mSound.play()})),Nt["a"].delayedCall(2,(function(){e()}))}))}},{key:"readyRec",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.mRecPlace=new PIXI.Container,this.mRecPlace.position.set(Ft.w/2,438),this.addChild(this.mRecPlace),this.mRecSpine=new PIXI.spine.Spine(de.Handle.getCommonResource("timer_3sec.json").spineData),this.mRecSprite=new PIXI.Sprite(de.Handle.getCommonResource("rec_dim.png").texture),this.mRecSprite.anchor.set(.5),this.mRecPlace.addChild(this.mRecSprite,this.mRecSpine),this.startRec();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"startRec",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.mRecord=new Np,this.addChild(this.mRecord),t.next=4,this.mRecord.readyRecord();case 4:return window["recSpine"]=this.mRecSpine,t.next=7,this.mRecord.setRecord();case 7:this.mRecSprite.texture=de.Handle.getCommonResource("play.png").texture,this.mRecSprite.interactive=!0,this.mRecSprite.buttonMode=!0,this.mRecSprite.once("pointertap",Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Nt["a"].to(e.mRecPlace.scale,{x:.8,y:.8,duration:.25}).yoyo(!0).repeat(1),t.next=3,e.mRecord.playSound("normal");case 3:e.goPlaySoundScene();case 4:case"end":return t.stop()}}),t)}))));case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"goPlaySoundScene",value:function(){var t=this,e=new PIXI.Sprite(de.Handle.getViewerResource("bg_3.png").texture);e.x=Ft.w,this.addChild(e);var n=de.Handle.getViewerResource("ac6_script_10.mp3").sound;n.play(),Nt["a"].to(this,{x:-Ft.w,duration:.5}).eventCallback("onComplete",(function(){t.x=0,t.removeChildren(),t.setSoundScene()}))}},{key:"setSoundScene",value:function(){var t=this;this.mBg.texture=de.Handle.getViewerResource("bg_3.png").texture,this.addChild(this.mBg);var e=new jp(de.Handle.getCommonResource("word_".concat(Ft.studyDay,".png")).texture);e.position.set(410,258),this.mText.position.set(410,520);var n=new PIXI.Sprite(de.Handle.getViewerResource("next_btn.png").texture);n.anchor.set(.5),n.scale.set(0),n.position.set(748,640),n.on("pointertap",Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window["soundManager"]&&(window["soundManager"].pause(),window["soundManager"]=null),window["nodakSnd"]&&(window["nodakSnd"].stop(),window["nodakSnd"]=null),e.next=4,t.mRecord.stop();case 4:Nt["a"].to(n.scale,{x:.8,y:.8,duration:.25}).repeat(1).yoyo(!0).eventCallback("onComplete",(function(){t.endCardScene()}));case 5:case"end":return e.stop()}}),e)})))),this.mBg.addChild(e,this.mText,n),Nt["a"].to(n.scale,{x:1,y:1,duration:.5,ease:"back"}).eventCallback("onComplete",(function(){n.interactive=!0,n.buttonMode=!0})),this.createBtn()}},{key:"createBtn",value:function(){var t=this,e=new Up("cha"),n=new Up("slow"),i=new Up("fast"),r=new Up("robo");this.mBtnList=[e,i,n,r];var o,a=["normal","fast","slow","robot"],s=[130,290,450,608],u=Object(Vt["a"])(this.mBtnList);try{var c=function(){var e=o.value,n=t.mBtnList.indexOf(e);t.mBg.addChild(e),e.disable(),e.position.set(1054-e.width/2,s[n]-e.height/2),e.onClick=Object(d["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.playMotion(),t.disable(!0),e.active(),e.interactive=!1,i.next=6,t.mRecord.playSound(a[n]);case 6:t.disable(!1);case 7:case"end":return i.stop()}}),i)}))),Nt["a"].delayedCall(2.3,(function(){Nt["a"].to(e.scale,{x:.98,y:.98,duration:.25}).repeat(5).yoyo(!0).eventCallback("onComplete",(function(){e.active()}))}))};for(u.s();!(o=u.n()).done;)c()}catch(l){u.e(l)}finally{u.f()}}},{key:"deleteSound",value:function(){window["soundManager"]&&(window["soundManager"].pause(),window["soundManager"]=null),window["nodakSnd"]&&(window["nodakSnd"].stop(),window["nodakSnd"]=null)}},{key:"disable",value:function(t){var e,n=Object(Vt["a"])(this.mBtnList);try{for(n.s();!(e=n.n()).done;){var i=e.value;t?i.disable():i.active(),i.interactive=!t}}catch(r){n.e(r)}finally{n.f()}}},{key:"endCardScene",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.mRecord.stop();case 2:this.mRecord.destroy(),this.mRecord=null,this.mSound.pause(),this.mSound=null,this.parent.endCardScene();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(PIXI.Container),zp=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this)}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,o,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=new PIXI.Sprite(de.Handle.getViewerResource("bg_1.png").texture),this.addChild(e),n=[296,364],i=[200,Ft.h-70],r=1;r<=2;r++)o=new Ae(de.Handle.getViewerResource("1_cha_".concat(r,".png")).texture),o.position.set(n[r-1],i[r-1]),this.addChild(o);return this.mMuck=new PIXI.spine.Spine(de.Handle.getViewerResource("01_baru.json").spineData),this.mMuck.position.set(Ft.w/2-450,Ft.h-140),this.addChild(this.mMuck),this.mMuck.stateData.defaultMix=.25,t.next=11,this.createSound();case 11:this.mMuck.state.setAnimation(0,"click_01",!1),se("ac6_script_6"),a=this.mMuck.stateData.skeletonData.findAnimation("click_01").duration,Nt["a"].delayedCall(a,(function(){s.mMuck.state.setAnimation(0,"default",!0),s.mMuck.interactive=!0,s.mMuck.buttonMode=!0})),this.mRandom=ne([1,2,3,4]),this.mMuck.on("pointertap",Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s.mMuck.interactive=!1,t.next=3,s.settingMuckMotion();case 3:s.mMuck.interactive=!0;case 4:case"end":return t.stop()}}),t)})))),this.createCard();case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createSound",value:function(){var t=this;return new Promise((function(e){for(var n=1;n<5;n++)t.mMuck.stateData.skeletonData.findAnimation("click_0".concat(n)).timelines.slice(-1)[0]["events"][0].data.name;e()}))}},{key:"settingMuckMotion",value:function(){var t=this;return new Promise((function(e){console.log("%c ".concat(t.mRandom[0],"번째 스파인// click_0").concat(t.mRandom[0]),"border: 2px green solid;"),t.mMuckState&&t.mMuckState.kill(),t.mMuck.state.setAnimation(0,"click_0".concat(t.mRandom[0]),!1);var n=t.mMuck.stateData.skeletonData.findAnimation("click_0".concat(t.mRandom[0])).timelines.slice(-1)[0]["events"][0],i=n.time;Nt["a"].delayedCall(i,(function(){console.log(n.data.name);var t=de.Handle.getViewerResource("".concat(n.data.name,".mp3")).sound;t.play(),window["nodakSnd"]=t})),t.mMuckState=Nt["a"].delayedCall(t.mMuck.stateData.skeletonData.findAnimation("click_0".concat(t.mRandom[0])).duration,(function(){t.mMuck.state.setAnimation(0,"default",!0),e()})),t.mRandom.splice(0,1),t.mRandom.length<=0&&(t.mRandom=ne([1,2,3,4]))}))}},{key:"createCard",value:function(){var t=this;this.mCardAry=[],this.mCardBackupPos=[];var e=new Audio;e.src="".concat(Ft.restAPI,"viewer/nodak/sounds/ac6_pop.mp3"),e.play();for(var n=Ft.nodakQuiz[Ft.studyDay].length,i=function(e){var i=new jp(de.Handle.getCommonResource("word_".concat(e+1,".png")).texture,e);t.addChild(i),t.mCardAry.push(i);var r="card".concat(n),o=Ft.nodakPos["".concat(r)][e].x,a=Ft.nodakPos["".concat(r)][e].y;i.position.set(Ft.w/2,Ft.h/2),Nt["a"].to(i,{x:o,y:a,duration:.5}),i.onClick=Object(d["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:window["soundManager"]&&(window["soundManager"].pause(),window["soundManager"]=null),window["nodakSnd"]&&(window["nodakSnd"].stop(),window["nodakSnd"]=null),t.mCardScene&&(t.mCardScene.removeChildren(),t.removeChild(t.mCardScene)),t.mCardScene=new Xp,t.addChild(t.mCardScene),t.mCardScene.onInit(i.cardIndex),t.mCardBackupPos=[e,i.x,i.y];case 7:case"end":return n.stop()}}),n)})))},r=0;r<n;r++)i(r)}},{key:"startRec",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.mRecord=new Np,this.addChild(this.mRecord),this.mRecord.zIndex=3,t.next=5,this.mRecord.readyRecord();case 5:return t.next=7,this.mRecord.setRecord();case 7:return t.next=9,this.mRecord.playRecord("slow");case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"endCardScene",value:function(){var t=this;this.mCardScene&&(Nt["a"].to(this.mCardScene.scale,{x:0,y:0,duration:.5}),Nt["a"].to(this.mCardScene,{x:this.mCardBackupPos[1],y:this.mCardBackupPos[2],duration:.5}).eventCallback("onComplete",(function(){t.mCardBackupPos=[],t.mCardScene.removeChildren(),t.removeChild(t.mCardScene)})))}},{key:"disableCard",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){var n,i,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.mCardBackupPos&&Nt["a"].to(this.mCardAry[this.mCardBackupPos[0]],{x:this.mCardBackupPos[1],y:this.mCardBackupPos[2],duration:.5}),n=!0,i=Object(Vt["a"])(this.mCardAry);try{for(i.s();!(r=i.n()).done;)o=r.value,1==o.interactive&&(n=!1),o.clickFlag=e,o.scale.set(1),o.zIndex=0}catch(s){i.e(s)}finally{i.f()}if(1!=n){t.next=10;break}return a=new Lp,this.addChild(a),t.next=9,a.start();case 9:this.endGame();case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"endGame",value:function(){this.parent.endGame()}}]),n}(PIXI.Container),Gp=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this,"nodak")}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye.Handle.showLoadingScreen();case 2:return Ft.studyDay=3,console.log(this.gamename),t.next=6,this.loadViewerResource(Yn);case 6:return t.next=8,this.loadCommonResource(s["day".concat(Ft.studyDay)]);case 8:return t.next=10,ye.Handle.closeLoadingScreen();case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new Ve,this.addChild(e),t.next=4,e.intro();case 4:this.removeChild(e),e=null,n=new PIXI.Sprite(de.Handle.getViewerResource("bg_1.png").texture),this.mMuck=new PIXI.spine.Spine(de.Handle.getViewerResource("01_baru.json").spineData),this.addChild(this.mMuck),this.mMuck.position.set(Ft.w/2,Ft.h-140),this.mMuck.stateData.defaultMix=.25,this.mMuck.state.setAnimation(0,"intro",!1),i=[this.mMuck.stateData.skeletonData.findAnimation("intro").timelines.slice(-1)[0]["events"][0].time,this.mMuck.stateData.skeletonData.findAnimation("intro").timelines.slice(-1)[0]["events"][1].time],Nt["a"].delayedCall(i[0],(function(){var t=de.Handle.getViewerResource("ac6_script_1.mp3").sound;t.play()})),Nt["a"].delayedCall(i[1],(function(){var t=de.Handle.getViewerResource("ac6_script_2.mp3").sound;t.play()})),this.addChild(n,this.mMuck),this.sortableChildren=!0,this.mMuck.zIndex=2,r=this.mMuck.stateData.skeletonData.findAnimation("intro").duration,Nt["a"].delayedCall(r,(function(){Nt["a"].to(o.mMuck,{x:Ft.w/2-450,duration:.5}).eventCallback("onComplete",(function(){o.setGame()}))}));case 20:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setGame",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.mMuck&&this.mMuck.destroy(),this.mMuck=null,this.removeChildren(),this.x=0,this.mGame=new zp,this.addChild(this.mGame),t.next=8,this.mGame.onInit();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"endGame",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:location.href="https://www.imestudy.co.kr:443";case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(Se),Wp=n("27d6"),qp=n.n(Wp),Hp=["navi_01.png","navi_02.png","navi_03.png","navi_bar.png","t1_bg.png","t1_box1.png","t1_box2.png","t1_box3.png","t1_box_dim.png","t1_train01.png","t1_train02.png","t1_train03.png","t1_train04.png","t2_bg.png","t2_basket.png","t2_ball01.png","t2_ball02.png","t2_ball03.png","t3_bg.png","t3_battery01.png","t3_battery02.png","t3_cable01.png","t3_cable02.png","t3_mirror01.png","t3_mirror02.png","t3_mirror03.png","t4_bg.png","t4_bar1.png","t4_equal.png","side_type1_dim1.png","side_type1_dim2.png","side_type1_pink1.png","side_type1_pink2.png","side_type2_dim1.png","side_type2_dim2.png","side_type2_pink1.png","side_type2_pink2.png","side_type3_dim1.png","side_type3_dim2.png","side_type3_pink1.png","side_type3_pink2.png","side_type4_dim1.png","side_type4_dim2.png","side_type4_dim3.png","side_type4_pink1.png","side_type4_pink2.png","side_type4_pink3.png","side_type5_dim1.png","side_type5_dim2.png","side_type5_dim3.png","side_type5_pink1.png","side_type5_pink2.png","side_type5_pink3.png","side_type6_dim1.png","side_type6_dim2.png","side_type6_dim3.png","side_type6_pink1.png","side_type6_pink2.png","side_type6_pink3.png","type1_1deep.png","type1_2deep.png","type1_1default.png","type1_2default.png","type1_1pink.png","type1_2pink.png","type1_focus1.png","type1_focus2.png","type2_1deep.png","type2_2deep.png","type2_1default.png","type2_2default.png","type2_1pink.png","type2_2pink.png","type2_focus1.png","type2_focus2.png","type3_1deep.png","type3_2deep.png","type3_1default.png","type3_2default.png","type3_1pink.png","type3_2pink.png","type3_focus1.png","type3_focus2.png","type4_1deep.png","type4_2deep.png","type4_3deep.png","type4_1default.png","type4_2default.png","type4_3default.png","type4_1pink.png","type4_2pink.png","type4_3pink.png","type4_focus1.png","type4_focus2.png","type4_focus3.png","type5_1deep.png","type5_2deep.png","type5_3deep.png","type5_1default.png","type5_2default.png","type5_3default.png","type5_1pink.png","type5_2pink.png","type5_3pink.png","type5_focus1.png","type5_focus2.png","type5_focus3.png","type6_1deep.png","type6_2deep.png","type6_3deep.png","type6_1default.png","type6_2default.png","type6_3default.png","type6_1pink.png","type6_2pink.png","type6_3pink.png","type6_focus1.png","type6_focus2.png","type6_focus3.png"],Yp=["ac7_correct.mp3","ac7_wrong.mp3","ac7_script_1.mp3","ac7_script_2.mp3","ac7_script_3.mp3","ac7_script_4.mp3","ac7_script_5.mp3","ac7_script_6.mp3"],Qp=[],Zp=[],$p={images:Hp,sounds:Yp,json:[],videos:Qp,spine:Zp},Kp={images:["word_2.png","word_4.png","word_5.png","word_6.png","word_8.png","word_9.png","word_10.png","word_12.png","word_14.png"],sounds:[],json:[],videos:[],spine:[]},Jp={images:[],sounds:[],json:[],videos:[],spine:[]},tf=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this)}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"next",value:function(){}}]),n}(PIXI.Container),ef=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mSoundList=t,i.mActive=de.Handle.getCommonResource("btn_sound_normal.png").texture,i.mDisAble=de.Handle.getCommonResource("btn_sound_on.png").texture,i.mBtn=new PIXI.Sprite(i.mDisAble),i.mBtn.anchor.set(.5),i.addChild(i.mBtn),i.on("pointertap",(function(){i.onSound()})),i}return m(n,[{key:"onSound",value:function(){var t=this;return new Promise((function(e){if(t.parent.parent.guideSnd=null,t.interactive=!1,t.buttonMode=!1,window["totalSound"]&&window["totalSound"]!==[]){var n,i=Object(Vt["a"])(window["totalSound"]);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.pause(),r=null}}catch(u){i.e(u)}finally{i.f()}}if(t.mBtn.texture=t.mDisAble,window["totalSound"]=[],1==t.mSoundList.length){var o=document.createElement("audio");o.src="".concat(Ft.restAPI,"common/sounds/").concat(t.mSoundList[0]),window["totalSound"].push(o),o.onloadedmetadata=function(){o.play(),Kt.delayedCall(o.duration,(function(){t.mBtn.texture=t.mActive,t.interactive=!0,t.buttonMode=!0,e()}))}}else for(var a=function(n){var i=document.createElement("audio");i.src="".concat(Ft.restAPI,"common/sounds/").concat(t.mSoundList[n]),window["totalSound"].push(i),Kt.delayedCall(n,(function(){n==t.mSoundList.length-1?(i.play(),t.interactive=!0,t.buttonMode=!0,t.mBtn.texture=t.mActive,e()):i.play()}))},s=0;s<t.mSoundList.length;s++)a(s)}))}}]),n}(PIXI.Container),nf=function(t){v(n,t);var e=C(n);function n(t,i,r){var o;p(this,n),o=e.call(this),o.mText=t,o.mWhiteCard=de.Handle.getViewerResource("t1_box1.png").texture,o.mActiveCard=de.Handle.getViewerResource("t1_box2.png").texture,o.mTrainDimmedCard=de.Handle.getViewerResource("t1_box3.png").texture,o.mDimmedCard=de.Handle.getViewerResource("t1_box_dim.png").texture;var a={fontSize:92,fontWeight:"bold",fontFamily:"TmoneyRoundWindExtraBold",fill:16777215,padding:20};if(o.mCardAry=[],i){o.mTrainText=[];var s=new PIXI.Sprite(o.mTrainDimmedCard);o.mCardAry.push(s);var u=new PIXI.Text("?",a);u.tint=0,u.pivot.set(u.width/2,u.height/2),u.position.set(s.width/2,s.height/2),o.addChild(s),s.addChild(u),o.mTrainText.push(u)}else{o.mTrain=new PIXI.Sprite,o.addChild(o.mTrain);var c=o.mText.length;o.mTrain.texture=de.Handle.getViewerResource("t1_train0".concat(c+1,".png")).texture;var l=o.mTrain.width/2-8,h={type1:[l],type2:[l-80,l+80],type3:[l-160,l,l+160]};if(c>1)for(var f=0;f<c;f++){var m=new PIXI.Sprite(o.mTrainDimmedCard);m.anchor.set(.5),m.x=h["type".concat(c)][f],m.y=o.mTrain.height/2-10,o.mCardAry.push(m);var g=new PIXI.Text(o.mText[f],a);g.pivot.set(g.width/2,g.height/2),g.tint=0,o.mTrain.addChild(m),m.addChild(g)}else{var v=new PIXI.Sprite(o.mDimmedCard);v.anchor.set(.5),v.position.set(o.mTrain.width/2-8,o.mTrain.height/2-10),o.mCardAry.push(v);var y=new PIXI.Text(o.mText,a);y.pivot.set(y.width/2,y.height/2),y.tint=0,o.mTrain.addChild(v),v.addChild(y)}}return void 0!==r&&(o.onClick=1==r?function(){return o.correct()}:function(){return o.wrong()}),o.pivot.set(o.width/2,o.height/2),o.on("pointertap",Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o.onClick();case 1:case"end":return t.stop()}}),t)})))),o}return m(n,[{key:"trainCorrect",value:function(){for(var t=0;t<this.mTrainText.length;t++)this.mTrainText[t].text=this.mText[t],this.mTrainText[t].pivot.set(this.mTrainText[t].width/2,this.mTrainText[t].height/2);var e,n=Object(Vt["a"])(this.mCardAry);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.texture=this.mWhiteCard}}catch(r){n.e(r)}finally{n.f()}}},{key:"onClick",value:function(){}},{key:"correct",value:function(){var t=this;this.correct=function(){return null},this.parent.deleteWrongCard(),se("ac7_correct"),console.log("정답"),Kt.delayedCall(1,(function(){t.parent.next()}))}},{key:"wrong",value:function(){var t=this;this.wrong=function(){return null},console.log("오답"),se("ac7_wrong");var e,n=Object(Vt["a"])(this.mCardAry);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.texture=this.mDimmedCard}}catch(r){n.e(r)}finally{n.f()}Kt.to(this,{alpha:0,duration:.5}).delay(.5).eventCallback("onComplete",(function(){t.visible=!1}))}},{key:"delete",value:function(){var t,e=this,n=Object(Vt["a"])(this.mCardAry);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.texture=this.mDimmedCard,Kt.to(this,{alpha:0,duration:.25}).delay(.25).eventCallback("onComplete",(function(){e.visible=!1}))}}catch(r){n.e(r)}finally{n.f()}}},{key:"disable",value:function(t){if(t){var e,n=Object(Vt["a"])(this.mCardAry);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.texture=this.mDimmedCard}}catch(s){n.e(s)}finally{n.f()}}else{this.interactive=!0,this.buttonMode=!0;var r,o=Object(Vt["a"])(this.mCardAry);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.texture=this.mActiveCard}}catch(s){o.e(s)}finally{o.f()}}}}]),n}(PIXI.Container),rf=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,i.createTrain(),i.createExmCard(),i.pivot.set(i.width/2,i.height/2),i}return m(n,[{key:"createTrain",value:function(){this.mHeadTrain=new PIXI.Sprite(de.Handle.getViewerResource("t1_train01.png").texture),this.addChild(this.mHeadTrain),this.mType=[];var t=de.Handle.getViewerResource("t1_train02.png").texture,e=de.Handle.getViewerResource("t1_train03.png").texture,n=de.Handle.getViewerResource("t1_train04.png").texture;this.mType=[t,e,n],this.mTextTrain=new PIXI.Sprite,this.mTextTrain.texture=this.mType[Object.keys(this.mData["correct"]).length-1],this.addChild(this.mTextTrain),this.mHeadTrain.position.set(this.mTextTrain.width+78,66);var i,r=[],o=Object(Vt["a"])(this.mData["correct"]);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=ee(a),u=te(a);r.push("".concat(s).concat(u,".mp3"))}}catch(c){o.e(c)}finally{o.f()}console.log(r),this.mSoundBtn=new ef(r),this.mSoundBtn.position.set(0,this.height/2),this.addChild(this.mSoundBtn),this.mSoundBtn.alpha=0,this.mTextTrain.position.set(this.mSoundBtn.width,0)}},{key:"createExmCard",value:function(){console.log(this.mData),console.log("text_data=>".concat(this.mData["correct"])),this.mQuizCard=[];var t="";t=this.mData["correct"].length.toString();for(var e=this.mTextTrain.width/2-8,n={type1:[e],type2:[e-80,e+80],type3:[e-160,e,e+160]},i=0;i<this.mData["correct"].length;i++){console.log(this.mData["correct"][i]),console.log(n["type".concat(t)]);var r=new nf(this.mData["correct"][i],!0);r.position.set(+n["type".concat(t)][i],this.mTextTrain.height/2),this.mTextTrain.addChild(r),this.mQuizCard.push(r)}}},{key:"soundBtnVisible",value:function(t){t?Kt.to(this.mSoundBtn,{alpha:1,duration:.25}):Kt.to(this.mSoundBtn,{alpha:0,duration:.25})}},{key:"onSound",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.mSoundBtn.onSound();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"correct",value:function(){var t,e=Object(Vt["a"])(this.mQuizCard);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.trainCorrect()}}catch(i){e.e(i)}finally{e.f()}}}]),n}(PIXI.Container),of=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,i}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new PIXI.Sprite(de.Handle.getViewerResource("t1_bg.png").texture),this.addChild(e),t.next=4,this.createGuideText();case 4:return t.next=6,this.createTrain();case 6:this.mExample=[];case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createGuideText",value:function(){var t=this;return new Promise((function(e){var n=new PIXI.Text("소리를 듣고 알맞은 답을 찾아봐!",{fontFamily:"TmoneyRoundWindExtraBold",fontSize:34});n.pivot.set(n.width/2,n.height/2),n.position.set(Ft.w/2,40),t.addChild(n),n.interactive=!0,n.buttonMode=!0,n.on("pointertap",(function(){t.mGuideSnd&&(t.mGuideSnd.pause(),t.mGuideSnd=null),t.mGuideSnd=de.Handle.getViewerResource("ac7_script_1.mp3").sound,t.mGuideSnd.play()})),e()}))}},{key:"createTrain",value:function(){var t=this;return new Promise((function(e){t.mTrain=new rf(t.mData),t.mTrain.position.set(-t.mTrain.width,Ft.h/2-120),t.addChild(t.mTrain);var n=0;n=2==t.mData["type"]?Ft.w/2+100:Ft.w/2+96,se("ac7_trainstop"),Kt.to(t.mTrain,{x:n,duration:1}).eventCallback("onComplete",(function(){t.mTrain.soundBtnVisible(!0),e()}))}))}},{key:"createQuizCard",value:function(){var t=this;return new Promise((function(e){var n=Ft.w/2,i={type1:[n-400,n,n+400],type2:[n-450,n,n+450],type3:[n-300,n+300]},r=t.mData["type"];console.log("type=> ".concat(r," type"));var o=1;1!=r&&2!=r||(o=2),t.mWrongCard=[];var a=[];if(2==o){for(var s=1;s<=o;s++){var u=new nf(t.mData["wrong".concat(s)],!1,!1);a.push(u),t.mWrongCard.push(u)}t.mCorrectCard=new nf(t.mData["correct"],!1,!0),a.push(t.mCorrectCard),t.mExample=ne(a)}else{var c=new nf(t.mData["wrong"],!1,!1);a.push(c),t.mWrongCard.push(c),t.mCorrectCard=new nf(t.mData["correct"],!1,!0),a.push(t.mCorrectCard),t.mExample=ne(a)}for(var l=0;l<t.mExample.length;l++)t.mExample[l].position.set(i["type".concat(r)][l],Ft.h/2+150),t.addChild(t.mExample[l]);Kt.delayedCall(1,Object(d["a"])(regeneratorRuntime.mark((function n(){var i,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.mTrain.onSound();case 2:i=Object(Vt["a"])(t.mExample);try{for(i.s();!(r=i.n()).done;)o=r.value,o.disable(!1)}catch(a){i.e(a)}finally{i.f()}e();case 5:case"end":return n.stop()}}),n)}))))}))}},{key:"destroyTrain",value:function(){var t=this;return new Promise((function(e){t.mTrain.soundBtnVisible(!1),Kt.delayedCall(.5,(function(){se("ac7_trainstart")})),Kt.to(t.mTrain,{x:1.5*Ft.w,duration:1}).delay(.5).eventCallback("onComplete",(function(){t.mTrain=null,e()}))}))}},{key:"deleteWrongCard",value:function(){this.mTrain.correct();var t,e=Object(Vt["a"])(this.mWrongCard);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.delete()}}catch(i){e.e(i)}finally{e.f()}Kt.to(this.mCorrectCard,{x:Ft.w/2,duration:.5}).delay(.5)}},{key:"next",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.destroyTrain();case 2:this.parent.next();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"guideSnd",get:function(){return this.mGuideSnd},set:function(t){this.mGuideSnd&&this.mGuideSnd.pause(),this.mGuideSnd=t}}]),n}(PIXI.Container),af=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,i.mCurrentStep=0,i}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(this.mData),this.removeChild(),this.createQuiz();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createQuiz",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(this.mType1GameScene=[],e=Object.keys(this.mData).length,n=1;n<=e;n++)this.mType1GameScene.push(new of(this.mData["step".concat(n)]));return this.addChild(this.mType1GameScene[this.mCurrentStep]),t.next=6,this.mType1GameScene[this.mCurrentStep].onInit();case 6:i=de.Handle.getViewerResource("ac7_script_1.mp3").sound,i.play(),Kt.delayedCall(i.duration+.5,(function(){r.mType1GameScene[r.mCurrentStep].createQuizCard()}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"next",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=Object.keys(this.mData).length,this.mCurrentStep+=1,!(this.mCurrentStep>=e)){t.next=9;break}this.parent.parent.nextType(),console.log("currentStep=>".concat(this.mCurrentStep)),console.log("total=>".concat(e)),t.next=17;break;case 9:return this.parent.parent.nextStep(),this.removeChildren(),this.addChild(this.mType1GameScene[this.mCurrentStep]),t.next=15,this.mType1GameScene[this.mCurrentStep].onInit();case 15:return t.next=17,this.mType1GameScene[this.mCurrentStep].createQuizCard();case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(tf),sf=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mSoundName=t,i.mActive=de.Handle.getCommonResource("btn_sound_normal.png").texture,i.mDisAble=de.Handle.getCommonResource("btn_sound_on.png").texture,i.mBtn=new PIXI.Sprite(i.mDisAble),i.mBtn.anchor.set(.5),i.addChild(i.mBtn),i.on("pointertap",(function(){i.onSound()})),i}return m(n,[{key:"onSound",value:function(t){var e=this;return new Promise((function(n){console.log(e.mSoundName),e.parent.parent.guideSnd=null,e.interactive=!1,e.buttonMode=!1,e.mBtn.texture=e.mDisAble;var i=document.createElement("audio");i.src="".concat(Ft.restAPI,"common/sounds/").concat(e.mSoundName),i.onloadedmetadata=function(){i.play(),e.mDuration=i.duration,Kt.delayedCall(e.mDuration,(function(){i=null,t||e.active(),n()}))}}))}},{key:"active",value:function(){this.mBtn.texture=this.mActive,this.interactive=!0,this.buttonMode=!0}},{key:"duration",get:function(){if(this.mDuration)return this.mDuration}}]),n}(PIXI.Container),uf=function(t){v(n,t);var e=C(n);function n(t,i){var r;p(this,n),r=e.call(this),r.mNormal=de.Handle.getViewerResource("t2_ball02.png").texture,r.mDisAble=de.Handle.getViewerResource("t2_ball03.png").texture,r.mCorrect=de.Handle.getViewerResource("t2_ball01.png").texture,r.mBall=new PIXI.Sprite(r.mDisAble),r.mBall.anchor.set(.5),r.mBall.x=150;var o="word_".concat(Jt(t),".mp3");return r.mSoundBtn=new sf(o),r.mSoundBtn.y=r.mBall.height/2-r.mSoundBtn.height/2,r.addChild(r.mBall,r.mSoundBtn),r.pivot.set(r.width/2,r.height/2),r.mBall.on("pointertap",(function(){r.onClick()})),r.onClick=1==i?function(){return r.correct()}:function(){return r.wrong()},r}return m(n,[{key:"soundPlay",value:function(t){t?this.mSoundBtn.onSound(!0):this.mSoundBtn.onSound()}},{key:"soundMotion",value:function(){Kt.to(this.mSoundBtn.scale,{x:.8,y:.8,duration:.25}).repeat(1).yoyo(!0),Kt.to(this.mBall.scale,{x:.8,y:.8,duration:.25}).repeat(1).yoyo(!0)}},{key:"activeGame",value:function(){this.mSoundBtn.active(),this.mBall.interactive=!0,this.mBall.buttonMode=!0,this.mBall.texture=this.mNormal}},{key:"onClick",value:function(){}},{key:"correct",value:function(){var t=this;this.correct=function(){return null},this.mSoundBtn.alpha=0,this.parent.endMotion(),this.mBall.texture=this.mCorrect,this.mSoundBtn.visible=!1,console.log("정답"),Kt.to(this,{x:Ft.w/2,y:300,duration:.5}).delay(.5),Kt.to(this,{y:600,duration:.5}).delay(1).eventCallback("onComplete",(function(){se("ac7_correct"),Kt.delayedCall(.5,(function(){t.parent.next()}))}))}},{key:"wrong",value:function(){var t=this;this.wrong=function(){se("ac7_wrong")},console.log("오답"),this.mSoundBtn.alpha=0;var e=this.x,n=this.y,i=0;i=this.x>Ft.w/2?200:-200,Kt.to(this,{x:Ft.w/2+i,y:400,duration:.25,ease:Zt["b"].easeNone}),se("ac7_wrong"),Kt.to(this,{x:e+2*i,y:500,duration:.5,ease:Zt["b"].easeNone}).delay(.25).eventCallback("onComplete",(function(){t.alpha=0,t.mBall.texture=t.mDisAble,t.position.set(e,n),t.mSoundBtn.alpha=1,Kt.to(t,{alpha:1,duration:.5}).delay(.5)}))}},{key:"endMotion",value:function(){this.wrong=function(){return null},this.mBall.texture=this.mDisAble}},{key:"duration",get:function(){return this.mSoundBtn.duration}}]),n}(PIXI.Container),cf=(PIXI.Container,function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,i}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new PIXI.Sprite(de.Handle.getViewerResource("t2_bg.png").texture),this.addChild(e),console.log(this.mData["type"]),1==this.mData["type"]?this.createImgQuiz():this.createTextQuiz(),this.createBallQuiz(),t.next=7,this.createGuideText();case 7:n=new PIXI.Sprite(de.Handle.getViewerResource("t2_basket.png").texture),n.anchor.set(.5),n.position.set(Ft.w/2,368+n.height/2),this.addChild(n);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createGuideText",value:function(){var t=this;return new Promise((function(e){var n=new PIXI.Text("알맞은 소리를 찾아 넣어봐!",{fontFamily:"TmoneyRoundWindExtraBold",fontSize:34});n.pivot.set(n.width/2,n.height/2),n.position.set(Ft.w/2,40),t.addChild(n),n.interactive=!0,n.buttonMode=!0,n.on("pointertap",(function(){t.mGuideSnd&&(t.mGuideSnd.pause(),t.mGuideSnd=null),t.mGuideSnd=de.Handle.getViewerResource("".concat(t.mData["sound"])).sound,t.mGuideSnd.play()})),e()}))}},{key:"createImgQuiz",value:function(){var t=Jt(this.mData["correct"]);console.log(this.mData["correct"]),console.log("word_".concat(t,".png")),this.mImgQuiz=new PIXI.Sprite(de.Handle.getCommonResource("word_".concat(t,".png")).texture),this.mImgQuiz.anchor.set(.5),this.mImgQuiz.scale.set(.6),this.mImgQuiz.position.set(Ft.w/2,240),this.addChild(this.mImgQuiz)}},{key:"createTextQuiz",value:function(){this.mTextQuiz=new PIXI.Text(this.mData["correct"],{fontSize:120,fontFamily:"TmoneyRoundWindExtraBold",fill:16777215,padding:20}),this.mTextQuiz.tint=0,this.mTextQuiz.pivot.set(this.mTextQuiz.width/2,this.mTextQuiz.height/2),this.mTextQuiz.position.set(Ft.w/2,260),this.addChild(this.mTextQuiz)}},{key:"activeQuiz",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.mData),t.next=3,this.playSound();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"activeGame",value:function(){for(var t=0;t<this.mBalls.length;t++)this.mBalls[t].activeGame()}},{key:"playSound",value:function(){var t=this;return new Promise((function(e){for(var n=function(e){Kt.delayedCall(e,(function(){t.mBalls[e].soundMotion(),t.mBalls[e].soundPlay(!0)}))},i=0;i<t.mBalls.length;i++)n(i);Kt.delayedCall(2,(function(){t.activeGame(),e()}))}))}},{key:"createBallQuiz",value:function(){this.mBalls=[],this.mCorrect=new uf(this.mData["correct"],!0),this.mWrong=new uf(this.mData["wrong"],!1),this.mBalls=ne([this.mCorrect,this.mWrong]);for(var t=[Ft.w/2-358,Ft.w/2+358],e=0;e<this.mBalls.length;e++)this.mBalls[e].position.set(t[e],630),this.addChild(this.mBalls[e])}},{key:"endMotion",value:function(){this.mWrong.endMotion()}},{key:"next",value:function(){this.parent.next()}},{key:"guideSnd",get:function(){return this.mGuideSnd},set:function(t){this.mGuideSnd&&this.mGuideSnd.pause(),this.mGuideSnd=t}}]),n}(PIXI.Container)),lf=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,i.mCurrentStep=0,i}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.mData),this.removeChild(),t.next=4,this.createQuiz();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createQuiz",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(this.mType2GameScene=[],e=Object.keys(this.mData).length,n=1;n<=e;n++)this.mType2GameScene.push(new cf(this.mData["step".concat(n)]));return this.addChild(this.mType2GameScene[this.mCurrentStep]),t.next=6,this.mType2GameScene[this.mCurrentStep].onInit();case 6:i=de.Handle.getViewerResource("".concat(this.mData["step1"]["sound"])).sound,i.play(),Kt.delayedCall(i.duration+1,Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.mType2GameScene[r.mCurrentStep].activeQuiz();case 2:case"end":return t.stop()}}),t)}))));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"next",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=Object.keys(this.mData).length,this.mCurrentStep+=1,!(this.mCurrentStep>=e)){t.next=9;break}this.parent.parent.nextType(),console.log("currentStep=>".concat(this.mCurrentStep)),console.log("total=>".concat(e)),t.next=17;break;case 9:return console.log("진행중인 스텝=>".concat(this.mCurrentStep)),this.parent.parent.nextStep(),this.removeChildren(),this.addChild(this.mType2GameScene[this.mCurrentStep]),t.next=15,this.mType2GameScene[this.mCurrentStep].onInit();case 15:return t.next=17,this.mType2GameScene[this.mCurrentStep].activeQuiz();case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(tf),hf=function(t){v(n,t);var e=C(n);function n(t){var i;p(this,n),i=e.call(this);var r=Jt(t);return i.mSound="word_".concat(r),i.mOn=de.Handle.getCommonResource("btn_sound_on.png").texture,i.mOff=de.Handle.getCommonResource("btn_sound_normal.png").texture,i.mSoundBtn=new PIXI.Sprite(i.mOn),i.mSoundBtn.anchor.set(.5),i.addChild(i.mSoundBtn),i.on("pointertap",Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("소리재생"),t.next=3,i.onSound();case 3:case"end":return t.stop()}}),t)})))),i}return m(n,[{key:"onSound",value:function(){var t=this;return new Promise((function(e){t.interactive=!1,t.buttonMode=!1,t.mSoundBtn.texture=t.mOn,se(t.mSound,!0),Kt.delayedCall(1.2,(function(){t.interactive=!0,t.buttonMode=!0,t.mSoundBtn.texture=t.mOff,e()}))}))}}]),n}(PIXI.Container),df=function(t){v(n,t);var e=C(n);function n(t,i,r){var o;return p(this,n),o=e.call(this),o.mBattery=new PIXI.Sprite,o.addChild(o.mBattery),3==t?(o.mBattery.texture=de.Handle.getViewerResource("t3_battery02.png").texture,o.createImg(i)):(o.mBattery.texture=de.Handle.getViewerResource("t3_battery01.png").texture,o.createText(i)),o.sortableChildren=!0,o.mBattery.zIndex=3,o.mText&&(o.mText.zIndex=4),o.mImg&&(o.mImg.zIndex=4),o.mBattery.on("pointertap",Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o.mBattery.interactive=!1,i!=r){t.next=6;break}return t.next=4,o.correct();case 4:t.next=8;break;case 6:return t.next=8,o.wrong();case 8:case"end":return t.stop()}}),t)})))),o.mBattery.tint=12369084,o.mBattery.anchor.set(.5),o}return m(n,[{key:"active",value:function(){this.mText&&(this.mText.alpha=1),this.mImg&&(this.mImg.alpha=1),this.mBattery.interactive=!0,this.mBattery.buttonMode=!0,this.mBattery.tint=16777215}},{key:"createText",value:function(t){this.mText=new PIXI.Text(t,{fontSize:58,fontFamily:"TmoneyRoundWindExtraBold",padding:20}),this.mText.pivot.set(this.mText.width/2,this.mText.height/2),this.addChild(this.mText),this.mText.alpha=.5}},{key:"createImg",value:function(t){var e=Jt(t);this.mImg=new PIXI.Sprite(de.Handle.getCommonResource("word_".concat(e,".png")).texture),this.mImg.scale.set(.35),this.mImg.anchor.set(.5),this.addChild(this.mImg),this.mImg.alpha=.5}},{key:"cableMotion",value:function(t){var e=this;return new Promise((function(n){for(var i=[],r=0,o=1;o<=2;o++){var a=new PIXI.Sprite(de.Handle.getViewerResource("t3_cable0".concat(o,".png")).texture);a.zIndex=-1,a.anchor.set(.5),a.x=r,r-=600,e.addChild(a),a.zIndex=2-o,i.push(a)}if(t)Kt.to(i[0],{x:-210,duration:1}),Kt.to(i[1],{x:-380,duration:1}).eventCallback("onComplete",(function(){se("ac7_correct"),e.parent.correct(),n()}));else{Kt.delayedCall(.5,(function(){se("ac7_wrong")}));var s=[-20,20],u=ne([0,1]);Kt.to(i[0],{x:-210,y:s[u[0]],duration:1}),Kt.to(i[1],{x:-380,y:s[u[1]],duration:1}).eventCallback("onComplete",(function(){Kt.delayedCall(.5,(function(){var t,r=Object(Vt["a"])(i);try{for(r.s();!(t=r.n()).done;){var o=t.value;e.removeChild(o)}}catch(a){r.e(a)}finally{r.f()}n()}))}))}}))}},{key:"correct",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("정답"),t.next=3,this.cableMotion(!0);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"wrong",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("오답"),t.next=3,this.cableMotion(!1);case 3:e=null,n=0,this.mText&&(e=this.mText,n=.8),this.mImg&&(e=this.mImg,n=.3),Kt.to(e,{alpha:.5,duration:.5}),Kt.to(e.scale,{x:n,y:n,duration:.25}).repeat(1).yoyo(!0).eventCallback("onComplete",(function(){i.mBattery.tint=12369084,Kt.to(i,{alpha:0,duration:.5}).eventCallback("onComplete",(function(){i.visible=!1}))}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(PIXI.Container),pf=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mQuizData=t,i.mBatteryAry=[],3==i.mQuizData.type?i.createImgBattery():i.createTextBattery(),i}return m(n,[{key:"active",value:function(){var t,e=Object(Vt["a"])(this.mBatteryAry);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.active()}}catch(i){e.e(i)}finally{e.f()}}},{key:"createTextBattery",value:function(){for(var t=this.mQuizData.correct,e=this.mQuizData.wrong,n=ne([t,e[0],e[1]]),i=[Ft.h/2-160,Ft.h/2,Ft.h/2+160],r=0;r<n.length;r++){var o=new df(this.mQuizData.type,n[r],t);o.y=i[r],this.addChild(o),this.mBatteryAry.push(o)}}},{key:"createImgBattery",value:function(){for(var t=this.mQuizData.correct,e=this.mQuizData.wrong,n=ne([t,e[0],e[1]]),i=[Ft.h/2-160,Ft.h/2,Ft.h/2+160],r=0;r<n.length;r++){var o=new df(this.mQuizData.type,n[r],t);o.y=i[r],this.addChild(o),this.mBatteryAry.push(o)}}},{key:"correct",value:function(){this.parent.next()}}]),n}(PIXI.Container),ff=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,console.log(i.mData),i.mImageType=de.Handle.getViewerResource("t3_mirror01.png").texture,i.mCorrect=de.Handle.getViewerResource("t3_mirror02.png").texture,i.mSoundType=de.Handle.getViewerResource("t3_mirror03.png").texture,i.mMirror=new PIXI.Sprite,1==i.mData["type"]?(i.mMirror.texture=i.mImageType,i.createImageType()):(i.mMirror.texture=i.mSoundType,i.createSoundType()),i.mMirror.anchor.set(.5),i.addChild(i.mMirror),i}return m(n,[{key:"correct",value:function(){this.mMirror.texture=this.mCorrect}},{key:"active",value:function(){var t=this;return new Promise((function(e){se("ac3_cardpop"),Kt.delayedCall(1,(function(){t.mImgQuiz&&(t.mImgQuiz.alpha=1,e()),t.mSoundQuiz&&(t.mSoundQuiz.onSound(),Kt.delayedCall(1,(function(){e()})))}))}))}},{key:"createImageType",value:function(){var t=Jt(this.mData.correct);this.mImgQuiz=new PIXI.Sprite,this.mImgQuiz.texture=de.Handle.getCommonResource("word_".concat(t,".png")).texture,this.mImgQuiz.scale.set(.8),this.mImgQuiz.anchor.set(.5),this.mImgQuiz.alpha=.5,this.mMirror.addChild(this.mImgQuiz)}},{key:"createSoundType",value:function(){this.mSoundQuiz=new hf(this.mData.correct),this.mMirror.addChild(this.mSoundQuiz)}}]),n}(PIXI.Container),mf=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,i}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=new PIXI.Sprite(de.Handle.getViewerResource("t3_bg.png").texture),this.addChild(e),this.createGuideText(),this.mMirror=new ff(this.mData),this.mMirror.position.set(Ft.w*(1/4),Ft.h/2),this.addChild(this.mMirror),this.mBattery=new pf(this.mData),this.mBattery.position.set(Ft.w*(3/4),0),this.addChild(this.mBattery),console.log(this.mData["type"]),1==this.mData["type"]&&this.createTextQuizCard(),2==this.mData["type"]&&this.createSoundTextQuiz(),3==this.mData["type"]&&this.createSoundImageQuiz(),this.sortableChildren=!0,this.mMirror.zIndex=2,this.mBattery.zIndex=1;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"activeQuiz",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.mMirror.active();case 2:this.mBattery.active();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createGuideText",value:function(){var t=this;return new Promise((function(e){var n=new PIXI.Text("그림에 알맞은 답을 찾아 선택해봐!",{fontFamily:"TmoneyRoundWindExtraBold",fontSize:34});n.pivot.set(n.width/2,n.height/2),n.position.set(Ft.w/2,40),t.addChild(n),n.interactive=!0,n.buttonMode=!0,n.on("pointertap",(function(){t.mGuideSnd&&(t.mGuideSnd.pause(),t.mGuideSnd=null),t.mGuideSnd=de.Handle.getViewerResource("".concat(t.mData["sound"])).sound,t.mGuideSnd.play()})),e()}))}},{key:"createTextQuizCard",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createSoundTextQuiz",value:function(){}},{key:"createSoundImageQuiz",value:function(){}},{key:"next",value:function(){var t=this;this.mMirror.correct(),Kt.delayedCall(1,(function(){t.parent.next()}))}},{key:"createImgQuizCard",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(PIXI.Container),gf=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,i.mCurrentStep=0,i}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.mData),this.removeChild(),t.next=4,this.createQuiz();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createQuiz",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(this.mType3GameScene=[],e=Object.keys(this.mData).length,n=1;n<=e;n++)this.mType3GameScene.push(new mf(this.mData["step".concat(n)]));return this.addChild(this.mType3GameScene[this.mCurrentStep]),t.next=6,this.mType3GameScene[this.mCurrentStep].onInit();case 6:console.warn("".concat(this.mData["step1"]["sound"])),i=de.Handle.getViewerResource("".concat(this.mData["step1"]["sound"])).sound,i.play(),Kt.delayedCall(i.duration+.5,(function(){r.mType3GameScene[r.mCurrentStep].activeQuiz()}));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"next",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=Object.keys(this.mData).length,this.mCurrentStep+=1,!(this.mCurrentStep>=e)){t.next=9;break}this.parent.parent.nextType(),console.log("currentStep=>".concat(this.mCurrentStep)),console.log("total=>".concat(e)),t.next=17;break;case 9:return this.parent.parent.nextStep(),this.removeChildren(),this.addChild(this.mType3GameScene[this.mCurrentStep]),t.next=15,this.mType3GameScene[this.mCurrentStep].onInit();case 15:return t.next=17,this.mType3GameScene[this.mCurrentStep].activeQuiz();case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(tf),vf=function(t){v(n,t);var e=C(n);function n(t){var i;p(this,n),i=e.call(this);var r=Jt(t);return i.mSound="word_".concat(r),i.mOn=de.Handle.getCommonResource("btn_sound_on.png").texture,i.mOff=de.Handle.getCommonResource("btn_sound_normal.png").texture,i.mSoundBtn=new PIXI.Sprite(i.mOn),i.mSoundBtn.anchor.set(.5),i.addChild(i.mSoundBtn),i.on("pointertap",Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("소리재생"),t.next=3,i.onSound();case 3:case"end":return t.stop()}}),t)})))),i}return m(n,[{key:"onSound",value:function(){var t=this;return new Promise((function(e){t.parent.parent.guideSnd=null,t.interactive=!1,t.buttonMode=!1,t.mSoundBtn.texture=t.mOn,se(t.mSound,!0),Kt.delayedCall(1.2,(function(){t.interactive=!0,t.buttonMode=!0,t.mSoundBtn.texture=t.mOff,e()}))}))}}]),n}(PIXI.Container),yf=function(t){v(n,t);var e=C(n);function n(t){var i;p(this,n),i=e.call(this);var r=Jt(t),o=new PIXI.Graphics;o.beginFill(0,.1),o.drawRoundedRect(0,0,288,232,20),o.endFill(),o.pivot.set(o.width/2,o.height/2),o.position.set(300,220),i.addChild(o);var a=new PIXI.Graphics;a.beginFill(16777215,1),a.drawRoundedRect(0,0,o.width-8,o.height-8,20),a.endFill(),a.position.set(4,4);var s=new PIXI.Sprite(de.Handle.getCommonResource("word_".concat(r,".png")).texture);return s.anchor.set(.5),s.scale.set(.5),s.position.set(o.width/2,o.height/2),o.addChild(a,s),i}return n}(PIXI.Container),_f=function(t){v(n,t);var e=C(n);function n(t,i,r,o){var a;p(this,n),a=e.call(this),a.mString=r,a.mType=t,a.mIndex=i,a.texture=de.Handle.getCommonResource("type".concat(a.mType,"_").concat(a.mIndex,"default.png")).texture;var s="",u=te(r);return 1==i&&(s="1cho_t".concat(t,"_").concat(u)),2==i&&(s="2jung_t".concat(t,"_").concat(u)),3==i&&(s="2jong_t".concat(t,"_").concat(u)),a.mText=new PIXI.Sprite(de.Handle.getCommonResource("".concat(s,".png")).texture),a.mFocus=new PIXI.Sprite,a.mPink=new PIXI.Sprite,a.mDimmed=new PIXI.Sprite,o?a.createSide():a.createQuiz(),a.addChild(a.mDimmed,a.mPink,a.mFocus,a.mText),a}return m(n,[{key:"createQuiz",value:function(){this.mPink.texture=de.Handle.getCommonResource("type".concat(this.mType,"_").concat(this.mIndex,"pink.png")).texture,this.mFocus.texture=de.Handle.getCommonResource("type".concat(this.mType,"_focus").concat(this.mIndex,".png")).texture,this.mDimmed.texture=de.Handle.getCommonResource("type".concat(this.mType,"_").concat(this.mIndex,"deep.png")).texture,this.mFocus.alpha=0,this.mPink.alpha=0,this.mDimmed.alpha=0,this.mText.alpha=0}},{key:"createSide",value:function(){var t=this;this.mPink.texture=de.Handle.getCommonResource("side_type".concat(this.mType,"_pink").concat(this.mIndex,".png")).texture,this.mFocus.texture=de.Handle.getCommonResource("type".concat(this.mType,"_focus").concat(this.mIndex,".png")).texture,this.mDimmed.texture=de.Handle.getCommonResource("side_type".concat(this.mType,"_dim").concat(this.mIndex,".png")).texture,this.mFocus.alpha=0,this.mPink.alpha=0,this.mDimmed.alpha=1,this.mText.alpha=.4,this.on("pointertap",(function(e){t.onClick(e)}))}},{key:"onClick",value:function(t){}},{key:"active",value:function(){this.interactive=!0,this.buttonMode=!0,this.mFocus.alpha=0,this.mPink.alpha=1,this.mDimmed.alpha=0,this.mText.alpha=1}},{key:"focus",value:function(){Kt.to(this.mFocus,{alpha:1,duration:1,ease:Zt["b"].easeNone}).repeat(-1).yoyo(!0),Kt.to(this.mDimmed,{alpha:1,duration:1,ease:Zt["b"].easeNone}).repeat(-1).yoyo(!0).delay(1)}},{key:"complete",value:function(){Kt.killTweensOf(this.mFocus),Kt.killTweensOf(this.mDimmed),this.mFocus.alpha=0,this.mPink.alpha=1,this.mText.alpha=1,this.mDimmed.alpha=0}},{key:"index",get:function(){return this.mIndex}},{key:"text",get:function(){return this.mString}},{key:"type",get:function(){return this.mType}}]),n}(PIXI.Sprite),wf=function(t){v(n,t);var e=C(n);function n(t,i){var r;p(this,n),r=e.call(this),r.mStep=0,r.texture=de.Handle.getCommonResource("box_shadow.png").texture,r.mPhoneme=[];for(var o=0;o<t.length;o++){var a=new _f(i,o+1,t[o]);r.addChild(a),r.mPhoneme.push(a)}return r}return m(n,[{key:"next",value:function(){this.mStep+=1,this.mPhoneme[this.mStep]||console.error("없다 없어 음소가 없다!!!")}},{key:"step",get:function(){return this.mStep}},{key:"phonemes",get:function(){return this.mPhoneme}}]),n}(PIXI.Sprite),bf=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,i.mSyllable=[],i.mQuizAry=[],i.mQuizStep=0,i.mSyllableStep=0,i}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.removeChildren(),this.mSndBtn=new vf(this.mData.correct),this.mSndBtn.position.set(100,220),e=new yf(this.mData.correct),n=new PIXI.Sprite(de.Handle.getViewerResource("t4_equal.png").texture),n.anchor.set(.5),n.position.set(500,220),this.addChild(this.mSndBtn,e,n),this.createSyllableText();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createSyllableText",value:function(){this.mSyllablePlace=new PIXI.Container,this.addChild(this.mSyllablePlace);var t,e=0,n=Object(Vt["a"])(this.mData.correct);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.mSyllable.push(i)}}catch(f){n.e(f)}finally{n.f()}console.log(this.mSyllable),this.mSyllableAry=[];for(var r=0;r<this.mSyllable.length;r++){var o=oe(this.mSyllable[r]),a=re(this.mSyllable[r]);console.log(a);var s=new wf(a,o);this.mSyllablePlace.addChild(s),this.mSyllableAry.push(s),s.x=e,e+=s.width}var u,c=Object(Vt["a"])(this.mSyllableAry);try{for(c.s();!(u=c.n()).done;){var l,h=u.value,d=Object(Vt["a"])(h.phonemes);try{for(d.s();!(l=d.n()).done;){var p=l.value;this.mQuizAry.push(p)}}catch(f){d.e(f)}finally{d.f()}}}catch(f){c.e(f)}finally{c.f()}this.mSyllablePlace.position.set(800,220),this.mSyllablePlace.pivot.set(this.mSyllablePlace.width/2,this.mSyllablePlace.height/2),this.mQuizAry[this.mQuizStep].focus(),console.warn("총 퀴즈"),console.log(this.mQuizAry),console.warn("갯수")}},{key:"onSound",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.mSndBtn.onSound();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"syllableStep",set:function(t){var e=this;this.mQuizAry[this.mQuizStep].complete(),this.mSyllableStep=t,this.mQuizStep+1>=this.mQuizAry.length?Kt.delayedCall(1,(function(){e.parent.next()})):(this.mQuizStep+=1,this.mQuizAry[this.mQuizStep].focus())}},{key:"totalQuiz",get:function(){return this.mQuizAry.length-1}},{key:"currentQuizText",get:function(){return this.mQuizAry[this.mQuizStep].text}},{key:"currentQuizType",get:function(){return this.mQuizAry[this.mQuizStep].type}}]),n}(PIXI.Container),xf=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,i.texture=de.Handle.getViewerResource("t4_bar1.png").texture,i.anchor.set(.5),console.error(i.mData),i.mExamBox=new PIXI.Container,i.addChild(i.mExamBox),i.createExam(),i}return m(n,[{key:"createExam",value:function(){var t=this;this.mExamAry=[];for(var e=function(e){for(var n=oe(t.mData.correct[e]),i=re(t.mData.correct[e]),r=function(e){var r=new _f(n,e+1,i[e],!0);t.mExamAry.push(r),r.onClick=function(e){var i=ce(r,new PIXI.Point(e.data.global.x,e.data.global.y)).a;0!=i&&(t.decideCorrect(n,r.text)?(r.onClick=function(){return null},se("ac7_correct"),r.visible=!1):se("ac7_wrong"))}},o=0;o<i.length;o++)r(o)},n=0;n<this.mData.correct.length;n++)e(n);var i,r=ne(this.mExamAry),o=0,a=Object(Vt["a"])(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.position.set(o,40),s.x+=Ft.position["type".concat(s.type)][s.index-1].x,s.y+=Ft.position["type".concat(s.type)][s.index-1].y,o+=s.width,this.mExamBox.addChild(s)}}catch(u){a.e(u)}finally{a.f()}this.mExamBox.pivot.set(this.mExamBox.width/2,this.mExamBox.height/2)}},{key:"active",value:function(){var t,e=Object(Vt["a"])(this.mExamAry);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.active()}}catch(i){e.e(i)}finally{e.f()}}},{key:"decideCorrect",value:function(t,e){return this.parent.decide(t,e)}}]),n}(PIXI.Sprite),Cf=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,console.log("스텝 데이터"),console.log(i.mData),i}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.mStep=0,this.mTotalStep=0,e=new PIXI.Sprite(de.Handle.getViewerResource("t4_bg.png").texture),this.addChild(e),this.createGuideText(),t.next=7,this.createQuiz();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createQuiz",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.mQuizPlace=new bf(this.mData),this.addChild(this.mQuizPlace),t.next=4,this.mQuizPlace.onInit();case 4:this.mSideBar=new xf(this.mData),this.mSideBar.position.set(Ft.w/2,Ft.h-this.mSideBar.height/2),this.addChild(this.mSideBar);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createGuideText",value:function(){var t=this,e=new PIXI.Text("순서대로 낱말을 완성해봐!",{fontFamily:"TmoneyRoundWindExtraBold",fontSize:34});e.pivot.set(e.width/2,e.height/2),e.position.set(Ft.w/2,40),this.addChild(e),e.interactive=!0,e.buttonMode=!0,e.on("pointertap",(function(){t.mGuideSnd&&t.mGuideSnd.pause(),t.mGuideSnd=de.Handle.getViewerResource("".concat(t.mData["sound"])).sound,t.mGuideSnd.play()}))}},{key:"activeQuiz",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.mQuizPlace.onSound();case 2:this.mSideBar.active();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"decide",value:function(t,e){var n=this.mQuizPlace.currentQuizText,i=this.mQuizPlace.currentQuizType;return e==n&&t==i?(console.error("정답"),this.mQuizPlace.syllableStep+=1,!0):(console.error("오답"),!1)}},{key:"next",value:function(){this.parent.next()}},{key:"guideSnd",set:function(t){this.mGuideSnd&&this.mGuideSnd.pause(),this.mGuideSnd=t}}]),n}(PIXI.Container),Sf=function(t){v(n,t);var e=C(n);function n(t){var i;return p(this,n),i=e.call(this),i.mData=t,i.mCurrentStep=0,i}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("전체데이터"),console.log(this.mData),this.removeChild(),t.next=5,this.createQuiz();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createQuiz",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(this.mType4GameScene=[],e=Object.keys(this.mData).length,n=1;n<=e;n++)this.mType4GameScene.push(new Cf(this.mData["step".concat(n)]));return this.addChild(this.mType4GameScene[this.mCurrentStep]),t.next=6,this.mType4GameScene[this.mCurrentStep].onInit();case 6:i=de.Handle.getViewerResource("".concat(this.mData["step1"]["sound"])).sound,i.play(),Kt.delayedCall(i.duration+1,(function(){r.mType4GameScene[r.mCurrentStep].activeQuiz()}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"next",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=Object.keys(this.mData).length,this.mCurrentStep+=1,!(this.mCurrentStep>=e)){t.next=10;break}this.parent.parent.nextType(),console.log("currentStep=>".concat(this.mCurrentStep)),console.log("total=>".concat(e)),console.log("끝"),t.next=18;break;case 10:return this.parent.parent.nextStep(),this.removeChildren(),this.addChild(this.mType4GameScene[this.mCurrentStep]),t.next=16,this.mType4GameScene[this.mCurrentStep].onInit();case 16:return t.next=18,this.mType4GameScene[this.mCurrentStep].activeQuiz();case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(tf),kf=function(t){v(n,t);var e=C(n);function n(){var t;return p(this,n),t=e.call(this),t.mOffStep=de.Handle.getViewerResource("navi_01.png").texture,t.mCurrentStep=de.Handle.getViewerResource("navi_02.png").texture,t.mOnStep=de.Handle.getViewerResource("navi_03.png").texture,t.texture=t.mOffStep,t}return m(n,[{key:"current",value:function(){this.texture=this.mCurrentStep}},{key:"complete",value:function(){this.texture=this.mOnStep}},{key:"nonComplete",value:function(){this.texture=this.mOffStep}},{key:"blinkFlag",value:function(t){1==t?this.mBlink=Kt.to(this,{alpha:0,duration:.8}).repeat(-1).yoyo(!0):this.mBlink&&(this.mBlink.kill(),this.mBlink=null,Kt.to(this,{alpha:1,duration:.25}))}}]),n}(PIXI.Sprite),Tf=function(t){v(n,t);var e=C(n);function n(){var t;p(this,n),t=e.call(this),t.mStepAry=[],t.texture=de.Handle.getViewerResource("navi_bar.png").texture;for(var i=26,r=0;r<15;r++){var o=new kf;o.anchor.set(.5),o.position.set(i,t.height/2),i+=38,t.addChild(o),t.mStepAry.push(o)}return t.mStepAry[0].current(),t}return m(n,[{key:"next",value:function(t){for(var e=0;e<this.mStepAry.length;e++)e<t&&this.mStepAry[e].complete(),e==t&&this.mStepAry[e].current()}}]),n}(PIXI.Sprite),Rf=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this,"total")}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,o,a,s,c,l,h,d,p,f,m,g,v;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye.Handle.showLoadingScreen();case 2:return Ft.studyDay=16,this.mCurrentStep=0,this.mQuizData={},t.next=7,this.getData();case 7:for(console.log(this.mQuizData),e=[],n=1;n<=3;n++)for(i=this.mQuizData.type4["step".concat(n)].correct,r=0;r<i.length;r++){o=oe(i[r]),a=re(i[r]),s="",c="",l=Object(Vt["a"])(a);try{for(l.s();!(h=l.n()).done;){d=h.value,s=ee(d),c=te(d),p="".concat(s,"t").concat(o,"_").concat(c,".png"),console.log(d,o,c),f=!1,m=Object(Vt["a"])(e);try{for(m.s();!(g=m.n()).done;)v=g.value,v==p&&(f=!0)}catch(y){m.e(y)}finally{m.f()}0==f&&e.push(p)}}catch(y){l.e(y)}finally{l.f()}}return t.next=12,de.Handle.loadCommonResource({images:e});case 12:return t.next=14,de.Handle.loadCommonResource({images:Ft.partnerNtotal});case 14:return t.next=16,this.loadViewerResource($p);case 16:return t.next=18,this.loadCommonResource(u["day".concat(Ft.studyDay)]);case 18:return this.mCurrentType=0,t.next=21,ye.Handle.closeLoadingScreen();case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getData",value:function(){var t=this;return new Promise((function(e){var n="".concat(Ft.restAPI,"data/total_data.json"),i=new XMLHttpRequest;i.open("GET",n),i.responseType="json",i.send(),i.onloadend=function(){t.mQuizData=i.response["data"]["".concat(Ft.studyDay)],e()}}))}},{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new Ve,this.addChild(e),t.next=4,e.intro();case 4:e=null,this.removeChildren(),this.mProgressBar=new Tf,this.mProgressBar.position.set(Ft.w/2-this.mProgressBar.width/2,Ft.h-(this.mProgressBar.height+30)),this.addChild(this.mProgressBar),this.mSceneRoot=new PIXI.Container,this.addChild(this.mSceneRoot),this.sortableChildren=!0,this.mSceneRoot.zIndex=0,this.mProgressBar.zIndex=1,this.createQuiz();case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createQuiz",value:function(){var t=new af(this.mQuizData["type1"]),e=new lf(this.mQuizData["type2"]),n=new gf(this.mQuizData["type3"]),i=new Sf(this.mQuizData["type4"]);this.mQuizArray=[t,e,n,i],this.mSceneRoot.addChild(this.mQuizArray[this.mCurrentType]),this.mQuizArray[this.mCurrentType].onInit()}},{key:"nextType",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.mCurrentType+=1,this.nextStep(),this.mQuizArray[this.mCurrentType]){t.next=6;break}return console.log("게임 끝"),location.href="https://www.imestudy.co.kr:443",t.abrupt("return");case 6:this.mSceneRoot.removeChildren(),this.mSceneRoot.addChild(this.mQuizArray[this.mCurrentType]),this.mQuizArray[this.mCurrentType].onInit();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"nextStep",value:function(){this.mCurrentStep+=1,this.mCurrentStep&&this.mProgressBar.next(this.mCurrentStep)}},{key:"currentStep",get:function(){return this.mCurrentStep},set:function(t){this.mCurrentStep=t}}]),n}(Se),Mf={images:["day1_muck.png","day1_muck_intro.png","day1_big_1.png","day1_big_2.png","day1_big_3.png","day1_big_4.png","day1_big_5.png","day1_big_6.png","day1_big_7.png","day1_big_8.png","day1_big_9.png","day1_small_1.png","day1_small_2.png","day1_small_3.png","day1_small_4.png","day1_small_5.png","day1_small_6.png","day1_small_7.png","day1_small_8.png","day1_small_9.png","day1_line_shadow_1.png","day1_line_shadow_2.png","day1_line_shadow_3.png","day1_line_shadow_4.png","day1_line_shadow_5.png","day1_line_shadow_6.png","day1_line_shadow_7.png","day1_line_shadow_8.png","day1_line_shadow_9.png"],sounds:[],json:[],videos:[],spine:[]},Af={images:[],sounds:[],json:[],videos:[],spine:[]},If=["bg_1.png","bg_2.png","button.png","Puzzle_board_line.png","title_text.png","Puzzle_board.png","text.png"],Pf=[],Ef=[],Of=[],Df={images:If,sounds:Pf,json:[],videos:Ef,spine:Of},Vf=250,Bf=230,Ff=Vf/2+20,Nf=Bf/2+20,Lf=[{x:Ff,y:Nf},{x:Ff+Vf,y:Nf},{x:Ff+2*Vf,y:Nf},{x:Ff,y:Nf+Bf},{x:Ff+Vf,y:Nf+Bf},{x:Ff+2*Vf,y:Nf+Bf},{x:Ff,y:Nf+2*Bf},{x:Ff+Vf,y:Nf+2*Bf},{x:Ff+2*Vf,y:Nf+2*Bf}],jf=[{state:!1},{state:!1},{state:!1},{state:!1},{state:!1},{state:!1},{state:!1},{state:!1},{state:!1}],Uf=function(t){v(n,t);var e=C(n);function n(t,i,r){var o;p(this,n),o=e.call(this);var a=t,s=0;t>=3&&(a=t-3,s=1),t>=6&&(a=t-6,s=2);var u=new PIXI.Texture(i,new PIXI.Rectangle(250*a,230*s,250,230));o.texture=u,o.anchor.set(.5),o.mIndex=t;var c=new PIXI.Graphics;return c.lineStyle(6,0,1),c.drawRect(0,0,o.width,o.height),c.endFill(),c.pivot.set(c.width/2,c.height/2),o.addChild(c),r&&(o.mDragFlag=!1,o.registEvent()),o}return m(n,[{key:"registEvent",value:function(){var t=this;this.interactive=!0,this.buttonMode=!0,this.on("pointerdown",(function(){t.mDragFlag=!0,t.onPointerDown()})),this.on("pointermove",(function(e){0!=t.mDragFlag&&t.onPointerMove(e)})),this.on("pointerup",(function(e){t.mDragFlag&&t.onPointerUp(e),t.mDragFlag=!1})),this.on("pointerout",(function(e){t.mDragFlag&&t.onPointerUp(e),t.mDragFlag=!1})),this.on("pointerupoutside",(function(e){t.mDragFlag&&t.onPointerUp(e),t.mDragFlag=!1}))}},{key:"onPointerDown",value:function(){}},{key:"onPointerMove",value:function(t){}},{key:"onPointerUp",value:function(t){}},{key:"index",get:function(){return this.mIndex}}]),n}(PIXI.Sprite),Xf=function(t){v(n,t);var e=C(n);function n(){var t;p(this,n),t=e.call(this);var i=new PIXI.Sprite(de.Handle.getViewerResource("bg_1.png").texture);return t.addChild(i),t}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=new Ae(de.Handle.getViewerResource("button.png").texture),e.position.set(1220,80),e.interactive=!0,this.addChild(e),e.on("pointertap",(function(){Nt["a"].to(e.scale,{x:1.2,y:1.2,duration:.5}).yoyo(!0).repeat(1).eventCallback("onComplete",(function(){location.href="https://www.imestudy.co.kr:443"}))})),this.createText(),this.createMuck();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createText",value:function(){var t=new PIXI.Sprite(de.Handle.getViewerResource("title_text.png").texture);t.position.set(Ft.w/2-t.width/2,40);var e=new PIXI.Text("하루한글 시작",{fill:16777215,fontSize:35,fontFamily:"TmoneyRoundWindExtraBold"});e.pivot.set(e.width/2,e.height/2),e.position.set(277-e.width/2-32,t.height/2);var n=new PIXI.Text("만나서 반가워! 우리 함께 한글 공부를 해보자.",{fill:16758290,fontSize:31,fontFamily:"TmoneyRoundWindRegular"});n.pivot.set(n.width/2,n.height/2),n.position.set(599,t.height/2),t.addChild(e,n),this.addChild(t)}},{key:"createMuck",value:function(){var t=this,e=new Ae(de.Handle.getProductResource("day".concat(Ft.studyDay,"_muck.png")).texture);e.position.set(Ft.w/2,0),Nt["a"].to(e,{y:432,duration:.5,ease:"bounce"}).eventCallback("onComplete",Object(d["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.texture=de.Handle.getProductResource("day".concat(Ft.studyDay,"_muck_intro.png")).texture,n.next=3,t.speakMuck();case 3:case"end":return n.stop()}}),n)})))),this.addChild(e)}},{key:"speakMuck",value:function(){var t=this;return new Promise((function(e){var n=new PIXI.Sprite(de.Handle.getViewerResource("text.png").texture);n.anchor.set(.5),n.position.set(980,240),console.log("%c 나중에 텍스트 받아서 처리","border:2px red solid;");var i=new PIXI.Text("안녕?",{fill:43756,fontFamily:"TmoneyRoundWindExtraBold",fontSize:40});i.pivot.set(i.width/2,i.height/2),i.position.set(0,-10),n.addChild(i),t.addChild(n),n.scale.set(0),Nt["a"].to(n.scale,{x:1,y:1,duration:.5,ease:"back"}).eventCallback("onComplete",(function(){e()}))}))}}]),n}(PIXI.Container),zf=function(t){v(n,t);var e=C(n);function n(){return p(this,n),e.call(this,"puzzle")}return m(n,[{key:"onInit",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return ye.Handle.modalRoot.visible=!1,t.next=3,ye.Handle.showLoadingScreen();case 3:return console.log(this.gamename),this.mPieceAry=[],t.next=7,this.loadViewerResource(Df);case 7:return t.next=9,this.loadProductResource(c["day".concat(Ft.studyDay)]);case 9:return t.next=11,ye.Handle.closeLoadingScreen();case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onStart",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.mBackUpPos=[],e=new PIXI.Sprite(de.Handle.getViewerResource("bg_2.png").texture),this.addChild(e),this.mIntroScene=new Xf,this.addChild(this.mIntroScene),t.next=7,this.mIntroScene.onInit();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createPuzzlePlace",value:function(){for(var t=0;t<9;t++){var e=new Uf(t,de.Handle.getProductResource("day".concat(Ft.studyDay,"_muck.png")).texture.baseTexture);this.addChild(e),e.position.set(Lf[t].x,Lf[t].y),Nt["a"].to(e,{alpha:.1,duration:.5})}}},{key:"createPiece",value:function(){for(var t=this,e=function(e){var n=new Uf(e,de.Handle.getProductResource("day".concat(Ft.studyDay,"_muck.png")).texture.baseTexture,!0);t.addChild(n),t.mPieceAry.push(n),n.position.set(900,Ft.h/2-100);var i=100*Math.floor(3*Math.random()),r=100*Math.floor(3*Math.random());Nt["a"].to(n,{x:n.x+i,y:n.y+r,duration:.5}),t.sortableChildren=!0,n.zIndex=9-e,n.onPointerDown=function(){var e,i=Object(Vt["a"])(t.mPieceAry);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.zIndex=1}}catch(o){i.e(o)}finally{i.f()}n.zIndex=2,t.mBackUpPos=[n.x,n.y]},n.onPointerMove=function(e){n.position.set(e.data.global.x,e.data.global.y)[(n.x,n.y)],t.check(n)},n.onPointerUp=function(e){(!e||e.data.global.x<800)&&Nt["a"].to(n,{x:t.mBackUpPos[0],y:t.mBackUpPos[1],duration:.2,ease:"back"})}},n=0;n<9;n++)e(n)}},{key:"check",value:function(t){var e=this,n=Math.abs(Lf[t.index].x-t.x),i=Math.abs(Lf[t.index].y-t.y),r=Math.pow(n,2)+Math.pow(i,2);r<Math.pow(250,2)&&(t.onPointerUp(),t.onPointerDown=function(){e.disableMotion(t)},t.onPointerMove=function(){return null},t.onPointerUp=function(){return null},jf[t.index].state=!0,Nt["a"].to(t,{x:Lf[t.index].x,y:Lf[t.index].y,duration:.2,ease:"back"}).eventCallback("onComplete",(function(){e.endGame()})))}},{key:"endGame",value:function(){var t,e=Object(Vt["a"])(jf);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(0==n.state)return}}catch(o){e.e(o)}finally{e.f()}console.log("게임끝");var i=new Lt(Ft.w,Ft.h);i.alpha=0,i.zIndex=20,this.addChild(i),Nt["a"].to(i,{alpha:1,duration:.5});var r=new PIXI.Text("돌아가기",{fontSize:100,fill:16777215});r.pivot.set(r.width/2,r.height/2),r.position.set(Ft.w/2,Ft.h/2),i.addChild(r),r.interactive=!0,r.on("pointertap",(function(){window.location.reload()}))}},{key:"disableMotion",value:function(t){this.mDisableMotion&&(this.mDisableMotion.kill(),t.angle=0),this.mDisableMotion=Nt["a"].timeline({yoyo:!0}),this.mDisableMotion.to(t,{angle:-15,duration:.1}),this.mDisableMotion.to(t,{angle:15,duration:.1}),this.mDisableMotion.to(t,{angle:0,duration:.1})}}]),n}(Se),Gf=function(t){v(n,t);var e=C(n);function n(t,i){var r;return p(this,n),r=e.call(this,t),console.log("AramApp Created"),window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),r.addScene(new ke),r.addScene(new Be),r.addScene(new pn),r.addScene(new kn),r.addScene(new zn),r.addScene(new We),r.addScene(new Gp),r.addScene(new Rf),r.addScene(new zf),r.startApp({},i),r}return m(n,[{key:"_fontLoading",value:function(){return new Promise((function(t){qp.a.load({custom:{families:["BareunBatangOTFM","NanumBarunGothic","TmoneyRoundWindExtraBold","TmoneyRoundWindRegular"],urls:["".concat(Ft.restAPI,"fonts/fonts.css")]},timeout:2e3,active:function(){console.log(" font loaded"),t()},fontloading:function(t){console.log("fontLoading",t)}})}))}},{key:"onStartApp",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.showLoadingScreen();case 2:return this.videoAllStop(),Dt.stopAll(),t.next=6,de.Handle.loadCommonResource(Ce);case 6:return t.next=8,this._fontLoading();case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onCloseApp",value:function(){}}]),n}(ye),Wf=function(t){v(n,t);var e=C(n);function n(){var t;return p(this,n),t=e.apply(this,arguments),t.screenFlag=!0,t}return m(n,[{key:"created",value:function(){}},{key:"beforeDestroy",value:function(){console.log("Destroy"),window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),window["currentBGM"]&&(window["currentBGM"].pause(),window["currentBGM"]=null),Nt["a"].globalTimeline.clear(),Dt.stopAll()}},{key:"reclacScreen",value:function(){var t=window.innerWidth,e=window.innerHeight;t>1.777*e?document.body.getElementsByTagName("canvas")[0].setAttribute("style","width: calc(1.6 * ".concat(e,"px ); height:100%;")):document.body.getElementsByTagName("canvas")[0].setAttribute("style","width:100%;height:calc( ".concat(t,"px / 1.6 )"))}},{key:"_goFullScreen",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.screenFlag=!this.screenFlag,t.prev=1,t.next=4,document.documentElement.requestFullscreen({navigationUI:"hide"});case 4:screen.orientation.lock("landscape-primary"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),alert(t.t0);case 10:window.addEventListener("resize",(function(){e.reclacScreen()})),this.reclacScreen();case 12:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"mounted",value:function(){var t=this;this.screenFlag=!he.Platform.isIOS();var e=new Gf(this.$refs.stage,this.name);e.onCloseApp=function(){Dt.removeAll(),Nt["a"].globalTimeline.clear(),window["currentVideo"]&&(window["currentVideo"].pause(),window["currentVideo"]=null),t.$router.replace("/hangul")}}}]),n}(k["a"]);S([Y({default:""})],Wf.prototype,"name",void 0),Wf=S([W({components:{}})],Wf);var qf=Wf,Hf=qf,Yf=(n("d964"),n("2877")),Qf=Object(Yf["a"])(Hf,l,h,!1,null,"bb9e893e",null);e["default"]=Qf.exports},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");var i=n("06c5");function r(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Object(i["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n["return"]||n["return"]()}finally{if(u)throw a}}}}},bb2f:function(t,e,n){var i=n("d039");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c975:function(t,e,n){"use strict";var i=n("23e7"),r=n("4d64").indexOf,o=n("a640"),a=n("ae40"),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(t){return u?s.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},cffa:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("a5cf"),r=n("9ce6"),o=i["y"].registerPlugin(r["a"])||i["y"];o.core.Tween},d28b:function(t,e,n){var i=n("746f");i("iterator")},d4f8:function(t,e){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},d784:function(t,e,n){"use strict";n("ac1f");var i=n("6eeb"),r=n("d039"),o=n("b622"),a=n("9263"),s=n("9112"),u=o("species"),c=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),h=o("replace"),d=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),p=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var f=o(t),m=!r((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),g=m&&!r((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return e=!0,null},n[f](""),!e}));if(!m||!g||"replace"===t&&(!c||!l||d)||"split"===t&&!p){var v=/./[f],y=n(f,""[t],(function(t,e,n,i,r){return e.exec===a?m&&!r?{done:!0,value:v.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),_=y[0],w=y[1];i(String.prototype,t,_),i(RegExp.prototype,f,2==e?function(t,e){return w.call(t,this,e)}:function(t){return w.call(t,this)})}h&&s(RegExp.prototype[f],"sham",!0)}},d964:function(t,e,n){"use strict";n("85a6")},ddb0:function(t,e,n){var i=n("da84"),r=n("fdbc"),o=n("e260"),a=n("9112"),s=n("b622"),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var h in r){var d=i[h],p=d&&d.prototype;if(p){if(p[u]!==l)try{a(p,u,l)}catch(m){p[u]=l}if(p[c]||a(p,c,h),r[h])for(var f in o)if(p[f]!==o[f])try{a(p,f,o[f])}catch(m){p[f]=o[f]}}}},e01a:function(t,e,n){"use strict";var i=n("23e7"),r=n("83ab"),o=n("da84"),a=n("5135"),s=n("861d"),u=n("9bf2").f,c=n("e893"),l=o.Symbol;if(r&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new l(t):void 0===t?l():l(t);return""===t&&(h[e]=!0),e};c(d,l);var p=d.prototype=l.prototype;p.constructor=d;var f=p.toString,m="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;u(p,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=f.call(t);if(a(h,t))return"";var n=m?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:d})}},f183:function(t,e,n){var i=n("d012"),r=n("861d"),o=n("5135"),a=n("9bf2").f,s=n("90e3"),u=n("bb2f"),c=s("meta"),l=0,h=Object.isExtensible||function(){return!0},d=function(t){a(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},p=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,c)){if(!h(t))return"F";if(!e)return"E";d(t)}return t[c].objectID},f=function(t,e){if(!o(t,c)){if(!h(t))return!0;if(!e)return!1;d(t)}return t[c].weakData},m=function(t){return u&&g.REQUIRED&&h(t)&&!o(t,c)&&d(t),t},g=t.exports={REQUIRED:!1,fastKey:p,getWeakData:f,onFreeze:m};i[c]=!0},f2d0:function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},fb6a:function(t,e,n){"use strict";var i=n("23e7"),r=n("861d"),o=n("e8b5"),a=n("23cb"),s=n("50c4"),u=n("fc6a"),c=n("8418"),l=n("b622"),h=n("1dde"),d=n("ae40"),p=h("slice"),f=d("slice",{ACCESSORS:!0,0:0,1:2}),m=l("species"),g=[].slice,v=Math.max;i({target:"Array",proto:!0,forced:!p||!f},{slice:function(t,e){var n,i,l,h=u(this),d=s(h.length),p=a(t,d),f=a(void 0===e?d:e,d);if(o(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?r(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(h,p,f);for(i=new(void 0===n?Array:n)(v(f-p,0)),l=0;p<f;p++,l++)p in h&&c(i,l,h[p]);return i.length=l,i}})},fd32:function(t,e,n){function i(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)if(n.push(a.value),e&&n.length===e)break}catch(u){r=!0,o=u}finally{try{i||null==s["return"]||s["return"]()}finally{if(r)throw o}}return n}}n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0"),t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0}}]);
//# sourceMappingURL=chunk-39af1494.js.map